(self.webpackChunkmomo_game=self.webpackChunkmomo_game||[]).push([[228],{7228:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return os}});e(808),e(9018);var i=e(7313),r=e(2135),o=e(8467),a=e(5422),s=e(4165),l=e(5861),c=e(5671),u=e(3144),h=e(4963),d=e(2749),p=e(8197),f=function(){function n(){(0,c.Z)(this,n),this.musicVolume=1,this.sfxVolume=1}return(0,u.Z)(n,[{key:"enableMusic",value:function(n){this.musicVolume=n?1:0;var t=h.eq.find(p.gH.BGMusic);t&&(t.volume=this.musicVolume),n&&this.playBgMusic()}},{key:"enableSfx",value:function(n){this.sfxVolume=n?1:0}},{key:"load",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!h.eq.exists(t)){n.next=2;break}return n.abrupt("return");case 2:return e=p.dN.MainGame.cdnUrl+t+".mp3",n.next=5,d.P.cacheFile(e);case 5:e=n.sent,h.eq.add(t,e);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},{key:"play",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i=arguments;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>1&&void 0!==i[1]&&i[1],h.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:h.eq.play(t,{loop:e,volume:this.sfxVolume});case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"pauseBgMusic",value:function(){h.eq.exists(p.gH.BGMusic)&&h.eq.pause(p.gH.BGMusic)}},{key:"resumeBgMusic",value:function(){this.playBgMusic()}},{key:"playBgMusic",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h.eq.exists(p.gH.BGMusic)){n.next=6;break}return n.next=3,this.load(p.gH.BGMusic);case 3:h.eq.play(p.gH.BGMusic,{loop:!0,volume:this.musicVolume}),n.next=12;break;case 6:if(!(t=h.eq.find(p.gH.BGMusic)).isPlaying){n.next=10;break}return t.volume=this.musicVolume,n.abrupt("return");case 10:t.paused?t.resume():t.play(),t.volume=this.musicVolume;case 12:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),n}(),m=new f,g=e(3303),x=e(168),v=function(){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.r.emit(a.B.Navigate,n,t)}},y=e(5554),b=y.I0,w=y.v9,Z=e(244),k=e(7758),P=Math.min(2,window.devicePixelRatio||1),j=750,C=1334,S=function(){function n(t){(0,c.Z)(this,n),this.app=void 0,this.options=void 0,this.view=void 0,this.stage=void 0,this.onUpdate=void 0,this.options=t;var e=this.options,i=(e.minFPS,e.maxFPS,e.trasparent),r=void 0===i?1:i,o=e.backgroundColor,a=void 0===o?0:o;this.app=new k.Application({backgroundAlpha:r,backgroundColor:a,width:j,height:C,resolution:P,autoStart:!1}),globalThis.__PIXI_APP__=this.app,this.view=this.app.view,this.view.style.width="100%",this.view.style.height="100%",this.stage=this.app.stage,this.app.ticker.remove(this.app.render,this.app),this.app.ticker.add(this.update,this)}return(0,u.Z)(n,[{key:"init",value:function(n){if(n){n.innerHTML="",this.app.resizeTo=n,this.app.resize();var t=this.options,e=t.alignCenter,i=t.fitWidth,r=t.fitHeight,o=C/j,a=j/C,s=this.app.renderer.width,l=this.app.renderer.height,c=l/C,u=s/j;if(i===r===!0||(i&&(c=s*o/C),r&&(u=l*a/j)),this.app.stage.scale.set(u/P,c/P),e){var h=(s-j*u)/2,d=(l-C*c)/2;this.app.stage.position.set(h/P,d/P)}}}},{key:"setParent",value:function(n){var t;n.innerHTML="",n.appendChild(null===(t=this.app)||void 0===t?void 0:t.view)}},{key:"update",value:function(n){var t;this.app.render(),null===(t=this.onUpdate)||void 0===t||t.call(this,this.app.ticker.elapsedMS/1e3)}},{key:"pause",value:function(){this.app.stop()}},{key:"resume",value:function(){this.app.start()}},{key:"destroy",value:function(){this.app.stop(),this.app.stage.destroy(!0),this.app.destroy(!0)}}]),n}(),M=e(136),T=e(7277),B=e(7762),_=e(3589),I=e(8259),A=e(5869),N=e(8683),E=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).meshes=[],n}return(0,u.Z)(e,[{key:"update",value:function(n){this.meshes.forEach((function(t){t.visible&&(t.shader.uniforms.time+=3*n)}))}},{key:"setRayPoints",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1];this.meshes.length<n.length-1;)this.addMesh();this.meshes.forEach((function(e,i){if(e.visible=i<n.length-1,i<n.length-1){var r=n[i],o=n[i+1],a=o.x-r.x,s=o.y-r.y,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));e.position.set(r.x,r.y),e.rotation=Math.atan2(s,a),e.scale.set(l,100),e.shader.uniforms.ratioxy=l/100,e.shader.uniforms.mainColor=t,e.shader.uniforms.startRatio=0==i?L.startRatio:1,e.shader.uniforms.startOffset=0==i?L.startOffset:0,e.shader.uniforms.endRatio=i>=n.length-2?L.endRatio:1,e.shader.uniforms.endOffset=i>=n.length-2?L.endOffset:0}}))}},{key:"addMesh",value:function(){var n=(new k.Geometry).addAttribute("aVertexPosition",[0,-1,1,-1,1,1,0,1],2).addAttribute("aUvs",[0,0,1,0,1,1,0,1],2).addIndex([0,1,2,0,2,3]),t=k.Shader.from(Y,D,(0,N.Z)({},L)),e=new k.Mesh(n,t);return this.meshes.push(e),this.addChild(e),e}}]),e}(k.Container),O=new E,L={time:0,ratioxy:1,mainColor:[1,0,0],startRatio:2.5,startOffset:1.5,endRatio:.05,endOffset:.5,noiseSampler:k.Texture.from("images/smooth-noise-3.jpg")},Y="\n    precision mediump float;\n\n    attribute vec2 aVertexPosition;\n    attribute vec2 aUvs;\n\n    uniform mat3 translationMatrix;\n    uniform mat3 projectionMatrix;\n\n    varying vec2 vUvs;\n\n    void main() {\n\n        vUvs = aUvs;\n        gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    }\n",D="\n    precision mediump float;\n    varying vec2 vUvs;\n    uniform float time;\n    uniform float ratioxy;\n    uniform vec3 mainColor;\n    uniform float startRatio;\n    uniform float startOffset;\n    uniform float endRatio;\n    uniform float endOffset;\n    uniform sampler2D noiseSampler;\n\n    vec4 getColor(vec2 uv, float offsetYRatio, float waveLengthRatio, float waveSpeed, float waveOffset, float width, float subWidth, float subStrength, float samplerY){\n        float startOffset_ = startOffset/ratioxy;\n        float endOffset_ = endOffset/ratioxy;\n\n        float uvx = (uv.x + 1.)/2.; //map uvx 0. -> 1.\n        float widthRatio = 1.;\n        widthRatio = max(widthRatio, (1. - startRatio)/startOffset_*uvx + startRatio);\n        widthRatio = min(widthRatio, (endRatio - 1.)/endOffset_*uvx + endRatio - (endRatio - 1.)/endOffset_);\n\n        float subFadeOutOffset = 1./ratioxy;\n        float fadeRatio = pow(min(1. - abs(uv.x), subFadeOutOffset)/subFadeOutOffset, .5);\n\n        float offsetY = (texture2D(noiseSampler, vec2(mod((vUvs.x*ratioxy/waveLengthRatio - (time + floor(time*2.))*waveSpeed + waveOffset)*1., 1.), samplerY)).r - 0.5)*2.*offsetYRatio;\n        float y = uv.y + offsetY*widthRatio;\n        float main = step(1. - width*widthRatio, 1. - abs(y));\n        // main *= fadeRatio;\n        float sub = pow(max(1. - abs(y) - (1. - subWidth), 0.)*subStrength, 2.)*widthRatio;\n        sub *= fadeRatio;\n\n        float mixValue = .25;\n        float r = max(mix(main, sub*mainColor.r, mixValue), sub*mainColor.r);\n        float g = max(mix(main, sub*mainColor.g, mixValue), sub*mainColor.g);\n        float b = max(mix(main, sub*mainColor.b, mixValue), sub*mainColor.b);\n        float a = max(main, sub);\n        return vec4(r, g, b, a);\n    }\n\n    void main()\n    {\n        //Offset uv so that center is 0,0 and edges are -1,1\n        vec2 uv = (vUvs-vec2(0.5))*2.0;\n\n        vec4 color1 = getColor(uv, 0.03, 20., 1., 0., 0.025 , 0.5, 2., .5);\n        vec4 color2 = getColor(uv, 0.1, 7., .17, 1., 0.01, 0.3, 3., .3);\n        vec4 color3 = getColor(uv, 0.12, 8., .2, 4., 0.01, 0.3, 3., .7);\n\n        float r = max(max(color1.r, color2.r), color3.r);\n        float g = max(max(color1.g, color2.g), color3.g);\n        float b = max(max(color1.b, color2.b), color3.b);\n        float a = max(max(color1.a, color2.a), color3.a);\n        vec4 outColor = vec4(r, g, b, a);\n        gl_FragColor = outColor;\n    }\n",R=e(918),U=11,z=68,F=310,H=Math.cos(30/180*Math.PI),V=306*H,G=z*H,W=G*H,q=new k.TextStyle({fontFamily:"iCielUniSans",fontSize:31,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),X=new k.TextStyle({fontFamily:"iCielUniSans",fontSize:60,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),Q={hover:k.Texture.from("images/hover-ring.png"),ring:k.Texture.from("images/Ring.png"),colors:[null,k.Texture.from("images/red.png"),k.Texture.from("images/blue.png"),k.Texture.from("images/green.png"),null,k.Texture.from("images/yellow.png"),null,null],types:[null,k.Texture.from("images/yellow.png"),null,null,k.Texture.from("images/item-bubble.png"),k.Texture.from("images/stone-bubble.png"),k.Texture.from("images/explode-bubble.png"),k.Texture.from("images/white-bubble.png")],itemColors:[null,k.Texture.from("images/red-item-bubble.png"),k.Texture.from("images/blue-item-bubble.png"),k.Texture.from("images/green-item-bubble.png"),null,k.Texture.from("images/yellow-item-bubble.png"),null,null],colorPaths:[null,"images/red.png","images/blue.png","images/green.png",null,"images/yellow.png"],boomType:k.Texture.from("images/special.png"),lineType:k.Texture.from("images/special.png"),boom:k.Texture.from("images/boom.png"),boom_empty:k.Texture.from("images/boom_empty.png"),boom_holder:k.Texture.from("images/boom_holder.png"),headline:k.Texture.from("images/headline.png"),header:k.Texture.from("images/header.png"),star_particle:k.Texture.from("images/star_particle.png"),blaze_particle:k.Texture.from("images/blaze_particle.png"),dot_particle:k.Texture.from("images/dot_particle.png"),background:k.Texture.from("images/background.png"),background_1:k.Texture.from("images/background_deco_1.png"),rayColor:[[1,1,1],[252/255,72/255,61/255],[67/255,144/255,220/255],[32/255,237/255,144/255],[0,0,0],[253/255,181/255,44/255]]},J=phoenix.melody.MelodyConfig.create();!function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,i,r;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e(5301));case 2:return t=n.sent,n.next=5,t.arrayBuffer();case 5:return i=n.sent,r=phoenix.melody.MelodyConfig.decode(new Uint8Array(i)),Object.assign(J,r),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()();var K=function(n){var t=R.lW.from(n,"base64");return phoenix.melody.MelodyLevelConfig.decode(t)},$=function(n,t){var e=phoenix.melody.MelodyLevelConfig.create();e.columns=U,e.rows=n.length/U,e.id=1;var i,r=(0,B.Z)(n);try{for(r.s();!(i=r.n()).done;){var o=i.value,a=phoenix.melody.MelodyBall.create(),s=o%10,l=Math.floor(o/10);a.color=s,a.type=l,e.map.push(a)}}catch(x){r.e(x)}finally{r.f()}var c,u=(0,B.Z)(t);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=phoenix.melody.MelodyBall.create(),p=h%10,f=Math.floor(h/10);d.color=p,d.type=f,e.bullets.push(d)}}catch(x){u.e(x)}finally{u.f()}e.star1Score=1,e.star2Score=2,e.star3Score=3,e.targets.push(function(n){var t=phoenix.melody.MelodyLevelTarget.create();t.type=phoenix.melody.MELODY_LEVEL_TARGET_TYPE.MELODY_LEVEL_TARGET_ANY_BALL;var e,i=0,r=(0,B.Z)(n);try{for(r.s();!(e=r.n()).done;){e.value>0&&i++}}catch(x){r.e(x)}finally{r.f()}return console.log(i),t.quantity=i,t}(n));var m=phoenix.melody.MelodyLevelConfig.encode(e).finish(),g=R.lW.from(m).toString("base64");return console.log(g),g};var nn,tn=K("CAEoATACOANAAUgLUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAYgQIARAA"),en=function(){function n(t,e){(0,c.Z)(this,n),this.x=0,this.y=0,this.set(t,e)}return(0,u.Z)(n,[{key:"set",value:function(n,t){return this.x=n,this.y=t,this}},{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copy",value:function(n){this.set(n.x,n.y)}},{key:"subtract",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"multiply",value:function(n){return this.x*=n,this.y*=n,this}},{key:"normalize",value:function(){var n=this.length();return this.x/=n,this.y/=n,this}},{key:"length",value:function(){return Math.sqrt(this.lengthSqr())}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}}],[{key:"angle",value:function(n,t){var e=n.x*n.x+n.y*n.y,i=t.x*t.x+t.y*t.y;if(0===e||0===i)return 0;var r=(n.x*t.x+n.y*t.y)/Math.sqrt(e*i);return r=Math.max(Math.min(r,-1),1),Math.acos(r)}},{key:"fromPIXI",value:function(t){return new n(t.x,t.y)}}]),n}(),rn=function(){function n(t,e){(0,c.Z)(this,n),this.sprite=null,this.hover=null,this.color=0,this.type=0,this.isOrigin=!1,this.isMarked=!1,this.neighbors=[null,null,null,null,null,null];var i=this.sprite=new k.Sprite;i.width=z,i.height=z,i.anchor.set(.5),this.setPosition(t,e)}return(0,u.Z)(n,[{key:"setPosition",value:function(n,t){n=(1+n-.5*(1-t%2))*z,t=(t*H+.5)*z,this.sprite.x=n,this.sprite.y=t}},{key:"isEmpty",get:function(){return 0===this.color}},{key:"setColor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.color=n,this.sprite.texture=Q.colors[n],this.isOrigin=t}},{key:"setType",value:function(n){0!==this.color?(this.type=n,1!==n&&(this.sprite.texture=4!==n?Q.types[n]:Q.itemColors[this.color],this.color=4===n?this.color:7)):this.type=0}},{key:"turn",value:function(n){var t=n===this.color;t&&!this.hover&&Yn.map.misc.turnOn(this),!t&&this.hover&&Yn.map.misc.turnOff(this)}}]),n}(),on=function(){function n(){(0,c.Z)(this,n),this.sprite=void 0,this.text=void 0,this.height=void 0,this.radius=void 0,this.angle=void 0,this.veclocity=new en(0,0);var t=this.sprite=new k.Sprite;t.width=z,t.height=z,t.anchor.set(.5);var e=this.text=new k.Text(50..toString(),q);e.anchor.set(.5),e.visible=!1}return(0,u.Z)(n,[{key:"set",value:function(n,t,e){var i=this.sprite;i.visible=!0,i.texture=n.sprite.texture,this.angle=0,this.height=F,i.x=n.sprite.x+t,i.y=n.sprite.y+e,i.width=z,i.height=z,this.veclocity.x=900*(Math.random()-.5),this.veclocity.y=900*(Math.random()-.5)}},{key:"isPlaying",get:function(){return this.sprite.visible}},{key:"update",value:function(n){var t=this.sprite;if(t.y<-310){var e=this.veclocity,i=.5*(j-z);if((t.x>i||t.x<-i)&&(e.x=-e.x),t.x+=e.x*n,t.y+=e.y*n,e.y+=1300*n,t.y>=-310){t.x>0?this.angle=0:this.angle=Math.PI;var r=Math.abs(t.x);if(r<290){var o=t.x/290;this.angle=Math.acos(o),this.radius=290}else this.angle=t.x>0?0:Math.PI,this.radius=r}}else{var a=this.angle+13*n,s=this.height-290*n,l=this.radius*Math.max(s/F,.1);if(s<20){t.visible=!1;var c=this.text;c.visible=!0,Yn.map.addScore(50);var u=Yn.map.physicsBox,h=u.x,d=u.y;return c.x=200*(Math.random()-.5),c.y=t.y-50*Math.random()+20,_.ZP.to(c,{y:c.y-20,alpha:0}).duration(.5).then((function(){c.visible=!1,c.alpha=1,c.y=t.y})),void Yn.map.effect.spawnBlazeParticle(c.x+h,c.y+d)}this.angle=a,this.height=s,t.x=Math.cos(a)*l,t.y=-s;var p=z*(.25*Math.sin(a)+1);t.width=p,t.height=p}}}]),n}(),an=e(7326),sn=e(5661),ln=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).select_color=void 0,n.select_type=void 0,n.deltaY=0,n.speed=0,n.target=void 0,n.colors=void 0,n.types=void 0,n.lines=[],n.maxHeight=0;var i=j,r=C,o=(Q.colors.length,k.Sprite.from("images/header.png"));o.y=.7*r,o.width=i,o.height=1e3,n.addChild(o);var a=100,s=n.colors=new k.Container;s.y=.86*r,n.addChild(s),(o=new k.Sprite(Q.hover)).anchor.set(.5),o.x=a,a+=100,o.width=81.6,o.height=81.6,o.interactive=!0,o.on("pointerup",n.onColorClick.bind((0,an.Z)(n))),s.addChild(o);var l,u=(0,B.Z)(Q.colors);try{for(u.s();!(l=u.n()).done;){var h=l.value;h&&((o=new k.Sprite(h)).anchor.set(.5),o.x=a,a+=100,o.width=z,o.height=z,o.interactive=!0,o.on("pointerup",n.onColorClick.bind((0,an.Z)(n))),s.addChild(o))}}catch(g){u.e(g)}finally{u.f()}var d=n.types=new k.Container;d.y=.94*r,n.addChild(d),a=100;var p,f=(0,B.Z)(Q.types);try{for(f.s();!(p=f.n()).done;){var m=p.value;m&&((o=new k.Sprite(m)).anchor.set(.5),o.x=a,a+=100,o.width=z,o.height=z,o.interactive=!0,o.on("pointerup",n.onTypeClick.bind((0,an.Z)(n))),d.addChild(o))}}catch(g){f.e(g)}finally{f.f()}return n.hitArea=new k.Rectangle(0,0,i,r),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,an.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,an.Z)(n))),n.on("pointermove",n.countBubble.bind((0,an.Z)(n))),n.on("pointerdown",n.countBubble.bind((0,an.Z)(n))),n}return(0,u.Z)(e,[{key:"getText",value:function(n,t){var e,i=null,r=(0,B.Z)(this.lines);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.y>=n.sprite.y){i=o;break}}}catch(a){r.e(a)}finally{r.f()}return i||((i=Yn.map.misc.spawnText(n)).text=t,this.lines.push(i)),i.visible=!0,i}},{key:"reload",value:function(n){var t,e=Yn.map,i=I.Z.getState().colorTool.cacheLevels,r=void 0,o=(0,B.Z)(i);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.levelId===n&&(r=K(a.base64))}}catch(p){o.e(p)}finally{o.f()}r?e.load(r):e.reload(n),Yn.view.onwheel=this.onButtonWheel.bind(this),this.target=e.container;var s,l=0,c=(0,B.Z)(e.data);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=Math.floor(l/U),d=l%U;h%2===1&&10===d||(u.turn(u.color),0==d&&this.getText(u,h+1+"")),l++}}catch(p){c.e(p)}finally{c.f()}I.Z.dispatch(sn.J.actions.initBullets(Yn.map.level.bullets.map((function(n){return n.color})))),this.trimLine()}},{key:"addEmptyLine",value:function(){var n=Yn.map.data;n[n.length-1].sprite.y<=this.maxHeight&&Yn.map.addEmptyLine(1);var t=Math.ceil(this.maxHeight/(H*z))*U,e=t+U,i=Math.floor(t/U);for(this.getText(n[t],i+1+"");t<e;t++){var r=n[t];r.turn(r.color)}this.maxHeight=n[t-1].sprite.y}},{key:"trimLine",value:function(){for(var n=Yn.map.data,t=0,e=t+U,i=[];t<e;t++){var r=n[t];r.isEmpty||(i.push(r),r.isMarked=!0)}for(var o=0,a=n[0].sprite.y,s=a;o<i.length;){var l,c=i[o].neighbors,u=(0,B.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||h.sprite.y<a||(i.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(v){u.e(v)}finally{u.f()}o++}var d,p=(0,B.Z)(n);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.sprite.y>s&&f.turn(-1),f.isMarked=!1}}catch(v){p.e(v)}finally{p.f()}var m,g=(0,B.Z)(this.lines);try{for(g.s();!(m=g.n()).done;){var x=m.value;x.y>s&&(x.visible=!1)}}catch(v){g.e(v)}finally{g.f()}this.maxHeight=s}},{key:"onButtonOver",value:function(n){if(void 0!==this.select_color&&void 0!==this.select_type){var t=Yn.map,e=n.data.global,i=Yn.scale;if(e.y-=t.parent.y,e.x/=i.x,e.y/=i.y,!(e.x>j)){var r=en.fromPIXI(t.container),o=t.data,a=e.y-r.y;a=Math.floor(a/(z*H));var s=Math.max(a%2?e.x-34:e.x,0),l=o[(s=Math.floor(s/z))+11*a];l&&l.hover&&(l.setColor(Q.colors.indexOf(this.select_color)),l.setType(Q.types.indexOf(this.select_type)))}}}},{key:"onButtonWheel",value:function(n){this.deltaY=n.deltaY,this.speed=-1}},{key:"onColorClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_color=t.texture==Q.hover?null:t.texture;for(var e=0,i=this.colors.children;e<i.length;e++){var r=i[e];r.width=z,r.height=z}t.width=1.4*z,t.height=1.4*z,I.Z.dispatch(sn.J.actions.setSelectedColor(Q.colors.indexOf(this.select_color)))}},{key:"onTypeClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_type=t.texture==Q.hover?null:t.texture;for(var e=0,i=this.types.children;e<i.length;e++){var r=i[e];r.width=z,r.height=z}t.width=1.4*z,t.height=1.4*z}},{key:"update",value:function(n){var t=Math.abs(this.speed);if(0!=t){var e=this.target.y+this.deltaY*t;e>V&&(e=V);var i=-Math.max(Yn.map.data.length/U-9,0)*H*z;e<i&&(e=i),this.target.y=e,this.speed<0&&(t-=n,this.speed=t<0?0:-t)}}},{key:"countBubble",value:function(){var n,t=0,e=this.maxHeight,i=(0,B.Z)(Yn.map.data);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.sprite.y<=e&&!r.isEmpty&&++t}}catch(o){i.e(o)}finally{i.f()}I.Z.dispatch(sn.J.actions.setBubbleCount(t))}},{key:"drawMapForCapture",value:function(){var n=Yn.map.data,t=new k.Application({width:Yn.view.width,height:(this.maxHeight+z)*Yn.scale.y,backgroundColor:4078474}),e=new k.Container;t.stage.addChild(e),t.stage.scale=Yn.scale;var i,r=(0,B.Z)(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.hover){var a=new k.Sprite(o.sprite.texture),s=o.sprite,l=s.x,c=s.y,u=s.width,h=s.height;a.x=l,a.y=c,a.anchor.set(.5),a.width=u,a.height=h,e.addChild(a)}if(o.hover){var d=new k.Sprite(o.hover.texture),p=o.hover,f=p.x,m=p.y,g=p.width,x=p.height;d.x=f,d.y=m,d.anchor.set(.5),d.alpha=.5,d.width=g,d.height=x,e.addChild(d)}0}}catch(P){r.e(P)}finally{r.f()}var v,y=0,b=(0,B.Z)(this.lines);try{for(b.s();!(v=b.n()).done;){var w=v.value;if(w.visible){var Z=new k.Text("",X);Z.anchor.set(.5),Z.scale.set(.5),Z.text=(++y).toString(),Z.x=w.x,Z.y=w.y,e.addChild(Z)}}}catch(P){b.e(P)}finally{b.f()}return t.render(),t.view.toDataURL("image/jpeg")}}]),e}(k.Container),cn=e(4182),un={alpha:{start:1,end:0},scale:{start:.1,end:.3,minimumScaleMultiplier:.1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:50,minimumSpeedMultiplier:.1},acceleration:{x:0,y:300},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.01,emitterLifetime:.3,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:3,particleSpacing:0,angleStart:0},hn={alpha:{start:.5,end:0},scale:{start:.3,end:.2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:1e3,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-90,max:-90},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.1,max:.2},blendMode:"add",frequency:.01,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:50,h:30}},dn={alpha:{start:.5,end:.7},scale:{start:.3,end:.2,minimumScaleMultiplier:.3},color:{start:"#ffaa33",end:"#ffdd22"},speed:{start:2e3,end:0,minimumSpeedMultiplier:.3},acceleration:{x:0,y:2e3},maxSpeed:0,startRotation:{min:255,max:280},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.001,emitterLifetime:3,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:10,h:0}},pn={alpha:{start:1,end:0},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:200,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:.2,max:.3},blendMode:"add",frequency:.05,emitterLifetime:.5,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:1,particleSpacing:0,angleStart:0},fn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).star_particles=[],n.blaze_particles=[],n.fireworks_particles=[],n.erase_particle=null,n.running_particles=[];var i=j,r=C;return n.fireworks_particles.push(n.createFirework(130,r-30)),n.fireworks_particles.push(n.createFirework(i-130,r-30)),n.fireworks_particles[0].parent.scale.set(-1,1),n}return(0,u.Z)(e,[{key:"play",value:function(n,t){var e=this.running_particles;return e.push(n),n.cleanup(),n.playOnce((function(){var i=e.indexOf(n);e[i]=e[e.length-1],e.length--,null===t||void 0===t||t.push(n)})),n}},{key:"spawnStarEffect",value:function(n,t){var e=this.star_particles.pop();if(!e){var i=new k.Container;e=new cn.Q5(i,Q.star_particle,un),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.star_particles)}},{key:"spawnBlazeParticle",value:function(n,t){var e=this.blaze_particles.pop();if(!e){var i=new k.Container;e=new cn.Q5(i,Q.blaze_particle,hn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.blaze_particles)}},{key:"createFirework",value:function(n,t){var e=new k.Container,i=new cn.Q5(e,[Q.star_particle,Q.blaze_particle],dn);return this.addChild(e),e.x=n,e.y=t,i}},{key:"spawnFirework",value:function(){var n,t=(0,B.Z)(this.fireworks_particles);try{for(t.s();!(n=t.n()).done;){var e=n.value;this.play(e,null)}}catch(i){t.e(i)}finally{t.f()}}},{key:"spawnErase",value:function(n,t,e){var i=this.erase_particle;if(!i){var r=new k.Container;i=new cn.Q5(r,Q.dot_particle,pn),this.addChild(r),this.erase_particle=i}i.parent.x=n,i.parent.y=t;var o=i.startColor.value;return o.r=255*e[0],o.g=255*e[1],o.b=255*e[2],this.play(i,null)}},{key:"update",value:function(n){var t,e=(0,B.Z)(this.running_particles);try{for(e.s();!(t=e.n()).done;){t.value.update(n)}}catch(i){e.e(i)}finally{e.f()}}}]),e}(k.Container),mn=e(9439),gn=e(3433),xn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).boom_holder=void 0,n.boom_empty=void 0,n.boom=void 0,n.progress=0,n.max=0;var i=C,r=new k.Sprite(Q.background);r.anchor.set(0,1),n.addChild(r),n.y=i,(r=new k.Sprite(Q.background_1)).anchor.set(0,0),r.y=-503,n.addChild(r);var o=n.boom_holder=new k.Sprite(Q.boom_holder);o.anchor.set(.5,1),o.x=150,o.y=-70,n.addChild(o),(o=n.boom_empty=new k.Sprite(Q.boom_empty)).anchor.set(.5),o.x=0,o.y=-180,n.boom_holder.addChild(o),(o=n.boom=new k.Sprite(Q.boom)).anchor.set(.5),n.boom_empty.addChild(o);var a=new k.Filter(null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float customUniform;\n\nvoid main(void)\n{\n   vec4 fg = texture2D(uSampler, vTextureCoord);\n\n   float a = step(customUniform, vTextureCoord.y * 1.33);\n\n   gl_FragColor = fg * a;\n}\n",{customUniform:1});return o.filters=[a],n}return(0,u.Z)(e,[{key:"addScore",value:function(n){if(this.boom_holder.visible&&!(this.progress>=1)){var t=Math.min(this.progress+n/this.max,1);this.boom.filters[0].uniforms.customUniform=1-t,this.progress=t}}},{key:"reset",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.progress=0,this.boom.filters[0].uniforms.customUniform=1,this.boom_empty.visible=!0,n?(this.max=500,this.boom_holder.visible=t):this.max+=500}},{key:"getBoomPosition",value:function(){this.boom_empty.visible=!1;var n=en.fromPIXI(this.boom_empty);return n.x+=this.boom_empty.parent.x+this.x,n.y+=this.boom_empty.parent.y+this.y,n}},{key:"reloadAnim",value:function(n,t){var e=this.children,i=e[0],r=e[1],o=e[2];_.ZP.fromTo(i,{y:700},{y:i.y}).delay(t).duration(n),_.ZP.fromTo(r,{y:700},{y:r.y}).delay(t).duration(n),_.ZP.fromTo(o,{y:510},{y:o.y}).delay(t).duration(n)}}]),e}(k.Container),vn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).topRight=void 0,n.topLeft=void 0,n.botLeft=void 0,n.botRight=void 0,n.bubble=void 0,n.holder=void 0,n.target=void 0,n.path=[],n.rayColor=null,n.isShooting=!0,n.isSpecial=!1,n.bullets=[];var i=j,r=C;n.hitArea=new k.Rectangle(0,0,i,r),n.topLeft=new en(35,0),n.topRight=new en(i-35,0),n.botLeft=new en(35,r),n.botRight=new en(i-35,r);var o=n.holder=k.Sprite.from(Q.ring);o.width=0,o.height=0,o.x=.5*i,o.y=r-250,o.anchor.set(.5),n.addChild(o);var a=k.Sprite.from(Q.ring);a.anchor.set(.5),o.addChild(a),_.ZP.fromTo(a,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(5).repeat(-1);var s=[],l=new k.Sprite;l.anchor.set(.5);var u=new k.Sprite(Q.hover);u.anchor.set(.5),l.addChild(u),s.push(u);var h=new k.Sprite;h.anchor.set(.5),(u=new k.Sprite(Q.hover)).anchor.set(.5),h.addChild(u),s.push(u);var d=new k.Sprite;d.anchor.set(.5),(u=new k.Sprite(Q.hover)).anchor.set(.5),d.addChild(u),s.push(u),o.addChild(l),o.addChild(h),o.addChild(d),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,an.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,an.Z)(n))),n.on("pointerup",n.onButtonUp.bind((0,an.Z)(n))),o.interactive=!0,o.on("pointerup",n.changeColor.bind((0,an.Z)(n)));var p=n.bubble=new k.Sprite;p.width=z,p.height=z,p.anchor.set(.5),n.addChild(p),n.visible=!1;for(var f=0,m=s;f<m.length;f++){var g=m[f];_.ZP.fromTo(g,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(3).repeat(-1)}return n}return(0,u.Z)(e,[{key:"turnOff",value:function(){var n;null===(n=this.target)||void 0===n||n.turn(-1),this.target=null,this.path.length=0,O.setRayPoints([]),this.isShooting=!0,this.visible=!1}},{key:"reload",value:function(n){var t=this;this.bullets=(0,gn.Z)(n);var e=this.holder.children,i=(0,mn.Z)(e,4),r=(i[0],i[1]),o=i[2],a=i[3];r.texture=null,o.visible=!1,r.visible=!1,a.visible=!1,this.visible=!0,this.isSpecial=!1,_.ZP.fromTo(this.holder,{width:0,height:0},{width:Q.ring.width,height:Q.ring.height,duration:.5}).then((function(){o.texture=t.getColor(),o.visible=!0,t.reset()}))}},{key:"getColor",value:function(){var n=this.bullets.shift();return this.bullets.push(n),Q.colors[n.color]}},{key:"changeColor",value:function(){var n=this;if(!this.isShooting){this.isShooting=!0;var t=this.holder.children,e=(0,mn.Z)(t,4),i=(e[0],e[1]),r=e[2],o=e[3],a=i.texture;i.texture=r.texture,this.rayColor=Q.rayColor[Q.colors.indexOf(i.texture)],this.isSpecial?(r.texture=o.texture,o.texture=a):r.texture=a;var s={value:0},l=79;_.ZP.to(s,{value:1}).eventCallback("onUpdate",(function(){var t=G+(z-G)*s.value;i.width=t,i.height=t;var e=Math.PI/6-s.value*Math.PI*2/3;i.x=Math.cos(e)*l,i.y=Math.sin(e)*l,n.isSpecial?(t=W+(G-W)*s.value,r.width=t,r.height=t,e=5*Math.PI/6-s.value*Math.PI*2/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l,t=z+(W-z)*s.value,o.width=t,o.height=t,e=-Math.PI/2-s.value*Math.PI*2/3,o.x=Math.cos(e)*l,o.y=Math.sin(e)*l):(t=z+(G-z)*s.value,r.width=t,r.height=t,e=-Math.PI/2-s.value*Math.PI*4/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l)})).duration(.4).then((function(){return n.isShooting=!1}))}}},{key:"triggerBoom",value:function(n,t){var e=this;this.isShooting=!0;var i=this.holder.children,r=(0,mn.Z)(i,4),o=(r[0],r[1]),a=(r[2],r[3]),s=this.bubble;this.isSpecial=!0,a.texture=o.texture,o.texture=Q.boomType,s.texture=Q.boomType,this.rayColor=Q.rayColor[0];var l={value:0};_.ZP.to(l,{value:1}).eventCallback("onUpdate",(function(){var n=z+(W-z)*l.value;a.width=n,a.height=n;var t=-Math.PI/2-l.value*Math.PI*2/3;a.x=79*Math.cos(t),a.y=79*Math.sin(t),a.visible=!0})).duration(.3),l.value=0;var c=s.x,u=s.y;return o.visible=!1,_.ZP.to(l,{value:1,duration:1,onUpdate:function(){var e=l.value*l.value,i=1-2*Math.abs(e-.5);i=1-(1-i)*(1-i),s.x=n+(c-n)*e,s.y=t+(u-t)*e-150*i}}).then((function(){s.texture=null,o.visible=!0,e.isShooting=!1})),1}},{key:"reset",value:function(){var n=this,t=this.holder.children,e=(0,mn.Z)(t,4),i=(e[0],e[1]),r=e[2],o=e[3],a=Yn.map.boomHolder,s=i.texture==Q.boomType;s&&(a.reset(!1),this.isSpecial=!1,o.visible=!1),i.texture=r.texture,this.rayColor=Q.rayColor[Q.colors.indexOf(i.texture)];var l=79;if(this.isSpecial){_.ZP.fromTo(o,{width:1,height:1},{width:W,height:W}).delay(.2).duration(.3);var c=5*Math.PI/6;o.x=Math.cos(c)*l,o.y=Math.sin(c)*l,r.texture=o.texture,o.texture=this.getColor()}else if(s)r.texture=o.texture;else{_.ZP.fromTo(r,{width:1,height:1},{width:G,height:G}).delay(.2).duration(.3);var u=Math.PI/6;r.x=Math.cos(u)*l,r.y=Math.sin(u)*l,r.texture=this.getColor()}this.bubble.x=0+this.holder.x,this.bubble.y=-l+this.holder.y;var h={value:0};_.ZP.to(h,{value:1}).eventCallback("onUpdate",(function(){var t=G+(z-G)*h.value;i.width=t,i.height=t;var e=Math.PI/6-h.value*Math.PI*2/3;i.x=Math.cos(e)*l,i.y=Math.sin(e)*l,i.visible=!0,(n.isSpecial||s)&&(t=W+(G-W)*h.value,r.width=t,r.height=t,e=5*Math.PI/6-h.value*Math.PI*2/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l)})).duration(.3).then((function(){return n.isShooting=!1}))}},{key:"update",value:function(n){if(!this.isShooting){var t=Yn.map.boomHolder;if(t.progress>=1&&!this.isSpecial){var e=t.getBoomPosition();this.triggerBoom(e.x,e.y)}}}},{key:"onButtonOver",value:function(n){var t;if(!this.isShooting){var e=n.data.global,i=Yn.scale;e.y-=Yn.map.parent.y,e.x/=i.x,e.y/=i.y,null===(t=this.target)||void 0===t||t.turn(-1),this.target=null,this.path.length=0,O.setRayPoints([]),this.checkType()==phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_BOOM&&Yn.map.reset(),e.y>C-400||this.onDirection(e.x,e.y)}}},{key:"onButtonUp",value:function(){var n=this;if(!this.isShooting&&this.target){this.isShooting=!0;var t=Yn.map,e=this.bubble,i=this.holder.children,r=(0,mn.Z)(i,4),o=(r[0],r[1]);r[2],r[3];o.visible=!1,e.texture=o.texture;var a,s=en.fromPIXI(e),l=_.ZP.timeline(),c=0,u={sprite:{x:0,y:0}},h=Yn.map.container,d=h.x,p=h.y,f=this.path.length,m=(0,B.Z)(this.path);try{for(m.s();!(a=m.n()).done;){var g=a.value;c=4e-4*s.subtract(g).length(),s.copy(g),l.add(_.ZP.to(e,{x:g.x,y:g.y,duration:c})),--f>0&&l.add(_.ZP.delayedCall(0,(function(){var n=t.targetChecker.getWallScore();u.sprite.x=e.x-d,u.sprite.y=e.y-p,t.misc.spawnScore(u).text=n.toString()})))}}catch(v){m.e(v)}finally{m.f()}var x=this.target;x.turn(-1),this.target=null,this.path.length=0,O.setRayPoints([]),l.then((function(){x.setColor(Q.colors.indexOf(e.texture)),t.putBubble(x,n.checkType()),e.texture=null}))}}},{key:"getBubbleHit",value:function(n,t){var e=34;e=e*e*2;var i=en.fromPIXI(Yn.map.container),r=null,o=null,a=null,s=Yn.map.data,l=n.y-i.y;l=Math.floor(l/(z*H));var c=Math.max(l%2?n.x-34:n.x,0),u=s[(c=Math.floor(c/z))+11*l],h=l%2==1&&c>=10;return u&&(!u.isEmpty||h&&!s[c-1+11*l].isEmpty)&&(r=u),l=t.y-i.y,l=Math.floor(l/(z*H)),c=Math.max(l%2?t.x-34:t.x,0),(u=s[(c=Math.floor(c/z))+11*l])&&u.isEmpty&&(o=u,a=en.fromPIXI(u.sprite).add(i)),!r&&o&&o.sprite.y<z*H&&(r=o),{hit:r,empty:o,emptyPos:a}}},{key:"checkType",value:function(){var n=this.holder.children[1].texture;return n==Q.boomType?phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_BOOM:n==Q.lineType?phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_LINE:phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_NORMAL}},{key:"onDirection",value:function(n,t){var e=[],i=en.fromPIXI(this.bubble),r=Yn.map.container.y,o=i.clone(),a=new en(n,t).subtract(i).normalize().multiply(10);for(e.push(i.clone());i.y>r;){o.copy(i),i.add(a);var s=this.getBubbleHit(i,o),l=s.hit,c=s.empty,u=s.emptyPos;if(l){c&&(Yn.map.onButtonOver(c,this.checkType()),this.target=c,this.path.push(u));break}if(i.x<this.topLeft.x){var h=this.line2line(o,i,this.topLeft,this.botLeft);i.copy(h),e.push(i.clone()),this.path.push(i.clone()),a.x=-a.x}if(i.x>this.topRight.x){var d=this.line2line(o,i,this.topRight,this.botRight);i.copy(d),e.push(i.clone()),this.path.push(i.clone()),a.x=-a.x}}this.target&&e.push(i.clone()),O.setRayPoints(e,this.rayColor)}},{key:"getLine",value:function(n,t){var e=t.y-n.y,i=n.x-t.x;return{a:e,b:i,c:n.x*e+n.y*i}}},{key:"line2line",value:function(n,t,e,i){var r=this.getLine(n,t),o=r.a,a=r.b,s=r.c,l=this.getLine(e,i),c=l.a,u=l.b,h=l.c,d=o*u-c*a;if(0!=d)return new en((s*u-h*a)/d,(h*o-s*c)/d)}}]),e}(k.Container),yn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).balls=[];var i=j,r=C;return n.x=.5*i,n.y=r-60,n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i,r=null,o=(0,B.Z)(this.balls);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!a.isPlaying){r=a;break}}}catch(s){o.e(s)}finally{o.f()}r||(r=new on,this.addChild(r.sprite),this.addChild(r.text),this.balls.push(r)),r.set(n,t,e)}},{key:"update",value:function(n){var t,e=(0,B.Z)(this.balls);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.isPlaying&&i.update(n)}}catch(r){e.e(r)}finally{e.f()}}}]),e}(k.Container),bn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).hovers=[],n.scores=[],n}return(0,u.Z)(e,[{key:"turnOn",value:function(n){var t=this.hovers.pop();t||((t=new k.Sprite(Q.hover)).anchor.set(.5),t.width=81,t.height=81,_.ZP.fromTo(t,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(3).repeat(-1),this.addChild(t));var e=n.sprite,i=e.x,r=e.y;return t.visible=!0,t.x=i,t.y=r,n.hover=t,t}},{key:"turnOff",value:function(n){this.hovers.push(n.hover),n.hover.visible=!1,n.hover=null}},{key:"spawnText",value:function(n){var t=this.scores.pop();t||((t=new k.Text("",X)).anchor.set(.5),t.scale.set(.5),this.addChild(t)),t.visible=!0;var e=n.sprite,i=e.x,r=e.y;return t.x=i,t.y=r,t}},{key:"spawnScore",value:function(n){var t=this,e=this.scores.pop();e||((e=new k.Text("",q)).anchor.set(.5),this.addChild(e)),e.visible=!0;var i=n.sprite,r=i.x,o=i.y;return e.x=r,e.y=o,_.ZP.to(e,{y:o-30,alpha:0}).duration(1).then((function(){e.visible=!1,e.alpha=1,t.scores.push(e)})),e}}]),e}(k.Container),wn=function(){function n(){(0,c.Z)(this,n),this.ballColor=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.ballType=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.totalBall={current:0,target:0},this.comboScore=0,this.wallScore=0,this.totalScore=0}return(0,u.Z)(n,[{key:"getWallScore",value:function(){var n=this.wallScore;return this.wallScore+=25,n}},{key:"init",value:function(n){var t,e=(0,B.Z)(this.ballColor);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.current=i.target=0}}catch(l){e.e(l)}finally{e.f()}this.totalBall.current=this.totalBall.target=0;var r,o=(0,B.Z)(n.targets);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.ball;!s||0===s.color&&0===s.type?this.totalBall.target=a.quantity:(s.color>0&&(this.ballColor[s.color-1].target=a.quantity),s.type>0&&(this.ballType[s.type-1].target=a.quantity))}}catch(l){o.e(l)}finally{o.f()}this.comboScore=10,this.wallScore=25,this.totalScore=0}},{key:"countBall",value:function(n,t){this.ballColor[n].current++,this.totalBall.current++,this.ballType[t].current++}},{key:"addScore",value:function(n){return this.totalScore+=n}},{key:"check",value:function(){var n,t=!0,e=(0,B.Z)(this.ballColor);try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.current<i.target){t=!1,console.log(i);break}}}catch(s){e.e(s)}finally{e.f()}var r,o=(0,B.Z)(this.ballType);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.current<a.target){t=!1,console.log(a);break}}}catch(s){o.e(s)}finally{o.f()}return this.totalBall.current<this.totalBall.target&&(t=!1),t}}]),n}(),Zn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,c.Z)(this,e),(n=t.call(this)).container=void 0,n.data=[],n.gun=void 0,n.physicsBox=void 0,n.boomHolder=void 0,n.colorTool=void 0,n.targetChecker=void 0,n.misc=void 0,n.effect=void 0,n.level=void 0,i=!0,n.addChild(n.boomHolder=new xn),i||(n.addChild(O),n.addChild(n.gun=new vn)),n.addChild(n.container=new k.Container),n.addChild(n.physicsBox=new yn),n.addChild(n.effect=new fn),n.addChild(n.misc=new bn),i&&n.addChild(n.colorTool=new ln);var r=new k.Sprite(Q.headline);return r.y=9,r.anchor.set(0,1),n.container.addChild(r),n.targetChecker=new wn,n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i=Math.floor(n/t),r=n%t,o=new rn(r,i),a=o.neighbors;e.push(o);var s=r>0?e[n-1]:null;if(i%2===1&&(n+=1,(r+=1)>=t))return o;var l=i>0&&(i%2===1||r+1<t)?e[n-t]:null,c=i>0&&r>0?e[n-t-1]:null;return l&&(l.neighbors[4]=o),c&&(c.neighbors[5]=o),s&&(s.neighbors[0]=o),a[1]=l,a[2]=c,a[3]=s,o}},{key:"addScore",value:function(n){this.boomHolder.addScore(n);var t=this.targetChecker.addScore(n);I.Z.dispatch(A.X.actions.setCurrentGame({score:t}))}},{key:"load",value:function(n){var t=this;this.level=n,this.targetChecker.init(n);for(var e=this.container,i=n.map,r=this.data,o=i.length,a=0;a<o;a++){var s=i[a],l=s.color,c=s.type,u=r[a];u||(u=this.addBubble(a,11,r),e.addChild(u.sprite)),u.isMarked=!1,u.setColor(l,l>0),u.setType(c)}o=r.length;var h=9*H*z;if(h=Math.max(r[a-1].sprite.y-h,0),o<=a)this.addEmptyLine(1);else for(;a<o;a++)r[a].setColor(0);if(I.Z.dispatch(A.X.actions.setCurrentGame({level:n.id||0,score:0,star1Score:this.level.star1Score,star2Score:this.level.star2Score,star3Score:this.level.star3Score})),this.gun)return this.gun.turnOff(),this.boomHolder.reset(!0,n.id>6),0!==h&&this.boomHolder.reloadAnim(.003*h,1),_.ZP.fromTo(e,{y:V},{y:-h+V}).delay(1).duration(.003*h).then((function(){return t.gun.reload(n.bullets)}));e.y=-h+V}},{key:"reload",value:function(n){var t,e=tn,i=(0,B.Z)(J.chapters);try{for(i.s();!(t=i.n()).done;){var r,o=t.value,a=(0,B.Z)(o.levels);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.id===n&&(e=s)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){i.e(l)}finally{i.f()}this.load(e)}},{key:"addEmptyLine",value:function(n){for(var t=this.container,e=this.data,i=e.length,r=0,o=11*n;r<o;r++){var a=this.addBubble(i,11,e);a.setColor(0),t.addChild(a.sprite),i++}}},{key:"reset",value:function(){var n,t=(0,B.Z)(this.data);try{for(t.s();!(n=t.n()).done;){var e=n.value;null===e||void 0===e||e.turn(-1)}}catch(i){t.e(i)}finally{t.f()}}},{key:"update",value:function(n){var t,e,i;null===(t=this.physicsBox)||void 0===t||t.update(n),null===(e=this.colorTool)||void 0===e||e.update(n),null===(i=this.gun)||void 0===i||i.update(n),this.misc.y=this.container.y,this.effect.update(n),O.update(n)}},{key:"getGroup",value:function(n){var t=[n],e=n.color;n.color=0;for(var i=0;i<t.length;){var r,o=t[i].neighbors,a=(0,B.Z)(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;s&&!s.isEmpty&&(s.color===e&&(t.push(s),s.color=0))}}catch(u){a.e(u)}finally{a.f()}i++}for(var l=0,c=t;l<c.length;l++){c[l].color=e}return t}},{key:"pickBubble",value:function(n,t){var e,i=this,r=this.container,o=r.x,a=r.y,s=n[0],l=0,c=n[n.length-1].color,u=(0,B.Z)(n);try{var h=function(){var n=e.value,r=n.sprite,u=3e-6*new en(r.x-s.sprite.x,r.y-s.sprite.y).lengthSqr();n.color=0,_.ZP.to(r,{width:68*.2,height:68*.2}).delay(u).duration(.2).then((function(){n.setColor(0),r.width=68,r.height=68,i.addScore(t),i.misc.spawnScore(n).text=t.toString()})),_.ZP.delayedCall(u,(function(){return i.effect.spawnStarEffect(r.x+o,r.y+a)})),n.isOrigin&&i.targetChecker.countBall(c,n.type),u>l&&(l=u)};for(u.s();!(e=u.n()).done;)h()}catch(d){u.e(d)}finally{u.f()}return.2+l}},{key:"onFire",value:function(n,t){var e=null,i=this.targetChecker.comboScore;t===phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_NORMAL&&(e=this.getGroup(n),this.targetChecker.comboScore+=10),t===phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_BOOM&&(e=this.getNeighborbyLevel(n,3),i=250),t===phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_LINE&&(e=this.getLineNeighbor(n,3),i=500);var r,o=(0,B.Z)(e);try{for(o.s();!(r=o.n()).done;){r.value.isMarked=!1}}catch(s){o.e(s)}finally{o.f()}if(e=e.filter((function(n){return!n.isEmpty})),e.length<3&&t===phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_NORMAL)return this.gun.reset(),this.targetChecker.comboScore=10,e.length<2&&!n.neighbors[1]&&!n.neighbors[2]?-1:0;var a=this.pickBubble(e,i);return _.ZP.delayedCall(Math.max(a-.1,0),this.sweepMap.bind(this)),a}},{key:"putBubble",value:function(n,t){var e=this,i=this.gun.rayColor,r=this.container,o=this.onFire(n,t),a=o>0?0:n.sprite.y;this.data[this.data.length-1].sprite.y<=a&&this.addEmptyLine(1),a+r.y>9*H*z+V&&_.ZP.to(r,{y:r.y-H*z}).duration(.5),this.reset();var s=z,l=n.sprite;if(0===o){var c=_.ZP.timeline();c.add(_.ZP.to(l,{width:1.1*s,height:1.1*s,duration:.1})),c.add(_.ZP.to(l,{width:s,height:s,duration:.2}))}else o<0&&(o=0,_.ZP.to(l,{width:.2*s,height:.1*s,duration:.1}).then((function(){n.setColor(0),l.width=s,l.height=s;var t=r.x,o=r.y;t+=l.x,o+=l.y,e.effect.spawnErase(t,o,i)})));var u,h=this.getNeighborbyLevel(n,3),d=(0,B.Z)(h);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(p.isMarked=!1,p!==n&&!p.isEmpty){var f=p.sprite,m=f.x,g=f.y,x=new en(m-l.x,g-l.y),v=x.lengthSqr();x.normalize().multiply(1e5/v);var y=_.ZP.timeline();y.add(_.ZP.to(p.sprite,{x:m+x.x,y:g+x.y}).duration(.1)),y.add(_.ZP.to(p.sprite,{x:m,y:g}).duration(.2))}}}catch(b){d.e(b)}finally{d.f()}return o+.5}},{key:"sweepMap",value:function(){for(var n=this,t=this.data,e=0,i=e+U,r=[];e<i;e++){var o=t[e];o.isEmpty||(r.push(o),o.isMarked=!0)}for(var a=0,s=t[0].sprite.y,l=s;a<r.length;){var c,u=r[a].neighbors,h=(0,B.Z)(u);try{for(h.s();!(c=h.n()).done;){var d=c.value;!d||d.isEmpty||d.isMarked||d.sprite.y<s||(r.push(d),d.isMarked=!0,d.sprite.y>l&&(l=d.sprite.y))}}catch(Z){h.e(Z)}finally{h.f()}a++}var p=[];for(e=0,i=t.length;e<i;e++){var f=t[e];f.isEmpty||f.isMarked||p.push(f),f.isMarked=!1}var m=this.container;if(l+m.y<V+z){var g=9*H*z;g=-(g=Math.max(l-g,0))+V,_.ZP.to(m,{y:g}).duration(Math.max(.002*Math.abs(g-m.y),.3))}for(var x=m.x-this.physicsBox.x,v=m.y-this.physicsBox.y,y=0,b=p;y<b.length;y++){var w=b[y];this.physicsBox.addBubble(w,x,v),w.isOrigin&&this.targetChecker.countBall(w.color,w.type),w.setColor(0)}this.targetChecker.check()?(this.gun.turnOff(),this.effect.spawnFirework(),_.ZP.delayedCall(Math.max(Math.min(p.length,5),3),(function(){return I.Z.dispatch(A.X.actions.setWinPopupVisible(!0))}))):_.ZP.delayedCall(.2,(function(){return n.gun.reset()}))}},{key:"getLineNeighbor",value:function(n,t){for(var e=[n],i=n.neighbors[0],r=n.neighbors[3],o=1;o<t;o++)i&&(e.push(i),i=i.neighbors[0]),r&&(e.push(r),r=r.neighbors[3]);return e}},{key:"getNeighborbyLevel",value:function(n,t){var e=[n],i=0,r=e.length;n.isMarked=!0;for(var o=1;o<t;o++){for(;i<r;i++){var a,s=e[i].neighbors,l=(0,B.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c&&!c.isMarked&&(e.push(c),c.isMarked=!0)}}catch(u){l.e(u)}finally{l.f()}}r=e.length}return e}},{key:"onButtonOver",value:function(n,t){if(n.isEmpty)if(t===phoenix.melody.MELODY_BALL_TYPE.MELODY_BALL_TYPE_NORMAL)n.turn(0);else{var e,i=this.getNeighborbyLevel(n,3),r=(0,B.Z)(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.turn(o.color),o.isMarked=!1}}catch(c){r.e(c)}finally{r.f()}}else{var a,s=this.getGroup(n),l=(0,B.Z)(s);try{for(l.s();!(a=l.n()).done;){a.value.turn(n.color)}}catch(c){l.e(c)}finally{l.f()}}}}]),e}(k.Container),kn=function(){function n(){(0,c.Z)(this,n)}return(0,u.Z)(n,null,[{key:"getDateTimeVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds())," - ").concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getDateVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getTime",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=new Date(n),i=function(n){return n<10?"0"+n:n},r="";if(t&&""!=t)switch(t){case"h":r="".concat(i(e.getUTCHours()));break;case"m":r="".concat(i(e.getUTCMinutes()));break;case"s":r="".concat(i(e.getUTCSeconds()))}else r="".concat(i(Math.floor(e.getUTCHours()/24)),":").concat(i(e.getUTCHours()%24),":").concat(i(e.getUTCMinutes()),":").concat(i(e.getUTCSeconds()));return r}},{key:"msToTime",value:function(n,t){var e=n/1e3,i=Math.floor(e/86400);e%=86400;var r=Math.floor(e/3600);e%=3600;var o=t?Math.ceil(e/60):Math.floor(e/60);return e=Math.floor(e%60),"".concat(i<10?"0"+i:i,":").concat(r<10?"0"+r:r,":").concat(o<10?"0"+o:o,":").concat(e<10?"0"+e:e)}},{key:"msToTimeWithFormat",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day:hour:minute:second",e=n/1e3,i=Math.floor(e),r=Math.floor(e/60),o=Math.floor(e/3600),a=Math.floor(e/86400);return t.includes("minute")&&(i%=60),t.includes("hour")&&(r%=60),t.includes("day")&&(o%=24),t.replace("day",this.formatNumber(a)).replace("hour",this.formatNumber(o)).replace("minute",this.formatNumber(r)).replace("second",this.formatNumber(i))}},{key:"formatNumber",value:function(n){return(n<0?"-":"")+(Math.abs(n)<10?"0":"")+Math.abs(n)}},{key:"msToReadable",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e="";if(t&&""!=t)switch(t){case"h":e="".concat(Math.floor(n/36e5));break;case"m":var i=n%36e5;e="".concat(Math.floor(i/6e4));break;case"s":var r=n%36e5,o=r%6e4;e="".concat(Math.floor(o/1e3))}return e}},{key:"msToSocialTime",value:function(n){var t=(Date.now()-n)/1e3,e=(Math.floor(t),Math.floor(t/60)),i=Math.floor(t/3600),r=Math.floor(t/86400);return r>0?"".concat(r," ng\xe0y tr\u01b0\u1edbc"):i>0?"".concat(i," gi\u1edd tr\u01b0\u1edbc"):e>0?"".concat(e," ph\xfat tr\u01b0\u1edbc"):"V\u1eeba xong"}},{key:"reduceLengthString",value:function(n,t){if(n.length<=t)return n;var e=n.substring(0,t),i=e.lastIndexOf(" ");return e.substring(0,i)+"..."}},{key:"formatName",value:function(n){return n?n.trim().toLowerCase().replace(/(^| )./g,(function(n){return n.toUpperCase()})):""}},{key:"getFirstName",value:function(n){var t;return null===(t=this.formatName(n).match(/\S*$/))||void 0===t?void 0:t[0]}},{key:"convertToShortName",value:function(n,t){return n.length<=t?n:n.replace(/\S* /g,(function(n){return n.charAt(0)+"."}))}},{key:"convertToShortName2",value:function(n,t){if(n.length<=t)return n;var e=n;return e=e.replace(/\s.*\s/g,(function(n){return n.replace(/\S{1,}\s/g,(function(n){return n[0].toUpperCase()+"."})).replace(/.$/," ")}))}},{key:"convertToShortName3",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;if(n.length<=t)return n;var e=n,i=e.split(" ");return e="".concat(i[0]).concat(i.length>1?" "+i[i.length-1]:"")}},{key:"convertToShortName4",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return(e=e.split(" ").splice(-2).join(" ")).length<t?e:e.split(" ").splice(-1)[0]}},{key:"convertToShortName5",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return e.length<t?e:e.split(" ").splice(-1)[0]}},{key:"getLastName",value:function(n){var t=n;return t.split(" ").splice(-1)[0]}},{key:"uuid",get:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}))}},{key:"convertDistanceToString",value:function(n){return Math.abs(n)<1?Math.round(1e3*n)+"m":Math.round(10*n)/10+"km"}},{key:"toggleClass",value:function(n,t){var e=" ".concat(n," ").replace(/  +/g," ");return e.includes(" ".concat(t," "))?e.replaceAll(" ".concat(t," ")," "):e+"".concat(t," ")}},{key:"randomInt",value:function(n,t){return Math.floor(n+Math.random()*(t-n+1))}},{key:"setSpriteTexture",value:function(n,t){t&&(n.texture=k.Texture.from(t))}},{key:"isValidNumber",value:function(n){return/^[0-9\b]+$/.test(n)}},{key:"compareObjectOneLevel",value:function(n,t){return null!=n&&null!=t&&(Object.keys(n).length==Object.keys(t).length&&(Object.keys(n).sort().join(",")===Object.keys(t).sort().join(",")&&JSON.stringify(n,Object.keys(n).sort())===JSON.stringify(t,Object.keys(t).sort())))}},{key:"trimVNCode",value:function(n){return!n.startsWith("084")&&!n.startsWith("+84")||12!==n.length&&13!==n.length?!n.startsWith("84")||11!==n.length&&12!==n.length?n:"0"+n.substring(2):"0"+n.substring(3)}},{key:"formatPhoneNumber",value:function(n){return 11===(n=this.trimVNCode(n)).length||n.length<10?n:n=this.formatOldPhoneNumber(n)}},{key:"formatOldPhoneNumber",value:function(n){if(n.startsWith("03"))return"016"+n.substring(2);if(n.startsWith("07"))switch(n.charAt(2)){case"0":return"0120"+n.substring(3);case"9":return"0121"+n.substring(3);case"7":return"0122"+n.substring(3);case"6":return"0126"+n.substring(3);case"8":return"0128"+n.substring(3)}if(n.startsWith("08"))switch(n.charAt(2)){case"3":return"0123"+n.substring(3);case"4":return"0124"+n.substring(3);case"5":return"0125"+n.substring(3);case"1":return"0127"+n.substring(3);case"2":return"0129"+n.substring(3)}if(n.startsWith("05"))switch(n.charAt(2)){case"2":return"0182"+n.substring(3);case"6":return"0186"+n.substring(3);case"8":return"0188"+n.substring(3);case"9":return"0199"+n.substring(3)}return n}},{key:"sortPuzzles",value:function(n){for(var t=Math.floor(n.length/2),e=n.length%2,i=[],r=0;r<t;++r)i.push(n[r]),i.push(n[r+t+e]);return e&&i.push(n[t]),i}},{key:"numberToK",value:function(n){var t=Math.floor(n/1e3);return t>0?t+"k":n+""}},{key:"checkValueInRange",value:function(n,t,e){return n>=Math.min(t,e)&&n<=Math.max(t,e)}},{key:"convertStringToVND",value:function(n){if(!n)return"";var t=(n=(n=n.replace("\u0111","")).replaceAll(".","")).replace(/\B(?=(\d{3})+(?!\d))/g,".");return t+="\u0111"}},{key:"convertNumberToScoreString",value:function(n){var t=""+n;return t=t.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"convertVNDToString",value:function(n){return n?n=(n=n.replace("\u0111","")).replaceAll(".",""):""}},{key:"convertVNDToNumber",value:function(n){return n?(n=(n=n.replace("\u0111","")).replaceAll(".",""),parseInt(n)):0}},{key:"playPopupRewardSfx",value:function(n){if(n)if(99992023===n)m.play(p.gH.PopupQuaDacBiet);else m.play(p.gH.PopupQuaThuong)}},{key:"moveToTarget",value:function(n,t,e,i){return e=Math.abs(e),n<t?Math.min(n+e*i,t):n>t?Math.max(n-e*i,t):n}},{key:"clamp",value:function(n,t,e){var i=Math.max(t,e),r=Math.min(t,e);return n>i?i:n<r?r:n}}]),n}(),Pn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this))._mapPosition=new k.ObservablePoint((function(){}),(0,an.Z)(i),0,0),i._onPositionChange=void 0,i.camera=void 0,i._objectHeight=0,i.camera=n,i}return(0,u.Z)(e,[{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,n.y),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"objectHeight",get:function(){return this._objectHeight},set:function(n){this._objectHeight=n}},{key:"onPositionChange",set:function(n){this._onPositionChange=n}},{key:"updateDrawPosition",value:function(){if(this.camera&&!this.isInactive()){var n=this.camera.calculateDrawPosition(this);this.position.set(n.x,n.y)}}},{key:"addDebugLine",value:function(){}},{key:"addDebugRect",value:function(n){}}]),e}(k.Container);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(nn||(nn={}));var jn,Cn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this,null)).isDragging=!1,n.touchDownY=0,n.touchY=0,n.touchDownTime=0,n.touchIdentifier=-1,n.rootY=0,n.state=nn.Null,n.speedY=0,n.yMin=0,n.yMax=0,n.position.set(.5*j,.5*C),n.interactive=!0,n.on("pointerdown",n.onPointerDown.bind((0,an.Z)(n))),n.on("pointermove",n.onPointerMove.bind((0,an.Z)(n))),n.on("pointerup",n.onPointerUp.bind((0,an.Z)(n))),n.on("pointercancel",n.onPointerUp.bind((0,an.Z)(n))),n.on("pointerupoutside",n.onPointerUp.bind((0,an.Z)(n))),n}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case nn.Active:this.isDragging=!1,this.speedY=0;case nn.Inactive:}}},{key:"update",value:function(n){if(this.state===nn.Active)this.updatePosition(n)}},{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,kn.clamp(n.y,this.yMin,this.yMax)),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"isInactive",value:function(){return this.state===nn.Active}},{key:"active",value:function(){this.setState(nn.Active)}},{key:"inactive",value:function(){this.setState(nn.Inactive)}},{key:"calculateDrawPosition",value:function(n){return{x:n.mapPosition.x-this.mapPosition.x+.5*j,y:-(n.mapPosition.y-this.mapPosition.y)+.5*C}}},{key:"setYMinMax",value:function(n,t){this.yMin=n,this.yMax=t}},{key:"setHitAreaSize",value:function(n,t){this.hitArea||(this.hitArea=new k.Rectangle(-.5*n,-.5*t,n,t)),this.hitArea.width=n,this.hitArea.height=t}},{key:"onPointerDown",value:function(n){var t,e,i;if(!this.isDragging){var r=null===n||void 0===n||null===(t=n.data)||void 0===t||null===(e=t.originalEvent)||void 0===e||null===(i=e.changedTouches)||void 0===i?void 0:i[0];r&&(this.isDragging=!0,this.touchIdentifier=r.identifier,this.touchDownY=this.touchY=r.clientY,this.touchDownTime=Date.now(),this.rootY=this.mapPosition.y)}}},{key:"onPointerMove",value:function(n){if(this.isDragging){var t=this.getTouchByIdentifier(n,this.touchIdentifier);if(t){this.touchY=t.clientY;var e=(t.clientY-this.touchDownY)*(j/window.innerWidth);this.mapPosition={x:this.mapPosition.x,y:this.rootY+e}}}}},{key:"onPointerUp",value:function(n){if(this.isDragging&&this.getTouchByIdentifier(n,this.touchIdentifier)){this.isDragging=!1;var t=(this.touchY-this.touchDownY)*(j/window.innerWidth),e=Date.now()-this.touchDownTime;this.speedY=t/(e/1e3),this.speedY=Math.sign(this.speedY)*Math.max(Math.abs(this.speedY)-1e3,0)}}},{key:"updatePosition",value:function(n){if(!this.isDragging&&0!==this.speedY){this.speedY=kn.moveToTarget(this.speedY,0,Math.max(Math.abs(1*this.speedY),6e3),n);var t=this.mapPosition.x,e=this.mapPosition.y+this.speedY*n;this.mapPosition={x:t,y:e}}}},{key:"getTouchByIdentifier",value:function(n,t){var e,i,r=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.originalEvent)||void 0===i?void 0:i.changedTouches;if(!r)return null;for(var o=0;o<r.length;o++){var a=r[o];if(a.identifier==t)return a}return null}}]),e}(Pn),Sn=new(function(){function n(){(0,c.Z)(this,n),this.textures=new Map}return(0,u.Z)(n,[{key:"from",value:function(n){return this.textures.has(n)||this.textures.set(n,k.Texture.from(n)),this.textures.get(n)}}]),n}());!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(jn||(jn={}));var Mn,Tn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).geometry=void 0,i.material=void 0,i.mesh=void 0,i.sprite=void 0,i.state=jn.Null,i.sprite=new k.Sprite,i.sprite.anchor.set(.5,1),i.addChild(i.sprite),i.setState(jn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case jn.Active:this.visible=!0;break;case jn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(jn.Active)}},{key:"inactive",value:function(){this.setState(jn.Inactive)}},{key:"isInactive",value:function(){return this.state===jn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Sn.from(n)}},{key:"addMesh",value:function(){this.geometry=new k.Geometry,this.geometry.addAttribute("aVertexPosition",[-.5,-.5,.5,-.5,.5,.5,-.5,.5],2),this.geometry.addAttribute("aUvs",[0,0,1,0,1,1,0,1],2),this.geometry.addIndex([0,1,2,0,2,3]),this.material=new k.MeshMaterial(k.Texture.WHITE),this.mesh=new k.Mesh(this.geometry,this.material),this.mesh.scale.set(10,10),this.mesh.tint=16711680,this.addChild(this.mesh)}}]),e}(Pn);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Mn||(Mn={}));var Bn,_n=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=Mn.Null,i.sprite=void 0,i.sprite=new k.Sprite,i.sprite.anchor.set(.5,.5),i.addChild(i.sprite),i.addDebugLine(),i.setState(Mn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Mn.Active:this.visible=!0;break;case Mn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Mn.Active)}},{key:"inactive",value:function(){this.setState(Mn.Inactive)}},{key:"isInactive",value:function(){return this.state===Mn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Sn.from(n)}},{key:"setImgAnchor",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.sprite.anchor.set(n,t)}}]),e}(Pn);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Bn||(Bn={}));var In,An=new k.TextStyle({align:"center",fontFamily:"iCielUniSans",fill:["#fffbee"],stroke:"#e366b6",strokeThickness:6,fontSize:36,fontWeight:"900",lineJoin:"round"}),Nn=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=Bn.Null,i.sprite=void 0,i.numberText=void 0,i.chapterId=0,i.levelId=0,i.isTouchAble=!1,i.isPointerDown=!1,i.pointerDownPos={x:0,y:0},i.pointerDownTime=0,i.sprite=new k.Sprite,i.sprite.anchor.set(.5,1),i.numberText=new k.Text("",An),i.numberText.anchor.set(.5,.5),i.numberText.position.set(0,-70),i.interactive=!0,i.hitArea=new k.Rectangle(-60,-110,120,120),i.on("pointerdown",i.onPointerDown,(0,an.Z)(i)),i.on("pointerup",i.onPointerUp,(0,an.Z)(i)),i.on("pointercancel",i.onPointerCancle,(0,an.Z)(i)),i.on("pointerupoutside",i.onPointerCancle,(0,an.Z)(i)),i.addChild(i.sprite),i.addChild(i.numberText),i.addDebugLine(),i.addDebugRect(i.hitArea),i.setState(Bn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Bn.Active:this.visible=!0,this.isPointerDown=!1;break;case Bn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Bn.Active)}},{key:"inactive",value:function(){this.setState(Bn.Inactive)}},{key:"isInactive",value:function(){return this.state===Bn.Inactive}},{key:"setLevelInfo",value:function(n,t){this.chapterId=n,this.levelId=t,this.numberText.text="".concat(this.levelId),this.updateVisible()}},{key:"updateVisible",value:function(){var n,t,e,i,r,o,a=this,s=null===(n=I.Z.getState().user)||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.chapters,l=null===s||void 0===s||null===(e=s.find)||void 0===e||null===(i=e.call(s,(function(n){return n.id==a.chapterId})))||void 0===i||null===(r=i.levels)||void 0===r||null===(o=r.find)||void 0===o?void 0:o.call(r,(function(n){return n.id==a.levelId}));if(l){var c=[p.dN.worldMap.level0Star,p.dN.worldMap.level1Star,p.dN.worldMap.level2Star,p.dN.worldMap.level3Star];this.sprite.texture=Sn.from(c[l.stars]),this.isTouchAble=!0}else if(1==this.levelId)this.sprite.texture=Sn.from(p.dN.worldMap.level0Star),this.isTouchAble=!0;else{var u,h,d,f,m=null===s||void 0===s||null===(u=s.find)||void 0===u||null===(h=u.call(s,(function(n){return n.id==a.chapterId})))||void 0===h||null===(d=h.levels)||void 0===d||null===(f=d.find)||void 0===f?void 0:f.call(d,(function(n){return n.id==a.levelId-1}));this.sprite.texture=Sn.from(m?p.dN.worldMap.level0Star:p.dN.worldMap.levelDisable),this.isTouchAble=!!m}}},{key:"onClick",value:function(){this.isTouchAble&&(Yn.map.reload(this.levelId),a.r.emit(a.B.Navigate,p.dI.MainGame))}},{key:"onPointerDown",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerDown(n),this.isPointerDown=!0,this.pointerDownPos.x=n.data.global.x,this.pointerDownPos.y=n.data.global.y,this.pointerDownTime=Date.now()}},{key:"onPointerUp",value:function(n){var t;if(null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown){this.isPointerDown=!1;var e=n.data.global.x-this.pointerDownPos.x,i=n.data.global.y-this.pointerDownPos.y,r=Date.now()-this.pointerDownTime;e<=20&&i<=20&&r<=100&&this.onClick()}}},{key:"onPointerCancle",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown=!1}}]),e}(Pn);!function(n){n[n.Null=0]="Null",n[n.Start=1]="Start",n[n.Active=2]="Active",n[n.Inactive=3]="Inactive"}(In||(In={}));var En,On=function(n){(0,M.Z)(e,n);var t=(0,T.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this)).imagesDefine=null,i.chapters=[],i.chapter=null,i.gameRender=void 0,i.state=In.Null,i.camera=new Cn,i.grounds=[],i.decoObjects=[],i.levelPlatforms=[],i.isSortObjects=!1,i.groundLayer=new k.Container,i.objectLayer=new k.Container,i.gameRender=n,i.camera.onPositionChange=i.onCameraPositionChange.bind((0,an.Z)(i)),i.addChild(i.camera),i.addChild(i.groundLayer),i.addChild(i.objectLayer),i.setState(In.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case In.Start:this.visible=!0;break;case In.Active:break;case In.Inactive:this.visible=!1,this.inactiveAllObjects()}}},{key:"update",value:function(n){switch(this.state){case In.Start:this.setState(In.Active);break;case In.Active:this.camera.update(n),this.sortObjects();case In.Inactive:}}},{key:"start",value:function(){this.setState(In.Start)}},{key:"end",value:function(){this.setState(In.Inactive)}},{key:"setChapters",value:function(n,t,e){this.imagesDefine=n,this.chapters=t.map((function(n){return JSON.parse(JSON.stringify(n))}));var i=this.chapters.find((function(n){return n.id==e}));i&&this.setChapter(i)}},{key:"test",value:function(){var n=new Tn(this.camera);this.addChild(n),n.position.set(200,200)}},{key:"onCameraPositionChange",value:function(){var n=this,t=this.chapter,e=t.backgrounds,i=t.decors,r=t.checkpoints,o=t.id,a=this.gameRender.app.renderer.height,s=this.camera.mapPosition.y-.7*a,l=this.camera.mapPosition.y+.7*a;this.grounds.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y)&&n.inactive()})),e.forEach((function(t){var e;if(!(l<t.y)){var i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s)){var o=n.grounds.find((function(n){return n.mapPosition.y==t.y}));o||(o=n.getObject(n.grounds,Tn,n.groundLayer)),o.isInactive()&&(o.active(),o.setImg(i.url),o.objectHeight=r,o.mapPosition={x:0,y:t.y})}}})),this.decoObjects.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),i.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s||l<t.y-r)){var o=n.decoObjects.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));o||(o=n.getObject(n.decoObjects,_n,n.objectLayer,null===i||void 0===i?void 0:i.url)),o.isInactive()&&(o.active(),o.setImg(null===i||void 0===i?void 0:i.url),o.setImgAnchor(null===i||void 0===i?void 0:i.anchorX,null===i||void 0===i?void 0:i.anchorY),o.objectHeight=r,o.mapPosition={x:t.x,y:t.y})}})),this.levelPlatforms.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),r.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s||l<t.y-r)){var a=n.levelPlatforms.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));a||(a=n.getObject(n.levelPlatforms,Nn,n.objectLayer)),a.isInactive()&&(a.active(),a.setLevelInfo(o,t.id),a.mapPosition={x:t.x,y:t.y})}})),this.groundLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.objectLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.onObjectPostionChange()}},{key:"onObjectPostionChange",value:function(){this.isSortObjects=!0}},{key:"getObject",value:function(n,t,e,i){var r=n.find((function(n){var t,e,r=null===(t=(e=n).getImg)||void 0===t?void 0:t.call(e);return i?n.isInactive()&&(!r||r==i):n.isInactive()}));return r||((r=new t(this.camera)).onPositionChange=this.onObjectPostionChange.bind(this),n.push(r),e.addChild(r)),r}},{key:"sortObjects",value:function(){this.isSortObjects&&(this.isSortObjects=!1,this.objectLayer.children.sort((function(n,t){return n.position.y-t.position.y})))}},{key:"inactiveAllObjects",value:function(){this.groundLayer.children.forEach((function(n){return n.inactive()})),this.objectLayer.children.forEach((function(n){return n.inactive()}))}},{key:"setChapter",value:function(n){var t,e;this.chapter=n;var i=this.chapter,r=i.backgrounds,o=i.offsetTop,a=i.offsetBottom;this.inactiveAllObjects();var s=r[r.length-1],l=(null===(t=this.imagesDefine)||void 0===t||null===(e=t[s.imageId])||void 0===e?void 0:e.height)||0,c=j,u=j/window.innerWidth*window.innerHeight;this.camera.setHitAreaSize(c,u),this.camera.setYMinMax(0+.5*u+a,s.y+l-.5*u+o),this.camera.mapPosition={x:0,y:0},this.camera.active()}}]),e}(k.Container),Ln=function(){function n(){(0,c.Z)(this,n),this.render=void 0,this.map=void 0,this.worldMap=void 0,this._isPlaying=!0,this.render=new S({fitWidth:!0,trasparent:0,alignCenter:!0,maxFPS:45,minFPS:30}),this.init(),console.log("[PixiJs] constructor"),this.render.onUpdate=this.onUpdate.bind(this)}return(0,u.Z)(n,[{key:"view",get:function(){return this.render.view}},{key:"scale",get:function(){return this.render.app.stage.scale}},{key:"initDom",value:function(n){this.render.init(n),this.render.setParent(n)}},{key:"init",value:function(){this.worldMap=new On(this.render),this.render.stage.addChild(this.worldMap),this.map=new Zn(window.location.href.includes(p.dI.ColorTool)),this.render.stage.addChild(this.map)}},{key:"onUpdate",value:function(n){var t,e;null===(t=this.worldMap)||void 0===t||t.update(n),null===(e=this.map)||void 0===e||e.update(n)}},{key:"pause",value:function(){this.isPlaying=!1,this.render.pause()}},{key:"resume",value:function(){this.isPlaying=!0,this.render.resume()}},{key:"getObjectAbsolutePos",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},e=n.x,i=n.y,r=n.parent;r;)e*=r.scale.x,e+=r.x,i*=r.scale.y,i+=r.y,r=r.parent;return{x:(e+t.x)/window.innerWidth*100,y:(i+t.y)/window.innerHeight*100}}},{key:"isPlaying",get:function(){return this._isPlaying},set:function(n){this._isPlaying=n}},{key:"startWorldMap",value:function(){this.worldMap.start(),this.map&&(this.map.visible=!1)}},{key:"endWorldMap",value:function(){this.worldMap.end(),this.map&&(this.map.visible=!0),this.render.app.render()}},{key:"setChapters",value:function(n,t,e){this.worldMap.setChapters(n,t,e)}}]),n}(),Yn=new Ln,Dn=e(6417);function Rn(){var n=(0,i.useRef)(null);w((function(n){return n.game.gameConfig})),b();return(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){return Yn.initDom(n.current),function(){}}),[n.current]),(0,i.useEffect)((function(){var t=function(){setTimeout((function(){Yn.initDom(n.current),Yn.resume()}),500)},e=function(){Yn.pause()};return t(),a.r.on(a.B.On_RESUME,t),a.r.on(a.B.On_PAUSE,e),a.r.on(a.B.ON_RESIZE,t),function(){e(),a.r.off(a.B.On_RESUME,t),a.r.off(a.B.On_PAUSE,e),a.r.off(a.B.ON_RESIZE,t)}}),[]),(0,Dn.jsx)(Xn,{className:"game",ref:n})}var Un,zn,Fn,Hn,Vn,Gn,Wn,qn,Xn=Z.ZP.div(En||(En=(0,x.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n"]))),Qn=e(1772);function Jn(n){var t=(0,i.useState)(d.P.getInCache(n)||""),e=(0,mn.Z)(t,2),r=e[0],o=e[1];return(0,i.useLayoutEffect)((function(){n&&d.P.cacheFile(n).then((function(n){o(n)}))}),[n]),r}var Kn,$n,nt,tt,et,it,rt,ot,at,st,lt,ct,ut,ht,dt,pt,ft,mt,gt,xt,vt,yt,bt,wt,Zt,kt,Pt,jt,Ct,St,Mt,Tt,Bt,_t,It,At,Nt,Et,Ot,Lt,Yt,Dt,Rt,Ut,zt,Ft,Ht,Vt,Gt,Wt,qt=Z.ZP.div(Un||(Un=(0,x.Z)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Xt=Z.ZP.div(zn||(zn=(0,x.Z)(["\n    min-width: 80px;\n\n    border: 1px solid #000;\n    border-radius: 5px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    padding: 5px 10px;\n"]))),Qt=Z.ZP.div(Fn||(Fn=(0,x.Z)(["\n    font-size: 20px;\n    color: #000;\n    text-align: center;\n    white-space: nowrap;\n"]))),Jt=Z.ZP.div(Hn||(Hn=(0,x.Z)(["\n    background-image: url(",");\n    background-size: contain;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    width: ",";\n    height: ",";\n"])),(function(n){return n.src}),(function(n){return n.width||"unset"}),(function(n){return n.height||"unset"})),Kt=Z.ZP.div(Vn||(Vn=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n\n    background-color: rgba(0, 0, 0, 0.8);\n    z-index: 10;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"]))),$t=(0,Z.ZP)(Jt)(Gn||(Gn=(0,x.Z)(["\n    width: ",";\n    height: ",";\n\n    background-size: 100% 100%;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    margin-top: ",";\n"])),(function(n){return n.width||"135px"}),(function(n){return n.height||"40px"}),(function(n){return n.marginTop||"unset"})),ne=Z.ZP.div(Wn||(Wn=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"])),(function(n){return n.fontSize||"18px"})),te=Z.ZP.div(qn||(qn=(0,x.Z)(["\n    width: ",";\n    height: ",";\n    background-image: ",";\n    background-size: 100% 100%;\n"])),(function(n){return n.width}),(function(n){return n.height}),(function(n){return'url("'.concat(n.src,'")')})),ee=function(){return(0,Dn.jsxs)(ie,{src:Jn(p.dN.general.ballBgIcon),children:[(0,Dn.jsx)(re,{src:Jn(p.dN.onboarding.ball1)}),(0,Dn.jsx)(oe,{children:(0,Dn.jsx)(ae,{children:"50"})})]})},ie=(0,Z.ZP)(Jt)(Kn||(Kn=(0,x.Z)(["\n    width: 50px;\n    height: 41px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 3px;\n"]))),re=(0,Z.ZP)(Jt)($n||($n=(0,x.Z)(["\n    width: 28px;\n    height: 28px;\n    flex: none;\n"]))),oe=Z.ZP.div(nt||(nt=(0,x.Z)(["\n    height: 15px;\n    min-width: 32px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 7px;\n    flex: none;\n"]))),ae=Z.ZP.div(tt||(tt=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n"]))),se=function(){return(0,Dn.jsxs)(le,{children:[(0,Dn.jsxs)(ce,{children:[(0,Dn.jsx)(ue,{src:Jn(p.dN.general.flagIcon)}),(0,Dn.jsx)(he,{children:"M\u1ee5c ti\xeau"})]}),(0,Dn.jsxs)(de,{children:[(0,Dn.jsx)(ee,{}),(0,Dn.jsx)(ee,{})]})]})},le=Z.ZP.div(et||(et=(0,x.Z)(["\n    position: absolute;\n    bottom: 24px;\n    left: 24px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n"]))),ce=Z.ZP.div(it||(it=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),ue=(0,Z.ZP)(Jt)(rt||(rt=(0,x.Z)(["\n    width: 13px;\n    height: 15px;\n"]))),he=Z.ZP.div(ot||(ot=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fff;\n"]))),de=Z.ZP.div(at||(at=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n"]))),pe=function(n){var t=n.starScore,e=n.maxScore,i=w((function(n){return n.mainGame.currentGame.score})),r=Jn(p.dN.general.starIconDisable),o=Jn(p.dN.general.starIconAble);return(0,Dn.jsx)(fe,{left:"".concat(t/e*100,"%"),children:i>=t?(0,Dn.jsx)(ge,{src:o}):(0,Dn.jsx)(me,{src:r})})},fe=Z.ZP.div(st||(st=(0,x.Z)(["\n    position: absolute;\n    left: ",";\n    top: 50%;\n    transform: translate(-50%, -50%);\n"])),(function(n){return n.left})),me=(0,Z.ZP)(Jt)(lt||(lt=(0,x.Z)(["\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n"]))),ge=(0,Z.ZP)(me)(ct||(ct=(0,x.Z)(["\n    width: 36px;\n    height: 36px;\n"]))),xe=function(){var n=w((function(n){return n.mainGame.currentGame})),t=n.score,e=n.star1Score,i=n.star2Score,r=n.star3Score,o=r/85*100,a=t/o*100;return(0,Dn.jsxs)(ve,{children:[(0,Dn.jsx)(ye,{children:kn.convertNumberToScoreString(t)}),(0,Dn.jsx)(be,{src:Jn(p.dN.general.progressBarBg),children:(0,Dn.jsxs)(we,{children:[(0,Dn.jsx)(Ze,{style:{clipPath:"polygon(0% 0%, ".concat(a,"% 0%, ").concat(a,"% 100%, 0 100%)")}}),[e,i,r].map((function(n,t){return(0,Dn.jsx)(pe,{starScore:n,maxScore:o},t)}))]})})]})},ve=Z.ZP.div(ut||(ut=(0,x.Z)(["\n    position: absolute;\n    bottom: 28px;\n    right: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n"]))),ye=Z.ZP.div(ht||(ht=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n"]))),be=(0,Z.ZP)(Jt)(dt||(dt=(0,x.Z)(["\n    width: 141px;\n    height: 24px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),we=Z.ZP.div(pt||(pt=(0,x.Z)(["\n    width: 132px;\n    height: 4px;\n    position: relative;\n"]))),Ze=Z.ZP.div(ft||(ft=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-image: linear-gradient(90deg, #ff0000, #ffff00);\n    border-radius: 2px;\n"]))),ke=function(){return(0,Dn.jsxs)(Pe,{src:Jn(p.dN.MainGame.headerBg),children:[(0,Dn.jsx)(se,{}),(0,Dn.jsx)(xe,{})]})},Pe=(0,Z.ZP)(Jt)(mt||(mt=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 138px;\n    position: absolute;\n    top: -4px;\n    left: 0px;\n"]))),je=function(){var n=b();return(0,Dn.jsx)(Ce,{children:(0,Dn.jsx)(Se,{src:p.dN.MainGame.optionBtn,onClick:function(){n(A.X.actions.setSettingPopupVisible(!0))}})})},Ce=Z.ZP.div(gt||(gt=(0,x.Z)(["\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n    width: 100%;\n"]))),Se=(0,Z.ZP)(Jt)(xt||(xt=(0,x.Z)(["\n    position: absolute;\n    left: 24px;\n    bottom: 45px;\n\n    width: 32px;\n    height: 32px;\n"]))),Me=function(n){var t=n.title,e=n.children,i=n.onClose;return(0,Dn.jsx)(Kt,{children:(0,Dn.jsxs)(Te,{children:[(0,Dn.jsx)(Be,{src:Jn(p.dN.general.popupHeader),children:(0,Dn.jsx)(_e,{children:t})}),(0,Dn.jsxs)(Ie,{children:[(0,Dn.jsx)(Ae,{src:Jn(p.dN.general.popupBody)}),(0,Dn.jsx)(Ne,{src:Jn(p.dN.general.popupBody),children:e}),(0,Dn.jsx)(Ee,{src:Jn(p.dN.general.popupBody)})]}),(0,Dn.jsx)(Oe,{src:Jn(p.dN.general.exitBtn1),onClick:function(){null===i||void 0===i||i()}})]})})},Te=Z.ZP.div(vt||(vt=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    position: relative;\n    width: 327px;\n"]))),Be=(0,Z.ZP)(Jt)(yt||(yt=(0,x.Z)(["\n    flex: none;\n    width: 100%;\n    height: 63px;\n    margin-bottom: -9px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"]))),_e=Z.ZP.div(bt||(bt=(0,x.Z)(["\n    text-shadow: 0 -1px 3px rgba(0, 0, 0, 0.5);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 12px;\n"]))),Ie=Z.ZP.div(wt||(wt=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n"]))),Ae=(0,Z.ZP)(Jt)(Zt||(Zt=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 0px;\n    background-repeat: no-repeat;\n"]))),Ne=(0,Z.ZP)(Jt)(kt||(kt=(0,x.Z)(["\n    width: 100%;\n    background-origin: border-box;\n    background-size: 100% 200%;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    /* height: 50px; */\n\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Ee=(0,Z.ZP)(Jt)(Pt||(Pt=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-repeat: no-repeat;\n"]))),Oe=(0,Z.ZP)(Jt)(jt||(jt=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 15px;\n    right: 0px;\n"]))),Le=function(n){var t=n.title,e=n.ctaText,i=n.onClose,r=n.onCta;return(0,Dn.jsx)(Me,{title:t,onClose:i,children:(0,Dn.jsxs)(Ye,{children:[(0,Dn.jsxs)(De,{children:[(0,Dn.jsx)(Re,{src:Jn(p.dN.general.soundIcon)}),(0,Dn.jsx)(Ue,{children:"\xc2m thanh"}),(0,Dn.jsx)(ze,{src:Jn(p.dN.general.switchBtnOn)})]}),(0,Dn.jsx)(Fe,{}),(0,Dn.jsxs)(De,{children:[(0,Dn.jsx)(Re,{src:Jn(p.dN.general.vibraIcon)}),(0,Dn.jsx)(Ue,{children:"Rung"}),(0,Dn.jsx)(ze,{src:Jn(p.dN.general.switchBtnOn)})]}),(0,Dn.jsx)(De,{children:(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_1),onClick:function(){null===r||void 0===r||r()},children:(0,Dn.jsx)(ne,{children:e})})})]})})},Ye=Z.ZP.div(Ct||(Ct=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n\n    margin: 5px 0px;\n"]))),De=Z.ZP.div(St||(St=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    width: 100%;\n"]))),Re=(0,Z.ZP)(Jt)(Mt||(Mt=(0,x.Z)(["\n    flex: none;\n    width: 32px;\n    height: 32px;\n"]))),Ue=Z.ZP.div(Tt||(Tt=(0,x.Z)(["\n    flex: auto;\n\n    font-family: SFProText;\n    font-size: 14px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),ze=(0,Z.ZP)(Jt)(Bt||(Bt=(0,x.Z)(["\n    flex: none;\n    width: 60px;\n    height: 28px;\n"]))),Fe=Z.ZP.div(_t||(_t=(0,x.Z)(["\n    width: 100%;\n    height: 2px;\n    background-color: #cba5ff;\n"]))),He=function(){var n=w((function(n){return n.mainGame.isSettingPopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(Ve,{})})},Ve=function(){var n=b();return(0,Dn.jsx)(Le,{title:"Thi\u1ebft l\u1eadp",ctaText:"D\u1eebng tr\u1eadn \u0111\u1ea5u",onClose:function(){n(A.X.actions.setSettingPopupVisible(!1))},onCta:function(){n(A.X.actions.setSettingPopupVisible(!1)),n(A.X.actions.setConfirmExitPopupVisible(!0))}})},Ge=function(){var n=w((function(n){return n.mainGame.isConfirmExitPopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(We,{})})},We=function(){var n=b(),t=function(){n(A.X.actions.setConfirmExitPopupVisible(!1))};return(0,Dn.jsx)(Me,{title:"K\u1ebft th\xfac tr\xf2 ch\u01a1i",onClose:t,children:(0,Dn.jsxs)(qe,{children:[(0,Dn.jsx)(Xe,{src:Jn(p.dN.general.closeGameBanner)}),(0,Dn.jsxs)(Qe,{children:[(0,Dn.jsx)(Je,{children:"B\u1ea1n s\u1ebd b\u1ecb "}),(0,Dn.jsx)(Je,{children:"-1 "}),(0,Dn.jsx)(Ke,{src:Jn(p.dN.general.miniHeartIcon)}),(0,Dn.jsx)(Je,{children:" n\u1ebfu k\u1ebft th\xfac tr\xf2 ch\u01a1i m\xe0 ch\u01b0a ho\xe0n th\xe0nh m\u1ee5c ti\xeau"})]}),(0,Dn.jsxs)($e,{children:[(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_2),onClick:function(){n(A.X.actions.setConfirmExitPopupVisible(!1)),a.r.emit(a.B.Navigate,-1)},children:(0,Dn.jsx)(ne,{children:"\u0110\u1ed3ng \xfd"})}),(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_1),onClick:t,children:(0,Dn.jsx)(ne,{children:"Ch\u01a1i ti\u1ebfp"})})]})]})})},qe=Z.ZP.div(It||(It=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),Xe=(0,Z.ZP)(Jt)(At||(At=(0,x.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),Qe=Z.ZP.div(Nt||(Nt=(0,x.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Je=Z.ZP.div(Et||(Et=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),Ke=(0,Z.ZP)(Jt)(Ot||(Ot=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-bottom: -3px;\n"]))),$e=Z.ZP.div(Lt||(Lt=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n"]))),ni=e(1884),ti=function(){var n=w((function(n){return n.mainGame.isWinPopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(ei,{})})},ei=function(){var n=b(),t=w((function(n){return n.mainGame.currentGame})),e=t.score,r=t.level,o=t.star1Score,s=t.star2Score,l=t.star3Score,c=w((function(n){return n.user.profile.chapterId}));(0,i.useEffect)((function(){n((0,ni.GE)({chapterId:c,levelId:r,stars:e>=l?3:e>=s?2:e>=o?1:0,highScore:e}))}),[]);return(0,Dn.jsxs)(Kt,{children:[(0,Dn.jsxs)(ii,{src:Jn(p.dN.MainGame.winBg),children:[(0,Dn.jsx)(oi,{fontSize:"20px",marginTop:"82px",children:"V\u01b0\u1ee3t \u1ea3i th\xe0nh c\xf4ng"}),(0,Dn.jsx)(oi,{fontSize:"16px",marginTop:"30px",children:"\u0110i\u1ec3m"}),(0,Dn.jsx)(ai,{fontSize:"32px",marginTop:"10px",children:kn.convertNumberToScoreString(e)})]}),(0,Dn.jsx)(ri,{height:"20px"}),(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_1),width:"200px",height:"46px",onClick:function(){n(A.X.actions.setWinPopupVisible(!1)),Yn.map.reload(r+1)},children:(0,Dn.jsx)(ne,{children:"\u1ea2i ti\u1ebfp theo"})}),(0,Dn.jsx)(si,{src:Jn(p.dN.general.exitBtn2),onClick:function(){n(A.X.actions.setWinPopupVisible(!1)),a.r.emit(a.B.Navigate,-1)}})]})},ii=(0,Z.ZP)(Jt)(Yt||(Yt=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),ri=Z.ZP.div(Dt||(Dt=(0,x.Z)(["\n    height: ",";\n"])),(function(n){return n.height})),oi=Z.ZP.div(Rt||(Rt=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),ai=Z.ZP.div(Ut||(Ut=(0,x.Z)(["\n    text-shadow: 0 1px 8px rgba(231, 116, 255, 0.75);\n    -webkit-text-stroke: 1px rgba(207, 7, 240, 0.69);\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),si=(0,Z.ZP)(Jt)(zt||(zt=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"]))),li=function(){var n=w((function(n){return n.mainGame.isLosePopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(ci,{})})},ci=function(){return(0,Dn.jsxs)(Kt,{children:[(0,Dn.jsxs)(ui,{src:Jn(p.dN.MainGame.loseBg),children:[(0,Dn.jsx)(hi,{fontSize:"20px",marginTop:"83px",children:"V\u01b0\u1ee3t \u1ea3i th\u1ea5t b\u1ea1i"}),(0,Dn.jsx)(di,{fontSize:"12px",marginTop:"15px",children:"Ho\xe0n th\xe0nh t\u1ea5t c\xe1c m\u1ee5c ti\xeau c\u1ee7a \u1ea3i \u0111\u1ec3 chi\u1ebfn th\u1eafng"})]}),(0,Dn.jsxs)($t,{src:Jn(p.dN.general.button_1),marginTop:"24px",width:"200px",height:"46px",children:[(0,Dn.jsx)(ne,{children:"Ch\u01a1i l\u1ea1i (-1"}),(0,Dn.jsx)(Jt,{src:Jn(p.dN.general.miniHeartIcon),width:"24px",height:"24px"}),(0,Dn.jsx)(ne,{children:")"})]}),(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_2),marginTop:"16px",width:"200px",height:"46px",children:(0,Dn.jsx)(ne,{children:"Trang ch\u1ee7"})}),(0,Dn.jsx)(pi,{src:Jn(p.dN.general.exitBtn2),onClick:function(){}})]})},ui=(0,Z.ZP)(Jt)(Ft||(Ft=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),hi=Z.ZP.div(Ht||(Ht=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),di=Z.ZP.div(Vt||(Vt=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: ",";\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fff;\n    margin-top: ",";\n    width: 75%;\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),pi=(0,Z.ZP)(Jt)(Gt||(Gt=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"])));function fi(n){var t=v(),e=(b(),w((function(n){return n.game.gameConfig})));return(0,i.useEffect)((function(){e&&"{}"!==JSON.stringify(e)&&Qn.Z.send({stage:"space_scr_main"})}),[e]),(0,i.useEffect)((function(){return a.r.on(a.B.ON_BACK_KEY,(function(){t(-1)})),function(){a.r.removeAllListeners(a.B.ON_BACK_KEY)}}),[]),(0,i.useEffect)((function(){}),[e]),(0,Dn.jsxs)(vi,{children:[(0,Dn.jsx)(Rn,{}),(0,Dn.jsx)(ke,{}),(0,Dn.jsx)(je,{}),(0,Dn.jsx)(He,{}),(0,Dn.jsx)(Ge,{}),(0,Dn.jsx)(ti,{}),(0,Dn.jsx)(li,{})]})}var mi,gi,xi,vi=Z.ZP.div(Wt||(Wt=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),yi=function(){var n=v();return(0,Dn.jsx)(qt,{children:(0,Dn.jsxs)(bi,{children:[(0,Dn.jsx)(wi,{children:p.bO.MainMenu.gameName}),(0,Dn.jsx)("div",{style:{height:"150px"}}),(0,Dn.jsx)(Xt,{onClick:function(){console.log("onClickPlayButton"),n(p.dI.WorldMap)},children:(0,Dn.jsx)(Qt,{children:p.bO.MainMenu.playButton})}),(0,Dn.jsx)("div",{style:{height:"0px"}})]})})},bi=Z.ZP.div(mi||(mi=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),wi=Z.ZP.div(gi||(gi=(0,x.Z)(["\n    width: 250px;\n    font-size: 35px;\n    color: #000;\n    text-align: center;\n"])));function Zi(){var n=(0,i.useRef)(null),t=(0,o.s0)(),e=(0,i.useState)(!1),r=(0,mn.Z)(e,2),s=r[0],l=r[1],c=(0,i.useState)(""),u=(0,mn.Z)(c,2),h=u[0],d=u[1],p=(0,i.useState)({}),f=(0,mn.Z)(p,2),m=f[0],g=f[1];(0,i.useEffect)((function(){return a.r.on(a.B.Navigate,x),function(){a.r.removeAllListeners(a.B.Navigate)}}),[]),(0,i.useEffect)((function(){s&&(t(h,m),_.ZP.fromTo(n.current,{opacity:1},{opacity:0,duration:.5,onComplete:function(){l(!1)}}))}),[s,h]);var x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(n),g(t),l(!0)};return s?(0,Dn.jsx)(Ur,{ref:n}):null}var ki,Pi,ji,Ci,Si,Mi,Ti,Bi,_i,Ii,Ai,Ni,Ei,Oi,Li,Yi,Di,Ri,Ui,zi,Fi,Hi,Vi,Gi,Wi,qi,Xi,Qi,Ji,Ki,$i,nr,tr,er,ir,rr,or,ar,sr,lr,cr,ur,hr,dr,pr,fr,mr,gr,xr,vr,yr,br,wr,Zr,kr,Pr,jr,Cr,Sr,Mr,Tr,Br,_r,Ir,Ar,Nr,Er,Or,Lr,Yr,Dr,Rr,Ur=Z.ZP.div(xi||(xi=(0,x.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000;\n    z-index: 9999;\n"]))),zr=function(n){var t=n.onStart,e=n.onEnd,r=n.onInitDom,o=n.onResume,s=n.onPause,l=(0,i.useRef)(null);return(0,i.useEffect)((function(){l.current&&(null===r||void 0===r||r(l.current))}),[l,r]),(0,i.useEffect)((function(){return null===t||void 0===t||t(),null===o||void 0===o||o(),a.r.on(a.B.On_RESUME,o),a.r.on(a.B.ON_RESIZE,o),a.r.on(a.B.On_PAUSE,s),function(){null===e||void 0===e||e(),null===s||void 0===s||s(),a.r.off(a.B.On_RESUME,o),a.r.off(a.B.ON_RESIZE,o),a.r.off(a.B.On_PAUSE,s)}}),[e,s,o,t]),(0,Dn.jsx)(Fr,{ref:l})},Fr=Z.ZP.div(ki||(ki=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    overflow: hidden;\n"]))),Hr=e(2072),Vr=function(n){var t=n.children;return(0,Dn.jsxs)(Dn.Fragment,{children:[(0,Dn.jsx)(Gr,{src:Jn(p.dN.onboarding.speechBubble)}),(0,Dn.jsxs)(qr,{children:[(0,Dn.jsx)(Xr,{src:Jn(p.dN.onboarding.speechBubble)}),t]}),(0,Dn.jsx)(Wr,{src:Jn(p.dN.onboarding.speechBubble)})]})},Gr=(0,Z.ZP)(Jt)(Pi||(Pi=(0,x.Z)(["\n    width: 100%;\n    height: 25px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),Wr=(0,Z.ZP)(Gr)(ji||(ji=(0,x.Z)(["\n    background-position: 0px 100%;\n"]))),qr=Z.ZP.div(Ci||(Ci=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 5px;\n    margin-top: -10px;\n    margin-bottom: -10px;\n"]))),Xr=(0,Z.ZP)(Jt)(Si||(Si=(0,x.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% 1000%;\n    background-position: 0px 50%;\n    position: absolute;\n    left: 0;\n    top: 10px;\n    bottom: 10px;\n"]))),Qr=Z.ZP.div(Mi||(Mi=(0,x.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 130%;\n    letter-spacing: normal;\n    color: #681c8d;\n    position: relative;\n    z-index: 2;\n    margin: 0px 15px;\n    width: calc(100% - 30px);\n"])),(function(n){return n.fontFamily||"SFProText"}),(function(n){return n.fontSize||"12px"})),Jr=Z.ZP.div(Ti||(Ti=(0,x.Z)(["\n    width: 240px;\n    position: absolute;\n    bottom: ",";\n    right: ",";\n"])),(function(n){return n.bottom||"130px"}),(function(n){return n.right||"20px"})),Kr=(0,Z.ZP)(Kt)(Bi||(Bi=(0,x.Z)(["\n    *{\n        pointer-events: none;\n    }\n"]))),$r=(0,Z.ZP)(Jt)(_i||(_i=(0,x.Z)(["\n    width: 100%;\n    height: ",";\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n"])),(function(n){return n.height||"286px"})),no=function(n){var t=n.children,e=n.speechBubbleContent,i=n.speechBubbleMarginTop;return(0,Dn.jsxs)(to,{children:[(0,Dn.jsx)(eo,{src:Jn(p.dN.onboarding.stageTop)}),t,(0,Dn.jsxs)(io,{src:Jn(p.dN.onboarding.stageBottom),children:[(0,Dn.jsx)(ro,{src:Jn(p.dN.onboarding.mascot)}),(0,Dn.jsx)(oo,{marginTop:i,children:(0,Dn.jsx)(Vr,{children:e})})]})]})},to=Z.ZP.div(Ii||(Ii=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),eo=(0,Z.ZP)(Jt)(Ai||(Ai=(0,x.Z)(["\n    width: 100%;\n    height: 44px;\n    position: relative;\n    z-index: 1;\n"]))),io=(0,Z.ZP)(Jt)(Ni||(Ni=(0,x.Z)(["\n    width: 100%;\n    height: 92px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n"]))),ro=(0,Z.ZP)(Jt)(Ei||(Ei=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    margin-bottom: 80px;\n"]))),oo=Z.ZP.div(Oi||(Oi=(0,x.Z)(["\n    width: 236px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),ao=function(n){var t=n.content,e=n.marginTop;return(0,Dn.jsxs)(so,{marginTop:e,children:[(0,Dn.jsx)(lo,{src:Jn(p.dN.onboarding.iIcon)}),(0,Dn.jsx)(co,{children:t})]})},so=Z.ZP.div(Li||(Li=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),lo=(0,Z.ZP)(Jt)(Yi||(Yi=(0,x.Z)(["\n    width: 15px;\n    height: 15px;\n    margin-right: 2px;\n    margin-bottom: -1px;\n"]))),co=Z.ZP.div(Di||(Di=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 10px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n"]))),uo=(0,Z.ZP)(Kr)(Ri||(Ri=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    background-blend-mode: multiply;\n"])),(function(n){return n.src})),ho=Z.ZP.div(Ui||(Ui=(0,x.Z)(["\n    width: 100%;\n    min-height: ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),(function(n){return n.minHeight})),po=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_1")}),[]);return(0,Dn.jsxs)(Kr,{children:[(0,Dn.jsx)($r,{src:Jn(p.dN.onboarding.step1Bottom)}),(0,Dn.jsxs)(fo,{children:[(0,Dn.jsxs)(mo,{src:Jn(p.dN.onboarding.levelEffect),children:[(0,Dn.jsx)(go,{src:Jn(p.dN.onboarding.level1),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())}}),(0,Dn.jsx)(vo,{src:Jn(p.dN.onboarding.hand)})]}),(0,Dn.jsx)(bo,{src:Jn(p.dN.onboarding.effectLightLeft)}),(0,Dn.jsx)(wo,{src:Jn(p.dN.onboarding.effectLightRight)})]}),(0,Dn.jsxs)(Jr,{children:[(0,Dn.jsxs)(Vr,{children:[(0,Dn.jsx)(Qr,{children:"Ch\xe0o m\u1eebng idol \u0111\u1ebfn v\u1edbi h\xe0nh tr\xecnh kh\xe1m ph\xe1 \xe2m nh\u1ea1c"}),(0,Dn.jsx)(Qr,{children:"C\xf9ng tui \u0111\u1ebfn v\u1edbi th\u1eed th\xe1ch \u0111\u1ea7u ti\xean n\xe0o"})]}),(0,Dn.jsx)(ao,{content:"Nh\u1ea5p v\xe0o \u1ea2i theo h\u01b0\u1edbng ng\xf3n tay",marginTop:"5px"})]})]})},fo=Z.ZP.div(zi||(zi=(0,x.Z)(["\n    width: 100%;\n    height: 0;\n    position: absolute;\n    left: 0;\n    bottom: 300px;\n"]))),mo=(0,Z.ZP)(Jt)(Fi||(Fi=(0,x.Z)(["\n    width: 94px;\n    height: 54px;\n    position: absolute;\n    bottom: 0;\n    left: 51%;\n    transform: translate(-50%, 50%);\n"]))),go=(0,Z.ZP)(Jt)(Hi||(Hi=(0,x.Z)(["\n    width: 51px;\n    height: 49px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    pointer-events: auto;\n"]))),xo=(0,Z.F4)(Vi||(Vi=(0,x.Z)(["\n    0% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n    20% {        transform: translate(calc(-50% + 30px), calc(50% + 0px)) rotate(-30deg) scale(1);    }\n    100% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n"]))),vo=(0,Z.ZP)(Jt)(Gi||(Gi=(0,x.Z)(["\n    width: 45px;\n    height: 39px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n"])),xo),yo=(0,Z.F4)(Wi||(Wi=(0,x.Z)(["\n    0% {\n        opacity: 1;\n        transform: rotate(-1deg) scale(1.05);\n    }\n    100% {\n        opacity: 0.7;\n        transform: rotate(1deg) scale(1);\n    }\n"]))),bo=(0,Z.ZP)(Jt)(qi||(qi=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -50px;\n    left: -45px;\n    transform-origin: 5% 5%;\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),yo),wo=(0,Z.ZP)(Jt)(Xi||(Xi=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -60px;\n    right: -25px;\n    transform-origin: 95% 5%;\n    animation-name: ",";\n    animation-duration: 2.3s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),yo),Zo=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_2")}),[]);return(0,Dn.jsxs)(Kr,{children:[(0,Dn.jsx)($r,{src:Jn(p.dN.onboarding.step2Bottom)}),(0,Dn.jsxs)(ko,{children:[(0,Dn.jsx)(Po,{children:(0,Dn.jsx)(jo,{src:Jn(p.dN.onboarding.ballBg),children:(0,Dn.jsx)(So,{src:Jn(p.dN.onboarding.ball1)})})}),(0,Dn.jsx)(Po,{children:(0,Dn.jsx)(jo,{src:Jn(p.dN.onboarding.ballBg),children:(0,Dn.jsx)(So,{src:Jn(p.dN.onboarding.ball2),animationDelay:"0.5s"})})}),(0,Dn.jsx)(Po,{children:(0,Dn.jsx)(jo,{src:Jn(p.dN.onboarding.ballBg),children:(0,Dn.jsx)(So,{src:Jn(p.dN.onboarding.ball3),animationDelay:"1s"})})}),(0,Dn.jsx)(Po,{children:(0,Dn.jsx)(jo,{src:Jn(p.dN.onboarding.ballBg),children:(0,Dn.jsx)(So,{src:Jn(p.dN.onboarding.ball4),animationDelay:"1.5s"})})})]}),(0,Dn.jsx)(Jr,{bottom:"215px",children:(0,Dn.jsxs)(Vr,{children:[(0,Dn.jsx)(Qr,{fontSize:"16px",fontFamily:"iCielUniSans",children:"Th\u1eed th\xe1ch \u0111\u1ea7u ti\xean"}),(0,Dn.jsx)(Qr,{children:"L\xe0m quen \xe2m nh\u1ea1c"})]})}),(0,Dn.jsx)(Mo,{src:Jn(p.dN.onboarding.step2CtaBtn),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())},children:(0,Dn.jsx)(ne,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},ko=Z.ZP.div(Qi||(Qi=(0,x.Z)(["\n    position: absolute;\n    bottom: 145px;\n    right: 10px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),Po=Z.ZP.div(Ji||(Ji=(0,x.Z)(["\n    width: 56px;\n    height: 15px;\n    margin: 35px 0 0;\n    box-shadow: 0 0 0 0.5px #ffd8eb, inset 0 0 0 0.5px #ffd8eb, 0 0 0 1px #fff6fa, inset 0 0 0 1px #fff6fa, 0 0 4px 2px #ff89d5, 0 0 2px 1px rgba(255, 255, 255, 0.5);\n    border-radius: 50%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),jo=(0,Z.ZP)(Jt)(Ki||(Ki=(0,x.Z)(["\n    width: 48px;\n    height: 40px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    margin-bottom: 25px;\n"]))),Co=(0,Z.F4)($i||($i=(0,x.Z)(["\n    0% {transform: translateY(0px)}\n    100% {transform: translateY(-3px)}\n"]))),So=(0,Z.ZP)(Jt)(nr||(nr=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    margin-bottom: 28px;\n    flex: none;\n    animation-name: ",";\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n    animation-direction: alternate;\n    animation-delay: ",";\n"])),Co,(function(n){return n.animationDelay||"unset"})),Mo=(0,Z.ZP)($t)(tr||(tr=(0,x.Z)(["\n    width: 336px;\n    height: 46px;\n    position: absolute;\n    bottom: 41px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: auto;\n"]))),To=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_3")}),[]);return(0,Dn.jsxs)(Bo,{src:Jn(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())},children:[(0,Dn.jsx)(_o,{src:Jn(p.dN.MainGame.backgroundDeco1)}),(0,Dn.jsx)(Io,{}),(0,Dn.jsx)(Ao,{src:Jn(p.dN.onboarding.mascot)}),(0,Dn.jsx)(Jr,{bottom:"102px",right:"16px",children:(0,Dn.jsx)(Vr,{children:(0,Dn.jsx)(Qr,{children:"B\u1eafn v\u1ee1 t\u1ea5t c\u1ea3 c\xe1c b\xf3ng \u0111\u1ec3 sang m\xe0n"})})})]})},Bo=(0,Z.ZP)(Kr)(er||(er=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"])),(function(n){return n.src})),_o=(0,Z.ZP)(Jt)(ir||(ir=(0,x.Z)(["\n    width: 100%;\n    height: 311px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n"]))),Io=Z.ZP.div(rr||(rr=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n"]))),Ao=(0,Z.ZP)(Jt)(or||(or=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    position: absolute;\n    left: 7px;\n    bottom: 93px;\n"]))),No=e(3683),Eo=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_4")}),[]);return(0,Dn.jsxs)(uo,{src:Jn(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())},children:[(0,Dn.jsx)(no,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,Dn.jsx)(Qr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,Dn.jsx)(ho,{minHeight:"175px",children:(0,Dn.jsx)(Do,{src:Jn(p.dN.onboarding.ob4)})})}),(0,Dn.jsx)(ao,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},Oo=(0,Z.F4)(ar||(ar=(0,x.Z)(["\n    0%{ opacity: 0; }\n    5%{ opacity: 1; }\n    40%{ opacity: 1; }\n    45%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),Lo=(0,Z.F4)(sr||(sr=(0,x.Z)(["\n    0%{ transform: translate(0, 0); }\n    20%{ transform: translate(0, 0); }\n    40%{ transform: translate(-67px, -128px); }\n    100%{ transform: translate(-67px, -128px); }\n"]))),Yo=(0,Z.F4)(lr||(lr=(0,x.Z)(["\n    0%{ opacity: 0; }\n    40%{ opacity: 0; }\n    50%{ opacity: 1; }\n    70%{ opacity: 1; }\n    80%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),Do=(0,Z.ZP)(No.Z)(cr||(cr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #dynamic-objects{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n    #dynamic-objects #move-ball{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n\n        position: relative;\n    }\n\n    #dynamic-objects-2{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n\n"])),Oo,Lo,Yo),Ro=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_5")}),[]);return(0,Dn.jsxs)(uo,{src:Jn(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())},children:[(0,Dn.jsx)(no,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,Dn.jsx)(Qr,{children:"Nh\u1ea5n gi\u1eef \u0111i\u1ec1u ch\u1ec9nh h\u01b0\u1edbng m\u0169i t\xean v\xe0 th\u1ea3 tay \u0111\u1ec3 b\u1eafn"}),children:(0,Dn.jsx)(ho,{minHeight:"175px",children:(0,Dn.jsx)(qo,{src:Jn(p.dN.onboarding.ob5)})})}),(0,Dn.jsx)(ao,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},Uo=5.5,zo=(0,Z.F4)(ur||(ur=(0,x.Z)(["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(340px,-184px);}\n    ","%        {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"],["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(340px,-184px);}\n    ","\\%        {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"])),3.6363636363636367,7.272727272727273,40,50.90909090909091,54.54545454545454,60,65.45454545454545),Fo=(0,Z.F4)(hr||(hr=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"],["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,36.36363636363637,40),Ho=(0,Z.F4)(dr||(dr=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"],["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,60,65.45454545454545),Vo=(0,Z.F4)(pr||(pr=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),25.454545454545453,29.090909090909093,60,65.45454545454545),Go=(0,Z.F4)(fr||(fr=(0,x.Z)(["\n    0%                                  {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),60,65.45454545454545),Wo=(0,Z.F4)(mr||(mr=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),63.63636363636363,69.0909090909091,81.81818181818183,87.27272727272727),qo=(0,Z.ZP)(No.Z)(gr||(gr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #ob5-move-ball {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform: translate(0px, 0px);\n    }\n    #ob5-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 83% 130%;\n    }\n    #ob5-path {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 0% 135%;\n    }\n    #ob5-dynamic-objects {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n    #ob5-dynamic-objects-3 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n    #ob5-dynamic-objects-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n"])),zo,Uo,Fo,Uo,Ho,Uo,Vo,Uo,Go,Uo,Wo,Uo),Xo=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_6")}),[]);return(0,Dn.jsxs)(uo,{src:Jn(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(Hr.v.actions.nextStep())},children:[(0,Dn.jsx)(no,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,Dn.jsx)(Qr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,Dn.jsx)(ho,{minHeight:"155px",children:(0,Dn.jsx)(ea,{src:Jn(p.dN.onboarding.ob6)})})}),(0,Dn.jsx)(ao,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},Qo=(0,Z.F4)(xr||(xr=(0,x.Z)(["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"],["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"])),7.5,15,22.5,50,.575*100,65,72.5),Jo=(0,Z.F4)(vr||(vr=(0,x.Z)(["\n    0%                              {transform: rotate(0deg)}\n    ","%       {transform: rotate(0deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"],["\n    0%                              {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"])),10,20,60,70),Ko=(0,Z.F4)(yr||(yr=(0,x.Z)(["\n    0%                              {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"],["\n    0%                              {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"])),10,20,60,70),$o=(0,Z.F4)(br||(br=(0,x.Z)(["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"],["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"])),10,20,60,70),na=(0,Z.F4)(wr||(wr=(0,x.Z)(["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"],["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"])),10,20,60,70),ta=(0,Z.F4)(Zr||(Zr=(0,x.Z)(["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"],["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"])),10,20,60,70),ea=(0,Z.ZP)(No.Z)(kr||(kr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: 20px;\n    margin-bottom: -5px;\n\n    #ob6-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        transform-origin: 85% 257%;\n        /* transform: translate(-228px,-59px) rotate(0deg) scale(1.3); */\n    }\n    #ob6-ball-1-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-2-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-1 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-ball-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-circle {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: cubic-bezier(0, 0.5, 0.7, 1.1);\n        transform-origin: 57.5% 214%;\n        /* transform: translate(-52px, 27px) rotate(0deg); */\n    }\n"])),Qo,4,Jo,4,Ko,4,$o,4,na,4,ta,4),ia=function(){var n=w((function(n){return n.onboarding.isOBVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(ra,{})})},ra=function(){var n=b(),t=w((function(n){return n.onboarding.currentStep}));return(0,Dn.jsx)(Dn.Fragment,{children:function(){switch(t){case 1:return(0,Dn.jsx)(po,{});case 2:return(0,Dn.jsx)(Zo,{});case 3:return(0,Dn.jsx)(To,{});case 4:return(0,Dn.jsx)(Eo,{});case 5:return(0,Dn.jsx)(Ro,{});case 6:return(0,Dn.jsx)(Xo,{});default:return setTimeout((function(){Yn.map.reload(1),a.r.emit(a.B.Navigate,p.dI.MainGame),n(Hr.v.actions.setOBVisible(!1))}),0),null}}()})},oa=e(9945),aa=function(){var n=b();return(0,Dn.jsxs)(sa,{src:Jn(p.dN.worldMap.topBg),children:[(0,Dn.jsx)(la,{src:Jn(p.dN.worldMap.optionBtn),onClick:function(){console.log("onClickOptionBtn"),n(oa.U.actions.setSettingPopupVisible(!0))}}),(0,Dn.jsxs)(ca,{children:[(0,Dn.jsx)(ua,{src:Jn(p.dN.general.heartIcon),children:(0,Dn.jsx)(ha,{children:"5"})}),(0,Dn.jsx)(da,{children:"\u0110\u1ea7y"}),(0,Dn.jsx)(pa,{src:Jn(p.dN.general.plusIcon),onClick:function(){console.log("onClickPlusIcon")}})]})]})},sa=(0,Z.ZP)(Jt)(Pr||(Pr=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 144px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n"]))),la=(0,Z.ZP)(Jt)(jr||(jr=(0,x.Z)(["\n    position: absolute;\n    right: 16px;\n    top: 53px;\n\n    width: 32px;\n    height: 32px;\n    pointer-events: auto;\n"]))),ca=Z.ZP.div(Cr||(Cr=(0,x.Z)(["\n    position: absolute;\n    left: 25px;\n    top: 53px;\n    height: 30px;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n\n    border-radius: 45px 34px 34px 15px;\n    background-color: rgba(36, 36, 36, 0.6);\n    pointer-events: auto;\n"]))),ua=(0,Z.ZP)(Jt)(Sr||(Sr=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-left: -15px;\n    margin-top: -3px;\n"]))),ha=Z.ZP.div(Mr||(Mr=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(149, 56, 56, 0.63);\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n    margin-top: 6px;\n"]))),da=Z.ZP.div(Tr||(Tr=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    min-width: 40px;\n    margin-top: 3px;\n    margin-left: 3px;\n"]))),pa=(0,Z.ZP)(Jt)(Br||(Br=(0,x.Z)(["\n    width: 24px;\n    height: 24px;\n"]))),fa=function(){var n=w((function(n){return n.worldMap.isSettingPopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(ma,{})})},ma=function(){var n=b();return(0,Dn.jsx)(Le,{title:"Thi\u1ebft l\u1eadp",ctaText:"Tho\xe1t tr\xf2 ch\u01a1i",onClose:function(){n(oa.U.actions.setSettingPopupVisible(!1))},onCta:function(){console.log("EXIT GAME"),n(oa.U.actions.setSettingPopupVisible(!1)),g.x.request(g.w.dismiss)}})},ga=function(){var n=w((function(n){return n.onboarding.isOBVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(xa,{})})},xa=function(){var n=w((function(n){return n.onboarding.currentStep})),t=Jn(p.dN.onboarding.faceBgStep1);return(0,Dn.jsx)(Dn.Fragment,{children:function(){switch(n){case 1:case 2:return(0,Dn.jsx)(ya,{src:t});default:return null}}()})},va=(0,Z.ZP)(Jt)(_r||(_r=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 100; */\n"]))),ya=(0,Z.ZP)(va)(Ir||(Ir=(0,x.Z)(["\n    background-repeat: repeat;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"]))),ba=function(){var n=w((function(n){return n.worldMap.isPlayNewLevelPopupVisible}));return(0,Dn.jsx)(Dn.Fragment,{children:n&&(0,Dn.jsx)(wa,{})})},wa=function(){return(0,Dn.jsxs)(Me,{title:"",onClose:void 0,children:[(0,Dn.jsxs)(Za,{children:[(0,Dn.jsx)(ka,{src:Jn(p.dN.general.bigStarDisable),scale:.8,rotate:"-20deg",translateXY:"8px, 18px"}),(0,Dn.jsx)(ka,{src:Jn(p.dN.general.bigStarDisable),scale:1,rotate:"0deg",translateXY:"0px, 0px"}),(0,Dn.jsx)(ka,{src:Jn(p.dN.general.bigStarDisable),scale:.8,rotate:"20deg",translateXY:"-8px, 18px"})]}),(0,Dn.jsx)(Pa,{children:"\u0110i\u1ec3m"}),(0,Dn.jsx)(ja,{children:"0"}),(0,Dn.jsx)(Ca,{src:Jn(p.dN.general.scoreBg)}),(0,Dn.jsx)(Sa,{src:Jn(p.dN.general.targetBg)}),(0,Dn.jsx)(Ma,{children:"M\u1ee5c ti\xeau"}),(0,Dn.jsx)($t,{src:Jn(p.dN.general.button_1),width:"168px",height:"46px",marginTop:"110px",onClick:void 0,children:(0,Dn.jsx)(ne,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},Za=Z.ZP.div(Ar||(Ar=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),ka=(0,Z.ZP)(Jt)(Nr||(Nr=(0,x.Z)(["\n    width: 72px;\n    height: 72px;\n    position: relative;\n    transform: translate(",") scale(",") rotate(",");\n"])),(function(n){return n.translateXY}),(function(n){return n.scale}),(function(n){return n.rotate})),Pa=Z.ZP.div(Er||(Er=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: 10px;\n"]))),ja=Z.ZP.div(Or||(Or=(0,x.Z)(["\n    -webkit-text-stroke: 2px rgba(255, 255, 255, 0.55);\n    background-image: linear-gradient(to bottom, #681c8d 50%, #e74cdf 99%);\n    font-family: iCielUniSans;\n    font-size: 28px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    -webkit-background-clip: text;\n    background-clip: text;\n    -webkit-text-fill-color: transparent;\n"]))),Ca=(0,Z.ZP)(Jt)(Lr||(Lr=(0,x.Z)(["\n    width: 108px;\n    height: 40px;\n    margin-top: -4px;\n"]))),Sa=(0,Z.ZP)(Jt)(Yr||(Yr=(0,x.Z)(["\n    width: 253px;\n    height: 111px;\n    margin-top: -25px;\n"]))),Ma=Z.ZP.div(Dr||(Dr=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: -108px;\n"]))),Ta=function(){var n=w((function(n){return n.worldMap.imagesDefine})),t=w((function(n){return n.worldMap.chapters})),e=w((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.chapterId})),r=(0,i.useState)(!1),o=(0,mn.Z)(r,2),a=o[0],s=o[1];(0,i.useEffect)((function(){n&&t&&e?(Yn.setChapters(n,t,e),s(!0)):s(!1)}),[n,t,e]);return(0,Dn.jsxs)(qt,{children:[a&&(0,Dn.jsx)(zr,{onStart:function(){Yn.startWorldMap()},onEnd:function(){Yn.endWorldMap()},onInitDom:function(n){Yn.initDom(n)},onResume:function(){Yn.resume()},onPause:function(){Yn.pause()}}),(0,Dn.jsx)(ga,{}),(0,Dn.jsx)(aa,{}),(0,Dn.jsx)(fa,{}),(0,Dn.jsx)(ba,{}),(0,Dn.jsx)(ia,{})]})};function Ba(n){var t=(0,i.useState)(!1),e=(0,mn.Z)(t,2),r=e[0],o=e[1],a=(0,i.useRef)(null);return(0,Dn.jsx)(Ia,{ref:a,onClick:function(){r||a.current&&(o(!0),_.ZP.timeline().to(a.current,{scale:1.1,duration:.05}).to(a.current,{scale:1,duration:.05}).then((function(){o(!1)})).then(n.onClick))},children:n.children})}var _a,Ia=Z.ZP.div(Rr||(Rr=(0,x.Z)(["\n    min-height: 42px;\n    max-height: 42px;\n\n    padding: 5px 10px;\n    box-sizing: border-box;\n\n    background-color: white;\n    color: black;\n    font-size: 13px;\n\n    display: flex;\n    text-align: center;\n    align-items: center;\n\n    border-radius: 20px;\n\n    position: relative;\n"])));function Aa(n){var t=b();return(0,Dn.jsx)(za,{src:Q.colorPaths[n.color],onClick:function(){t(sn.J.actions.setBulletColor(n.num-1))},children:n.num})}var Na,Ea,Oa,La,Ya,Da,Ra,Ua,za=(0,Z.ZP)(te)(_a||(_a=(0,x.Z)(["\n    width: 34px;\n    height: 34px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    font-size: 12px;\n    font-weight: bold;\n    color: white;\n"]))),Fa=e(8925);function Ha(n){var t=w((function(n){return n.colorTool.bubbleCount})),e=w((function(n){return n.colorTool.bullets})),r=(v(),b());(0,i.useLayoutEffect)((function(){r(sn.J.actions.initCacheLevel(void 0))}),[]);return(0,Dn.jsxs)(Ja,{children:[(0,Dn.jsx)(Rn,{}),(0,Dn.jsxs)($a,{children:[(0,Dn.jsx)(Ba,{onClick:Xa,left:20,children:"Add Line"}),(0,Dn.jsx)(Ba,{onClick:Qa,left:90,children:"Trim Lines"}),(0,Dn.jsx)(Ba,{onClick:function(){r(sn.J.actions.addBullet(5))},left:160,children:"Add 5 Bullet"}),(0,Dn.jsx)(Ba,{onClick:function(){r(sn.J.actions.setTrimBullet(void 0))},left:230,children:"Trim Bullet"})]}),(0,Dn.jsx)(rs,{children:e.map((function(n,t){return(0,Dn.jsx)(Aa,{num:t+1,color:n},t)}))}),(0,Dn.jsxs)(ns,{children:[(0,Dn.jsxs)(ts,{children:["Choose level to edit",(0,Dn.jsxs)(es,{children:[(0,Dn.jsx)(Ba,{onClick:qa,children:"Choose"}),(0,Dn.jsx)(Ka,{id:"url",type:"number",autoComplete:"off",onChange:Wa,placeholder:""})]})]}),void 0===Va?null:(0,Dn.jsxs)(Ba,{onClick:function(){var n,t=[],e=Yn.map.colorTool.maxHeight,i=(0,B.Z)(Yn.map.data);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.sprite.y>e||t.push(10*o.type+o.color)}}catch(l){i.e(l)}finally{i.f()}var a=I.Z.getState().colorTool.bullets.filter((function(n){return n>0})),s=$(t,a);r(sn.J.actions.addCacheLevel({levelId:Ga,base64:s})),window.isSecureContext&&navigator.clipboard&&(navigator.clipboard.writeText(s),window.alert("\u0110\xe3 copy 8==D"))},children:["Save & Copy",(0,Dn.jsxs)(is,{children:["Bubbles: ",t]})]}),void 0===Va?null:(0,Dn.jsx)(Ba,{onClick:function(){var n=Yn.map.colorTool.drawMapForCapture();console.log(n),(0,Fa.saveAs)(n,"level".concat(Ga,".jpg"))},children:"Export Map"})]})]})}var Va=void 0,Ga=void 0;function Wa(n){n.target.value&&(Va=parseInt(n.target.value))}function qa(){void 0!==Va&&Va!==Ga&&(Yn.map.colorTool.reload(Va),Ga=Va)}function Xa(){Yn.map.colorTool.addEmptyLine()}function Qa(){Yn.map.colorTool.trimLine()}var Ja=Z.ZP.div(Na||(Na=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),Ka=Z.ZP.input(Ea||(Ea=(0,x.Z)(["\n    width: 50px;\n    height: 30px;\n\n    text-align: center;\n"]))),$a=Z.ZP.div(Oa||(Oa=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n\n    padding: 20px;\n\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n"]))),ns=Z.ZP.div(La||(La=(0,x.Z)(["\n    position: fixed;\n    bottom: 0px;\n\n    width: 100%;\n    padding: 10px 10px;\n    box-sizing: border-box;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    gap: 10px;\n\n    font-size: 13px;\n"]))),ts=Z.ZP.div(Ya||(Ya=(0,x.Z)(["\n    color: white;\n    text-align: center;\n\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n"]))),es=Z.ZP.div(Da||(Da=(0,x.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),is=Z.ZP.div(Ra||(Ra=(0,x.Z)(["\n    color: white;\n    position: absolute;\n    top: -25px;\n"]))),rs=Z.ZP.div(Ua||(Ua=(0,x.Z)(["\n    width: 90%;\n    height: 34px;\n\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    /* gap: 2px; */\n    align-content: flex-start;\n\n    overflow-x: scroll;\n    overflow-y: hidden;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    position: absolute;\n    bottom: 200px;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 1px dashed white;\n"])));function os(n){b(),v();var t=w((function(n){return n.global.backStacks}));(0,i.useLayoutEffect)((function(){e()}),[]),(0,i.useEffect)((function(){return s(),function(){l()}}),[]),(0,i.useEffect)((function(){var n=function(n){n&&"onBackPress"==n.data&&a.r.emit(t.length>0?t[t.length-1]:a.B.ON_BACK_KEY)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]);var e=function(){g.x.request(g.w.stopTrace,window.traceScreenLoadId),window.onresize=u,g.x.listen("onFocusApp",h),g.x.listen("onBlurApp",d),c()},s=function(){g.x.request(g.w.stopTrace,window.traceScreenInterractionId),g.x.request(g.w.stopTrace,window.traceScreenGoalId),window.addEventListener("visibilitychange",f)},l=function(){window.removeEventListener("visibilitychange",f)},c=function n(){requestAnimationFrame(n)},u=function(){a.r.emit(a.B.ON_RESIZE,window.innerWidth,window.innerHeight)};function h(){a.r.emit(a.B.On_RESUME),console.log("[App.jsx] handleFocusMiniApp")}function d(){console.log("[App.jsx] handleBlurMiniApp"),m.pauseBgMusic(),a.r.emit(a.B.On_PAUSE)}function f(n){"visible"===window.document.visibilityState?h():d()}return(0,Dn.jsxs)(r.VK,{children:[(0,Dn.jsxs)(o.Z5,{children:[(0,Dn.jsx)(o.AW,{path:"/*",element:(0,Dn.jsx)(Ha,{})}),(0,Dn.jsx)(o.AW,{path:p.dI.MainMenu,element:(0,Dn.jsx)(yi,{})}),(0,Dn.jsx)(o.AW,{path:p.dI.MainGame,element:(0,Dn.jsx)(fi,{})}),(0,Dn.jsx)(o.AW,{path:p.dI.WorldMap,element:(0,Dn.jsx)(Ta,{})}),(0,Dn.jsx)(o.AW,{path:p.dI.ColorTool,element:(0,Dn.jsx)(Ha,{})})]}),(0,Dn.jsx)(Zi,{})]})}g.x.initTracking()},808:function(){!function(){function n(){var n=this;return new Promise((function(t){var e=new FileReader;e.onload=function(){t(e.result)},e.readAsArrayBuffer(n)}))}"File"in window&&(File.prototype.arrayBuffer=File.prototype.arrayBuffer||n),Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||n}()},5301:function(n,t,e){"use strict";n.exports=e.p+"static/media/melodyConfig.b74f0f2797c7eee866a4"}}]);