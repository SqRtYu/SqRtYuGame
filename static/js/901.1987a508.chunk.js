(self.webpackChunkmomo_game=self.webpackChunkmomo_game||[]).push([[901],{8901:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return rl}});e(808),e(9018);var i=e(7313),r=e(2135),o=e(8467),a=e(5422),s=e(4165),l=e(5861),c=e(5671),u=e(3144),h=e(4963),d=e(2749),p=e(8197),f=function(){function n(){(0,c.Z)(this,n),this.musicVolume=1,this.sfxVolume=1}return(0,u.Z)(n,[{key:"enableMusic",value:function(n){this.musicVolume=n?1:0;var t=h.eq.find(p.gH.BGMusic);t&&(t.volume=this.musicVolume),n&&this.playBgMusic()}},{key:"enableSfx",value:function(n){this.sfxVolume=n?1:0}},{key:"load",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!h.eq.exists(t)){n.next=2;break}return n.abrupt("return");case 2:return e=p.dN.MainGame.cdnUrl+t+".mp3",n.next=5,d.P.cacheFile(e);case 5:e=n.sent,h.eq.add(t,e);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},{key:"play",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i=arguments;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>1&&void 0!==i[1]&&i[1],h.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:h.eq.play(t,{loop:e,volume:this.sfxVolume});case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"pauseBgMusic",value:function(){h.eq.exists(p.gH.BGMusic)&&h.eq.pause(p.gH.BGMusic)}},{key:"resumeBgMusic",value:function(){this.playBgMusic()}},{key:"playBgMusic",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h.eq.exists(p.gH.BGMusic)){n.next=6;break}return n.next=3,this.load(p.gH.BGMusic);case 3:h.eq.play(p.gH.BGMusic,{loop:!0,volume:this.musicVolume}),n.next=12;break;case 6:if(!(t=h.eq.find(p.gH.BGMusic)).isPlaying){n.next=10;break}return t.volume=this.musicVolume,n.abrupt("return");case 10:t.paused?t.resume():t.play(),t.volume=this.musicVolume;case 12:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),n}(),g=new f,m=e(3303),x=e(168),v=function(){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.r.emit(a.B.Navigate,n,t)}},y=e(5554),b=y.I0,w=y.v9,Z=e(244),P=e(7489),k=Math.min(2,window.devicePixelRatio||1),A=750,_=1334,L=function(){function n(t){(0,c.Z)(this,n),this.app=void 0,this.options=void 0,this.view=void 0,this.stage=void 0,this.onUpdate=void 0,this.options=t;var e=this.options,i=(e.minFPS,e.maxFPS,e.trasparent),r=void 0===i?1:i,o=e.backgroundColor,a=void 0===o?0:o;this.app=new P.Application({backgroundAlpha:r,backgroundColor:a,width:A,height:_,resolution:k,autoStart:!1}),globalThis.__PIXI_APP__=this.app,this.view=this.app.view,this.view.style.width="100%",this.view.style.height="100%",this.stage=this.app.stage,this.app.ticker.remove(this.app.render,this.app),this.app.ticker.add(this.update,this)}return(0,u.Z)(n,[{key:"init",value:function(n){if(n){n.innerHTML="",this.app.resizeTo=n,this.app.resize();var t=this.options,e=t.alignCenter,i=t.fitWidth,r=t.fitHeight,o=_/A,a=A/_,s=this.app.renderer.width,l=this.app.renderer.height,c=l/_,u=s/A;if(i===r===!0||(i&&(c=s*o/_),r&&(u=l*a/A)),this.app.stage.scale.set(u/k,c/k),e){var h=(s-A*u)/2,d=(l-_*c)/2;this.app.stage.position.set(h/k,d/k)}}}},{key:"setParent",value:function(n){var t;n.innerHTML="",n.appendChild(null===(t=this.app)||void 0===t?void 0:t.view)}},{key:"update",value:function(n){var t;this.app.render(),null===(t=this.onUpdate)||void 0===t||t.call(this,this.app.ticker.elapsedMS/1e3)}},{key:"pause",value:function(){this.app.stop()}},{key:"resume",value:function(){this.app.start()}},{key:"destroy",value:function(){this.app.stop(),this.app.stage.destroy(!0),this.app.destroy(!0)}}]),n}(),M=e(3433),j=e(136),C=e(7277),T=e(7762),B=e(3589),E=e(8259),S=e(5869),I=e(8683),O=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).meshes=[],n}return(0,u.Z)(e,[{key:"update",value:function(n){this.meshes.forEach((function(t){t.visible&&(t.shader.uniforms.time+=3*n)}))}},{key:"setRayPoints",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1];this.meshes.length<n.length-1;)this.addMesh();this.meshes.forEach((function(e,i){if(e.visible=i<n.length-1,i<n.length-1){var r=n[i],o=n[i+1],a=o.x-r.x,s=o.y-r.y,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));e.position.set(r.x,r.y),e.rotation=Math.atan2(s,a),e.scale.set(l,100),e.shader.uniforms.ratioxy=l/100,e.shader.uniforms.mainColor=t,e.shader.uniforms.startRatio=0==i?Y.startRatio:1,e.shader.uniforms.startOffset=0==i?Y.startOffset:0,e.shader.uniforms.endRatio=i>=n.length-2?Y.endRatio:1,e.shader.uniforms.endOffset=i>=n.length-2?Y.endOffset:0}}))}},{key:"addMesh",value:function(){var n=(new P.Geometry).addAttribute("aVertexPosition",[0,-1,1,-1,1,1,0,1],2).addAttribute("aUvs",[0,0,1,0,1,1,0,1],2).addIndex([0,1,2,0,2,3]),t=P.Shader.from(D,U,(0,I.Z)({},Y)),e=new P.Mesh(n,t);return this.meshes.push(e),this.addChild(e),e}}]),e}(P.Container),N=new O,Y={time:0,ratioxy:1,mainColor:[1,0,0],startRatio:2.5,startOffset:1.5,endRatio:.05,endOffset:.5,noiseSampler:P.Texture.from("effects/smooth-noise-3.jpg")},D="\n    precision mediump float;\n\n    attribute vec2 aVertexPosition;\n    attribute vec2 aUvs;\n\n    uniform mat3 translationMatrix;\n    uniform mat3 projectionMatrix;\n\n    varying vec2 vUvs;\n\n    void main() {\n\n        vUvs = aUvs;\n        gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    }\n",U="\n    precision mediump float;\n    varying vec2 vUvs;\n    uniform float time;\n    uniform float ratioxy;\n    uniform vec3 mainColor;\n    uniform float startRatio;\n    uniform float startOffset;\n    uniform float endRatio;\n    uniform float endOffset;\n    uniform sampler2D noiseSampler;\n\n    vec4 getColor(vec2 uv, float offsetYRatio, float waveLengthRatio, float waveSpeed, float waveOffset, float width, float subWidth, float subStrength, float samplerY){\n        float startOffset_ = startOffset/ratioxy;\n        float endOffset_ = endOffset/ratioxy;\n\n        float uvx = (uv.x + 1.)/2.; //map uvx 0. -> 1.\n        float widthRatio = 1.;\n        widthRatio = max(widthRatio, (1. - startRatio)/startOffset_*uvx + startRatio);\n        widthRatio = min(widthRatio, (endRatio - 1.)/endOffset_*uvx + endRatio - (endRatio - 1.)/endOffset_);\n\n        float subFadeOutOffset = 1./ratioxy;\n        float fadeRatio = pow(min(1. - abs(uv.x), subFadeOutOffset)/subFadeOutOffset, .5);\n\n        float offsetY = (texture2D(noiseSampler, vec2(mod((vUvs.x*ratioxy/waveLengthRatio - (time + floor(time*2.))*waveSpeed + waveOffset)*1., 1.), samplerY)).r - 0.5)*2.*offsetYRatio;\n        float y = uv.y + offsetY*widthRatio;\n        float main = step(1. - width*widthRatio, 1. - abs(y));\n        // main *= fadeRatio;\n        float sub = pow(max(1. - abs(y) - (1. - subWidth), 0.)*subStrength, 2.)*widthRatio;\n        sub *= fadeRatio;\n\n        float mixValue = .25;\n        float r = max(mix(main, sub*mainColor.r, mixValue), sub*mainColor.r);\n        float g = max(mix(main, sub*mainColor.g, mixValue), sub*mainColor.g);\n        float b = max(mix(main, sub*mainColor.b, mixValue), sub*mainColor.b);\n        float a = max(main, sub);\n        return vec4(r, g, b, a);\n    }\n\n    void main()\n    {\n        //Offset uv so that center is 0,0 and edges are -1,1\n        vec2 uv = (vUvs-vec2(0.5))*2.0;\n\n        vec4 color1 = getColor(uv, 0.03, 20., 1., 0., 0.025 , 0.5, 2., .5);\n        vec4 color2 = getColor(uv, 0.1, 7., .17, 1., 0.01, 0.3, 3., .3);\n        vec4 color3 = getColor(uv, 0.12, 8., .2, 4., 0.01, 0.3, 3., .7);\n\n        float r = max(max(color1.r, color2.r), color3.r);\n        float g = max(max(color1.g, color2.g), color3.g);\n        float b = max(max(color1.b, color2.b), color3.b);\n        float a = max(max(color1.a, color2.a), color3.a);\n        vec4 outColor = vec4(r, g, b, a);\n        gl_FragColor = outColor;\n    }\n",R=e(918),Q=e(2173),H=e.n(Q),F=Math.cos(30/180*Math.PI),z=11,V=68,G=310,W=V*F,X=4.5*W,q=W,J=q*F,K=new P.TextStyle({fontFamily:"iCielUniSans",fontSize:31,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),$=new P.TextStyle({fontFamily:"iCielUniSans",fontSize:60,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),nn={hover:P.Texture.from("images/hover-ring.png"),ring:P.Texture.from("images/Ring.png"),colors:[null,P.Texture.from("bubbles/red.png"),P.Texture.from("bubbles/blue.png"),P.Texture.from("bubbles/green.png"),null,P.Texture.from("bubbles/yellow.png"),null,null],types:[null,P.Texture.from("bubbles/yellow.png"),P.Texture.from("bubbles/boom.png"),P.Texture.from("bubbles/line.png"),P.Texture.from("bubbles/red-item.png"),P.Texture.from("bubbles/stone.png"),P.Texture.from("bubbles/explode.png"),P.Texture.from("bubbles/white.png")],itemColors:[null,P.Texture.from("bubbles/red-item.png"),P.Texture.from("bubbles/blue-item.png"),P.Texture.from("bubbles/green-item.png"),null,P.Texture.from("bubbles/yellow-item.png"),null,null],boom_empty:P.Texture.from("images/boom_empty.png"),boom_holder:P.Texture.from("images/boom_holder.png"),headline:P.Texture.from("images/headline.png"),background:P.Texture.from("images/background.png"),background_1:P.Texture.from("images/background_deco_1.png"),star_particle:P.Texture.from("effects/star_particle.png"),blaze_particle:P.Texture.from("effects/blaze_particle.png"),dot_particle:P.Texture.from("effects/dot_particle.png"),rayColor:[[1,1,1],[252/255,72/255,61/255],[67/255,144/255,220/255],[32/255,237/255,144/255],[0,0,0],[253/255,181/255,44/255]]},tn=phoenix.melody.MelodyConfig.create();!function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,i,r;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e(5301));case 2:return t=n.sent,n.next=5,t.arrayBuffer();case 5:return i=n.sent,r=phoenix.melody.MelodyConfig.decode(new Uint8Array(i)),Object.assign(tn,r),H().util.toJSONOptions={enums:Number},E.Z.dispatch(S.X.actions.setConfig(tn.toJSON())),n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()();var en=function(n){var t=R.lW.from(n,"base64");return phoenix.melody.MelodyLevelConfig.decode(t)},rn=function(n,t){var e=phoenix.melody.MelodyLevelConfig.create();e.columns=z,e.rows=n.length/z,e.id=1;var i,r=(0,T.Z)(n);try{for(r.s();!(i=r.n()).done;){var o=i.value,a=phoenix.melody.MelodyBall.create(),s=o%10,l=Math.floor(o/10);a.color=s,a.type=l,e.map.push(a)}}catch(x){r.e(x)}finally{r.f()}var c,u=(0,T.Z)(t);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=phoenix.melody.MelodyBall.create(),p=h%10,f=Math.floor(h/10);d.color=p,d.type=f,e.bullets.push(d)}}catch(x){u.e(x)}finally{u.f()}e.star1Score=1,e.star2Score=2,e.star3Score=3,e.targets.push(function(n){var t=phoenix.melody.MelodyLevelTarget.create();t.type=phoenix.melody.MELODY_LEVEL_TARGET_TYPE.MELODY_LEVEL_TARGET_ANY_BALL;var e,i=0,r=(0,T.Z)(n);try{for(r.s();!(e=r.n()).done;){e.value>0&&i++}}catch(x){r.e(x)}finally{r.f()}return console.log(i),t.quantity=i,t}(n));var g=phoenix.melody.MelodyLevelConfig.encode(e).finish(),m=R.lW.from(g).toString("base64");return console.log(m),m};var on=en("CAEoATACOANACUgLUgQIABAAUgQIABAAUgQIABAAUgQIARABUgQIARABUgQIARABUgQIARABUgQIARABUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIARABUgQIBBACUgQIBRAHUgQIBRAHUgQIBBAFUgQIARABUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIARABUgQIARACUgQIBRAHUgQIBRAHUgQIBRAHUgQIARAFUgQIARABUgQIABAAUgQIABAAUgQIABAAUgQIARACUgQIBxAHUgQIBxAHUgQIBRAHUgQIBRAHUgQIBxAHUgQIBxAHUgQIARAFUgQIABAAUgQIABAAUgQIABAAUgQIARACUgQIARACUgQIBxAHUgQIBxAHUgQIBBABUgQIBxAHUgQIBxAHUgQIARAFUgQIARAFUgQIABAAUgQIARACUgQIARACUgQIARACUgQIBRAHUgQIBhAHUgQIBhAHUgQIBRAHUgQIARAFUgQIARAFUgQIARAFUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIARADUgQIBhAHUgQIBxAHUgQIBhAHUgQIARADUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIARADUgQIARADUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIARADUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAWgQIABAFWgQIABACWgQIABABWgQIABACWgQIABABWgQIABACWgQIABADWgQIABAFYgQIARA1"),an=function(){function n(t,e){(0,c.Z)(this,n),this.x=0,this.y=0,this.set(t,e)}return(0,u.Z)(n,[{key:"set",value:function(n,t){return this.x=n,this.y=t,this}},{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copy",value:function(n){this.set(n.x,n.y)}},{key:"subtract",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"multiply",value:function(n){return this.x*=n,this.y*=n,this}},{key:"normalize",value:function(){var n=this.length();return this.x/=n,this.y/=n,this}},{key:"length",value:function(){return Math.sqrt(this.lengthSqr())}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}}],[{key:"angle",value:function(n,t){var e=n.x*n.x+n.y*n.y,i=t.x*t.x+t.y*t.y;if(0===e||0===i)return 0;var r=(n.x*t.x+n.y*t.y)/Math.sqrt(e*i);return r=Math.max(Math.min(r,-1),1),Math.acos(r)}},{key:"fromPIXI",value:function(t){return new n(t.x,t.y)}}]),n}(),sn=phoenix.melody.MELODY_BALL_TYPE,ln=phoenix.melody.MELODY_BALL_COLOR,cn=function(){function n(t,e){(0,c.Z)(this,n),this.sprite=null,this.hover=null,this.color=0,this.type=sn.MELODY_BALL_TYPE_NONE,this.nextType=sn.MELODY_BALL_TYPE_NONE,this.isOrigin=!1,this.isMarked=!1,this.isLogged=!1,this.neighbors=[null,null,null,null,null,null];var i=this.sprite=new P.Sprite;i.width=V,i.height=V,i.anchor.set(.5),this.setPosition(t,e)}return(0,u.Z)(n,[{key:"setPosition",value:function(n,t){n=(1+n-.5*(1-t%2))*V,t=t*W+34,this.sprite.x=n,this.sprite.y=t}},{key:"isEmpty",get:function(){return this.nextType===sn.MELODY_BALL_TYPE_NONE||this.type===sn.MELODY_BALL_TYPE_NORMAL&&this.nextType!==this.type}},{key:"setColor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.color=n,this.sprite.texture=nn.colors[n],0===n&&(this.type=0,this.nextType=0),this.isOrigin=t}},{key:"setType",value:function(n){if(0===this.color)return this.type=0,void(this.nextType=0);if(this.type=n,this.nextType=n,!(n<=sn.MELODY_BALL_TYPE_NORMAL)){var t=n===sn.MELODY_BALL_TYPE_ITEM;this.sprite.texture=t?nn.itemColors[this.color]:nn.types[n],this.color=t?this.color:7}}},{key:"turn",value:function(n){var t=n===this.color;t&&!this.hover&&nt.map.misc.turnOn(this),!t&&this.hover&&nt.map.misc.turnOff(this)}}]),n}(),un=function(){function n(){(0,c.Z)(this,n),this.sprite=void 0,this.text=void 0,this.height=void 0,this.radius=void 0,this.angle=void 0,this.veclocity=new an(0,0);var t=this.sprite=new P.Sprite;t.width=V,t.height=V,t.anchor.set(.5);var e=this.text=new P.Text("50",K);e.anchor.set(.5),e.visible=!1}return(0,u.Z)(n,[{key:"set",value:function(n,t,e){var i=this.sprite;i.visible=!0,i.texture=n.sprite.texture,this.angle=0,this.height=G,i.x=n.sprite.x+t,i.y=n.sprite.y+e,i.width=V,i.height=V,this.veclocity.x=900*(Math.random()-.5),this.veclocity.y=900*(Math.random()-.5)}},{key:"isPlaying",get:function(){return this.sprite.visible}},{key:"update",value:function(n){var t=this.sprite;if(t.y<-310){var e=this.veclocity,i=.5*(A-V);if((t.x>i||t.x<-i)&&(e.x=-e.x),t.x+=e.x*n,t.y+=e.y*n,e.y+=1300*n,t.y>=-310){t.x>0?this.angle=0:this.angle=Math.PI;var r=Math.abs(t.x);if(r<290){var o=t.x/290;this.angle=Math.acos(o),this.radius=290}else this.angle=t.x>0?0:Math.PI,this.radius=r}}else{var a=this.angle+13*n,s=this.height-290*n,l=this.radius*Math.max(s/G,.1);if(s<20){t.visible=!1;var c=this.text;c.visible=!0,nt.map.addScore(50);var u=nt.map.physicsBox,h=u.x,d=u.y;return c.x=200*(Math.random()-.5),c.y=t.y-50*Math.random()+20,B.ZP.to(c,{y:c.y-20,alpha:0}).duration(.5).then((function(){c.visible=!1,c.alpha=1,c.y=t.y})),void nt.map.effect.spawnBlazeParticle(c.x+h,c.y+d)}this.angle=a,this.height=s,t.x=Math.cos(a)*l,t.y=-s;var p=V*(.25*Math.sin(a)+1);t.width=p,t.height=p}}}]),n}(),hn=.2*V;function dn(n,t,e){var i=nt.map,r=i.container,o=r.x,a=r.y,s=n.sprite;return B.ZP.to(s,{width:hn,height:hn,delay:t,duration:.3}).then((function(){n.isOrigin&&i.targetChecker.countBall(n.color,n.type),n.setColor(0),s.width=V,s.height=V,i.addScore(e),i.misc.spawnScore(n).text=e})),B.ZP.delayedCall(t,(function(){return i.effect.spawnStarEffect(s.x+o,s.y+a)})),.13}function pn(n,t,e){return B.ZP.delayedCall(e,(function(){t.setColor(t.color,t.isOrigin),B.ZP.fromTo(t.sprite,{width:hn,height:hn},{width:V,height:V,duration:.3})})),.13}var fn={normal:function(n,t){var e=nt.map.getGroup(n);if(e.length<3)return!0;var i,r=(0,T.Z)(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.type&&(o.nextType=sn.MELODY_BALL_TYPE_EXPLODE)}}catch(a){r.e(a)}finally{r.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,fn.targetChecker.comboScore),!0},boom:function(n,t){var e,i=nt.map.getNeighborbyLevel(n,3),r=(0,T.Z)(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.type&&(o.nextType=sn.MELODY_BALL_TYPE_BOOM)}}catch(a){r.e(a)}finally{r.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,250),!0},line:function(n,t){var e,i=nt.map.getLineNeighbor(n,3),r=(0,T.Z)(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.type&&(o.nextType=sn.MELODY_BALL_TYPE_LINE)}}catch(a){r.e(a)}finally{r.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,500),!0},normal2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_EXPLODE?0:(t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore))},normal2item:function(n,t,e){return fn.normal2normal(n,t,e)},normal2stone:function(n,t,e){return 0},normal2white:function(n,t,e){return n.nextType===sn.MELODY_BALL_TYPE_NORMAL?0:t.nextType===sn.MELODY_BALL_TYPE_WHITE?(t.nextType=sn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,pn(0,t,e)):0},normal2explode:function(n,t,e){return n.isOrigin?0:(t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore))},normal2boom:function(n,t,e){return 0},normal2line:function(n,t,e){return 0},boom2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_BOOM?0:(t.type=sn.MELODY_BALL_TYPE_BOOM,t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,250))},boom2item:function(n,t,e){return fn.boom2normal(n,t,e)},boom2stone:function(n,t,e){return fn.boom2normal(n,t,e)},boom2white:function(n,t,e){return fn.boom2normal(n,t,e)},boom2explode:function(n,t,e){return fn.boom2normal(n,t,e)},boom2boom:function(n,t,e){return 0},boom2line:function(n,t,e){return 0},line2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_LINE?0:(t.type=sn.MELODY_BALL_TYPE_LINE,t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,500))},line2item:function(n,t,e){return fn.line2normal(n,t,e)},line2stone:function(n,t,e){return fn.line2normal(n,t,e)},line2white:function(n,t,e){return fn.line2normal(n,t,e)},line2explode:function(n,t,e){return fn.line2normal(n,t,e)},line2boom:function(n,t,e){return 0},line2line:function(n,t,e){return 0},item2normal:function(n,t,e){return fn.normal2normal(n,t,e)},item2item:function(n,t,e){return fn.normal2item(n,t,e)},item2stone:function(n,t,e){return 0},item2white:function(n,t,e){return n.nextType===sn.MELODY_BALL_TYPE_ITEM?0:t.nextType===sn.MELODY_BALL_TYPE_WHITE?(t.nextType=sn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,pn(0,t,e)):0},item2explode:function(n,t,e){return fn.normal2explode(n,t,e)},item2boom:function(n,t,e){return 0},item2line:function(n,t,e){return 0},stone2normal:function(n,t,e){return 0},stone2item:function(n,t,e){return 0},stone2stone:function(n,t,e){return 0},stone2white:function(n,t,e){return 0},stone2explode:function(n,t,e){return 0},stone2boom:function(n,t,e){return 0},stone2line:function(n,t,e){return 0},explode2normal:function(n,t,e){return t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore)},explode2item:function(n,t,e){return fn.explode2normal(n,t,e)},explode2stone:function(n,t,e){return fn.explode2normal(n,t,e)},explode2white:function(n,t,e){return t.color=ln.MELODY_BALL_COLOR_RANDOM,fn.explode2normal(n,t,e)},explode2explode:function(n,t,e){return fn.explode2normal(n,t,e)},explode2boom:function(n,t,e){return 0},explode2line:function(n,t,e){return 0},white2normal:function(n,t,e){return 0},white2item:function(n,t,e){return 0},white2stone:function(n,t,e){return 0},white2white:function(n,t,e){return 0},white2explode:function(n,t,e){return 0},white2boom:function(n,t,e){return 0},white2line:function(n,t,e){return 0},targetChecker:null},gn=["none","normal","boom","line","item","stone","explode","white"];function mn(n,t){var e=fn[gn[n.nextType]];return e&&e(n,t)}function xn(n){fn.targetChecker=n}function vn(n,t,e){if(t.type===sn.MELODY_BALL_TYPE_NONE||n.type===sn.MELODY_BALL_TYPE_NONE||t.nextType===sn.MELODY_BALL_TYPE_NONE)return 0;var i="".concat(gn[n.type],"2").concat(gn[t.type]);return fn[i](n,t,e)}var yn=e(7326),bn=e(5661),wn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).select_color=void 0,n.select_type=void 0,n.deltaY=0,n.speed=0,n.target=void 0,n.colors=void 0,n.types=void 0,n.lines=[],n.maxHeight=0;var i=A,r=_,o=(nn.colors.length,P.Sprite.from("images/header.png"));o.y=.7*r,o.width=i,o.height=1e3,n.addChild(o);var a=100,s=n.colors=new P.Container;s.y=.86*r,n.addChild(s),(o=new P.Sprite(nn.hover)).anchor.set(.5),o.x=a,a+=100,o.width=81.6,o.height=81.6,o.interactive=!0,o.on("pointerup",n.onColorClick.bind((0,yn.Z)(n))),s.addChild(o);var l,u=(0,T.Z)(nn.colors);try{for(u.s();!(l=u.n()).done;){var h=l.value;h&&((o=new P.Sprite(h)).anchor.set(.5),o.x=a,a+=100,o.width=V,o.height=V,o.interactive=!0,o.on("pointerup",n.onColorClick.bind((0,yn.Z)(n))),s.addChild(o))}}catch(m){u.e(m)}finally{u.f()}var d=n.types=new P.Container;d.y=.94*r,n.addChild(d),a=100;var p,f=(0,T.Z)(nn.types);try{for(f.s();!(p=f.n()).done;){var g=p.value;g&&g!==nn.types[2]&&g!==nn.types[3]&&((o=new P.Sprite(g)).anchor.set(.5),o.x=a,a+=100,o.width=V,o.height=V,o.interactive=!0,o.on("pointerup",n.onTypeClick.bind((0,yn.Z)(n))),d.addChild(o))}}catch(m){f.e(m)}finally{f.f()}return n.hitArea=new P.Rectangle(0,0,i,r),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,yn.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,yn.Z)(n))),n.on("pointermove",n.countBubble.bind((0,yn.Z)(n))),n.on("pointerdown",n.countBubble.bind((0,yn.Z)(n))),n}return(0,u.Z)(e,[{key:"getText",value:function(n,t){var e,i=null,r=(0,T.Z)(this.lines);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.y>=n.sprite.y){i=o;break}}}catch(a){r.e(a)}finally{r.f()}return i||((i=nt.map.misc.spawnText(n)).text=t,this.lines.push(i)),i.visible=!0,i}},{key:"loadLevel",value:function(n){var t,e=nt.map,i=E.Z.getState().colorTool.cacheLevels,r=void 0,o=(0,T.Z)(i);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.levelId===n&&(r=en(a.base64))}}catch(s){o.e(s)}finally{o.f()}r?e.load(r):e.reload(n),this.initMap()}},{key:"loadFromBase64",value:function(n){try{var t=en(n);nt.map.load(t),this.initMap()}catch(e){return void console.log("WRONG BASE64")}}},{key:"initMap",value:function(){var n=nt.map;nt.view.onwheel=this.onButtonWheel.bind(this),this.target=n.container;var t,e=0,i=(0,T.Z)(n.data);try{for(i.s();!(t=i.n()).done;){var r=t.value,o=Math.floor(e/z),a=e%z;o%2===1&&10===a||(r.turn(r.color),0==a&&this.getText(r,o+1+"")),e++}}catch(s){i.e(s)}finally{i.f()}E.Z.dispatch(bn.J.actions.initBullets(nt.map.level.bullets.map((function(n){return n.color})))),this.trimLine()}},{key:"addEmptyLine",value:function(){var n=nt.map.data;n[n.length-1].sprite.y<=this.maxHeight&&nt.map.addEmptyLine(1);var t=Math.ceil(this.maxHeight/W)*z,e=t+z,i=Math.floor(t/z);for(this.getText(n[t],i+1+"");t<e;t++){var r=n[t];i%2===1&&t===e-1||r.turn(r.color)}this.maxHeight=n[t-1].sprite.y}},{key:"trimLine",value:function(){for(var n=nt.map.data,t=0,e=t+z,i=[];t<e;t++){var r=n[t];r.isEmpty||(i.push(r),r.isMarked=!0)}for(var o=0,a=n[0].sprite.y,s=a;o<i.length;){var l,c=i[o].neighbors,u=(0,T.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||h.sprite.y<a||(i.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(v){u.e(v)}finally{u.f()}o++}var d,p=(0,T.Z)(n);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.sprite.y>s&&f.turn(-1),f.isMarked=!1}}catch(v){p.e(v)}finally{p.f()}var g,m=(0,T.Z)(this.lines);try{for(m.s();!(g=m.n()).done;){var x=g.value;x.y>s&&(x.visible=!1)}}catch(v){m.e(v)}finally{m.f()}this.maxHeight=s}},{key:"onButtonOver",value:function(n){if(void 0!==this.select_color&&void 0!==this.select_type){var t=nt.map,e=n.data.global,i=nt.scale;if(e.y-=t.parent.y,e.x/=i.x,e.y/=i.y,!(e.x>A)){var r=an.fromPIXI(t.container),o=t.data,a=e.y-r.y;a=Math.floor(a/W);var s=Math.max(a%2?e.x-34:e.x,0),l=o[(s=Math.floor(s/V))+11*a];l&&l.hover&&(l.setColor(nn.colors.indexOf(this.select_color)),l.setType(nn.types.indexOf(this.select_type)))}}}},{key:"onButtonWheel",value:function(n){this.deltaY=n.deltaY,this.speed=-1}},{key:"onColorClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_color=t.texture==nn.hover?null:t.texture;for(var e=0,i=this.colors.children;e<i.length;e++){var r=i[e];r.width=V,r.height=V}t.width=1.4*V,t.height=1.4*V,E.Z.dispatch(bn.J.actions.setSelectedColor(nn.colors.indexOf(this.select_color)))}},{key:"onTypeClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_type=t.texture==nn.hover?null:t.texture;for(var e=0,i=this.types.children;e<i.length;e++){var r=i[e];r.width=V,r.height=V}t.width=1.4*V,t.height=1.4*V}},{key:"update",value:function(n){var t=Math.abs(this.speed);if(0!=t){var e=this.target.y+this.deltaY*t;e>X&&(e=X);var i=-Math.max(nt.map.data.length/z-9,0)*W;e<i&&(e=i),this.target.y=e,this.speed<0&&(t-=n,this.speed=t<0?0:-t)}}},{key:"countBubble",value:function(){var n,t=0,e=this.maxHeight,i=(0,T.Z)(nt.map.data);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.sprite.y<=e&&!r.isEmpty&&++t}}catch(o){i.e(o)}finally{i.f()}E.Z.dispatch(bn.J.actions.setBubbleCount(t))}},{key:"drawMapForCapture",value:function(){var n=nt.map.data,t=new P.Application({width:nt.view.width,height:(this.maxHeight+V)*nt.scale.y,backgroundColor:4078474}),e=new P.Container;t.stage.addChild(e),t.stage.scale=nt.scale;var i,r=(0,T.Z)(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.hover){var a=new P.Sprite(o.sprite.texture),s=o.sprite,l=s.x,c=s.y,u=s.width,h=s.height;a.x=l,a.y=c,a.anchor.set(.5),a.width=u,a.height=h,e.addChild(a)}if(o.hover){var d=new P.Sprite(o.hover.texture),p=o.hover,f=p.x,g=p.y,m=p.width,x=p.height;d.x=f,d.y=g,d.anchor.set(.5),d.alpha=.5,d.width=m,d.height=x,e.addChild(d)}0}}catch(k){r.e(k)}finally{r.f()}var v,y=0,b=(0,T.Z)(this.lines);try{for(b.s();!(v=b.n()).done;){var w=v.value;if(w.visible){var Z=new P.Text("",$);Z.anchor.set(.5),Z.scale.set(.5),Z.text=(++y).toString(),Z.x=w.x,Z.y=w.y,e.addChild(Z)}}}catch(k){b.e(k)}finally{b.f()}return t.render(),t.view.toDataURL("image/jpeg")}}]),e}(P.Container),Zn=e(4182),Pn={alpha:{start:1,end:0},scale:{start:.1,end:.3,minimumScaleMultiplier:.1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:50,minimumSpeedMultiplier:.1},acceleration:{x:0,y:300},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.01,emitterLifetime:.3,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:3,particleSpacing:0,angleStart:0},kn={alpha:{start:.5,end:0},scale:{start:.3,end:.2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:1e3,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-90,max:-90},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.1,max:.2},blendMode:"add",frequency:.01,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:50,h:30}},An={alpha:{start:.5,end:.7},scale:{start:.3,end:.2,minimumScaleMultiplier:.3},color:{start:"#ffaa33",end:"#ffdd22"},speed:{start:2e3,end:0,minimumSpeedMultiplier:.3},acceleration:{x:0,y:2e3},maxSpeed:0,startRotation:{min:255,max:280},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.001,emitterLifetime:3,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:10,h:0}},_n={alpha:{start:1,end:0},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:200,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:.2,max:.3},blendMode:"add",frequency:.05,emitterLifetime:.5,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:1,particleSpacing:0,angleStart:0},Ln=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).star_particles=[],n.blaze_particles=[],n.fireworks_particles=[],n.erase_particle=null,n.running_particles=[];var i=A,r=_;return n.fireworks_particles.push(n.createFirework(130,r-30)),n.fireworks_particles.push(n.createFirework(i-130,r-30)),n.fireworks_particles[0].parent.scale.set(-1,1),n}return(0,u.Z)(e,[{key:"play",value:function(n,t){var e=this.running_particles;return e.push(n),n.cleanup(),n.playOnce((function(){var i=e.indexOf(n);e[i]=e[e.length-1],e.length--,null===t||void 0===t||t.push(n)})),n}},{key:"spawnStarEffect",value:function(n,t){var e=this.star_particles.pop();if(!e){var i=new P.Container;e=new Zn.Q5(i,nn.star_particle,Pn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.star_particles)}},{key:"spawnBlazeParticle",value:function(n,t){var e=this.blaze_particles.pop();if(!e){var i=new P.Container;e=new Zn.Q5(i,nn.blaze_particle,kn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.blaze_particles)}},{key:"createFirework",value:function(n,t){var e=new P.Container,i=new Zn.Q5(e,[nn.star_particle,nn.blaze_particle],An);return this.addChild(e),e.x=n,e.y=t,i}},{key:"spawnFirework",value:function(){var n,t=(0,T.Z)(this.fireworks_particles);try{for(t.s();!(n=t.n()).done;){var e=n.value;this.play(e,null)}}catch(i){t.e(i)}finally{t.f()}}},{key:"spawnErase",value:function(n,t,e){var i=this.erase_particle;if(!i){var r=new P.Container;i=new Zn.Q5(r,nn.dot_particle,_n),this.addChild(r),this.erase_particle=i}i.parent.x=n,i.parent.y=t;var o=i.startColor.value;return o.r=255*e[0],o.g=255*e[1],o.b=255*e[2],this.play(i,null)}},{key:"update",value:function(n){var t,e=(0,T.Z)(this.running_particles);try{for(e.s();!(t=e.n()).done;){t.value.update(n)}}catch(i){e.e(i)}finally{e.f()}}}]),e}(P.Container),Mn=e(9439),jn=e(1016),Cn=(jn.PY,function(){function n(){(0,c.Z)(this,n)}return(0,u.Z)(n,null,[{key:"getDateTimeVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds())," - ").concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getDateVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getTime",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=new Date(n),i=function(n){return n<10?"0"+n:n},r="";if(t&&""!=t)switch(t){case"h":r="".concat(i(e.getUTCHours()));break;case"m":r="".concat(i(e.getUTCMinutes()));break;case"s":r="".concat(i(e.getUTCSeconds()))}else r="".concat(i(Math.floor(e.getUTCHours()/24)),":").concat(i(e.getUTCHours()%24),":").concat(i(e.getUTCMinutes()),":").concat(i(e.getUTCSeconds()));return r}},{key:"msToTime",value:function(n,t){var e=n/1e3,i=Math.floor(e/86400);e%=86400;var r=Math.floor(e/3600);e%=3600;var o=t?Math.ceil(e/60):Math.floor(e/60);return e=Math.floor(e%60),"".concat(i<10?"0"+i:i,":").concat(r<10?"0"+r:r,":").concat(o<10?"0"+o:o,":").concat(e<10?"0"+e:e)}},{key:"msToTimeWithFormat",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day:hour:minute:second",e=n/1e3,i=Math.floor(e),r=Math.floor(e/60),o=Math.floor(e/3600),a=Math.floor(e/86400);return t.includes("minute")&&(i%=60),t.includes("hour")&&(r%=60),t.includes("day")&&(o%=24),t.replace("day",this.formatNumber(a)).replace("hour",this.formatNumber(o)).replace("minute",this.formatNumber(r)).replace("second",this.formatNumber(i))}},{key:"formatNumber",value:function(n){return(n<0?"-":"")+(Math.abs(n)<10?"0":"")+Math.abs(n)}},{key:"msToReadable",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e="";if(t&&""!=t)switch(t){case"h":e="".concat(Math.floor(n/36e5));break;case"m":var i=n%36e5;e="".concat(Math.floor(i/6e4));break;case"s":var r=n%36e5,o=r%6e4;e="".concat(Math.floor(o/1e3))}return e}},{key:"msToSocialTime",value:function(n){var t=(Date.now()-n)/1e3,e=(Math.floor(t),Math.floor(t/60)),i=Math.floor(t/3600),r=Math.floor(t/86400);return r>0?"".concat(r," ng\xe0y tr\u01b0\u1edbc"):i>0?"".concat(i," gi\u1edd tr\u01b0\u1edbc"):e>0?"".concat(e," ph\xfat tr\u01b0\u1edbc"):"V\u1eeba xong"}},{key:"reduceLengthString",value:function(n,t){if(n.length<=t)return n;var e=n.substring(0,t),i=e.lastIndexOf(" ");return e.substring(0,i)+"..."}},{key:"formatName",value:function(n){return n?n.trim().toLowerCase().replace(/(^| )./g,(function(n){return n.toUpperCase()})):""}},{key:"getFirstName",value:function(n){var t;return null===(t=this.formatName(n).match(/\S*$/))||void 0===t?void 0:t[0]}},{key:"convertToShortName",value:function(n,t){return n.length<=t?n:n.replace(/\S* /g,(function(n){return n.charAt(0)+"."}))}},{key:"convertToShortName2",value:function(n,t){if(n.length<=t)return n;var e=n;return e=e.replace(/\s.*\s/g,(function(n){return n.replace(/\S{1,}\s/g,(function(n){return n[0].toUpperCase()+"."})).replace(/.$/," ")}))}},{key:"convertToShortName3",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;if(n.length<=t)return n;var e=n,i=e.split(" ");return e="".concat(i[0]).concat(i.length>1?" "+i[i.length-1]:"")}},{key:"convertToShortName4",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return(e=e.split(" ").splice(-2).join(" ")).length<t?e:e.split(" ").splice(-1)[0]}},{key:"convertToShortName5",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return e.length<t?e:e.split(" ").splice(-1)[0]}},{key:"getLastName",value:function(n){var t=n;return t.split(" ").splice(-1)[0]}},{key:"uuid",get:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}))}},{key:"convertDistanceToString",value:function(n){return Math.abs(n)<1?Math.round(1e3*n)+"m":Math.round(10*n)/10+"km"}},{key:"toggleClass",value:function(n,t){var e=" ".concat(n," ").replace(/  +/g," ");return e.includes(" ".concat(t," "))?e.replaceAll(" ".concat(t," ")," "):e+"".concat(t," ")}},{key:"randomInt",value:function(n,t){return Math.floor(n+Math.random()*(t-n+1))}},{key:"setSpriteTexture",value:function(n,t){t&&(n.texture=P.Texture.from(t))}},{key:"isValidNumber",value:function(n){return/^[0-9\b]+$/.test(n)}},{key:"compareObjectOneLevel",value:function(n,t){return null!=n&&null!=t&&(Object.keys(n).length==Object.keys(t).length&&(Object.keys(n).sort().join(",")===Object.keys(t).sort().join(",")&&JSON.stringify(n,Object.keys(n).sort())===JSON.stringify(t,Object.keys(t).sort())))}},{key:"trimVNCode",value:function(n){return!n.startsWith("084")&&!n.startsWith("+84")||12!==n.length&&13!==n.length?!n.startsWith("84")||11!==n.length&&12!==n.length?n:"0"+n.substring(2):"0"+n.substring(3)}},{key:"formatPhoneNumber",value:function(n){return 11===(n=this.trimVNCode(n)).length||n.length<10?n:n=this.formatOldPhoneNumber(n)}},{key:"formatOldPhoneNumber",value:function(n){if(n.startsWith("03"))return"016"+n.substring(2);if(n.startsWith("07"))switch(n.charAt(2)){case"0":return"0120"+n.substring(3);case"9":return"0121"+n.substring(3);case"7":return"0122"+n.substring(3);case"6":return"0126"+n.substring(3);case"8":return"0128"+n.substring(3)}if(n.startsWith("08"))switch(n.charAt(2)){case"3":return"0123"+n.substring(3);case"4":return"0124"+n.substring(3);case"5":return"0125"+n.substring(3);case"1":return"0127"+n.substring(3);case"2":return"0129"+n.substring(3)}if(n.startsWith("05"))switch(n.charAt(2)){case"2":return"0182"+n.substring(3);case"6":return"0186"+n.substring(3);case"8":return"0188"+n.substring(3);case"9":return"0199"+n.substring(3)}return n}},{key:"sortPuzzles",value:function(n){for(var t=Math.floor(n.length/2),e=n.length%2,i=[],r=0;r<t;++r)i.push(n[r]),i.push(n[r+t+e]);return e&&i.push(n[t]),i}},{key:"numberToK",value:function(n){var t=Math.floor(n/1e3);return t>0?t+"k":n+""}},{key:"checkValueInRange",value:function(n,t,e){return n>=Math.min(t,e)&&n<=Math.max(t,e)}},{key:"convertStringToVND",value:function(n){if(!n)return"";var t=(n=(n=n.replace("\u0111","")).replaceAll(".","")).replace(/\B(?=(\d{3})+(?!\d))/g,".");return t+="\u0111"}},{key:"convertNumberToScoreString",value:function(n){var t=""+n;return t=t.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"convertVNDToString",value:function(n){return n?n=(n=n.replace("\u0111","")).replaceAll(".",""):""}},{key:"convertVNDToNumber",value:function(n){return n?(n=(n=n.replace("\u0111","")).replaceAll(".",""),parseInt(n)):0}},{key:"playPopupRewardSfx",value:function(n){if(n)if(99992023===n)g.play(p.gH.PopupQuaDacBiet);else g.play(p.gH.PopupQuaThuong)}},{key:"moveToTarget",value:function(n,t,e,i){return e=Math.abs(e),n<t?Math.min(n+e*i,t):n>t?Math.max(n-e*i,t):n}},{key:"clamp",value:function(n,t,e){var i=Math.max(t,e),r=Math.min(t,e);return n>i?i:n<r?r:n}},{key:"getItemImageUrl",value:function(n){var t=phoenix.melody.MELODY_BALL_TYPE;switch(n.type){case t.MELODY_BALL_TYPE_NONE:case t.MELODY_BALL_TYPE_NORMAL:return nn.colors[n.color];case t.MELODY_BALL_TYPE_ITEM:return nn.itemColors[n.color];case t.MELODY_BALL_TYPE_BOOM:case t.MELODY_BALL_TYPE_LINE:case t.MELODY_BALL_TYPE_STONE:case t.MELODY_BALL_TYPE_EXPLODE:case t.MELODY_BALL_TYPE_WHITE:return nn.types[n.type];default:return null}}},{key:"getTargetTypeImageUrl",value:function(n,t){var e,i,r,o=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case o.MELODY_LEVEL_TARGET_ANY_BALL:return p.dN.general.levelTargetAnyBall;case o.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return null===(e=this.getItemImageUrl(t))||void 0===e||null===(i=e.baseTexture)||void 0===i||null===(r=i.resource)||void 0===r?void 0:r.url;case o.MELODY_LEVEL_TARGET_SCORE:return p.dN.general.levelTargetScore;case o.MELODY_LEVEL_TARGET_ITEM:return p.dN.general.levelTargetItem;default:return null}}},{key:"getTargetCount",value:function(n,t,e){var i,r,o,a,s=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case s.MELODY_LEVEL_TARGET_ANY_BALL:case s.MELODY_LEVEL_TARGET_SCORE:case s.MELODY_LEVEL_TARGET_ITEM:return(null===e||void 0===e||null===(i=e.ballType)||void 0===i||null===(r=i[n])||void 0===r?void 0:r.current)||0;case s.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return(null===e||void 0===e||null===(o=e.ballColor)||void 0===o||null===(a=o[null===t||void 0===t?void 0:t.color])||void 0===a?void 0:a.current)||0;default:return 0}}},{key:"loadSpine",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t,!this.spineDatas[e]){n.next=3;break}return n.abrupt("return",this.spineDatas[e]);case 3:return n.abrupt("return",new Promise((function(n,r){(new P.Loader).add(e,t).load((function(t,r){var o,a=null===r||void 0===r||null===(o=r[e])||void 0===o?void 0:o.spineData;a&&(i.spineDatas[e]=a),n(a)}))})));case 4:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()}]),n}());Cn.spineDatas={};var Tn,Bn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).boom_holder=void 0,n.boom_empty=void 0,n.boom=void 0,n.mascot=void 0,n.mascot_current_anim="",n.progress=0,n.max=0;var i=_,r=new P.Sprite(nn.background);r.anchor.set(0,1),n.addChild(r),n.y=i,(r=new P.Sprite(nn.background_1)).anchor.set(0,1),r.y=195,n.addChild(r);var o=n.boom_holder=new P.Sprite(nn.boom_holder);o.anchor.set(.5,1),o.x=150,o.y=-73,n.addChild(o),n.loadMascot((0,yn.Z)(n)),(o=n.boom_empty=new P.Sprite(nn.boom_empty)).anchor.set(.5),o.x=0,o.y=-170,n.boom_holder.addChild(o),(o=n.boom=new P.Sprite(nn.types[sn.MELODY_BALL_TYPE_BOOM])).anchor.set(.5),n.boom_empty.addChild(o);var a=new P.Filter(null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float customUniform;\n\nvoid main(void)\n{\n   vec4 fg = texture2D(uSampler, vTextureCoord);\n\n   float a = step(customUniform, vTextureCoord.y * 1.33);\n\n   gl_FragColor = fg * a;\n}\n",{customUniform:1});return o.filters=[a],n}return(0,u.Z)(e,[{key:"loadMascot",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Cn.loadSpine("mascot/Melody_mascot.json");case 2:e=n.sent,(i=new jn.PY(e)).scale.set(-.5,.5),i.x=this.width-150,i.y=-73,this.mascot=i,t.addChild(i);case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"activeBall",value:function(n){var t=n?"anim_active_ball":"anim_idle_normal";this.mascot_current_anim!=t&&(this.mascot_current_anim=t,this.mascot.state.setAnimation(0,t,!0))}},{key:"combo",value:function(){this.mascot_current_anim="anim_idle_normal",this.mascot.state.setAnimation(0,"anim_combo",!1),this.mascot.state.addAnimation(0,"anim_idle_normal",!0,0)}},{key:"end",value:function(n){this.mascot_current_anim=n?"anim_win":"anim_idle_lose",this.mascot.state.setAnimation(0,this.mascot_current_anim,!0)}},{key:"addScore",value:function(n){if(this.boom_holder.visible&&!(this.progress>=1)){var t=Math.min(this.progress+n/this.max,1);this.boom.filters[0].uniforms.customUniform=1-t,this.progress=t}}},{key:"reset",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.progress=0,this.boom.filters[0].uniforms.customUniform=1,this.boom_empty.visible=!0,this.activeBall(!1),n?(this.max=500,this.boom_holder.visible=t):this.max+=500}},{key:"getBoomPosition",value:function(){this.boom_empty.visible=!1;var n=an.fromPIXI(this.boom_empty);return n.x+=this.boom_empty.parent.x+this.x,n.y+=this.boom_empty.parent.y+this.y,n}},{key:"reloadAnim",value:function(n,t){var e=this.children,i=e[0],r=e[1],o=this.boom_holder,a=this.mascot;B.ZP.fromTo(i,{y:700},{y:i.y,delay:t,duration:n}),B.ZP.fromTo(r,{y:1e3},{y:r.y,delay:t,duration:n}),B.ZP.fromTo(o,{y:735},{y:o.y,delay:t,duration:n}),B.ZP.fromTo(a,{y:735},{y:a.y,delay:t,duration:n})}}]),e}(P.Container),En=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).topRight=void 0,n.topLeft=void 0,n.botLeft=void 0,n.botRight=void 0,n.bubble=void 0,n.holder=void 0,n.target=void 0,n.path=[],n.bulletCount=void 0,n.rayColor=null,n.isShooting=!0,n.isSpecial=!1,n.bullets=[],n.bulletRemain=0;var i=A,r=_;n.hitArea=new P.Rectangle(0,0,i,r),n.topLeft=new an(35,0),n.topRight=new an(i-35,0),n.botLeft=new an(35,r),n.botRight=new an(i-35,r);var o=n.holder=P.Sprite.from(nn.ring);o.width=0,o.height=0,o.x=.5*i,o.y=r-250,o.anchor.set(.5),n.addChild(o);var a=P.Sprite.from(nn.ring);a.anchor.set(.5),o.addChild(a),B.ZP.fromTo(a,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(5).repeat(-1);var s=[],l=new P.Sprite;l.anchor.set(.5);var u=new P.Sprite(nn.hover);u.anchor.set(.5),l.addChild(u),s.push(u);var h=new P.Sprite;h.anchor.set(.5),(u=new P.Sprite(nn.hover)).anchor.set(.5),h.addChild(u),s.push(u);var d=new P.Sprite;d.anchor.set(.5),(u=new P.Sprite(nn.hover)).anchor.set(.5),d.addChild(u),s.push(u);var p=n.bulletCount=new P.Text("",K);p.anchor.set(.5),p.scale.set(2),o.addChild(l),o.addChild(h),o.addChild(d),o.addChild(p),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,yn.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,yn.Z)(n))),n.on("pointerup",n.onButtonUp.bind((0,yn.Z)(n))),o.interactive=!0,o.on("pointerup",n.changeColor.bind((0,yn.Z)(n)));var f=n.bubble=new P.Sprite;f.width=V,f.height=V,f.anchor.set(.5),n.addChild(f),n.visible=!1;for(var g=0,m=s;g<m.length;g++){var x=m[g];x.scale.set(.53),B.ZP.fromTo(x,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(3).repeat(-1)}return n}return(0,u.Z)(e,[{key:"turnOff",value:function(){var n;null===(n=this.target)||void 0===n||n.turn(-1),this.target=null,this.path.length=0,N.setRayPoints([]),this.isShooting=!0,this.visible=!1}},{key:"scoreBullet",value:function(){var n,t=nt.map.misc,e={sprite:{x:0,y:0}},i=1e3,r=B.ZP.timeline(),o=this.holder.x-t.x,a=this.holder.y-t.y-300,s=(0,T.Z)(this.bullets);try{for(s.s();!(n=s.n()).done;){n.value;r.add(B.ZP.delayedCall(.2,(function(){e.sprite.x=o+200*(Math.random()-.5),e.sprite.y=a+300*(Math.random()-.5),t.spawnScore(e,1.7).text=i+=1e3,nt.map.addScore(i)})))}}catch(l){s.e(l)}finally{s.f()}}},{key:"reload",value:function(n){var t=this;this.bullets=(0,M.Z)(n);var e=this.holder.children,i=(0,Mn.Z)(e,4),r=(i[0],i[1]),o=i[2],a=i[3];r.texture=null,o.visible=!1,r.visible=!1,a.visible=!1,this.visible=!0,this.isSpecial=!1,this.bulletCount.text=this.bulletRemain=n.length,B.ZP.fromTo(this.holder,{width:0,height:0},{width:nn.ring.width,height:nn.ring.height,duration:.5}).then((function(){o.texture=t.getColor(),o.visible=!0,t.reset()}))}},{key:"getColor",value:function(){var n=this.bullets.shift();if(n)return nn.colors[n.color]}},{key:"changeColor",value:function(){var n=this;if(!this.isShooting){this.isShooting=!0;var t=this.holder.children,e=(0,Mn.Z)(t,4),i=(e[0],e[1]),r=e[2],o=e[3],a=i.texture;i.texture=r.texture,this.rayColor=nn.rayColor[nn.colors.indexOf(i.texture)],this.isSpecial?(r.texture=o.texture,o.texture=a):r.texture=a;var s={value:0},l=79;B.ZP.to(s,{value:1}).eventCallback("onUpdate",(function(){var t=q+(V-q)*s.value;i.width=t,i.height=t;var e=Math.PI/6-s.value*Math.PI*2/3;i.x=Math.cos(e)*l,i.y=Math.sin(e)*l,n.isSpecial?(t=J+(q-J)*s.value,r.width=t,r.height=t,e=5*Math.PI/6-s.value*Math.PI*2/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l,t=V+(J-V)*s.value,o.width=t,o.height=t,e=-Math.PI/2-s.value*Math.PI*2/3,o.x=Math.cos(e)*l,o.y=Math.sin(e)*l):(t=V+(q-V)*s.value,r.width=t,r.height=t,e=-Math.PI/2-s.value*Math.PI*4/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l)})).duration(.4).then((function(){return n.isShooting=!1}))}}},{key:"triggerBoom",value:function(n,t){var e=this;this.isShooting=!0;var i=this.holder.children,r=(0,Mn.Z)(i,4),o=(r[0],r[1]),a=(r[2],r[3]),s=this.bubble;this.isSpecial=!0,a.texture=o.texture,o.texture=nn.types[sn.MELODY_BALL_TYPE_BOOM],s.texture=o.texture,this.rayColor=nn.rayColor[0],o.width=V,o.height=V,s.width=V,s.height=V;var l={value:0};B.ZP.to(l,{value:1}).eventCallback("onUpdate",(function(){var n=V+(J-V)*l.value;a.width=n,a.height=n;var t=-Math.PI/2-l.value*Math.PI*2/3;a.x=79*Math.cos(t),a.y=79*Math.sin(t),a.visible=!0})).duration(.3),l.value=0;var c=s.x,u=s.y;return o.visible=!1,B.ZP.to(l,{value:1,duration:1,onUpdate:function(){var e=l.value*l.value,i=1-2*Math.abs(e-.5);i=1-(1-i)*(1-i),s.x=n+(c-n)*e,s.y=t+(u-t)*e-150*i}}).then((function(){s.texture=null,o.visible=!0,e.isShooting=!1})),1}},{key:"reset",value:function(){var n=this,t=this.holder.children,e=(0,Mn.Z)(t,4),i=(e[0],e[1]),r=e[2],o=e[3],a=nt.map.boomHolder,s=this.checkType()===sn.MELODY_BALL_TYPE_BOOM;if(i.texture=r.texture,this.rayColor=nn.rayColor[nn.colors.indexOf(i.texture)],!this.bulletRemain)return a.end(!1),void B.ZP.delayedCall(1,(function(){return E.Z.dispatch(S.X.actions.setLosePopupVisible(!0))}));s&&(a.reset(!1),this.isSpecial=!1,o.visible=!1);var l=79;if(this.isSpecial){var c=this.getColor();c&&B.ZP.fromTo(o,{width:1,height:1},{width:J,height:J}).delay(.2).duration(.3);var u=5*Math.PI/6;o.x=Math.cos(u)*l,o.y=Math.sin(u)*l,r.texture=o.texture,o.texture=c}else if(s)r.texture=o.texture;else{var h=this.getColor();h&&B.ZP.fromTo(r,{width:1,height:1},{width:q,height:q}).delay(.2).duration(.3);var d=Math.PI/6;r.x=Math.cos(d)*l,r.y=Math.sin(d)*l,r.texture=h,r.visible=void 0!=h}this.bubble.x=0+this.holder.x,this.bubble.y=-l+this.holder.y;var p={value:0};B.ZP.to(p,{value:1}).eventCallback("onUpdate",(function(){var t=q+(V-q)*p.value;i.width=t,i.height=t;var e=Math.PI/6-p.value*Math.PI*2/3;i.x=Math.cos(e)*l,i.y=Math.sin(e)*l,i.visible=!0,(n.isSpecial||s)&&(t=J+(q-J)*p.value,r.width=t,r.height=t,e=5*Math.PI/6-p.value*Math.PI*2/3,r.x=Math.cos(e)*l,r.y=Math.sin(e)*l)})).duration(.3).then((function(){return n.isShooting=!1}))}},{key:"update",value:function(n){if(!this.isShooting){var t=nt.map.boomHolder;if(t.progress>=1&&!this.isSpecial){var e=t.getBoomPosition();this.triggerBoom(e.x,e.y)}}}},{key:"onButtonOver",value:function(n){var t;if(!this.isShooting){var e=n.data.global,i=nt.scale,r=nt.map;e.y-=r.parent.y,e.x/=i.x,e.y/=i.y,null===(t=this.target)||void 0===t||t.turn(-1),this.target=null,this.path.length=0,N.setRayPoints([]),this.checkType()!==sn.MELODY_BALL_TYPE_NORMAL&&nt.map.reset(),e.y>_-400?r.boomHolder.activeBall(!1):(r.boomHolder.activeBall(!0),this.onDirection(e.x,e.y))}}},{key:"onButtonUp",value:function(){var n=this;if(!this.isShooting&&this.target){this.isShooting=!0;var t=nt.map,e=this.bubble,i=this.holder.children,r=(0,Mn.Z)(i,4),o=(r[0],r[1]);r[2],r[3];o.visible=!1,e.texture=o.texture;var a,s=an.fromPIXI(e),l=B.ZP.timeline(),c=0,u={sprite:{x:0,y:0}},h=nt.map.container,d=h.x,p=h.y,f=this.path.length,g=(0,T.Z)(this.path);try{for(g.s();!(a=g.n()).done;){var m=a.value;c=4e-4*s.subtract(m).length(),s.copy(m),l.add(B.ZP.to(e,{x:m.x,y:m.y,duration:c})),--f>0&&l.add(B.ZP.delayedCall(0,(function(){var n=t.targetChecker.getWallScore();u.sprite.x=e.x-d,u.sprite.y=e.y-p,t.misc.spawnScore(u).text=n})))}}catch(v){g.e(v)}finally{g.f()}var x=this.target;x.turn(-1),this.target=null,this.path.length=0,N.setRayPoints([]),l.then((function(){x.setColor(nn.colors.indexOf(e.texture)),x.setType(n.checkType()),x.type=sn.MELODY_BALL_TYPE_NONE,t.putBubble3(x),e.texture=null,n.bulletCount.text=--n.bulletRemain}))}}},{key:"getBubbleHit",value:function(n,t){var e=34;e=e*e*2;var i=an.fromPIXI(nt.map.container),r=null,o=null,a=null,s=nt.map.data,l=n.y-i.y;l=Math.floor(l/W);var c=Math.max(l%2?n.x-34:n.x,0),u=s[(c=Math.floor(c/V))+11*l],h=l%2==1&&c>=10;return u&&(!u.isEmpty||h&&!s[c-1+11*l].isEmpty)&&(r=u),l=t.y-i.y,l=Math.floor(l/W),c=Math.max(l%2?t.x-34:t.x,0),(u=s[(c=Math.floor(c/V))+11*l])&&u.isEmpty&&(o=u,a=an.fromPIXI(o.sprite).add(i)),!r&&o&&o.sprite.y<W&&(r=o),r&&this.checkType()===sn.MELODY_BALL_TYPE_LINE&&(o=r,a=an.fromPIXI(o.sprite).add(i)),{hit:r,empty:o,emptyPos:a}}},{key:"checkType",value:function(){var n=this.holder.children[1].texture;return n===nn.types[sn.MELODY_BALL_TYPE_BOOM]?sn.MELODY_BALL_TYPE_BOOM:n===nn.types[sn.MELODY_BALL_TYPE_LINE]?sn.MELODY_BALL_TYPE_LINE:sn.MELODY_BALL_TYPE_NORMAL}},{key:"onDirection",value:function(n,t){var e=[],i=an.fromPIXI(this.bubble),r=nt.map.container.y,o=i.clone(),a=new an(n,t).subtract(i).normalize().multiply(10);for(e.push(i.clone());i.y>r;){o.copy(i),i.add(a);var s=this.getBubbleHit(i,o),l=s.hit,c=s.empty,u=s.emptyPos;if(l){c&&(nt.map.onButtonOver(c,this.checkType()),this.target=c,this.path.push(u));break}if(i.x<this.topLeft.x){var h=this.line2line(o,i,this.topLeft,this.botLeft);i.copy(h),e.push(i.clone()),this.path.push(i.clone()),a.x=-a.x}if(i.x>this.topRight.x){var d=this.line2line(o,i,this.topRight,this.botRight);i.copy(d),e.push(i.clone()),this.path.push(i.clone()),a.x=-a.x}}this.target&&e.push(i.clone()),N.setRayPoints(e,this.rayColor)}},{key:"getLine",value:function(n,t){var e=t.y-n.y,i=n.x-t.x;return{a:e,b:i,c:n.x*e+n.y*i}}},{key:"line2line",value:function(n,t,e,i){var r=this.getLine(n,t),o=r.a,a=r.b,s=r.c,l=this.getLine(e,i),c=l.a,u=l.b,h=l.c,d=o*u-c*a;if(0!=d)return new an((s*u-h*a)/d,(h*o-s*c)/d)}}]),e}(P.Container),Sn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).balls=[];var i=A,r=_;return n.x=.5*i,n.y=r-60,n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i,r=null,o=(0,T.Z)(this.balls);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!a.isPlaying){r=a;break}}}catch(s){o.e(s)}finally{o.f()}r||(r=new un,this.addChild(r.sprite),this.addChild(r.text),this.balls.push(r)),r.set(n,t,e)}},{key:"update",value:function(n){var t,e=(0,T.Z)(this.balls);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.isPlaying&&i.update(n)}}catch(r){e.e(r)}finally{e.f()}}}]),e}(P.Container),In=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).hovers=[],n.scores=[],n}return(0,u.Z)(e,[{key:"turnOn",value:function(n){var t=this.hovers.pop();t||((t=new P.Sprite(nn.hover)).anchor.set(.5),t.width=81,t.height=81,B.ZP.fromTo(t,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(3).repeat(-1),this.addChild(t));var e=n.sprite,i=e.x,r=e.y;return t.visible=!0,t.x=i,t.y=r,n.hover=t,t}},{key:"turnOff",value:function(n){this.hovers.push(n.hover),n.hover.visible=!1,n.hover=null}},{key:"spawnText",value:function(n){var t=this.scores.pop();t||((t=new P.Text("",$)).anchor.set(.5),t.scale.set(.5),this.addChild(t)),t.visible=!0;var e=n.sprite,i=e.x,r=e.y;return t.x=i,t.y=r,t}},{key:"spawnScore",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.scores.pop();i||((i=new P.Text("",K)).anchor.set(.5),this.addChild(i)),i.visible=!0;var r=n.sprite,o=r.x,a=r.y;return i.x=o,i.y=a,i.scale.set(e),B.ZP.to(i,{y:a-30*e,alpha:0,duration:1}).then((function(){i.visible=!1,i.alpha=1,t.scores.push(i)})),i}}]),e}(P.Container),On=function(){function n(){(0,c.Z)(this,n),this.ballColor=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.ballType=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.totalBall={current:0,target:0},this.comboScore=0,this.wallScore=0,this.totalScore=0}return(0,u.Z)(n,[{key:"getWallScore",value:function(){var n=this.wallScore;return this.wallScore+=25,n}},{key:"init",value:function(n){var t,e=(0,T.Z)(this.ballColor);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.current=i.target=0}}catch(l){e.e(l)}finally{e.f()}this.totalBall.current=this.totalBall.target=0;var r,o=(0,T.Z)(n.targets);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.ball;!s||0===s.color&&0===s.type?this.totalBall.target=a.quantity:(s.color>0&&(this.ballColor[s.color-1].target=a.quantity),s.type>0&&(this.ballType[s.type-1].target=a.quantity))}}catch(l){o.e(l)}finally{o.f()}this.comboScore=10,this.wallScore=25,this.totalScore=0,E.Z.dispatch(S.X.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType}))}},{key:"countBall",value:function(n,t){this.ballColor[n].current++,this.totalBall.current++,this.ballType[t].current++,E.Z.dispatch(S.X.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType}))}},{key:"addScore",value:function(n){return this.totalScore+=n}},{key:"check",value:function(){var n,t=!0,e=(0,T.Z)(this.ballColor);try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.current<i.target){t=!1,console.log(i);break}}}catch(s){e.e(s)}finally{e.f()}var r,o=(0,T.Z)(this.ballType);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.current<a.target){t=!1,console.log(a);break}}}catch(s){o.e(s)}finally{o.f()}return this.totalBall.current<this.totalBall.target&&(t=!1,console.log(this.totalBall)),t}}]),n}(),Nn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,c.Z)(this,e),(n=t.call(this)).container=void 0,n.data=[],n.gun=void 0,n.physicsBox=void 0,n.boomHolder=void 0,n.colorTool=void 0,n.targetChecker=void 0,n.misc=void 0,n.effect=void 0,n.level=void 0,i=!0,n.addChild(n.boomHolder=new Bn),i||(n.addChild(N),n.addChild(n.gun=new En)),n.addChild(n.container=new P.Container),n.addChild(n.physicsBox=new Sn),n.addChild(n.effect=new Ln),n.addChild(n.misc=new In),i&&n.addChild(n.colorTool=new wn);var r=new P.Sprite(nn.headline);return r.y=9,r.anchor.set(0,1),n.container.addChild(r),xn(n.targetChecker=new On),n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i=Math.floor(n/t),r=n%t,o=new cn(r,i),a=o.neighbors;e.push(o);var s=r>0?e[n-1]:null;if(i%2===1&&(n+=1,(r+=1)>=t))return o;var l=i>0&&(i%2===1||r+1<t)?e[n-t]:null,c=i>0&&r>0?e[n-t-1]:null;return l&&(l.neighbors[4]=o),c&&(c.neighbors[5]=o),s&&(s.neighbors[0]=o),a[1]=l,a[2]=c,a[3]=s,o}},{key:"addScore",value:function(n){this.boomHolder.addScore(n);var t=this.targetChecker.addScore(n);E.Z.dispatch(S.X.actions.setCurrentGame({score:t}))}},{key:"load",value:function(n){var t=this;this.level=n,this.targetChecker.init(n);for(var e=this.container,i=n.map,r=this.data,o=i.length,a=0;a<o;a++){var s=i[a],l=s.color,c=s.type,u=r[a];u||(u=this.addBubble(a,11,r),e.addChild(u.sprite)),u.isMarked=!1,u.setColor(l,l>0),u.setType(c)}o=r.length;var h=9*W;if(h=Math.max(r[a-1].sprite.y-h,0),o<=a)this.addEmptyLine(1);else for(;a<o;a++)r[a].setColor(0);if(E.Z.dispatch(S.X.actions.setCurrentGame({level:n.id||0,score:0,star1Score:this.level.star1Score,star2Score:this.level.star2Score,star3Score:this.level.star3Score})),this.gun)return this.gun.turnOff(),this.boomHolder.reset(!0,n.id>6),0!==h&&this.boomHolder.reloadAnim(.003*h,1),B.ZP.fromTo(e,{y:X},{y:-h+X}).delay(1).duration(.003*h).then((function(){return t.gun.reload(n.bullets)}));e.y=-h+X}},{key:"reload",value:function(n){this.load(e.findLevelConfig(tn,n))}},{key:"addEmptyLine",value:function(n){for(var t=this.container,e=this.data,i=e.length,r=0,o=11*n;r<o;r++){var a=this.addBubble(i,11,e);a.setColor(0),t.addChild(a.sprite),i++}}},{key:"reset",value:function(){var n,t=(0,T.Z)(this.data);try{for(t.s();!(n=t.n()).done;){var e=n.value;null===e||void 0===e||e.turn(-1)}}catch(i){t.e(i)}finally{t.f()}}},{key:"update",value:function(n){var t,e,i;null===(t=this.physicsBox)||void 0===t||t.update(n),null===(e=this.colorTool)||void 0===e||e.update(n),null===(i=this.gun)||void 0===i||i.update(n),this.misc.y=this.container.y,this.effect.update(n),N.update(n)}},{key:"pickBubble",value:function(n,t,e){var i,r=this,o=this.container,a=o.x,s=o.y,l=.2*V,c=.3,u=n[0],h=0,d=[],p=(0,T.Z)(n);try{var f=function(){var n=i.value,o=n.sprite,p=3e-6*new an(o.x-u.sprite.x,o.y-u.sprite.y).lengthSqr()+e;B.ZP.to(o,{width:l,height:l,delay:p,duration:c}).then((function(){n.setColor(0),o.width=V,o.height=V,r.addScore(t),r.misc.spawnScore(n).text=t})),B.ZP.delayedCall(p,(function(){return r.effect.spawnStarEffect(o.x+a,o.y+s)})),n.isOrigin&&r.targetChecker.countBall(n.color,n.type),n.setType(sn.MELODY_BALL_TYPE_NONE),p>h&&(h=p);var f,g=(0,T.Z)(n.neighbors);try{var m=function(){var t=f.value;t&&t.type===sn.MELODY_BALL_TYPE_WHITE&&n.color>0&&n.color<7&&(t.color=n.color,d.push(t),B.ZP.delayedCall(p+c,(function(){t.setColor(t.color,t.isOrigin),B.ZP.fromTo(t.sprite,{width:l,height:l},{width:V,height:V,duration:c})})))};for(g.s();!(f=g.n()).done;)m()}catch(x){g.e(x)}finally{g.f()}};for(p.s();!(i=p.n()).done;)f()}catch(b){p.e(b)}finally{p.f()}for(var g=0,m=d;g<m.length;g++){var x=m[g];if(x.type===sn.MELODY_BALL_TYPE_WHITE){n=this.getGroup(x);var v,y=(0,T.Z)(n);try{for(y.s();!(v=y.n()).done;){v.value.isMarked=!1}}catch(b){y.e(b)}finally{y.f()}n.length<3||(h=this.pickBubble(n,this.targetChecker.comboScore,c+h+c))}}return c+h}},{key:"onFire",value:function(n){var t=null,e=this.targetChecker.comboScore,i=n.type;i===sn.MELODY_BALL_TYPE_NORMAL&&(t=this.getGroup(n),this.targetChecker.comboScore+=10),i===sn.MELODY_BALL_TYPE_BOOM&&(t=this.getNeighborbyLevel(n,3),e=250),i===sn.MELODY_BALL_TYPE_LINE&&(t=this.getLineNeighbor(n,3),e=500);var r,o=n.neighbors.filter((function(n){return n&&n.type===sn.MELODY_BALL_TYPE_EXPLODE})),a=(0,T.Z)(o);try{for(a.s();!(r=a.n()).done;){var s,l=r.value;(s=t).push.apply(s,(0,M.Z)(this.getNeighborbyLevel(l,2)))}}catch(h){a.e(h)}finally{a.f()}var c,u=(0,T.Z)(t);try{for(u.s();!(c=u.n()).done;){c.value.isMarked=!1}}catch(h){u.e(h)}finally{u.f()}return t=t.filter((function(n){return!n.isEmpty})),t.length<3&&i===sn.MELODY_BALL_TYPE_NORMAL?(this.gun.reset(),this.targetChecker.comboScore=10,t.length<2&&!n.neighbors[1]&&!n.neighbors[2]?-1:0):this.pickBubble(t,e,0)}},{key:"putBubble3",value:function(n){var t=this,e=0,i=0,r=[n],o=0,a=0,s=0,l=n,c=l.sprite,u=l.nextType,h=this.container,d=h.x,p=h.y;if(u===sn.MELODY_BALL_TYPE_NORMAL&&!n.neighbors[1]&&!n.neighbors[2]&&this.getGroup(n).length<2)n.setType(sn.MELODY_BALL_TYPE_NONE),B.ZP.to(c,{width:hn,height:hn,duration:.2}).then((function(){n.setColor(0),c.width=V,c.height=V,d+=c.x,p+=c.y,t.effect.spawnErase(d,p,t.gun.rayColor),t.gun.reset(),t.targetChecker.comboScore=10}));else{for(;a<r.length;){if(a===s){i+=e,s=r.length;for(var f=o;f<a;f++){var g=r[f];g.type=g.nextType}for(var m=a;m<s;m++){var x=r[m];x.type!==sn.MELODY_BALL_TYPE_NONE&&x.type!==sn.MELODY_BALL_TYPE_WHITE||x.type===x.nextType||x.nextType===sn.MELODY_BALL_TYPE_NONE||(x.type=x.type===sn.MELODY_BALL_TYPE_WHITE?sn.MELODY_BALL_TYPE_NORMAL:x.nextType,mn(x,i))}o=a}n=r[a++];var v,y=(0,T.Z)(n.neighbors);try{for(y.s();!(v=y.n()).done;){var b=v.value;if(b){var w=vn(n,b,i);w>0&&r.push(b),w>e&&(e=w)}}}catch(I){y.e(I)}finally{y.f()}}n=r[0]}var Z=e>0?0:n.sprite.y;if(this.data[this.data.length-1].sprite.y<=Z&&this.addEmptyLine(1),Z+p>9*W+X&&B.ZP.to(this.container,{y:p-W}).duration(.5),this.reset(),i>0)B.ZP.delayedCall(i,this.sweepMap.bind(this)),u===sn.MELODY_BALL_TYPE_NORMAL&&(this.targetChecker.comboScore+=10),this.boomHolder.combo();else if(n.type===sn.MELODY_BALL_TYPE_NORMAL){var P=B.ZP.timeline();P.add(B.ZP.to(c,{width:81.6,height:81.6,duration:.1})),P.add(B.ZP.to(c,{width:V,height:V,duration:.2})),P.then((function(){t.gun.reset(),t.targetChecker.comboScore=10}))}r=this.getNeighborbyLevel(n,3);var k,A=(0,T.Z)(r);try{for(A.s();!(k=A.n()).done;){var _=k.value;if(_!==n&&!_.isEmpty&&_.type!==sn.MELODY_BALL_TYPE_STONE){var L=_.sprite,M=L.x,j=L.y,C=new an(M-c.x,j-c.y),E=C.lengthSqr();C.normalize().multiply(1e5/E);var S=B.ZP.timeline();S.add(B.ZP.to(_.sprite,{x:M+C.x,y:j+C.y}).duration(.1)),S.add(B.ZP.to(_.sprite,{x:M,y:j}).duration(.2))}}}catch(I){A.e(I)}finally{A.f()}}},{key:"putBubble",value:function(n){var t=this,e=this.gun.rayColor,i=this.container,r=this.onFire(n),o=r>0?0:n.sprite.y;this.data[this.data.length-1].sprite.y<=o&&this.addEmptyLine(1),o+i.y>9*W+X&&B.ZP.to(i,{y:i.y-W}).duration(.5),this.reset();var a=V,s=n.sprite;if(0===r){var l=B.ZP.timeline();l.add(B.ZP.to(s,{width:1.1*a,height:1.1*a,duration:.1})),l.add(B.ZP.to(s,{width:a,height:a,duration:.2}))}else r<0?(r=0,B.ZP.to(s,{width:.1*a,height:.1*a,duration:.2}).then((function(){n.setColor(0),s.width=a,s.height=a;var r=i.x,o=i.y;r+=s.x,o+=s.y,t.effect.spawnErase(r,o,e)}))):B.ZP.delayedCall(Math.max(r-.1,0),this.sweepMap.bind(this));var c,u=this.getNeighborbyLevel(n,3),h=(0,T.Z)(u);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(d.isMarked=!1,d!==n&&!d.isEmpty){var p=d.sprite,f=p.x,g=p.y,m=new an(f-s.x,g-s.y),x=m.lengthSqr();m.normalize().multiply(1e5/x);var v=B.ZP.timeline();v.add(B.ZP.to(d.sprite,{x:f+m.x,y:g+m.y}).duration(.1)),v.add(B.ZP.to(d.sprite,{x:f,y:g}).duration(.2))}}}catch(y){h.e(y)}finally{h.f()}return r+.5}},{key:"sweepMap",value:function(){for(var n=this,t=this.data,e=0,i=e+z,r=[];e<i;e++){var o=t[e];o.isEmpty||(r.push(o),o.isMarked=!0)}for(var a=0,s=t[0].sprite.y;a<r.length;){var l,c=r[a].neighbors,u=(0,T.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||(r.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(w){u.e(w)}finally{u.f()}a++}var d=[];for(e=0,i=t.length;e<i;e++){var p=t[e];p.isEmpty||p.isMarked||d.push(p),p.isMarked=!1}var f=this.container;if(s+f.y<X+V){var g=9*W;g=-(g=Math.max(s-g,0))+X,B.ZP.to(f,{y:g}).duration(Math.max(.002*Math.abs(g-f.y),.3))}for(var m=f.x-this.physicsBox.x,x=f.y-this.physicsBox.y,v=0,y=d;v<y.length;v++){var b=y[v];this.physicsBox.addBubble(b,m,x),b.isOrigin&&this.targetChecker.countBall(b.color,b.type),b.setColor(0)}B.ZP.delayedCall(.2,(function(){n.targetChecker.check()?(n.gun.turnOff(),n.gun.scoreBullet(),n.boomHolder.end(!0),n.effect.spawnFirework(),B.ZP.delayedCall(Math.max(Math.min(d.length,3),2),(function(){return nt.setWinPopupVisible(!0)}))):n.gun.reset()}))}},{key:"getGroup",value:function(n){var t=[n],e=n.color;n.isMarked=!0;for(var i=0;i<t.length;){var r,o=t[i++].neighbors,a=(0,T.Z)(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;!s||s.isMarked||s.isEmpty||s.color!==e||(t.push(s),s.isMarked=!0)}}catch(u){a.e(u)}finally{a.f()}}for(var l=0,c=t;l<c.length;l++){c[l].isMarked=!1}return t}},{key:"getLineNeighbor",value:function(n,t){var e=[n];n.isMarked=!0;for(var i=n.neighbors[0],r=n.neighbors[3],o=1;o<t;o++)i&&(e.push(i),i.isMarked=!0,i=i.neighbors[0]),r&&(e.push(r),r.isMarked=!0,r=r.neighbors[3]);for(var a=0,s=e;a<s.length;a++){s[a].isMarked=!1}return e}},{key:"getNeighborbyLevel",value:function(n,t){var e=[n],i=0,r=e.length;n.isMarked=!0;for(var o=1;o<t;o++){for(;i<r;i++){var a,s=e[i].neighbors,l=(0,T.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c&&!c.isMarked&&(e.push(c),c.isMarked=!0)}}catch(d){l.e(d)}finally{l.f()}}r=e.length}for(var u=0,h=e;u<h.length;u++){h[u].isMarked=!1}return e}},{key:"onButtonOver",value:function(n,t){if(n.isEmpty||t===sn.MELODY_BALL_TYPE_LINE)switch(t){case sn.MELODY_BALL_TYPE_NORMAL:n.turn(0);break;case sn.MELODY_BALL_TYPE_BOOM:var e,i=this.getNeighborbyLevel(n,3),r=(0,T.Z)(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.turn(o.color)}}catch(p){r.e(p)}finally{r.f()}break;case sn.MELODY_BALL_TYPE_LINE:var a,s=this.getLineNeighbor(n,3),l=(0,T.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.turn(c.color)}}catch(p){l.e(p)}finally{l.f()}}else{var u,h=this.getGroup(n),d=(0,T.Z)(h);try{for(d.s();!(u=d.n()).done;){u.value.turn(n.color)}}catch(p){d.e(p)}finally{d.f()}}}}],[{key:"findLevelConfig",value:function(n,t){var e,i=(0,T.Z)(n.chapters);try{for(i.s();!(e=i.n()).done;){var r,o=e.value,a=(0,T.Z)(o.levels);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.id===t)return s}}catch(l){a.e(l)}finally{a.f()}}}catch(l){i.e(l)}finally{i.f()}return on||null}}]),e}(P.Container),Yn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this))._mapPosition=new P.ObservablePoint((function(){}),(0,yn.Z)(i),0,0),i._onPositionChange=void 0,i.camera=void 0,i._objectHeight=0,i.camera=n,i}return(0,u.Z)(e,[{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,n.y),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"objectHeight",get:function(){return this._objectHeight},set:function(n){this._objectHeight=n}},{key:"onPositionChange",set:function(n){this._onPositionChange=n}},{key:"updateDrawPosition",value:function(){if(this.camera&&!this.isInactive()){var n=this.camera.calculateDrawPosition(this);this.position.set(n.x,n.y)}}},{key:"addDebugLine",value:function(){}},{key:"addDebugRect",value:function(n){}}]),e}(P.Container);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Tn||(Tn={}));var Dn,Un=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this,null)).isDragging=!1,n.touchDownY=0,n.touchY=0,n.touchDownTime=0,n.touchIdentifier=-1,n.rootY=0,n.state=Tn.Null,n.speedY=0,n.yMin=0,n.yMax=0,n.position.set(.5*A,.5*_),n.interactive=!0,n.on("pointerdown",n.onPointerDown.bind((0,yn.Z)(n))),n.on("pointermove",n.onPointerMove.bind((0,yn.Z)(n))),n.on("pointerup",n.onPointerUp.bind((0,yn.Z)(n))),n.on("pointercancel",n.onPointerUp.bind((0,yn.Z)(n))),n.on("pointerupoutside",n.onPointerUp.bind((0,yn.Z)(n))),n}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Tn.Active:this.isDragging=!1,this.speedY=0;case Tn.Inactive:}}},{key:"update",value:function(n){if(this.state===Tn.Active)this.updatePosition(n)}},{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,Cn.clamp(n.y,this.yMin,this.yMax)),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"isInactive",value:function(){return this.state===Tn.Active}},{key:"active",value:function(){this.setState(Tn.Active)}},{key:"inactive",value:function(){this.setState(Tn.Inactive)}},{key:"calculateDrawPosition",value:function(n){return{x:n.mapPosition.x-this.mapPosition.x+.5*A,y:-(n.mapPosition.y-this.mapPosition.y)+.5*_}}},{key:"setYMinMax",value:function(n,t){this.yMin=n,this.yMax=t}},{key:"setHitAreaSize",value:function(n,t){this.hitArea||(this.hitArea=new P.Rectangle(-.5*n,-.5*t,n,t)),this.hitArea.width=n,this.hitArea.height=t}},{key:"onPointerDown",value:function(n){var t,e,i;if(!this.isDragging){var r=null===n||void 0===n||null===(t=n.data)||void 0===t||null===(e=t.originalEvent)||void 0===e||null===(i=e.changedTouches)||void 0===i?void 0:i[0];r&&(this.isDragging=!0,this.touchIdentifier=r.identifier,this.touchDownY=this.touchY=r.clientY,this.touchDownTime=Date.now(),this.rootY=this.mapPosition.y)}}},{key:"onPointerMove",value:function(n){if(this.isDragging){var t=this.getTouchByIdentifier(n,this.touchIdentifier);if(t){this.touchY=t.clientY;var e=(t.clientY-this.touchDownY)*(A/window.innerWidth);this.mapPosition={x:this.mapPosition.x,y:this.rootY+e}}}}},{key:"onPointerUp",value:function(n){if(this.isDragging&&this.getTouchByIdentifier(n,this.touchIdentifier)){this.isDragging=!1;var t=(this.touchY-this.touchDownY)*(A/window.innerWidth),e=Date.now()-this.touchDownTime;this.speedY=t/(e/1e3),this.speedY=Math.sign(this.speedY)*Math.max(Math.abs(this.speedY)-1e3,0)}}},{key:"updatePosition",value:function(n){if(!this.isDragging&&0!==this.speedY){this.speedY=Cn.moveToTarget(this.speedY,0,Math.max(Math.abs(1*this.speedY),6e3),n);var t=this.mapPosition.x,e=this.mapPosition.y+this.speedY*n;this.mapPosition={x:t,y:e}}}},{key:"getTouchByIdentifier",value:function(n,t){var e,i,r=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.originalEvent)||void 0===i?void 0:i.changedTouches;if(!r)return null;for(var o=0;o<r.length;o++){var a=r[o];if(a.identifier==t)return a}return null}}]),e}(Yn),Rn=new(function(){function n(){(0,c.Z)(this,n),this.textures=new Map}return(0,u.Z)(n,[{key:"from",value:function(n){return this.textures.has(n)||this.textures.set(n,P.Texture.from(n)),this.textures.get(n)}}]),n}());!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Dn||(Dn={}));var Qn,Hn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).geometry=void 0,i.material=void 0,i.mesh=void 0,i.sprite=void 0,i.state=Dn.Null,i.sprite=new P.Sprite,i.sprite.anchor.set(.5,1),i.addChild(i.sprite),i.setState(Dn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Dn.Active:this.visible=!0;break;case Dn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Dn.Active)}},{key:"inactive",value:function(){this.setState(Dn.Inactive)}},{key:"isInactive",value:function(){return this.state===Dn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Rn.from(n)}},{key:"addMesh",value:function(){this.geometry=new P.Geometry,this.geometry.addAttribute("aVertexPosition",[-.5,-.5,.5,-.5,.5,.5,-.5,.5],2),this.geometry.addAttribute("aUvs",[0,0,1,0,1,1,0,1],2),this.geometry.addIndex([0,1,2,0,2,3]),this.material=new P.MeshMaterial(P.Texture.WHITE),this.mesh=new P.Mesh(this.geometry,this.material),this.mesh.scale.set(10,10),this.mesh.tint=16711680,this.addChild(this.mesh)}}]),e}(Yn);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Qn||(Qn={}));var Fn,zn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=Qn.Null,i.sprite=void 0,i.sprite=new P.Sprite,i.sprite.anchor.set(.5,.5),i.addChild(i.sprite),i.addDebugLine(),i.setState(Qn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Qn.Active:this.visible=!0;break;case Qn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Qn.Active)}},{key:"inactive",value:function(){this.setState(Qn.Inactive)}},{key:"isInactive",value:function(){return this.state===Qn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Rn.from(n)}},{key:"setImgAnchor",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.sprite.anchor.set(n,t)}}]),e}(Yn),Vn=e(9945);!function(n){n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive"}(Fn||(Fn={}));var Gn,Wn=new P.TextStyle({align:"center",fontFamily:"iCielUniSans",fill:["#fffbee"],stroke:"#e366b6",strokeThickness:6,fontSize:36,fontWeight:"900",lineJoin:"round"}),Xn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=Fn.Null,i.sprite=void 0,i.numberText=void 0,i.chapterId=0,i.levelId=0,i.isNewLevel=!1,i.levelInfo=null,i.isTouchAble=!1,i.isPointerDown=!1,i.pointerDownPos={x:0,y:0},i.pointerDownTime=0,i.sprite=new P.Sprite,i.sprite.anchor.set(.5,1),i.numberText=new P.Text("",Wn),i.numberText.anchor.set(.5,.5),i.numberText.position.set(0,-70),i.interactive=!0,i.hitArea=new P.Rectangle(-60,-110,120,120),i.on("pointerdown",i.onPointerDown,(0,yn.Z)(i)),i.on("pointerup",i.onPointerUp,(0,yn.Z)(i)),i.on("pointercancel",i.onPointerCancle,(0,yn.Z)(i)),i.on("pointerupoutside",i.onPointerCancle,(0,yn.Z)(i)),i.addChild(i.sprite),i.addChild(i.numberText),i.addDebugLine(),i.addDebugRect(i.hitArea),i.setState(Fn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Fn.Active:this.visible=!0,this.isPointerDown=!1;break;case Fn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Fn.Active)}},{key:"inactive",value:function(){this.setState(Fn.Inactive)}},{key:"isInactive",value:function(){return this.state===Fn.Inactive}},{key:"setLevelInfo",value:function(n,t){this.chapterId=n,this.levelId=t,this.numberText.text="".concat(this.levelId),this.updateVisible()}},{key:"updateVisible",value:function(){var n,t,e,i,r,o,a=this,s=null===(n=E.Z.getState().user)||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.chapters;if(this.levelInfo=null===s||void 0===s||null===(e=s.find)||void 0===e||null===(i=e.call(s,(function(n){return n.id==a.chapterId})))||void 0===i||null===(r=i.levels)||void 0===r||null===(o=r.find)||void 0===o?void 0:o.call(r,(function(n){return n.id==a.levelId})),this.levelInfo){var l=[p.dN.worldMap.level0Star,p.dN.worldMap.level1Star,p.dN.worldMap.level2Star,p.dN.worldMap.level3Star];this.sprite.texture=Rn.from(l[this.levelInfo.stars]),this.isTouchAble=!0,this.isNewLevel=!1}else{if(1==this.levelId)this.sprite.texture=Rn.from(p.dN.worldMap.level0Star),this.isTouchAble=!0;else{var c,u,h,d,f=null===s||void 0===s||null===(c=s.find)||void 0===c||null===(u=c.call(s,(function(n){return n.id==a.chapterId})))||void 0===u||null===(h=u.levels)||void 0===h||null===(d=h.find)||void 0===d?void 0:d.call(h,(function(n){return n.id==a.levelId-1}));this.sprite.texture=Rn.from(f?p.dN.worldMap.level0Star:p.dN.worldMap.levelDisable),this.isTouchAble=!!f}this.isNewLevel=!0}}},{key:"onClick",value:function(){var n,t,e;this.isTouchAble&&(E.Z.dispatch(Vn.U.actions.updateCurrentLevel({id:this.levelId,stars:(null===(n=this.levelInfo)||void 0===n?void 0:n.stars)||0,highScore:(null===(t=this.levelInfo)||void 0===t?void 0:t.highScore)||0,goldenStep:!(null===(e=this.levelInfo)||void 0===e||!e.goldenStep)})),this.isNewLevel?E.Z.dispatch(Vn.U.actions.setPlayNewLevelPopupVisible(!0)):E.Z.dispatch(Vn.U.actions.setPlayLevelAgainPopupVisible(!0)))}},{key:"onPointerDown",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerDown(n),this.isPointerDown=!0,this.pointerDownPos.x=n.data.global.x,this.pointerDownPos.y=n.data.global.y,this.pointerDownTime=Date.now()}},{key:"onPointerUp",value:function(n){var t;if(null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown){this.isPointerDown=!1;var e=n.data.global.x-this.pointerDownPos.x,i=n.data.global.y-this.pointerDownPos.y,r=Date.now()-this.pointerDownTime;e<=20&&i<=20&&r<=100&&this.onClick()}}},{key:"onPointerCancle",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown=!1}}]),e}(Yn);!function(n){n[n.Null=0]="Null",n[n.Start=1]="Start",n[n.Active=2]="Active",n[n.Inactive=3]="Inactive"}(Gn||(Gn={}));var qn,Jn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this)).imagesDefine=null,i.chapters=[],i.chapter=null,i.gameRender=void 0,i.state=Gn.Null,i.camera=new Un,i.grounds=[],i.decoObjects=[],i.levelPlatforms=[],i.isSortObjects=!1,i.groundLayer=new P.Container,i.objectLayer=new P.Container,i.gameRender=n,i.camera.onPositionChange=i.onCameraPositionChange.bind((0,yn.Z)(i)),i.addChild(i.camera),i.addChild(i.groundLayer),i.addChild(i.objectLayer),i.setState(Gn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Gn.Start:this.visible=!0;break;case Gn.Active:break;case Gn.Inactive:this.visible=!1,this.inactiveAllObjects()}}},{key:"update",value:function(n){switch(this.state){case Gn.Start:this.setState(Gn.Active);break;case Gn.Active:this.camera.update(n),this.sortObjects();case Gn.Inactive:}}},{key:"start",value:function(){this.setState(Gn.Start)}},{key:"end",value:function(){this.setState(Gn.Inactive)}},{key:"setChapters",value:function(n,t,e){this.imagesDefine=n,this.chapters=t.map((function(n){return JSON.parse(JSON.stringify(n))}));var i=this.chapters.find((function(n){return n.id==e}));i&&this.setChapter(i)}},{key:"test",value:function(){var n=new Hn(this.camera);this.addChild(n),n.position.set(200,200)}},{key:"onCameraPositionChange",value:function(){var n=this,t=this.chapter,e=t.backgrounds,i=t.decors,r=t.checkpoints,o=t.id,a=this.gameRender.app.renderer.height,s=this.camera.mapPosition.y-.7*a,l=this.camera.mapPosition.y+.7*a;this.grounds.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y)&&n.inactive()})),e.forEach((function(t){var e;if(!(l<t.y)){var i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s)){var o=n.grounds.find((function(n){return n.mapPosition.y==t.y}));o||(o=n.getObject(n.grounds,Hn,n.groundLayer)),o.isInactive()&&(o.active(),o.setImg(i.url),o.objectHeight=r,o.mapPosition={x:0,y:t.y})}}})),this.decoObjects.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),i.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s||l<t.y-r)){var o=n.decoObjects.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));o||(o=n.getObject(n.decoObjects,zn,n.objectLayer,null===i||void 0===i?void 0:i.url)),o.isInactive()&&(o.active(),o.setImg(null===i||void 0===i?void 0:i.url),o.setImgAnchor(null===i||void 0===i?void 0:i.anchorX,null===i||void 0===i?void 0:i.anchorY),o.objectHeight=r,o.mapPosition={x:t.x,y:t.y})}})),this.levelPlatforms.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),r.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],r=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+r<s||l<t.y-r)){var a=n.levelPlatforms.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));a||(a=n.getObject(n.levelPlatforms,Xn,n.objectLayer)),a.isInactive()&&(a.active(),a.setLevelInfo(o,t.id),a.mapPosition={x:t.x,y:t.y})}})),this.groundLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.objectLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.onObjectPostionChange()}},{key:"onObjectPostionChange",value:function(){this.isSortObjects=!0}},{key:"getObject",value:function(n,t,e,i){var r=n.find((function(n){var t,e,r=null===(t=(e=n).getImg)||void 0===t?void 0:t.call(e);return i?n.isInactive()&&(!r||r==i):n.isInactive()}));return r||((r=new t(this.camera)).onPositionChange=this.onObjectPostionChange.bind(this),n.push(r),e.addChild(r)),r}},{key:"sortObjects",value:function(){this.isSortObjects&&(this.isSortObjects=!1,this.objectLayer.children.sort((function(n,t){return n.position.y-t.position.y})))}},{key:"inactiveAllObjects",value:function(){this.groundLayer.children.forEach((function(n){return n.inactive()})),this.objectLayer.children.forEach((function(n){return n.inactive()}))}},{key:"setChapter",value:function(n){var t,e;this.chapter=n;var i=this.chapter,r=i.backgrounds,o=i.offsetTop,a=i.offsetBottom;this.inactiveAllObjects();var s=r[r.length-1],l=(null===(t=this.imagesDefine)||void 0===t||null===(e=t[s.imageId])||void 0===e?void 0:e.height)||0,c=A,u=A/window.innerWidth*window.innerHeight;this.camera.setHitAreaSize(c,u),this.camera.setYMinMax(0+.5*u+a,s.y+l-.5*u+o),this.camera.mapPosition={x:0,y:0},this.camera.active()}}]),e}(P.Container),Kn=function(n){(0,j.Z)(e,n);var t=(0,C.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).background=void 0,n.spBoard=null,n.spBottom=null,n.spStar=null,n.background=P.Sprite.from(P.Texture.WHITE),n.background.tint=0,n.background.position.set(.5*A,.5*_),n.background.anchor.set(.5,.5),n.background.scale.set(A/16,window.innerHeight/window.innerWidth*A/16),n.background.alpha=.5,n.addChild(n.background),setTimeout((function(){n.initObject()}),5e3),n}return(0,u.Z)(e,[{key:"show",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,e,i,r,o,a,l,c,u,h,d,p=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initObject();case 2:r=["anim_khangia_lv1","anim_khangia_lv1","anim_khangia_lv2","anim_khangia_lv3"],o=["anim_win_lv1","anim_win_lv1","anim_win_lv2","anim_win_lv3"],a=E.Z.getState().mainGame.currentGame,l=a.score,a.level,c=a.star1Score,u=a.star2Score,h=a.star3Score,d=l>=h?3:l>=u?2:l>=c?1:0,null===(t=this.spBoard)||void 0===t||t.state.setAnimation(0,"anim_popup_appear",!1),null===(e=this.spBoard)||void 0===e||e.state.addAnimation(0,"anim_popup_idle_loop",!0,0),null===(i=this.spBottom)||void 0===i||i.state.setAnimation(0,r[d],!0),this.spStar&&(this.spStar.alpha=0),setTimeout((function(){var n;p.spStar&&(p.spStar.alpha=d>0?1:0),null===(n=p.spStar)||void 0===n||n.state.setAnimation(0,o[d],!1)}),500),setTimeout((function(){E.Z.dispatch(S.X.actions.setWinPopupVisible(!0))}),1e3);case 12:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"hide",value:function(){}},{key:"initObject",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,e;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Cn.loadSpine("spine/popupWin/Melody_stage.json");case 2:if(t=n.sent,console.log("spineData",t),t){n.next=6;break}return n.abrupt("return");case 6:e=(window.innerHeight/window.innerWidth*A-_)/2,this.spBottom||(this.spBottom=new jn.PY(t),this.spBottom.position.set(.5*A,1*_+e),this.addChild(this.spBottom)),this.spBoard||(this.spBoard=new jn.PY(t),this.spBoard.position.set(.5*A,.4*_),this.addChild(this.spBoard)),this.spStar||(this.spStar=new jn.PY(t),this.spStar.position.set(.5*A,.4*_),this.addChild(this.spStar));case 10:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),e}(P.Container),$n=function(){function n(){(0,c.Z)(this,n),this.render=void 0,this.map=void 0,this.worldMap=void 0,this.winPopup=new Kn,this._isPlaying=!0,this.render=new L({fitWidth:!0,trasparent:0,alignCenter:!0,maxFPS:45,minFPS:30}),this.init(),console.log("[PixiJs] constructor"),this.render.onUpdate=this.onUpdate.bind(this)}return(0,u.Z)(n,[{key:"view",get:function(){return this.render.view}},{key:"scale",get:function(){return this.render.app.stage.scale}},{key:"initDom",value:function(n){this.render.init(n),this.render.setParent(n)}},{key:"init",value:function(){this.worldMap=new Jn(this.render),this.render.stage.addChild(this.worldMap),this.map=new Nn(window.location.href.includes(p.dI.ColorTool)),this.render.stage.addChild(this.map)}},{key:"onUpdate",value:function(n){var t,e;null===(t=this.worldMap)||void 0===t||t.update(n),null===(e=this.map)||void 0===e||e.update(n)}},{key:"pause",value:function(){this.isPlaying=!1,this.render.pause()}},{key:"resume",value:function(){this.isPlaying=!0,this.render.resume()}},{key:"getObjectAbsolutePos",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},e=n.x,i=n.y,r=n.parent;r;)e*=r.scale.x,e+=r.x,i*=r.scale.y,i+=r.y,r=r.parent;return{x:(e+t.x)/window.innerWidth*100,y:(i+t.y)/window.innerHeight*100}}},{key:"isPlaying",get:function(){return this._isPlaying},set:function(n){this._isPlaying=n}},{key:"startWorldMap",value:function(){this.worldMap.start(),this.map&&(this.map.visible=!1)}},{key:"endWorldMap",value:function(){this.worldMap.end(),this.map&&(this.map.visible=!0),this.render.app.render()}},{key:"setChapters",value:function(n,t,e){this.worldMap.setChapters(n,t,e)}},{key:"setWinPopupVisible",value:function(n){n?(this.render.stage.addChild(this.winPopup),this.winPopup.show(),E.Z.dispatch(S.X.actions.setUIVisible(!1))):(this.render.stage.removeChild(this.winPopup),this.winPopup.hide(),E.Z.dispatch(S.X.actions.setUIVisible(!0)))}}]),n}(),nt=new $n,tt=e(6417);function et(){var n=(0,i.useRef)(null);w((function(n){return n.game.gameConfig})),b();return(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){return nt.initDom(n.current),function(){}}),[n.current]),(0,i.useEffect)((function(){var t=function(){setTimeout((function(){nt.initDom(n.current),nt.resume()}),500)},e=function(){nt.pause()};return t(),a.r.on(a.B.On_RESUME,t),a.r.on(a.B.On_PAUSE,e),a.r.on(a.B.ON_RESIZE,t),function(){e(),a.r.off(a.B.On_RESUME,t),a.r.off(a.B.On_PAUSE,e),a.r.off(a.B.ON_RESIZE,t)}}),[]),(0,tt.jsx)(ht,{className:"game",ref:n})}var it,rt,ot,at,st,lt,ct,ut,ht=Z.ZP.div(qn||(qn=(0,x.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n"]))),dt=e(1772);function pt(n){var t=(0,i.useState)(d.P.getInCache(n)||""),e=(0,Mn.Z)(t,2),r=e[0],o=e[1];return(0,i.useLayoutEffect)((function(){n&&d.P.cacheFile(n).then((function(n){o(n)}))}),[n]),r}var ft,gt,mt,xt,vt,yt,bt,wt,Zt,Pt,kt,At,_t,Lt,Mt,jt,Ct,Tt,Bt,Et,St,It,Ot,Nt,Yt,Dt,Ut,Rt,Qt,Ht,Ft,zt,Vt,Gt,Wt,Xt,qt,Jt,Kt,$t,ne,te,ee,ie,re,oe,ae,se,le,ce,ue,he=Z.ZP.div(it||(it=(0,x.Z)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),de=Z.ZP.div(rt||(rt=(0,x.Z)(["\n    min-width: 80px;\n\n    border: 1px solid #000;\n    border-radius: 5px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    padding: 5px 10px;\n"]))),pe=Z.ZP.div(ot||(ot=(0,x.Z)(["\n    font-size: 20px;\n    color: #000;\n    text-align: center;\n    white-space: nowrap;\n"]))),fe=Z.ZP.div(at||(at=(0,x.Z)(["\n    background-image: url(",");\n    background-size: contain;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    width: ",";\n    height: ",";\n"])),(function(n){return n.src}),(function(n){return n.width||"unset"}),(function(n){return n.height||"unset"})),ge=Z.ZP.div(st||(st=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n\n    background-color: ",";\n    z-index: 10;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"])),(function(n){return n.backgroundColor||"rgba(0, 0, 0, 0.8)"})),me=(0,Z.ZP)(fe)(lt||(lt=(0,x.Z)(["\n    width: ",";\n    height: ",";\n\n    background-size: 100% 100%;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    margin-top: ",";\n"])),(function(n){return n.width||"135px"}),(function(n){return n.height||"40px"}),(function(n){return n.marginTop||"unset"})),xe=Z.ZP.div(ct||(ct=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"])),(function(n){return n.fontSize||"18px"})),ve=Z.ZP.div(ut||(ut=(0,x.Z)(["\n    width: ",";\n    height: ",";\n    background-image: ",";\n    background-size: 100% 100%;\n"])),(function(n){return n.width}),(function(n){return n.height}),(function(n){return'url("'.concat(n.src,'")')})),ye=function(n){var t=n.target,e=t.type,i=t.quantity,r=t.ball,o=pt(Cn.getTargetTypeImageUrl(e,r)||""),a=pt(p.dN.general.checkIcon),s=w((function(n){return n.mainGame.targetChecker})),l=Cn.getTargetCount(e,r,s),c=Math.max(i-l,0);return(0,tt.jsxs)(be,{children:[(0,tt.jsx)(we,{src:o}),(0,tt.jsx)(Ze,{children:c<=0?(0,tt.jsx)(ke,{src:a}):(0,tt.jsx)(Pe,{children:c})})]})},be=Z.ZP.div(ft||(ft=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n"]))),we=(0,Z.ZP)(fe)(gt||(gt=(0,x.Z)(["\n    width: 28px;\n    height: 28px;\n    flex: none;\n"]))),Ze=Z.ZP.div(mt||(mt=(0,x.Z)(["\n    height: 15px;\n    min-width: 32px;\n    background-color: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    flex: none;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: -5px;\n"]))),Pe=Z.ZP.div(xt||(xt=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"]))),ke=(0,Z.ZP)(fe)(vt||(vt=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    margin-top: -2px;\n"]))),Ae=function(){var n=w((function(n){return n.mainGame.config}));return(0,tt.jsx)(tt.Fragment,{children:!!n&&(0,tt.jsx)(_e,{})})},_e=function(){var n=w((function(n){return n.worldMap.currentLevel})).id,t=w((function(n){return n.mainGame.config})),e=Nn.findLevelConfig(t,n);console.log("level",e);return(0,tt.jsx)(Le,{children:(0,tt.jsx)(Me,{children:function(){var n;return null===e||void 0===e||null===(n=e.targets)||void 0===n?void 0:n.map((function(n,t){return(0,tt.jsx)(ye,{target:n},t)}))}()})})},Le=Z.ZP.div(yt||(yt=(0,x.Z)(["\n    position: absolute;\n    bottom: 23px;\n    left: 16px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n"]))),Me=(Z.ZP.div(bt||(bt=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),(0,Z.ZP)(fe)(wt||(wt=(0,x.Z)(["\n    width: 13px;\n    height: 15px;\n"]))),Z.ZP.div(Zt||(Zt=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fff;\n"]))),Z.ZP.div(Pt||(Pt=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n"])))),je=function(n){var t=n.starScore,e=n.maxScore,i=w((function(n){return n.mainGame.currentGame.score})),r=pt(p.dN.general.starIconDisable),o=pt(p.dN.general.starIconAble);return(0,tt.jsx)(Ce,{left:"".concat(t/e*100,"%"),children:i>=t?(0,tt.jsx)(Be,{src:o}):(0,tt.jsx)(Te,{src:r})})},Ce=Z.ZP.div(kt||(kt=(0,x.Z)(["\n    position: absolute;\n    left: ",";\n    top: 50%;\n    transform: translate(-50%, -50%);\n"])),(function(n){return n.left})),Te=(0,Z.ZP)(fe)(At||(At=(0,x.Z)(["\n    width: 24px;\n    height: 24px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n"]))),Be=(0,Z.ZP)(Te)(_t||(_t=(0,x.Z)(["\n    width: 36px;\n    height: 36px;\n"]))),Ee=function(){var n=w((function(n){return n.mainGame.currentGame})),t=n.score,e=n.star1Score,i=n.star2Score,r=n.star3Score,o=r/85*100,a=t/o*100;return(0,tt.jsxs)(Se,{children:[(0,tt.jsx)(Ie,{children:Cn.convertNumberToScoreString(t)}),(0,tt.jsx)(Oe,{src:pt(p.dN.general.progressBarBg),children:(0,tt.jsxs)(Ne,{children:[(0,tt.jsx)(Ye,{style:{clipPath:"polygon(0% 0%, ".concat(a,"% 0%, ").concat(a,"% 100%, 0 100%)")}}),[e,i,r].map((function(n,t){return(0,tt.jsx)(je,{starScore:n,maxScore:o},t)}))]})})]})},Se=Z.ZP.div(Lt||(Lt=(0,x.Z)(["\n    position: absolute;\n    bottom: 28px;\n    right: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n"]))),Ie=Z.ZP.div(Mt||(Mt=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n"]))),Oe=(0,Z.ZP)(fe)(jt||(jt=(0,x.Z)(["\n    width: 141px;\n    height: 24px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Ne=Z.ZP.div(Ct||(Ct=(0,x.Z)(["\n    width: 132px;\n    height: 4px;\n    position: relative;\n"]))),Ye=Z.ZP.div(Tt||(Tt=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-image: linear-gradient(90deg, #ff0000, #ffff00);\n    border-radius: 2px;\n"]))),De=function(){var n=w((function(n){return n.mainGame.isUIVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(Ue,{})})},Ue=function(){return(0,tt.jsxs)(Re,{src:pt(p.dN.MainGame.headerBg),children:[(0,tt.jsx)(Ae,{}),(0,tt.jsx)(Ee,{})]})},Re=(0,Z.ZP)(fe)(Bt||(Bt=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 104px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n"]))),Qe=function(){var n=w((function(n){return n.mainGame.isUIVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(He,{})})},He=function(){var n=b();return(0,tt.jsx)(Fe,{children:(0,tt.jsx)(ze,{src:p.dN.MainGame.optionBtn,onClick:function(){n(S.X.actions.setSettingPopupVisible(!0))}})})},Fe=Z.ZP.div(Et||(Et=(0,x.Z)(["\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n    width: 100%;\n"]))),ze=(0,Z.ZP)(fe)(St||(St=(0,x.Z)(["\n    position: absolute;\n    left: 24px;\n    bottom: 45px;\n\n    width: 32px;\n    height: 32px;\n"]))),Ve=function(n){var t=n.title,e=n.children,i=n.onClose,r=n.marginBottom;return(0,tt.jsx)(ge,{children:(0,tt.jsxs)(Ge,{marginBottom:r,children:[(0,tt.jsx)(We,{src:pt(p.dN.general.popupHeader),children:(0,tt.jsx)(Xe,{children:t})}),(0,tt.jsxs)(qe,{children:[(0,tt.jsx)(Je,{src:pt(p.dN.general.popupBody)}),(0,tt.jsx)(Ke,{src:pt(p.dN.general.popupBody),children:e}),(0,tt.jsx)($e,{src:pt(p.dN.general.popupBody)})]}),(0,tt.jsx)(ni,{src:pt(p.dN.general.exitBtn1),onClick:function(){null===i||void 0===i||i()}})]})})},Ge=Z.ZP.div(It||(It=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    position: relative;\n    width: 327px;\n    margin-bottom: ",";\n"])),(function(n){return n.marginBottom||"unset"})),We=(0,Z.ZP)(fe)(Ot||(Ot=(0,x.Z)(["\n    flex: none;\n    width: 100%;\n    height: 63px;\n    margin-bottom: -9px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"]))),Xe=Z.ZP.div(Nt||(Nt=(0,x.Z)(["\n    text-shadow: 0 -1px 3px rgba(0, 0, 0, 0.5);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 12px;\n"]))),qe=Z.ZP.div(Yt||(Yt=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n"]))),Je=(0,Z.ZP)(fe)(Dt||(Dt=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 0px;\n    background-repeat: no-repeat;\n"]))),Ke=(0,Z.ZP)(fe)(Ut||(Ut=(0,x.Z)(["\n    width: 100%;\n    background-origin: border-box;\n    background-size: 100% 200%;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    /* height: 50px; */\n\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),$e=(0,Z.ZP)(fe)(Rt||(Rt=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-repeat: no-repeat;\n"]))),ni=(0,Z.ZP)(fe)(Qt||(Qt=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 15px;\n    right: 0px;\n"]))),ti=function(n){var t=n.title,e=n.ctaText,i=n.onClose,r=n.onCta;return(0,tt.jsx)(Ve,{title:t,onClose:i,children:(0,tt.jsxs)(ei,{children:[(0,tt.jsxs)(ii,{children:[(0,tt.jsx)(ri,{src:pt(p.dN.general.soundIcon)}),(0,tt.jsx)(oi,{children:"\xc2m thanh"}),(0,tt.jsx)(ai,{src:pt(p.dN.general.switchBtnOn)})]}),(0,tt.jsx)(si,{}),(0,tt.jsxs)(ii,{children:[(0,tt.jsx)(ri,{src:pt(p.dN.general.vibraIcon)}),(0,tt.jsx)(oi,{children:"Rung"}),(0,tt.jsx)(ai,{src:pt(p.dN.general.switchBtnOn)})]}),(0,tt.jsx)(ii,{children:(0,tt.jsx)(me,{src:pt(p.dN.general.button_1),onClick:function(){null===r||void 0===r||r()},children:(0,tt.jsx)(xe,{children:e})})})]})})},ei=Z.ZP.div(Ht||(Ht=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n\n    margin: 5px 0px;\n"]))),ii=Z.ZP.div(Ft||(Ft=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    width: 100%;\n"]))),ri=(0,Z.ZP)(fe)(zt||(zt=(0,x.Z)(["\n    flex: none;\n    width: 32px;\n    height: 32px;\n"]))),oi=Z.ZP.div(Vt||(Vt=(0,x.Z)(["\n    flex: auto;\n\n    font-family: SFProText;\n    font-size: 14px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),ai=(0,Z.ZP)(fe)(Gt||(Gt=(0,x.Z)(["\n    flex: none;\n    width: 60px;\n    height: 28px;\n"]))),si=Z.ZP.div(Wt||(Wt=(0,x.Z)(["\n    width: 100%;\n    height: 2px;\n    background-color: #cba5ff;\n"]))),li=function(){var n=w((function(n){return n.mainGame.isSettingPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(ci,{})})},ci=function(){var n=b();return(0,tt.jsx)(ti,{title:"Thi\u1ebft l\u1eadp",ctaText:"D\u1eebng tr\u1eadn \u0111\u1ea5u",onClose:function(){n(S.X.actions.setSettingPopupVisible(!1))},onCta:function(){n(S.X.actions.setSettingPopupVisible(!1)),n(S.X.actions.setConfirmExitPopupVisible(!0))}})},ui=function(){var n=w((function(n){return n.mainGame.isConfirmExitPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(hi,{})})},hi=function(){var n=b(),t=function(){n(S.X.actions.setConfirmExitPopupVisible(!1))};return(0,tt.jsx)(Ve,{title:"K\u1ebft th\xfac tr\xf2 ch\u01a1i",onClose:t,children:(0,tt.jsxs)(di,{children:[(0,tt.jsx)(pi,{src:pt(p.dN.general.closeGameBanner)}),(0,tt.jsxs)(fi,{children:[(0,tt.jsx)(gi,{children:"B\u1ea1n s\u1ebd b\u1ecb "}),(0,tt.jsx)(gi,{children:"-1 "}),(0,tt.jsx)(mi,{src:pt(p.dN.general.miniHeartIcon)}),(0,tt.jsx)(gi,{children:" n\u1ebfu k\u1ebft th\xfac tr\xf2 ch\u01a1i m\xe0 ch\u01b0a ho\xe0n th\xe0nh m\u1ee5c ti\xeau"})]}),(0,tt.jsxs)(xi,{children:[(0,tt.jsx)(me,{src:pt(p.dN.general.button_2),onClick:function(){n(S.X.actions.setConfirmExitPopupVisible(!1)),a.r.emit(a.B.Navigate,-1)},children:(0,tt.jsx)(xe,{children:"\u0110\u1ed3ng \xfd"})}),(0,tt.jsx)(me,{src:pt(p.dN.general.button_1),onClick:t,children:(0,tt.jsx)(xe,{children:"Ch\u01a1i ti\u1ebfp"})})]})]})})},di=Z.ZP.div(Xt||(Xt=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),pi=(0,Z.ZP)(fe)(qt||(qt=(0,x.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),fi=Z.ZP.div(Jt||(Jt=(0,x.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),gi=Z.ZP.div(Kt||(Kt=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),mi=(0,Z.ZP)(fe)($t||($t=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-bottom: -3px;\n"]))),xi=Z.ZP.div(ne||(ne=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n"]))),vi=e(1884),yi=function(){var n=w((function(n){return n.mainGame.isWinPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(bi,{})})},bi=function(){var n=b(),t=w((function(n){return n.mainGame.currentGame})),e=t.score,r=t.level,o=t.star1Score,s=t.star2Score,l=t.star3Score,c=w((function(n){return n.user.profile.chapterId}));(0,i.useEffect)((function(){n((0,vi.GE)({chapterId:c,levelId:r,stars:e>=l?3:e>=s?2:e>=o?1:0,highScore:e}))}),[]);return(0,tt.jsxs)(ge,{backgroundColor:"rgba(0, 0, 0, 0)",children:[(0,tt.jsxs)(wi,{children:[(0,tt.jsx)(Pi,{fontSize:"20px",marginTop:"81px",children:"V\u01b0\u1ee3t \u1ea3i th\xe0nh c\xf4ng"}),(0,tt.jsx)(Pi,{fontSize:"16px",marginTop:"30px",children:"\u0110i\u1ec3m"}),(0,tt.jsx)(ki,{fontSize:"32px",marginTop:"10px",children:Cn.convertNumberToScoreString(e)})]}),(0,tt.jsx)(Zi,{height:"20px"}),(0,tt.jsx)(me,{src:pt(p.dN.general.button_1),width:"200px",height:"46px",onClick:function(){n(S.X.actions.setWinPopupVisible(!1)),nt.setWinPopupVisible(!1),nt.map.reload(r+1)},children:(0,tt.jsx)(xe,{children:"\u1ea2i ti\u1ebfp theo"})}),(0,tt.jsx)(Ai,{src:pt(p.dN.general.exitBtn2),onClick:function(){n(S.X.actions.setWinPopupVisible(!1)),nt.setWinPopupVisible(!1),a.r.emit(a.B.Navigate,-1)}})]})},wi=Z.ZP.div(te||(te=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Zi=Z.ZP.div(ee||(ee=(0,x.Z)(["\n    height: ",";\n"])),(function(n){return n.height})),Pi=Z.ZP.div(ie||(ie=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),ki=Z.ZP.div(re||(re=(0,x.Z)(["\n    text-shadow: 0 1px 8px rgba(231, 116, 255, 0.75);\n    -webkit-text-stroke: 1px rgba(207, 7, 240, 0.69);\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Ai=(0,Z.ZP)(fe)(oe||(oe=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"]))),_i=function(){var n=w((function(n){return n.mainGame.isLosePopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(Li,{})})},Li=function(){var n=b(),t=function(){console.log("onClose"),n(S.X.actions.setLosePopupVisible(!1)),a.r.emit(a.B.Navigate,-1)};return(0,tt.jsxs)(ge,{children:[(0,tt.jsxs)(Mi,{src:pt(p.dN.MainGame.loseBg),children:[(0,tt.jsx)(ji,{fontSize:"20px",marginTop:"83px",children:"V\u01b0\u1ee3t \u1ea3i th\u1ea5t b\u1ea1i"}),(0,tt.jsx)(Ci,{fontSize:"12px",marginTop:"15px",children:"Ho\xe0n th\xe0nh t\u1ea5t c\xe1c m\u1ee5c ti\xeau c\u1ee7a \u1ea3i \u0111\u1ec3 chi\u1ebfn th\u1eafng"})]}),(0,tt.jsxs)(me,{src:pt(p.dN.general.button_1),marginTop:"24px",width:"200px",height:"46px",onClick:function(){console.log("onPlayAgain"),n(S.X.actions.setLosePopupVisible(!1)),a.r.emit(a.B.Navigate,-1)},children:[(0,tt.jsx)(xe,{children:"Ch\u01a1i l\u1ea1i (-1"}),(0,tt.jsx)(fe,{src:pt(p.dN.general.miniHeartIcon),width:"24px",height:"24px"}),(0,tt.jsx)(xe,{children:")"})]}),(0,tt.jsx)(me,{src:pt(p.dN.general.button_2),marginTop:"16px",width:"200px",height:"46px",onClick:t,children:(0,tt.jsx)(xe,{children:"Trang ch\u1ee7"})}),(0,tt.jsx)(Ti,{src:pt(p.dN.general.exitBtn2),onClick:t})]})},Mi=(0,Z.ZP)(fe)(ae||(ae=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),ji=Z.ZP.div(se||(se=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Ci=Z.ZP.div(le||(le=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: ",";\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fff;\n    margin-top: ",";\n    width: 75%;\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Ti=(0,Z.ZP)(fe)(ce||(ce=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"])));function Bi(n){var t=v(),e=(b(),w((function(n){return n.game.gameConfig})));return(0,i.useEffect)((function(){e&&"{}"!==JSON.stringify(e)&&dt.Z.send({stage:"space_scr_main"})}),[e]),(0,i.useEffect)((function(){return a.r.on(a.B.ON_BACK_KEY,(function(){t(-1)})),function(){a.r.removeAllListeners(a.B.ON_BACK_KEY)}}),[]),(0,i.useEffect)((function(){}),[e]),(0,tt.jsxs)(Oi,{children:[(0,tt.jsx)(et,{}),(0,tt.jsx)(De,{}),(0,tt.jsx)(Qe,{}),(0,tt.jsx)(li,{}),(0,tt.jsx)(ui,{}),(0,tt.jsx)(yi,{}),(0,tt.jsx)(_i,{})]})}var Ei,Si,Ii,Oi=Z.ZP.div(ue||(ue=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),Ni=function(){var n=v();return(0,tt.jsx)(he,{children:(0,tt.jsxs)(Yi,{children:[(0,tt.jsx)(Di,{children:p.bO.MainMenu.gameName}),(0,tt.jsx)("div",{style:{height:"150px"}}),(0,tt.jsx)(de,{onClick:function(){console.log("onClickPlayButton"),n(p.dI.WorldMap)},children:(0,tt.jsx)(pe,{children:p.bO.MainMenu.playButton})}),(0,tt.jsx)("div",{style:{height:"0px"}})]})})},Yi=Z.ZP.div(Ei||(Ei=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Di=Z.ZP.div(Si||(Si=(0,x.Z)(["\n    width: 250px;\n    font-size: 35px;\n    color: #000;\n    text-align: center;\n"])));function Ui(){var n=(0,i.useRef)(null),t=(0,o.s0)(),e=(0,i.useState)(!1),r=(0,Mn.Z)(e,2),s=r[0],l=r[1],c=(0,i.useState)(""),u=(0,Mn.Z)(c,2),h=u[0],d=u[1],p=(0,i.useState)({}),f=(0,Mn.Z)(p,2),g=f[0],m=f[1];(0,i.useEffect)((function(){return a.r.on(a.B.Navigate,x),function(){a.r.removeAllListeners(a.B.Navigate)}}),[]),(0,i.useEffect)((function(){s&&(t(h,g),B.ZP.fromTo(n.current,{opacity:1},{opacity:0,duration:.5,onComplete:function(){l(!1)}}))}),[s,h]);var x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(n),m(t),l(!0)};return s?(0,tt.jsx)(wo,{ref:n}):null}var Ri,Qi,Hi,Fi,zi,Vi,Gi,Wi,Xi,qi,Ji,Ki,$i,nr,tr,er,ir,rr,or,ar,sr,lr,cr,ur,hr,dr,pr,fr,gr,mr,xr,vr,yr,br,wr,Zr,Pr,kr,Ar,_r,Lr,Mr,jr,Cr,Tr,Br,Er,Sr,Ir,Or,Nr,Yr,Dr,Ur,Rr,Qr,Hr,Fr,zr,Vr,Gr,Wr,Xr,qr,Jr,Kr,$r,no,to,eo,io,ro,oo,ao,so,lo,co,uo,ho,po,fo,go,mo,xo,vo,yo,bo,wo=Z.ZP.div(Ii||(Ii=(0,x.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000;\n    z-index: 9999;\n"]))),Zo=function(n){var t=n.onStart,e=n.onEnd,r=n.onInitDom,o=n.onResume,s=n.onPause,l=(0,i.useRef)(null);return(0,i.useEffect)((function(){l.current&&(null===r||void 0===r||r(l.current))}),[l,r]),(0,i.useEffect)((function(){return null===t||void 0===t||t(),null===o||void 0===o||o(),a.r.on(a.B.On_RESUME,o),a.r.on(a.B.ON_RESIZE,o),a.r.on(a.B.On_PAUSE,s),function(){null===e||void 0===e||e(),null===s||void 0===s||s(),a.r.off(a.B.On_RESUME,o),a.r.off(a.B.ON_RESIZE,o),a.r.off(a.B.On_PAUSE,s)}}),[e,s,o,t]),(0,tt.jsx)(Po,{ref:l})},Po=Z.ZP.div(Ri||(Ri=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    overflow: hidden;\n"]))),ko=e(2072),Ao=function(n){var t=n.children;return(0,tt.jsxs)(tt.Fragment,{children:[(0,tt.jsx)(_o,{src:pt(p.dN.onboarding.speechBubble)}),(0,tt.jsxs)(Mo,{children:[(0,tt.jsx)(jo,{src:pt(p.dN.onboarding.speechBubble)}),t]}),(0,tt.jsx)(Lo,{src:pt(p.dN.onboarding.speechBubble)})]})},_o=(0,Z.ZP)(fe)(Qi||(Qi=(0,x.Z)(["\n    width: 100%;\n    height: 25px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),Lo=(0,Z.ZP)(_o)(Hi||(Hi=(0,x.Z)(["\n    background-position: 0px 100%;\n"]))),Mo=Z.ZP.div(Fi||(Fi=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 5px;\n    margin-top: -10px;\n    margin-bottom: -10px;\n"]))),jo=(0,Z.ZP)(fe)(zi||(zi=(0,x.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% 1000%;\n    background-position: 0px 50%;\n    position: absolute;\n    left: 0;\n    top: 10px;\n    bottom: 10px;\n"]))),Co=Z.ZP.div(Vi||(Vi=(0,x.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 130%;\n    letter-spacing: normal;\n    color: #681c8d;\n    position: relative;\n    z-index: 2;\n    margin: 0px 15px;\n    width: calc(100% - 30px);\n"])),(function(n){return n.fontFamily||"SFProText"}),(function(n){return n.fontSize||"12px"})),To=Z.ZP.div(Gi||(Gi=(0,x.Z)(["\n    width: 240px;\n    position: absolute;\n    bottom: ",";\n    right: ",";\n"])),(function(n){return n.bottom||"130px"}),(function(n){return n.right||"20px"})),Bo=(0,Z.ZP)(ge)(Wi||(Wi=(0,x.Z)(["\n    *{\n        pointer-events: none;\n    }\n"]))),Eo=(0,Z.ZP)(fe)(Xi||(Xi=(0,x.Z)(["\n    width: 100%;\n    height: ",";\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n"])),(function(n){return n.height||"286px"})),So=function(n){var t=n.children,e=n.speechBubbleContent,i=n.speechBubbleMarginTop;return(0,tt.jsxs)(Io,{children:[(0,tt.jsx)(Oo,{src:pt(p.dN.onboarding.stageTop)}),t,(0,tt.jsxs)(No,{src:pt(p.dN.onboarding.stageBottom),children:[(0,tt.jsx)(Yo,{src:pt(p.dN.onboarding.mascot)}),(0,tt.jsx)(Do,{marginTop:i,children:(0,tt.jsx)(Ao,{children:e})})]})]})},Io=Z.ZP.div(qi||(qi=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Oo=(0,Z.ZP)(fe)(Ji||(Ji=(0,x.Z)(["\n    width: 100%;\n    height: 44px;\n    position: relative;\n    z-index: 1;\n"]))),No=(0,Z.ZP)(fe)(Ki||(Ki=(0,x.Z)(["\n    width: 100%;\n    height: 92px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n"]))),Yo=(0,Z.ZP)(fe)($i||($i=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    margin-bottom: 80px;\n"]))),Do=Z.ZP.div(nr||(nr=(0,x.Z)(["\n    width: 236px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Uo=function(n){var t=n.content,e=n.marginTop;return(0,tt.jsxs)(Ro,{marginTop:e,children:[(0,tt.jsx)(Qo,{src:pt(p.dN.onboarding.iIcon)}),(0,tt.jsx)(Ho,{children:t})]})},Ro=Z.ZP.div(tr||(tr=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Qo=(0,Z.ZP)(fe)(er||(er=(0,x.Z)(["\n    width: 15px;\n    height: 15px;\n    margin-right: 2px;\n    margin-bottom: -1px;\n"]))),Ho=Z.ZP.div(ir||(ir=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 10px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n"]))),Fo=(0,Z.ZP)(Bo)(rr||(rr=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    background-blend-mode: multiply;\n"])),(function(n){return n.src})),zo=Z.ZP.div(or||(or=(0,x.Z)(["\n    width: 100%;\n    min-height: ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),(function(n){return n.minHeight})),Vo=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_1")}),[]);return(0,tt.jsxs)(Bo,{children:[(0,tt.jsx)(Eo,{src:pt(p.dN.onboarding.step1Bottom)}),(0,tt.jsxs)(Go,{children:[(0,tt.jsxs)(Wo,{src:pt(p.dN.onboarding.levelEffect),children:[(0,tt.jsx)(Xo,{src:pt(p.dN.onboarding.level1),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())}}),(0,tt.jsx)(Jo,{src:pt(p.dN.onboarding.hand)})]}),(0,tt.jsx)($o,{src:pt(p.dN.onboarding.effectLightLeft)}),(0,tt.jsx)(na,{src:pt(p.dN.onboarding.effectLightRight)})]}),(0,tt.jsxs)(To,{children:[(0,tt.jsxs)(Ao,{children:[(0,tt.jsx)(Co,{children:"Ch\xe0o m\u1eebng idol \u0111\u1ebfn v\u1edbi h\xe0nh tr\xecnh kh\xe1m ph\xe1 \xe2m nh\u1ea1c"}),(0,tt.jsx)(Co,{children:"C\xf9ng tui \u0111\u1ebfn v\u1edbi th\u1eed th\xe1ch \u0111\u1ea7u ti\xean n\xe0o"})]}),(0,tt.jsx)(Uo,{content:"Nh\u1ea5p v\xe0o \u1ea2i theo h\u01b0\u1edbng ng\xf3n tay",marginTop:"5px"})]})]})},Go=Z.ZP.div(ar||(ar=(0,x.Z)(["\n    width: 100%;\n    height: 0;\n    position: absolute;\n    left: 0;\n    bottom: 300px;\n"]))),Wo=(0,Z.ZP)(fe)(sr||(sr=(0,x.Z)(["\n    width: 94px;\n    height: 54px;\n    position: absolute;\n    bottom: 0;\n    left: 51%;\n    transform: translate(-50%, 50%);\n"]))),Xo=(0,Z.ZP)(fe)(lr||(lr=(0,x.Z)(["\n    width: 51px;\n    height: 49px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    pointer-events: auto;\n"]))),qo=(0,Z.F4)(cr||(cr=(0,x.Z)(["\n    0% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n    20% {        transform: translate(calc(-50% + 30px), calc(50% + 0px)) rotate(-30deg) scale(1);    }\n    100% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n"]))),Jo=(0,Z.ZP)(fe)(ur||(ur=(0,x.Z)(["\n    width: 45px;\n    height: 39px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n"])),qo),Ko=(0,Z.F4)(hr||(hr=(0,x.Z)(["\n    0% {\n        opacity: 1;\n        transform: rotate(-1deg) scale(1.05);\n    }\n    100% {\n        opacity: 0.7;\n        transform: rotate(1deg) scale(1);\n    }\n"]))),$o=(0,Z.ZP)(fe)(dr||(dr=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -50px;\n    left: -45px;\n    transform-origin: 5% 5%;\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Ko),na=(0,Z.ZP)(fe)(pr||(pr=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -60px;\n    right: -25px;\n    transform-origin: 95% 5%;\n    animation-name: ",";\n    animation-duration: 2.3s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Ko),ta=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_2")}),[]);return(0,tt.jsxs)(Bo,{children:[(0,tt.jsx)(Eo,{src:pt(p.dN.onboarding.step2Bottom)}),(0,tt.jsxs)(ea,{children:[(0,tt.jsx)(ia,{children:(0,tt.jsx)(ra,{src:pt(p.dN.onboarding.ballBg),children:(0,tt.jsx)(aa,{src:pt(p.dN.onboarding.ball1)})})}),(0,tt.jsx)(ia,{children:(0,tt.jsx)(ra,{src:pt(p.dN.onboarding.ballBg),children:(0,tt.jsx)(aa,{src:pt(p.dN.onboarding.ball2),animationDelay:"0.5s"})})}),(0,tt.jsx)(ia,{children:(0,tt.jsx)(ra,{src:pt(p.dN.onboarding.ballBg),children:(0,tt.jsx)(aa,{src:pt(p.dN.onboarding.ball3),animationDelay:"1s"})})}),(0,tt.jsx)(ia,{children:(0,tt.jsx)(ra,{src:pt(p.dN.onboarding.ballBg),children:(0,tt.jsx)(aa,{src:pt(p.dN.onboarding.ball4),animationDelay:"1.5s"})})})]}),(0,tt.jsx)(To,{bottom:"215px",children:(0,tt.jsxs)(Ao,{children:[(0,tt.jsx)(Co,{fontSize:"16px",fontFamily:"iCielUniSans",children:"Th\u1eed th\xe1ch \u0111\u1ea7u ti\xean"}),(0,tt.jsx)(Co,{children:"L\xe0m quen \xe2m nh\u1ea1c"})]})}),(0,tt.jsx)(sa,{src:pt(p.dN.onboarding.step2CtaBtn),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())},children:(0,tt.jsx)(xe,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},ea=Z.ZP.div(fr||(fr=(0,x.Z)(["\n    position: absolute;\n    bottom: 145px;\n    right: 10px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),ia=Z.ZP.div(gr||(gr=(0,x.Z)(["\n    width: 56px;\n    height: 15px;\n    margin: 35px 0 0;\n    box-shadow: 0 0 0 0.5px #ffd8eb, inset 0 0 0 0.5px #ffd8eb, 0 0 0 1px #fff6fa, inset 0 0 0 1px #fff6fa, 0 0 4px 2px #ff89d5, 0 0 2px 1px rgba(255, 255, 255, 0.5);\n    border-radius: 50%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),ra=(0,Z.ZP)(fe)(mr||(mr=(0,x.Z)(["\n    width: 48px;\n    height: 40px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    margin-bottom: 25px;\n"]))),oa=(0,Z.F4)(xr||(xr=(0,x.Z)(["\n    0% {transform: translateY(0px)}\n    100% {transform: translateY(-3px)}\n"]))),aa=(0,Z.ZP)(fe)(vr||(vr=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    margin-bottom: 28px;\n    flex: none;\n    animation-name: ",";\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n    animation-direction: alternate;\n    animation-delay: ",";\n"])),oa,(function(n){return n.animationDelay||"unset"})),sa=(0,Z.ZP)(me)(yr||(yr=(0,x.Z)(["\n    width: 336px;\n    height: 46px;\n    position: absolute;\n    bottom: 41px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: auto;\n"]))),la=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_3")}),[]);return(0,tt.jsxs)(ca,{src:pt(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())},children:[(0,tt.jsx)(ua,{src:pt(p.dN.MainGame.backgroundDeco1)}),(0,tt.jsx)(ha,{}),(0,tt.jsx)(da,{src:pt(p.dN.onboarding.mascot)}),(0,tt.jsx)(To,{bottom:"102px",right:"16px",children:(0,tt.jsx)(Ao,{children:(0,tt.jsx)(Co,{children:"B\u1eafn v\u1ee1 t\u1ea5t c\u1ea3 c\xe1c b\xf3ng \u0111\u1ec3 sang m\xe0n"})})})]})},ca=(0,Z.ZP)(Bo)(br||(br=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"])),(function(n){return n.src})),ua=(0,Z.ZP)(fe)(wr||(wr=(0,x.Z)(["\n    width: 100%;\n    height: 311px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n"]))),ha=Z.ZP.div(Zr||(Zr=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n"]))),da=(0,Z.ZP)(fe)(Pr||(Pr=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    position: absolute;\n    left: 7px;\n    bottom: 93px;\n"]))),pa=e(3683),fa=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_4")}),[]);return(0,tt.jsxs)(Fo,{src:pt(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())},children:[(0,tt.jsx)(So,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,tt.jsx)(Co,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,tt.jsx)(zo,{minHeight:"175px",children:(0,tt.jsx)(va,{src:pt(p.dN.onboarding.ob4)})})}),(0,tt.jsx)(Uo,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ga=(0,Z.F4)(kr||(kr=(0,x.Z)(["\n    0%{ opacity: 0; }\n    5%{ opacity: 1; }\n    40%{ opacity: 1; }\n    45%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),ma=(0,Z.F4)(Ar||(Ar=(0,x.Z)(["\n    0%{ transform: translate(0, 0); }\n    20%{ transform: translate(0, 0); }\n    40%{ transform: translate(-67px, -128px); }\n    100%{ transform: translate(-67px, -128px); }\n"]))),xa=(0,Z.F4)(_r||(_r=(0,x.Z)(["\n    0%{ opacity: 0; }\n    40%{ opacity: 0; }\n    50%{ opacity: 1; }\n    70%{ opacity: 1; }\n    80%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),va=(0,Z.ZP)(pa.Z)(Lr||(Lr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #dynamic-objects{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n    #dynamic-objects #move-ball{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n\n        position: relative;\n    }\n\n    #dynamic-objects-2{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n\n"])),ga,ma,xa),ya=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_5")}),[]);return(0,tt.jsxs)(Fo,{src:pt(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())},children:[(0,tt.jsx)(So,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,tt.jsx)(Co,{children:"Nh\u1ea5n gi\u1eef \u0111i\u1ec1u ch\u1ec9nh h\u01b0\u1edbng m\u0169i t\xean v\xe0 th\u1ea3 tay \u0111\u1ec3 b\u1eafn"}),children:(0,tt.jsx)(zo,{minHeight:"175px",children:(0,tt.jsx)(La,{src:pt(p.dN.onboarding.ob5)})})}),(0,tt.jsx)(Uo,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ba=5.5,wa=(0,Z.F4)(Mr||(Mr=(0,x.Z)(["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(340px,-184px);}\n    ","%        {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"],["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(340px,-184px);}\n    ","\\%        {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"])),3.6363636363636367,7.272727272727273,40,50.90909090909091,54.54545454545454,60,65.45454545454545),Za=(0,Z.F4)(jr||(jr=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"],["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,36.36363636363637,40),Pa=(0,Z.F4)(Cr||(Cr=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"],["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,60,65.45454545454545),ka=(0,Z.F4)(Tr||(Tr=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),25.454545454545453,29.090909090909093,60,65.45454545454545),Aa=(0,Z.F4)(Br||(Br=(0,x.Z)(["\n    0%                                  {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),60,65.45454545454545),_a=(0,Z.F4)(Er||(Er=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),63.63636363636363,69.0909090909091,81.81818181818183,87.27272727272727),La=(0,Z.ZP)(pa.Z)(Sr||(Sr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #ob5-move-ball {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform: translate(0px, 0px);\n    }\n    #ob5-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 83% 130%;\n    }\n    #ob5-path {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 0% 135%;\n    }\n    #ob5-dynamic-objects {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n    #ob5-dynamic-objects-3 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n    #ob5-dynamic-objects-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n"])),wa,ba,Za,ba,Pa,ba,ka,ba,Aa,ba,_a,ba),Ma=function(){var n=b();(0,i.useEffect)((function(){console.log("OnboardingStep_6")}),[]);return(0,tt.jsxs)(Fo,{src:pt(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ko.v.actions.nextStep())},children:[(0,tt.jsx)(So,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,tt.jsx)(Co,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,tt.jsx)(zo,{minHeight:"155px",children:(0,tt.jsx)(Ia,{src:pt(p.dN.onboarding.ob6)})})}),(0,tt.jsx)(Uo,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ja=(0,Z.F4)(Ir||(Ir=(0,x.Z)(["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"],["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"])),7.5,15,22.5,50,.575*100,65,72.5),Ca=(0,Z.F4)(Or||(Or=(0,x.Z)(["\n    0%                              {transform: rotate(0deg)}\n    ","%       {transform: rotate(0deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"],["\n    0%                              {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"])),10,20,60,70),Ta=(0,Z.F4)(Nr||(Nr=(0,x.Z)(["\n    0%                              {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"],["\n    0%                              {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"])),10,20,60,70),Ba=(0,Z.F4)(Yr||(Yr=(0,x.Z)(["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"],["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"])),10,20,60,70),Ea=(0,Z.F4)(Dr||(Dr=(0,x.Z)(["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"],["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"])),10,20,60,70),Sa=(0,Z.F4)(Ur||(Ur=(0,x.Z)(["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"],["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"])),10,20,60,70),Ia=(0,Z.ZP)(pa.Z)(Rr||(Rr=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: 20px;\n    margin-bottom: -5px;\n\n    #ob6-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        transform-origin: 85% 257%;\n        /* transform: translate(-228px,-59px) rotate(0deg) scale(1.3); */\n    }\n    #ob6-ball-1-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-2-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-1 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-ball-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-circle {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: cubic-bezier(0, 0.5, 0.7, 1.1);\n        transform-origin: 57.5% 214%;\n        /* transform: translate(-52px, 27px) rotate(0deg); */\n    }\n"])),ja,4,Ca,4,Ta,4,Ba,4,Ea,4,Sa,4),Oa=function(){var n=w((function(n){return n.onboarding.isOBVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(Na,{})})},Na=function(){var n=b(),t=w((function(n){return n.onboarding.currentStep}));return(0,tt.jsx)(tt.Fragment,{children:function(){switch(t){case 1:return(0,tt.jsx)(Vo,{});case 2:return(0,tt.jsx)(ta,{});case 3:return(0,tt.jsx)(la,{});case 4:return(0,tt.jsx)(fa,{});case 5:return(0,tt.jsx)(ya,{});case 6:return(0,tt.jsx)(Ma,{});default:return setTimeout((function(){nt.map.reload(1),a.r.emit(a.B.Navigate,p.dI.MainGame),n(ko.v.actions.setOBVisible(!1))}),0),null}}()})},Ya=function(){var n=b();return(0,tt.jsxs)(Da,{src:pt(p.dN.worldMap.topBg),children:[(0,tt.jsx)(Ua,{src:pt(p.dN.worldMap.optionBtn),onClick:function(){console.log("onClickOptionBtn"),n(Vn.U.actions.setSettingPopupVisible(!0))}}),(0,tt.jsxs)(Ra,{children:[(0,tt.jsx)(Qa,{src:pt(p.dN.general.heartIcon),children:(0,tt.jsx)(Ha,{children:"5"})}),(0,tt.jsx)(Fa,{children:"\u0110\u1ea7y"}),(0,tt.jsx)(za,{src:pt(p.dN.general.plusIcon),onClick:function(){console.log("onClickPlusIcon")}})]})]})},Da=(0,Z.ZP)(fe)(Qr||(Qr=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 144px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n"]))),Ua=(0,Z.ZP)(fe)(Hr||(Hr=(0,x.Z)(["\n    position: absolute;\n    right: 16px;\n    top: 53px;\n\n    width: 32px;\n    height: 32px;\n    pointer-events: auto;\n"]))),Ra=Z.ZP.div(Fr||(Fr=(0,x.Z)(["\n    position: absolute;\n    left: 25px;\n    top: 53px;\n    height: 30px;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n\n    border-radius: 45px 34px 34px 15px;\n    background-color: rgba(36, 36, 36, 0.6);\n    pointer-events: auto;\n"]))),Qa=(0,Z.ZP)(fe)(zr||(zr=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-left: -15px;\n    margin-top: -3px;\n"]))),Ha=Z.ZP.div(Vr||(Vr=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(149, 56, 56, 0.63);\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n    margin-top: 6px;\n"]))),Fa=Z.ZP.div(Gr||(Gr=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    min-width: 40px;\n    margin-top: 3px;\n    margin-left: 3px;\n"]))),za=(0,Z.ZP)(fe)(Wr||(Wr=(0,x.Z)(["\n    width: 24px;\n    height: 24px;\n"]))),Va=function(){var n=w((function(n){return n.worldMap.isSettingPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(Ga,{})})},Ga=function(){var n=b();return(0,tt.jsx)(ti,{title:"Thi\u1ebft l\u1eadp",ctaText:"Tho\xe1t tr\xf2 ch\u01a1i",onClose:function(){n(Vn.U.actions.setSettingPopupVisible(!1))},onCta:function(){console.log("EXIT GAME"),n(Vn.U.actions.setSettingPopupVisible(!1)),m.x.request(m.w.dismiss)}})},Wa=function(){var n=w((function(n){return n.onboarding.isOBVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(Xa,{})})},Xa=function(){var n=w((function(n){return n.onboarding.currentStep})),t=pt(p.dN.onboarding.faceBgStep1);return(0,tt.jsx)(tt.Fragment,{children:function(){switch(n){case 1:case 2:return(0,tt.jsx)(Ja,{src:t});default:return null}}()})},qa=(0,Z.ZP)(fe)(Xr||(Xr=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 100; */\n"]))),Ja=(0,Z.ZP)(qa)(qr||(qr=(0,x.Z)(["\n    background-repeat: repeat;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"]))),Ka=function(n){var t=n.target,e=t.type,i=t.quantity,r=t.ball,o=pt(Cn.getTargetTypeImageUrl(e,r)||"");return console.log("iconUrl",o),(0,tt.jsxs)($a,{children:[(0,tt.jsx)(ns,{src:o}),(0,tt.jsx)(ts,{children:(0,tt.jsx)(es,{children:i})}),(0,tt.jsx)(is,{src:pt(p.dN.general.targetItemBg)})]})},$a=Z.ZP.div(Jr||(Jr=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),ns=(0,Z.ZP)(fe)(Kr||(Kr=(0,x.Z)(["\n    width: 36px;\n    height: 36px;\n"]))),ts=Z.ZP.div($r||($r=(0,x.Z)(["  \n    background-color: rgba(0, 0, 0, 0.4);\n    border-radius: 10px;\n    min-width: 30px;\n"]))),es=Z.ZP.div(no||(no=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin: 1px 6px -1px;\n"]))),is=(0,Z.ZP)(fe)(to||(to=(0,x.Z)(["\n    width: 58px;\n    height: 46px;\n    margin-top: -37px;\n    position: relative;\n    z-index: -1;\n"]))),rs=function(n){var t=n.marginTop,e=pt(p.dN.general.levelTargetBg),i=w((function(n){return n.worldMap.currentLevel})).id,r=w((function(n){return n.mainGame.config})),o=Nn.findLevelConfig(r,i);console.log("level",o);return(0,tt.jsxs)(os,{marginTop:t,children:[(0,tt.jsx)(as,{src:e}),(0,tt.jsxs)(ls,{children:[(0,tt.jsx)(cs,{src:e}),(0,tt.jsx)(us,{children:"B\u1eafn v\u1ee1 to\xe0n b\u1ed9 b\xf3ng m\xe0u"}),(0,tt.jsx)(hs,{children:function(){var n;return null===o||void 0===o||null===(n=o.targets)||void 0===n?void 0:n.map((function(n,t){return(0,tt.jsx)(Ka,{target:n},t)}))}()})]}),(0,tt.jsx)(ss,{src:e})]})},os=Z.ZP.div(eo||(eo=(0,x.Z)(["\n    width: 292px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),as=(0,Z.ZP)(fe)(io||(io=(0,x.Z)(["\n    width: 100%;\n    height: 50px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),ss=(0,Z.ZP)(as)(ro||(ro=(0,x.Z)(["\n    height: 30px;\n    background-position: 0px 100%;\n"]))),ls=Z.ZP.div(oo||(oo=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),cs=(0,Z.ZP)(fe)(ao||(ao=(0,x.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% ","%;\n    background-position: 0px ","%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    bottom: 0px;\n    z-index: -1;\n"])),95/15*100,57.5/95*100),us=Z.ZP.div(so||(so=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: -45px;\n"]))),hs=Z.ZP.div(lo||(lo=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 15px;\n    margin-bottom: -31px;\n"]))),ds=function(){var n=w((function(n){return n.worldMap.isPlayNewLevelPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(ps,{})})},ps=function(){var n=b(),t=w((function(n){return n.worldMap.currentLevel})).id;return(0,tt.jsxs)(Ve,{title:"M\xe0n ".concat(t),onClose:function(){console.log("onClose"),n(Vn.U.actions.setPlayNewLevelPopupVisible(!1))},marginBottom:"20vh",children:[(0,tt.jsx)(rs,{}),(0,tt.jsx)(me,{src:pt(p.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Vn.U.actions.setPlayNewLevelPopupVisible(!1)),nt.map.reload(t),a.r.emit(a.B.Navigate,p.dI.MainGame)},children:(0,tt.jsx)(xe,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},fs=Z.ZP.div(co||(co=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),gs=(0,Z.ZP)(fe)(uo||(uo=(0,x.Z)(["\n    width: 72px;\n    height: 72px;\n    position: relative;\n    transform: translate(",") scale(",") rotate(",");\n"])),(function(n){return n.translateXY}),(function(n){return n.scale}),(function(n){return n.rotate})),ms=Z.ZP.div(ho||(ho=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: 10px;\n"]))),xs=Z.ZP.div(po||(po=(0,x.Z)(["\n    -webkit-text-stroke: 2px rgba(255, 255, 255, 0.55);\n    background-image: linear-gradient(to bottom, #681c8d 50%, #e74cdf 99%);\n    font-family: iCielUniSans;\n    font-size: 28px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    -webkit-background-clip: text;\n    background-clip: text;\n    -webkit-text-fill-color: transparent;\n"]))),vs=(0,Z.ZP)(fe)(fo||(fo=(0,x.Z)(["\n    width: 108px;\n    height: 40px;\n    margin-top: -4px;\n"]))),ys=((0,Z.ZP)(fe)(go||(go=(0,x.Z)(["\n    width: 253px;\n    height: 111px;\n    margin-top: -25px;\n"]))),Z.ZP.div(mo||(mo=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: -108px;\n"]))),function(){var n=w((function(n){return n.worldMap.isPlayLevelAgainPopupVisible}));return(0,tt.jsx)(tt.Fragment,{children:n&&(0,tt.jsx)(bs,{})})}),bs=function(){var n=b(),t=w((function(n){return n.worldMap.currentLevel})),e=t.id,i=t.stars,r=t.highScore,o=pt(p.dN.general.bigStarAble);return(0,tt.jsxs)(Ve,{title:"M\xe0n ".concat(e),onClose:function(){console.log("onClose"),n(Vn.U.actions.setPlayLevelAgainPopupVisible(!1))},children:[(0,tt.jsxs)(fs,{children:[(0,tt.jsx)(gs,{src:pt(p.dN.general.bigStarDisable),scale:.8,rotate:"-20deg",translateXY:"8px, 18px",children:i>=1&&(0,tt.jsx)(Zs,{src:o,animationDelay:"0.3s"})}),(0,tt.jsx)(gs,{src:pt(p.dN.general.bigStarDisable),scale:1,rotate:"0deg",translateXY:"0px, 0px",children:i>=2&&(0,tt.jsx)(Zs,{src:o,animationDelay:"0.5s"})}),(0,tt.jsx)(gs,{src:pt(p.dN.general.bigStarDisable),scale:.8,rotate:"20deg",translateXY:"-8px, 18px",children:i>=3&&(0,tt.jsx)(Zs,{src:o,animationDelay:"0.7s"})})]}),(0,tt.jsx)(ms,{children:"\u0110i\u1ec3m"}),(0,tt.jsx)(xs,{children:Cn.convertNumberToScoreString(r)}),(0,tt.jsx)(vs,{src:pt(p.dN.general.scoreBg)}),(0,tt.jsx)(rs,{marginTop:"-15px"}),(0,tt.jsx)(me,{src:pt(p.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Vn.U.actions.setPlayLevelAgainPopupVisible(!1)),nt.map.reload(e),a.r.emit(a.B.Navigate,p.dI.MainGame)},children:(0,tt.jsx)(xe,{fontSize:"22px",children:"Ch\u01a1i l\u1ea1i"})})]})},ws=(0,Z.F4)(xo||(xo=(0,x.Z)(["\n    0%      {transform: translate(-50%, -50%) scale(0)}\n    100%    {transform: translate(-50%, -50%) scale(1)}\n"]))),Zs=(0,Z.ZP)(fe)(vo||(vo=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0);\n    animation-name: ",";\n    animation-duration: 0.4s;\n    animation-delay: ",";\n    animation-fill-mode: forwards;\n    animation-timing-function: cubic-bezier(0, 1.5, 0.5, 1.5);\n"])),ws,(function(n){return n.animationDelay||"unset"})),Ps=function(){var n=w((function(n){return n.worldMap.imagesDefine})),t=w((function(n){return n.worldMap.chapters})),e=w((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.chapterId})),r=(0,i.useState)(!1),o=(0,Mn.Z)(r,2),a=o[0],s=o[1];(0,i.useEffect)((function(){n&&t&&e?(nt.setChapters(n,t,e),s(!0)):s(!1)}),[n,t,e]);return(0,tt.jsxs)(he,{children:[a&&(0,tt.jsx)(Zo,{onStart:function(){nt.startWorldMap()},onEnd:function(){nt.endWorldMap()},onInitDom:function(n){nt.initDom(n)},onResume:function(){nt.resume()},onPause:function(){nt.pause()}}),(0,tt.jsx)(Wa,{}),(0,tt.jsx)(Ya,{}),(0,tt.jsx)(Va,{}),(0,tt.jsx)(ds,{}),(0,tt.jsx)(ys,{}),(0,tt.jsx)(Oa,{})]})},ks=function(n){var t=(0,i.useState)(!1),e=(0,Mn.Z)(t,2),r=e[0],o=e[1],a=(0,i.useRef)(null);return(0,tt.jsx)(As,{ref:a,onClick:function(){r||a.current&&(o(!0),B.ZP.timeline().to(a.current,{scale:1.1,duration:.05}).to(a.current,{scale:1,duration:.05}).then((function(){o(!1)})).then(n.onClick))},children:n.children})},As=Z.ZP.div(yo||(yo=(0,x.Z)(["\n    min-height: 42px;\n    max-height: 42px;\n\n    padding: 5px 10px;\n    box-sizing: border-box;\n\n    background-color: white;\n    color: black;\n    font-size: 13px;\n\n    display: flex;\n    text-align: center;\n    align-items: center;\n\n    border-radius: 20px;\n\n    position: relative;\n"])));function _s(n){return(0,tt.jsx)(ks,{onClick:n.onClick,children:n.children})}function Ls(n){var t=b();return(0,tt.jsx)(js,{src:nn.colors[n.color].baseTexture.cacheId,onClick:function(){t(bn.J.actions.setBulletColor(n.num-1))},children:n.num})}var Ms,js=(0,Z.ZP)(ve)(bo||(bo=(0,x.Z)(["\n    width: 34px;\n    height: 34px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    font-size: 12px;\n    font-weight: bold;\n    color: white;\n"]))),Cs=e(8925);function Ts(){var n=w((function(n){return n.colorTool.showLoadBase64Popup})),t=b(),e=function(){t(bn.J.actions.setShowLoadBase64Popup(!1))};return n?(0,tt.jsxs)(Ve,{title:"Load Map From Base64",onClose:e,children:[(0,tt.jsx)(Qs,{autoComplete:"off",onChange:Es,placeholder:"Input base64 string here"}),(0,tt.jsx)(_s,{onClick:function(){nt.map.colorTool.loadFromBase64(Bs),e()},children:"Load"})]}):null}var Bs=void 0;function Es(n){n.target.value&&(Bs=n.target.value)}var Ss,Is,Os,Ns,Ys,Ds,Us,Rs,Qs=Z.ZP.input(Ms||(Ms=(0,x.Z)(["\n    width: 90%;\n    height: 30px;\n\n    text-align: center;\n\n    margin-bottom: 20px;\n"])));function Hs(n){var t=w((function(n){return n.colorTool.bubbleCount})),e=w((function(n){return n.colorTool.bullets})),r=(v(),b());(0,i.useLayoutEffect)((function(){r(bn.J.actions.initCacheLevel(void 0))}),[]);var o=function(){return e.map((function(n,t){return(0,tt.jsx)(Ls,{num:t+1,color:n},t)}))},a=(0,tt.jsxs)(nl,{children:["Choose level to edit",(0,tt.jsxs)(tl,{children:[(0,tt.jsx)(_s,{onClick:Gs,children:"Choose"}),(0,tt.jsx)(Js,{id:"url",type:"number",autoComplete:"off",onChange:Vs,defaultValue:zs})]})]});return void 0===Fs?(0,tt.jsxs)(qs,{children:[(0,tt.jsx)(et,{}),(0,tt.jsx)(il,{children:o()}),(0,tt.jsx)($s,{children:a})]}):(0,tt.jsxs)(qs,{children:[(0,tt.jsx)(et,{}),(0,tt.jsxs)(Ks,{children:[(0,tt.jsx)(_s,{onClick:Ws,left:20,children:"Add Line"}),(0,tt.jsx)(_s,{onClick:Xs,left:90,children:"Trim Lines"}),(0,tt.jsx)(_s,{onClick:function(){r(bn.J.actions.addBullet(5))},left:160,children:"Add 5 Bullet"}),(0,tt.jsx)(_s,{onClick:function(){r(bn.J.actions.setTrimBullet(void 0))},left:230,children:"Trim Bullet"})]}),(0,tt.jsx)(il,{children:o()}),(0,tt.jsxs)($s,{children:[a,(0,tt.jsxs)(_s,{onClick:function(){var n,t=[],e=nt.map.colorTool.maxHeight,i=(0,T.Z)(nt.map.data);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.sprite.y>e||t.push(10*o.type+o.color)}}catch(l){i.e(l)}finally{i.f()}var a=E.Z.getState().colorTool.bullets.filter((function(n){return n>0})),s=rn(t,a);r(bn.J.actions.addCacheLevel({levelId:zs,base64:s})),window.isSecureContext&&navigator.clipboard&&(navigator.clipboard.writeText(s),window.alert("Copied"))},children:["Save & Copy",(0,tt.jsxs)(el,{children:["Bubbles: ",t]})]}),(0,tt.jsx)(_s,{onClick:function(){var n=nt.map.colorTool.drawMapForCapture();(0,Cs.saveAs)(n,"level".concat(zs,".jpg"))},children:"Export Map"}),(0,tt.jsx)(_s,{onClick:function(){r(bn.J.actions.setShowLoadBase64Popup(!0))},children:"Load Base64"})]}),(0,tt.jsx)(Ts,{})]})}var Fs=void 0,zs=void 0;function Vs(n){n.target.value&&(Fs=parseInt(n.target.value))}function Gs(){void 0!==Fs&&Fs!==zs&&(nt.map.colorTool.loadLevel(Fs),zs=Fs)}function Ws(){nt.map.colorTool.addEmptyLine()}function Xs(){nt.map.colorTool.trimLine()}var qs=Z.ZP.div(Ss||(Ss=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),Js=Z.ZP.input(Is||(Is=(0,x.Z)(["\n    width: 50px;\n    height: 30px;\n\n    text-align: center;\n"]))),Ks=Z.ZP.div(Os||(Os=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n\n    padding: 20px;\n\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n"]))),$s=Z.ZP.div(Ns||(Ns=(0,x.Z)(["\n    position: fixed;\n    bottom: 0px;\n\n    width: 100%;\n    padding: 10px 10px;\n    box-sizing: border-box;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    gap: 10px;\n\n    font-size: 13px;\n"]))),nl=Z.ZP.div(Ys||(Ys=(0,x.Z)(["\n    color: white;\n    text-align: center;\n\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n"]))),tl=Z.ZP.div(Ds||(Ds=(0,x.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),el=Z.ZP.div(Us||(Us=(0,x.Z)(["\n    color: white;\n    position: absolute;\n    top: -30px;\n"]))),il=Z.ZP.div(Rs||(Rs=(0,x.Z)(["\n    width: 90%;\n    height: 34px;\n\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    /* gap: 2px; */\n    align-content: flex-start;\n\n    overflow-x: scroll;\n    overflow-y: hidden;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    position: absolute;\n    bottom: 200px;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 1px dashed white;\n"])));function rl(n){b(),v();var t=w((function(n){return n.global.backStacks}));(0,i.useLayoutEffect)((function(){e()}),[]),(0,i.useEffect)((function(){return s(),function(){l()}}),[]),(0,i.useEffect)((function(){var n=function(n){n&&"onBackPress"==n.data&&a.r.emit(t.length>0?t[t.length-1]:a.B.ON_BACK_KEY)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]);var e=function(){m.x.request(m.w.stopTrace,window.traceScreenLoadId),window.onresize=u,m.x.listen("onFocusApp",h),m.x.listen("onBlurApp",d),c()},s=function(){m.x.request(m.w.stopTrace,window.traceScreenInterractionId),m.x.request(m.w.stopTrace,window.traceScreenGoalId),window.addEventListener("visibilitychange",f)},l=function(){window.removeEventListener("visibilitychange",f)},c=function n(){requestAnimationFrame(n)},u=function(){a.r.emit(a.B.ON_RESIZE,window.innerWidth,window.innerHeight)};function h(){a.r.emit(a.B.On_RESUME),console.log("[App.jsx] handleFocusMiniApp")}function d(){console.log("[App.jsx] handleBlurMiniApp"),g.pauseBgMusic(),a.r.emit(a.B.On_PAUSE)}function f(n){"visible"===window.document.visibilityState?h():d()}return(0,tt.jsxs)(r.VK,{children:[(0,tt.jsxs)(o.Z5,{children:[(0,tt.jsx)(o.AW,{path:"/*",element:(0,tt.jsx)(Hs,{})}),(0,tt.jsx)(o.AW,{path:p.dI.MainMenu,element:(0,tt.jsx)(Ni,{})}),(0,tt.jsx)(o.AW,{path:p.dI.MainGame,element:(0,tt.jsx)(Bi,{})}),(0,tt.jsx)(o.AW,{path:p.dI.WorldMap,element:(0,tt.jsx)(Ps,{})}),(0,tt.jsx)(o.AW,{path:p.dI.ColorTool,element:(0,tt.jsx)(Hs,{})})]}),(0,tt.jsx)(Ui,{})]})}m.x.initTracking()},808:function(){!function(){function n(){var n=this;return new Promise((function(t){var e=new FileReader;e.onload=function(){t(e.result)},e.readAsArrayBuffer(n)}))}"File"in window&&(File.prototype.arrayBuffer=File.prototype.arrayBuffer||n),Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||n}()},5301:function(n,t,e){"use strict";n.exports=e.p+"static/media/melodyConfig.13399a228d3f5a87e064"}}]);