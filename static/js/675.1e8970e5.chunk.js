(self.webpackChunkmomo_game=self.webpackChunkmomo_game||[]).push([[675],{9675:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return sc}});e(808),e(9018);var i=e(7313),o=e(2135),r=e(8467),a=e(8041),s=e.n(a),l=function(n){return n.Navigate="Navigate",n.ON_RESIZE="ON_RESIZE",n.ON_BACK_KEY="ON_BACK_KEY",n.On_RESUME="On_RESUME",n.On_PAUSE="On_PAUSE",n.SHOW_RETRY_POPUP="SHOW_RETRY_POPUP",n.SHOW_WIN_POPUP="SHOW_WIN_POPUP",n.SORT_GAMEOBJECT="SORT_GAMEOBJECT",n.PLAYER_PREPARE_TO_MOVE="PLAYER_PREPARE_TO_MOVE",n.PLAYER_MOVE="PLAYER_MOVE",n.PLAYER_RESUME_MOVE="PLAYER_RESUME_MOVE",n.PLAYER_IDLE="PLAYER_IDLE",n.FRIENDS_TRANSITION_IN="FRIENDS_TRANSITION_IN",n.FRIENDS_TRANSITION_OUT="FRIENDS_TRANSITION_OUT",n.ON_UPDATE_INFO="ON_UPDATE_INFO",n.FORCE_UPDATE_LIST="FORCE_UPDATE_LIST",n}(l||{}),c=new(s());c.setMaxListeners(100);var u=e(4165),h=e(5861),d=e(5671),p=e(3144),f=e(2923),m=e(2749),g=e(8197),x=function(){function n(){(0,d.Z)(this,n),this.cdnUrl=""}return(0,p.Z)(n,[{key:"init",value:function(n){this.cdnUrl=n,this.resumeBgMusic(),console.log("BG MUSIC: ",this.cdnUrl)}},{key:"enable",set:function(n){var t=n?1:0;f.eq.volumeAll=t}},{key:"load",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!f.eq.exists(t)){n.next=2;break}return n.abrupt("return");case 2:return e=this.cdnUrl+t+".mp3",n.next=5,m.P.cacheFile(e);case 5:e=n.sent,f.eq.add(t,e);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"play",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e,i=arguments;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>1&&void 0!==i[1]&&i[1],f.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:f.eq.play(t,{loop:e});case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"playMusic",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e,i,o=arguments;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=o.length>1&&void 0!==o[1]&&o[1],f.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:(i=f.eq.find(g.gH.BGMusic))&&i.paused?i.resume():i.isPlaying||i.play(),i.loop=e;case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"pauseBgMusic",value:function(){f.eq.exists(g.gH.BGMusic)&&f.eq.pause(g.gH.BGMusic)}},{key:"resumeBgMusic",value:function(){this.playMusic(g.gH.BGMusic,!0)}}]),n}(),v=new x,y=e(3303),b=e(168),w=function(){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.emit(l.Navigate,n,t)}},Z=e(244),P=e(5554),k=P.I0,_=P.v9,j=e(2070),T=Math.min(2,window.devicePixelRatio||1),E=750,L=1334,C=function(){function n(t){var e=this;(0,d.Z)(this,n),this.app=void 0,this.options=void 0,this.canvas=void 0,this.view=void 0,this.stage=void 0,this.onUpdate=void 0,this.lastUpdateTime=Date.now(),this.fpsInterval=1e3/60,this.isPause=!1,this.update=function(){var n,t=Date.now(),i=.001*(t-e.lastUpdateTime);e.isPause||(e.app.render(),null===(n=e.onUpdate)||void 0===n||n.call(e,i));e.lastUpdateTime=t,requestAnimationFrame(e.update)},this.options=t;var i=this.options,o=i.maxFPS,r=void 0===o?45:o,a=i.trasparent,s=void 0===a?1:a,l=i.backgroundColor,c=void 0===l?0:l;this.fpsInterval=1e3/r,this.canvas=document.createElement("canvas"),this.app=new j.MxU({backgroundAlpha:s,backgroundColor:c,width:E,height:L,resolution:T,autoStart:!1,view:this.canvas}),globalThis.__PIXI_APP__=this.app,globalThis.__PIXI_APP__=this.app,this.view=this.app.view,this.view.style.width="100%",this.view.style.height="100%",this.stage=this.app.stage,this.app.ticker.remove(this.app.render,this.app),this.update()}return(0,p.Z)(n,[{key:"init",value:function(n){if(n){n.appendChild(this.canvas),this.app.resizeTo=n,this.app.resize();var t=this.options,e=t.alignCenter,i=t.fitWidth,o=t.fitHeight,r=L/E,a=E/L,s=this.app.renderer.width,l=this.app.renderer.height,c=l/L,u=s/E;if(i===o===!0||(i&&(c=s*r/L),o&&(u=l*a/E)),this.app.stage.scale.set(u/T,c/T),e){var h=(s-E*u)/2,d=(l-L*c)/2;this.app.stage.position.set(h/T,d/T)}}}},{key:"pause",value:function(){this.app.stop(),this.isPause=!0}},{key:"resume",value:function(){this.app.start(),this.isPause=!1}},{key:"destroy",value:function(){this.app.stop(),this.app.stage.destroy(!0),this.app.destroy(!0)}}]),n}(),S=e(136),M=e(9388),O=e(7762),A=e(2243),B=e(1036),N=e(9378),I=e(5869),Y=e(1413),D=new(function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,d.Z)(this,e),(n=t.call(this)).meshes=[],n}return(0,p.Z)(e,[{key:"update",value:function(n){this.meshes.forEach((function(t){t.visible&&(t.shader.uniforms.time+=3*n)}))}},{key:"setRayPoints",value:function(n,t){for(;this.meshes.length<n.length-1;)this.addMesh();this.meshes.forEach((function(e,i){if(e.visible=i<n.length-1,i<n.length-1){var o=n[i],r=n[i+1],a=r.x-o.x,s=r.y-o.y,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));e.position.set(o.x,o.y),e.rotation=Math.atan2(s,a),e.scale.set(l,100),e.shader.uniforms.ratioxy=l/100,t&&(e.shader.uniforms.mainColor=t),e.shader.uniforms.startRatio=0==i?R.startRatio:1,e.shader.uniforms.startOffset=0==i?R.startOffset:0,e.shader.uniforms.endRatio=i>=n.length-2?R.endRatio:1,e.shader.uniforms.endOffset=i>=n.length-2?R.endOffset:0}})),N.Z.dispatch(I.T.actions.setTopOpacity(n.length<=0?1:.2))}},{key:"addMesh",value:function(){var n=(new j.ZXM).addAttribute("aVertexPosition",[0,-1,1,-1,1,1,0,1],2).addAttribute("aUvs",[0,0,1,0,1,1,0,1],2).addIndex([0,1,2,0,2,3]),t=j.exe.from(U,z,(0,Y.Z)({},R)),e=new j.Kj0(n,t);return this.meshes.push(e),this.addChild(e),e}}]),e}(j.W20)),R={time:0,ratioxy:1,mainColor:[1,0,0],startRatio:2.5,startOffset:1.5,endRatio:.05,endOffset:.5,noiseSampler:j.xEZ.from("effects/smooth-noise-3.jpg")},U="\n    precision mediump float;\n\n    attribute vec2 aVertexPosition;\n    attribute vec2 aUvs;\n\n    uniform mat3 translationMatrix;\n    uniform mat3 projectionMatrix;\n\n    varying vec2 vUvs;\n\n    void main() {\n\n        vUvs = aUvs;\n        gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    }\n",z="\n    precision mediump float;\n    varying vec2 vUvs;\n    uniform float time;\n    uniform float ratioxy;\n    uniform vec3 mainColor;\n    uniform float startRatio;\n    uniform float startOffset;\n    uniform float endRatio;\n    uniform float endOffset;\n    uniform sampler2D noiseSampler;\n\n    vec4 getColor(vec2 uv, float offsetYRatio, float waveLengthRatio, float waveSpeed, float waveOffset, float width, float subWidth, float subStrength, float samplerY){\n        float startOffset_ = startOffset/ratioxy;\n        float endOffset_ = endOffset/ratioxy;\n\n        float uvx = (uv.x + 1.)/2.; //map uvx 0. -> 1.\n        float widthRatio = 1.;\n        widthRatio = max(widthRatio, (1. - startRatio)/startOffset_*uvx + startRatio);\n        widthRatio = min(widthRatio, (endRatio - 1.)/endOffset_*uvx + endRatio - (endRatio - 1.)/endOffset_);\n\n        float subFadeOutOffset = 1./ratioxy;\n        float fadeRatio = pow(min(1. - abs(uv.x), subFadeOutOffset)/subFadeOutOffset, .5);\n\n        float offsetY = (texture2D(noiseSampler, vec2(mod((vUvs.x*ratioxy/waveLengthRatio - (time + floor(time*2.))*waveSpeed + waveOffset)*1., 1.), samplerY)).r - 0.5)*2.*offsetYRatio;\n        float y = uv.y + offsetY*widthRatio;\n        float main = step(1. - width*widthRatio, 1. - abs(y));\n        // main *= fadeRatio;\n        float sub = pow(max(1. - abs(y) - (1. - subWidth), 0.)*subStrength, 2.)*widthRatio;\n        sub *= fadeRatio;\n\n        float mixValue = .25;\n        float r = max(mix(main, sub*mainColor.r, mixValue), sub*mainColor.r);\n        float g = max(mix(main, sub*mainColor.g, mixValue), sub*mainColor.g);\n        float b = max(mix(main, sub*mainColor.b, mixValue), sub*mainColor.b);\n        float a = max(main, sub);\n        return vec4(r, g, b, a);\n    }\n\n    void main()\n    {\n        //Offset uv so that center is 0,0 and edges are -1,1\n        vec2 uv = (vUvs-vec2(0.5))*2.0;\n\n        vec4 color1 = getColor(uv, 0.03, 20., 1., 0., 0.025 , 0.2, 5., .5);\n        vec4 color2 = getColor(uv, 0.1, 7., .17, 1., 0.01, 0.15, 5., .3);\n        vec4 color3 = getColor(uv, 0.12, 8., .2, 4., 0.01, 0.15, 5., .7);\n\n        float r = max(max(color1.r, color2.r), color3.r);\n        float g = max(max(color1.g, color2.g), color3.g);\n        float b = max(max(color1.b, color2.b), color3.b);\n        float a = max(max(color1.a, color2.a), color3.a);\n        vec4 outColor = vec4(r, g, b, a);\n        gl_FragColor = outColor;\n    }\n",F=e(918),W=e(2173),H=e.n(W),G=Math.cos(30/180*Math.PI),V=11,q=68,J=310,X=q*G,Q=.7*X,K=X,$=K*G,nn=new j.pn8({fontFamily:"iCielUniSans",fontSize:31,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),tn=new j.pn8({fontFamily:"iCielUniSans",fontSize:60,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),en={hover:j.xEZ.from("images/hover-ring.png"),ring:j.xEZ.from("images/Ring.png"),ring_light:j.xEZ.from("images/Ring_light.png"),item_light:j.xEZ.from("images/item_light.png"),colors:[null,j.xEZ.from("bubbles/red.png"),j.xEZ.from("bubbles/blue.png"),j.xEZ.from("bubbles/green.png"),null,j.xEZ.from("bubbles/yellow.png"),null,null],types:[null,j.xEZ.from("bubbles/yellow.png"),j.xEZ.from("bubbles/boom.png"),j.xEZ.from("bubbles/line.png"),j.xEZ.from("bubbles/red-item.png"),j.xEZ.from("bubbles/stone.png"),j.xEZ.from("bubbles/explode.png"),j.xEZ.from("bubbles/white.png")],itemColors:[null,j.xEZ.from("bubbles/red-item.png"),j.xEZ.from("bubbles/blue-item.png"),j.xEZ.from("bubbles/green-item.png"),null,j.xEZ.from("bubbles/yellow-item.png"),null,null],boom_empty:j.xEZ.from("images/boom_empty.png"),boom_holder:j.xEZ.from("images/boom_holder.png"),headline:j.xEZ.from("images/headline.png"),background:j.xEZ.from("images/background.png"),background_1:j.xEZ.from("images/background_deco_1.png"),background_2:j.xEZ.from("images/background_deco_2.png"),background_3:j.xEZ.from("images/background_deco_3.png"),star_particle:j.xEZ.from("effects/star_particle.png"),blaze_particle:j.xEZ.from("effects/blaze_particle.png"),dot_particle:j.xEZ.from("effects/dot_particle.png"),rayColor:[new j.Ilk("#ffffff"),new j.Ilk("#fc483d"),new j.Ilk("#4390dc"),new j.Ilk("#65f55e"),new j.Ilk("#000000"),new j.Ilk("#fdb52c")]};new j.Ilk;var on=phoenix.melody.MelodyConfig.create();!function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){var t,i,o;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e(5301));case 2:return t=n.sent,n.next=5,t.arrayBuffer();case 5:return i=n.sent,o=phoenix.melody.MelodyConfig.decode(new Uint8Array(i)),Object.assign(on,o),H().util.toJSONOptions={enums:Number},N.Z.dispatch(I.T.actions.setConfig(on.toJSON())),n.abrupt("return",o);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()();var rn=function(n){var t=F.lW.from(n,"base64");return phoenix.melody.MelodyLevelConfig.decode(t)},an=function(n,t){var e=phoenix.melody.MelodyLevelConfig.create();e.columns=V,e.rows=n.length/V,e.id=1;var i,o=(0,O.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,a=phoenix.melody.MelodyBall.create(),s=r%10,l=Math.floor(r/10);a.color=s,a.type=l,e.map.push(a)}}catch(x){o.e(x)}finally{o.f()}var c,u=(0,O.Z)(t);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=phoenix.melody.MelodyBall.create(),p=h%10,f=Math.floor(h/10);d.color=p,d.type=f,e.bullets.push(d)}}catch(x){u.e(x)}finally{u.f()}e.star1Score=1,e.star2Score=2,e.star3Score=3,e.targets.push(function(n){var t=phoenix.melody.MelodyLevelTarget.create();t.type=phoenix.melody.MELODY_LEVEL_TARGET_TYPE.MELODY_LEVEL_TARGET_ANY_BALL;var e,i=0,o=(0,O.Z)(n);try{for(o.s();!(e=o.n()).done;){e.value>0&&i++}}catch(x){o.e(x)}finally{o.f()}return console.log(i),t.quantity=i,t}(n));var m=phoenix.melody.MelodyLevelConfig.encode(e).finish(),g=F.lW.from(m).toString("base64");return console.log(g),g};var sn=rn("CAEoATACOANAAUgLUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAYgQIARAA"),ln=function(){function n(t,e){(0,d.Z)(this,n),this.x=0,this.y=0,this.set(t,e)}return(0,p.Z)(n,[{key:"set",value:function(n,t){return this.x=n,this.y=t,this}},{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copy",value:function(n){this.set(n.x,n.y)}},{key:"subtract",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"multiply",value:function(n){return this.x*=n,this.y*=n,this}},{key:"normalize",value:function(){var n=this.length();return this.x/=n,this.y/=n,this}},{key:"length",value:function(){return Math.sqrt(this.lengthSqr())}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}}],[{key:"angle",value:function(n,t){var e=n.x*n.x+n.y*n.y,i=t.x*t.x+t.y*t.y;if(0===e||0===i)return 0;var o=(n.x*t.x+n.y*t.y)/Math.sqrt(e*i);return o=Math.max(Math.min(o,-1),1),Math.acos(o)}},{key:"fromPIXI",value:function(t){return new n(t.x,t.y)}}]),n}(),cn=phoenix.melody.MELODY_BALL_TYPE,un=phoenix.melody.MELODY_BALL_COLOR,hn=function(){function n(t,e){(0,d.Z)(this,n),this.sprite=null,this.hover=null,this.color=0,this.type=cn.MELODY_BALL_TYPE_NONE,this.nextType=cn.MELODY_BALL_TYPE_NONE,this.isOrigin=!1,this.isMarked=!1,this.neighbors=[null,null,null,null,null,null];var i=this.sprite=new j.jyi;i.width=q,i.height=q,i.anchor.set(.5),this.setPosition(t,e)}return(0,p.Z)(n,[{key:"setPosition",value:function(n,t){n=(1+n-.5*(1-t%2))*q,t=t*X+.5*q,this.sprite.x=n,this.sprite.y=t}},{key:"isEmpty",get:function(){return this.nextType===cn.MELODY_BALL_TYPE_NONE||this.type===cn.MELODY_BALL_TYPE_NORMAL&&this.nextType!==this.type}},{key:"setColor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.color=n,this.sprite.texture=en.colors[n],0===n&&(this.type=0,this.nextType=0),this.isOrigin=t}},{key:"setType",value:function(n){if(0===this.color)return this.type=0,void(this.nextType=0);if(this.type=n,this.nextType=n,!(n<=cn.MELODY_BALL_TYPE_NORMAL)){var t=n===cn.MELODY_BALL_TYPE_ITEM;this.sprite.texture=t?en.itemColors[this.color]:en.types[n],this.color=t?this.color:7}}},{key:"turn",value:function(n){var t=n===this.color;t&&!this.hover&&at.map.misc.turnOn(this),!t&&this.hover&&at.map.misc.turnOff(this)}}]),n}(),dn=function(){function n(){(0,d.Z)(this,n),this.sprite=void 0,this.text=void 0,this.height=void 0,this.radius=void 0,this.angle=void 0,this.veclocity=new ln(0,0);var t=this.sprite=new j.jyi;t.width=q,t.height=q,t.anchor.set(.5);var e=this.text=new j.xvT("50",nn);e.anchor.set(.5),e.scale.set(1.3),e.visible=!1}return(0,p.Z)(n,[{key:"set",value:function(n,t,e){var i=this.sprite;i.visible=!0,i.texture=n.sprite.texture,this.angle=0,this.height=J,i.x=n.sprite.x+t,i.y=n.sprite.y+e,i.width=q,i.height=q,this.veclocity.x=900*(Math.random()-.5),this.veclocity.y=900*(Math.random()-.5)}},{key:"isPlaying",get:function(){return this.sprite.visible}},{key:"update",value:function(n){var t=this.sprite;if(t.y<-310){var e=this.veclocity,i=.5*(E-q);if((t.x>i||t.x<-i)&&(e.x=-e.x),t.x+=e.x*n,t.y+=e.y*n,e.y+=1300*n,t.y>=-310){t.x>0?this.angle=0:this.angle=Math.PI;var o=Math.abs(t.x);if(o<290){var r=t.x/290;this.angle=Math.acos(r),this.radius=290}else this.angle=t.x>0?0:Math.PI,this.radius=o}}else{var a=this.angle+13*n,s=this.height-290*n,l=this.radius*Math.max(s/J,.1);if(s<20){t.visible=!1;var c=this.text;c.visible=!0,at.map.addScore(50);var u=at.map.physicsBox,h=u.x,d=u.y;return c.x=200*(Math.random()-.5),c.y=t.y-50*Math.random()+20,A.ZP.to(c,{y:c.y-30,alpha:0}).duration(.5).then((function(){c.visible=!1,c.alpha=1,c.y=t.y})),void at.map.effect.spawnBlazeParticle(c.x+h,c.y+d)}this.angle=a,this.height=s,t.x=Math.cos(a)*l,t.y=-s;var p=q*(.25*Math.sin(a)+1);t.width=p,t.height=p}}}]),n}(),pn=.2*q;function fn(n,t,e){var i=at.map,o=i.container,r=o.x,a=o.y,s=n.sprite,l=i.misc.spawnBubbleEffect(n,t,!1);return A.ZP.delayedCall(t+.3,(function(){i.effect.spawnStarEffect(s.x+r,s.y+a),n.isOrigin&&i.targetChecker.countBall(n.color,n.type),n.setColor(0),s.width=q,s.height=q,i.addScore(e)})),A.ZP.delayedCall(t+.9,(function(){i.misc.spawnScore(n).text=e,i.misc.returnBubbleEffect(l)})),.1}function mn(n,t){return A.ZP.delayedCall(t,(function(){n.setColor(n.color,n.isOrigin),A.ZP.fromTo(n.sprite,{width:pn,height:pn},{width:q,height:q,duration:.3})})),.13}function gn(n,t,e){var i=at.map,o=i.container,r=(o.x,o.y,n.sprite),a=i.misc.spawnBubbleEffect(n,t,!0);return A.ZP.delayedCall(t+1.9,(function(){i.effect.shakeScreen(.5),n.setColor(0),r.width=q,r.height=q,i.addScore(e),i.misc.spawnScore(n).text=e,i.misc.returnBubbleEffect(a)})),1.7}var xn={normal:function(n,t){var e=at.map.getGroup(n);if(e.length<3)return t;var i,o=(0,O.Z)(e);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.type&&(r.nextType=cn.MELODY_BALL_TYPE_EXPLODE)}}catch(a){o.e(a)}finally{o.f()}return n.nextType=cn.MELODY_BALL_TYPE_NONE,fn(n,t,xn.targetChecker.comboScore),t},boom:function(n,t){var e,i=at.map.getNeighborbyLevel(n,3),o=(0,O.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.nextType!==cn.MELODY_BALL_TYPE_NONE&&(r.nextType=cn.MELODY_BALL_TYPE_NONE,r==n?t+=gn(n,t,250):fn(r,t,250))}}catch(a){o.e(a)}finally{o.f()}return t+.3},line:function(n,t){var e,i=at.map.getLineNeighbor(n,3),o=(0,O.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.nextType!==cn.MELODY_BALL_TYPE_NONE&&(r.nextType=cn.MELODY_BALL_TYPE_NONE,r==n?t+=gn(n,t,500):fn(r,t,500))}}catch(a){o.e(a)}finally{o.f()}return t+.3},normal2normal:function(n,t,e){return t.nextType!==cn.MELODY_BALL_TYPE_EXPLODE?0:(t.nextType=cn.MELODY_BALL_TYPE_NONE,fn(t,e,xn.targetChecker.comboScore))},normal2item:function(n,t,e){return xn.normal2normal(n,t,e)},normal2stone:function(n,t,e){return 0},normal2white:function(n,t,e){return n.nextType===cn.MELODY_BALL_TYPE_NORMAL?0:t.nextType===cn.MELODY_BALL_TYPE_WHITE?(t.nextType=cn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,mn(t,e)):0},normal2explode:function(n,t,e){return n.isOrigin?0:(t.nextType=cn.MELODY_BALL_TYPE_NONE,fn(t,e,xn.targetChecker.comboScore))},normal2boom:function(n,t,e){return 0},normal2line:function(n,t,e){return 0},boom2normal:function(n,t,e){return 0},boom2item:function(n,t,e){return xn.boom2normal(n,t,e)},boom2stone:function(n,t,e){return xn.boom2normal(n,t,e)},boom2white:function(n,t,e){return xn.boom2normal(n,t,e)},boom2explode:function(n,t,e){return xn.boom2normal(n,t,e)},boom2boom:function(n,t,e){return 0},boom2line:function(n,t,e){return 0},line2normal:function(n,t,e){return t.nextType!==cn.MELODY_BALL_TYPE_LINE?0:(t.type=cn.MELODY_BALL_TYPE_LINE,t.nextType=cn.MELODY_BALL_TYPE_NONE,fn(t,e,500))},line2item:function(n,t,e){return xn.line2normal(n,t,e)},line2stone:function(n,t,e){return xn.line2normal(n,t,e)},line2white:function(n,t,e){return xn.line2normal(n,t,e)},line2explode:function(n,t,e){return xn.line2normal(n,t,e)},line2boom:function(n,t,e){return 0},line2line:function(n,t,e){return 0},item2normal:function(n,t,e){return xn.normal2normal(n,t,e)},item2item:function(n,t,e){return xn.normal2item(n,t,e)},item2stone:function(n,t,e){return 0},item2white:function(n,t,e){return n.nextType===cn.MELODY_BALL_TYPE_ITEM?0:t.nextType===cn.MELODY_BALL_TYPE_WHITE?(t.nextType=cn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,mn(t,e)):0},item2explode:function(n,t,e){return xn.normal2explode(n,t,e)},item2boom:function(n,t,e){return 0},item2line:function(n,t,e){return 0},stone2normal:function(n,t,e){return 0},stone2item:function(n,t,e){return 0},stone2stone:function(n,t,e){return 0},stone2white:function(n,t,e){return 0},stone2explode:function(n,t,e){return 0},stone2boom:function(n,t,e){return 0},stone2line:function(n,t,e){return 0},explode2normal:function(n,t,e){return t.nextType=cn.MELODY_BALL_TYPE_NONE,fn(t,e,xn.targetChecker.comboScore)},explode2item:function(n,t,e){return xn.explode2normal(n,t,e)},explode2stone:function(n,t,e){return xn.explode2normal(n,t,e)},explode2white:function(n,t,e){return t.color=un.MELODY_BALL_COLOR_RANDOM,xn.explode2normal(n,t,e)},explode2explode:function(n,t,e){return xn.explode2normal(n,t,e)},explode2boom:function(n,t,e){return 0},explode2line:function(n,t,e){return 0},white2normal:function(n,t,e){return 0},white2item:function(n,t,e){return 0},white2stone:function(n,t,e){return 0},white2white:function(n,t,e){return 0},white2explode:function(n,t,e){return 0},white2boom:function(n,t,e){return 0},white2line:function(n,t,e){return 0},targetChecker:null},vn=["none","normal","boom","line","item","stone","explode","white"];function yn(n,t){var e=xn[vn[n.nextType]];return e?e(n,t):t}function bn(n,t,e){if(t.type===cn.MELODY_BALL_TYPE_NONE||n.type===cn.MELODY_BALL_TYPE_NONE||t.nextType===cn.MELODY_BALL_TYPE_NONE)return 0;var i="".concat(vn[n.type],"2").concat(vn[t.type]);return xn[i](n,t,e)}var wn=e(7326),Zn=e(5661),Pn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this)).select_color=void 0,n.select_type=void 0,n.deltaY=0,n.speed=0,n.target=void 0,n.colors=void 0,n.types=void 0,n.lines=[],n.maxHeight=0;var i=E,o=L,r=(en.colors.length,j.jyi.from("images/header.png"));r.y=.7*o,r.width=i,r.height=1e3,n.addChild(r);var a=100,s=n.colors=new j.W20;s.y=.86*o,n.addChild(s),(r=new j.jyi(en.hover)).anchor.set(.5),r.x=a,a+=100,r.width=1.2*q,r.height=1.2*q,r.interactive=!0,r.on("pointerup",n.onColorClick.bind((0,wn.Z)(n))),s.addChild(r);var l,c=(0,O.Z)(en.colors);try{for(c.s();!(l=c.n()).done;){var u=l.value;u&&((r=new j.jyi(u)).anchor.set(.5),r.x=a,a+=100,r.width=q,r.height=q,r.interactive=!0,r.on("pointerup",n.onColorClick.bind((0,wn.Z)(n))),s.addChild(r))}}catch(g){c.e(g)}finally{c.f()}var h=n.types=new j.W20;h.y=.94*o,n.addChild(h),a=100;var p,f=(0,O.Z)(en.types);try{for(f.s();!(p=f.n()).done;){var m=p.value;m&&m!==en.types[2]&&m!==en.types[3]&&((r=new j.jyi(m)).anchor.set(.5),r.x=a,a+=100,r.width=q,r.height=q,r.interactive=!0,r.on("pointerup",n.onTypeClick.bind((0,wn.Z)(n))),h.addChild(r))}}catch(g){f.e(g)}finally{f.f()}return(r=j.jyi.from(j.xEZ.WHITE)).width=i,r.height=10,r.anchor.set(0,.5),r.x=0,r.y=9*X+Q,n.addChild(r),n.hitArea=new j.AeJ(0,0,i,o),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,wn.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,wn.Z)(n))),n.on("pointermove",n.countBubble.bind((0,wn.Z)(n))),n.on("pointerdown",n.countBubble.bind((0,wn.Z)(n))),n}return(0,p.Z)(e,[{key:"getText",value:function(n,t){var e,i=null,o=(0,O.Z)(this.lines);try{for(o.s();!(e=o.n()).done;){var r=e.value;if(r.y>=n.sprite.y){i=r;break}}}catch(a){o.e(a)}finally{o.f()}return i||((i=at.map.misc.spawnText(n)).text=t,this.lines.push(i)),i.visible=!0,i}},{key:"loadLevel",value:function(n){var t,e=at.map,i=N.Z.getState().colorTool.cacheLevels,o=void 0,r=(0,O.Z)(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.levelId===n&&(o=rn(a.base64))}}catch(s){r.e(s)}finally{r.f()}o?e.load(o):e.reload(n),this.initMap()}},{key:"loadFromBase64",value:function(n){try{var t=rn(n);at.map.load(t),this.initMap()}catch(e){return void console.log("WRONG BASE64")}}},{key:"initMap",value:function(){var n=at.map;at.canvas.onwheel=this.onButtonWheel.bind(this),this.target=n.container;var t,e=0,i=(0,O.Z)(n.data);try{for(i.s();!(t=i.n()).done;){var o=t.value,r=Math.floor(e/V),a=e%V;r%2===1&&10===a||(o.turn(o.color),0==a&&this.getText(o,r+1+"")),e++}}catch(s){i.e(s)}finally{i.f()}N.Z.dispatch(Zn.J.actions.initBullets(at.map.level.bullets.map((function(n){return n.color})))),this.trimLine()}},{key:"addEmptyLine",value:function(){var n=at.map.data;n[n.length-1].sprite.y<=this.maxHeight&&at.map.addEmptyLine(1);var t=Math.ceil(this.maxHeight/X)*V,e=t+V,i=Math.floor(t/V);for(this.getText(n[t],i+1+"");t<e;t++){var o=n[t];i%2===1&&t===e-1||o.turn(o.color)}this.maxHeight=n[t-1].sprite.y}},{key:"trimLine",value:function(){for(var n=at.map.data,t=0,e=t+V,i=[];t<e;t++){var o=n[t];o.isEmpty||(i.push(o),o.isMarked=!0)}for(var r=0,a=n[0].sprite.y,s=a;r<i.length;){var l,c=i[r].neighbors,u=(0,O.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||h.sprite.y<a||(i.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(v){u.e(v)}finally{u.f()}r++}var d,p=(0,O.Z)(n);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.sprite.y>s&&f.turn(-1),f.isMarked=!1}}catch(v){p.e(v)}finally{p.f()}var m,g=(0,O.Z)(this.lines);try{for(g.s();!(m=g.n()).done;){var x=m.value;x.y>s&&(x.visible=!1)}}catch(v){g.e(v)}finally{g.f()}this.maxHeight=s}},{key:"onButtonOver",value:function(n){if(void 0!==this.select_color&&void 0!==this.select_type){var t=at.map,e=n.data.global,i=at.scale;if(!(e.x+5>window.innerWidth||e.y>window.innerHeight-265)){e.y-=t.parent.y,e.x/=i.x,e.y/=i.y;var o=ln.fromPIXI(t.container),r=t.data,a=e.y-o.y;a=Math.floor(a/X);var s=Math.max(a%2?e.x-.5*q:e.x,0),l=r[(s=Math.floor(s/q))+11*a];l&&l.hover&&(l.setColor(en.colors.indexOf(this.select_color)),l.setType(en.types.indexOf(this.select_type)))}}}},{key:"onButtonWheel",value:function(n){this.deltaY=n.deltaY,this.speed=-1}},{key:"onColorClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_color=t.texture==en.hover?null:t.texture;for(var e=0,i=this.colors.children;e<i.length;e++){var o=i[e];o.width=q,o.height=q}t.width=1.4*q,t.height=1.4*q,console.log("maingame scale: ",at.scale.y),N.Z.dispatch(Zn.J.actions.setSelectedColor(en.colors.indexOf(this.select_color)))}},{key:"onTypeClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_type=t.texture==en.hover?null:t.texture;for(var e=0,i=this.types.children;e<i.length;e++){var o=i[e];o.width=q,o.height=q}t.width=1.4*q,t.height=1.4*q}},{key:"update",value:function(n){var t=Math.abs(this.speed);if(0!=t){var e=this.target.y+this.deltaY*t;e>Q&&(e=Q);var i=-Math.max(at.map.data.length/V-9,0)*X;e<i&&(e=i),this.target.y=e,this.speed<0&&(t-=n,this.speed=t<0?0:-t)}}},{key:"countBubble",value:function(){var n,t=0,e=this.maxHeight,i=(0,O.Z)(at.map.data);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.sprite.y<=e&&!o.isEmpty&&++t}}catch(r){i.e(r)}finally{i.f()}N.Z.dispatch(Zn.J.actions.setBubbleCount(t))}},{key:"drawMapForCapture",value:function(){var n=at.map.data,t=new j.MxU({width:at.view.width/2,height:(this.maxHeight+q)*at.scale.y,backgroundColor:4078474}),e=new j.W20;t.stage.addChild(e),t.stage.scale=at.scale;var i,o=(0,O.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r.hover){var a=new j.jyi(r.sprite.texture),s=r.sprite,l=s.x,c=s.y,u=s.width,h=s.height;a.x=l,a.y=c,a.anchor.set(.5),a.width=u,a.height=h,e.addChild(a)}if(r.hover){var d=new j.jyi(r.hover.texture),p=r.hover,f=p.x,m=p.y,g=p.width,x=p.height;d.x=f,d.y=m,d.anchor.set(.5),d.alpha=.5,d.width=g,d.height=x,e.addChild(d)}0}}catch(P){o.e(P)}finally{o.f()}var v,y=0,b=(0,O.Z)(this.lines);try{for(b.s();!(v=b.n()).done;){var w=v.value;if(w.visible){var Z=new j.xvT("",tn);Z.anchor.set(.5),Z.scale.set(.5),Z.text=(++y).toString(),Z.x=w.x,Z.y=w.y,e.addChild(Z)}}}catch(P){b.e(P)}finally{b.f()}return t.render(),t.view.toDataURL("image/jpeg")}}]),e}(j.W20),kn=e(9439),_n=e(3439),jn=(0,_n.oC)({alpha:{start:1,end:0},scale:{start:.2,end:.1,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:200,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.5},blendMode:"add",frequency:.002,emitterLifetime:.5,maxParticles:5,pos:{x:5,y:5},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:20}},en.dot_particle),Tn=(0,_n.oC)({alpha:{start:.5,end:0},scale:{start:.3,end:.2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:1e3,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-90,max:-90},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.1,max:.2},blendMode:"add",frequency:.01,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:50,h:30}},en.blaze_particle),En=(0,_n.oC)({alpha:{start:.5,end:.7},scale:{start:.3,end:.2,minimumScaleMultiplier:.3},color:{start:"#ffaa33",end:"#ffdd22"},speed:{start:2e3,end:0,minimumSpeedMultiplier:.3},acceleration:{x:0,y:2e3},maxSpeed:0,startRotation:{min:255,max:280},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.001,emitterLifetime:3,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:10,h:0}},[en.star_particle,en.blaze_particle]),Ln=(0,_n.oC)({alpha:{start:1,end:0},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:200,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:.2,max:.3},blendMode:"add",frequency:.05,emitterLifetime:.5,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:1,particleSpacing:0,angleStart:0},en.dot_particle),Cn=(0,_n.oC)({alpha:{start:1,end:.2},scale:{start:.3,end:.01,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:700,end:50,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.8},blendMode:"add",frequency:.001,emitterLifetime:.3,maxParticles:300,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},en.dot_particle),Sn=(0,_n.oC)({alpha:{start:1,end:.1},scale:{start:.3,end:.01,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:-500,minimumSpeedMultiplier:.5},acceleration:{x:0,y:1e3},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.5},blendMode:"add",frequency:.01,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},en.dot_particle),Mn=(0,_n.oC)({alpha:{start:1,end:0},scale:{start:.2,end:.1,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-20,max:-160},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.5},blendMode:"add",frequency:.01,emitterLifetime:-1,maxParticles:150,pos:{x:5,y:5},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:40}},en.dot_particle),On=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this)).star_particles=[],n.blaze_particles=[],n.fireworks_particles=[],n.erase_particle=null,n.boom_particle=null,n.ray_particle=null,n.bullet_particle=null,n.running_particles=[];var i=E,o=L;return n.fireworks_particles.push(n.createFirework(130,o-70)),n.fireworks_particles.push(n.createFirework(i-130,o-70)),n.fireworks_particles[0].parent.scale.set(-1,1),n}return(0,p.Z)(e,[{key:"returnEffect",value:function(n,t){var e=this.running_particles,i=e.indexOf(n);e[i]=e[e.length-1],e.length--,null===t||void 0===t||t.push(n)}},{key:"play",value:function(n,t){return this.running_particles.push(n),n.cleanup(),n.playOnce(this.returnEffect.bind(this,n,t)),n}},{key:"spawnStarEffect",value:function(n,t){var e=this.star_particles.pop();if(!e){var i=new j.W20;e=new _n.Q5(i,jn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.star_particles)}},{key:"spawnBlazeParticle",value:function(n,t){var e=this.blaze_particles.pop();if(!e){var i=new j.W20;e=new _n.Q5(i,Tn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.blaze_particles)}},{key:"createFirework",value:function(n,t){var e=new j.W20,i=new _n.Q5(e,En);return this.addChild(e),e.x=n,e.y=t,i}},{key:"spawnFirework",value:function(){var n,t=(0,O.Z)(this.fireworks_particles);try{for(t.s();!(n=t.n()).done;){var e=n.value;this.play(e,null)}}catch(i){t.e(i)}finally{t.f()}}},{key:"spawnBoom",value:function(n,t){var e=this.boom_particle;if(!e){var i=new j.W20;e=new _n.Q5(i,Cn),this.addChild(i),this.boom_particle=e}return e.parent.x=n,e.parent.y=t,this.play(e,null)}},{key:"spawnErase",value:function(n,t,e){var i=this.erase_particle;if(!i){var o=new j.W20;i=new _n.Q5(o,Ln),this.addChild(o),this.erase_particle=i}return i.parent.x=n,i.parent.y=t,Object.assign(i.getBehavior(_n.U1.StaticColorBehavior.type),{value:e.value}),this.play(i,null)}},{key:"spawnRay",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.ray_particle;if(!i){var o=new j.W20;i=new _n.Q5(o,Sn),this.addChild(o),this.ray_particle=i,this.play(i,null)}return i.parent.x=n,i.parent.y=t,i.parent.visible=null!=e,Object.assign(i.getBehavior(_n.U1.StaticColorBehavior.type),{value:e?e.value:0}),i}},{key:"spawnBullet",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.bullet_particle;if(!t){var e=new j.W20;t=new _n.Q5(e,Mn);var i=at.map.gun.holder.children,o=(0,kn.Z)(i,2),r=o[0],a=o[1];r.addChild(e),e.x=a.x,e.y=a.y,this.bullet_particle=t,this.play(t,null)}return t.parent.visible=null!=n,Object.assign(t.getBehavior(_n.U1.StaticColorBehavior.type),{value:n?n.value:0}),t}},{key:"shakeScreen",value:function(n){var t=at.map.container,e=t.x,i=t.y,o={value:20};return A.ZP.to(o,{value:0,duration:n,onUpdate:function(){0===e&&(t.x=e+(Math.random()-.5)*o.value,t.y=i+(Math.random()-.5)*o.value)}})}},{key:"update",value:function(n){var t,e=(0,O.Z)(this.running_particles);try{for(e.s();!(t=e.n()).done;){t.value.update(n)}}catch(i){e.e(i)}finally{e.f()}}}]),e}(j.W20),An=e(3433),Bn=e(800),Nn=(Bn.PY,function(){function n(){(0,d.Z)(this,n)}return(0,p.Z)(n,null,[{key:"getDateTimeVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds())," - ").concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getDateVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getTime",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=new Date(n),i=function(n){return n<10?"0"+n:n},o="";if(t&&""!=t)switch(t){case"h":o="".concat(i(e.getUTCHours()));break;case"m":o="".concat(i(e.getUTCMinutes()));break;case"s":o="".concat(i(e.getUTCSeconds()))}else o="".concat(i(Math.floor(e.getUTCHours()/24)),":").concat(i(e.getUTCHours()%24),":").concat(i(e.getUTCMinutes()),":").concat(i(e.getUTCSeconds()));return o}},{key:"msToTime",value:function(n,t){var e=n/1e3,i=Math.floor(e/86400);e%=86400;var o=Math.floor(e/3600);e%=3600;var r=t?Math.ceil(e/60):Math.floor(e/60);return e=Math.floor(e%60),i<1?"".concat(o<10?"0"+o:o,":").concat(r<10?"0"+r:r,":").concat(e<10?"0"+e:e):"".concat(i<10?"0"+i:i,":").concat(o<10?"0"+o:o,":").concat(r<10?"0"+r:r,":").concat(e<10?"0"+e:e)}},{key:"msToTimeWithFormat",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day:hour:minute:second",e=n/1e3,i=Math.floor(e),o=Math.floor(e/60),r=Math.floor(e/3600),a=Math.floor(e/86400);return t.includes("minute")&&(i%=60),t.includes("hour")&&(o%=60),t.includes("day")&&(r%=24),t.replace("day",this.formatNumber(a)).replace("hour",this.formatNumber(r)).replace("minute",this.formatNumber(o)).replace("second",this.formatNumber(i))}},{key:"formatNumber",value:function(n){return(n<0?"-":"")+(Math.abs(n)<10?"0":"")+Math.abs(n)}},{key:"msToReadable",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e="";if(t&&""!=t)switch(t){case"h":e="".concat(Math.floor(n/36e5));break;case"m":var i=n%36e5;e="".concat(Math.floor(i/6e4));break;case"s":var o=n%36e5%6e4;e="".concat(Math.floor(o/1e3))}return e}},{key:"msToSocialTime",value:function(n){var t=(Date.now()-n)/1e3,e=(Math.floor(t),Math.floor(t/60)),i=Math.floor(t/3600),o=Math.floor(t/86400);return o>0?"".concat(o," ng\xe0y tr\u01b0\u1edbc"):i>0?"".concat(i," gi\u1edd tr\u01b0\u1edbc"):e>0?"".concat(e," ph\xfat tr\u01b0\u1edbc"):"V\u1eeba xong"}},{key:"reduceLengthString",value:function(n,t){if(n.length<=t)return n;var e=n.substring(0,t),i=e.lastIndexOf(" ");return e.substring(0,i)+"..."}},{key:"formatName",value:function(n){return n?n.trim().toLowerCase().replace(/(^| )./g,(function(n){return n.toUpperCase()})):""}},{key:"getFirstName",value:function(n){var t;return null===(t=this.formatName(n).match(/\S*$/))||void 0===t?void 0:t[0]}},{key:"convertToShortName",value:function(n,t){return n.length<=t?n:n.replace(/\S* /g,(function(n){return n.charAt(0)+"."}))}},{key:"convertToShortName2",value:function(n,t){if(n.length<=t)return n;var e=n;return e=e.replace(/\s.*\s/g,(function(n){return n.replace(/\S{1,}\s/g,(function(n){return n[0].toUpperCase()+"."})).replace(/.$/," ")}))}},{key:"convertToShortName3",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;if(n.length<=t)return n;var e=n,i=e.split(" ");return e="".concat(i[0]).concat(i.length>1?" "+i[i.length-1]:"")}},{key:"convertToShortName4",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return(e=e.split(" ").splice(-2).join(" ")).length<t?e:e.split(" ").splice(-1)[0]}},{key:"convertToShortName5",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return e.length<t?e:e.split(" ").splice(-1)[0]}},{key:"getLastName",value:function(n){var t=n;return t.split(" ").splice(-1)[0]}},{key:"uuid",get:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}))}},{key:"convertDistanceToString",value:function(n){return Math.abs(n)<1?Math.round(1e3*n)+"m":Math.round(10*n)/10+"km"}},{key:"toggleClass",value:function(n,t){var e=" ".concat(n," ").replace(/  +/g," ");return e.includes(" ".concat(t," "))?e.replaceAll(" ".concat(t," ")," "):e+"".concat(t," ")}},{key:"randomInt",value:function(n,t){return Math.floor(n+Math.random()*(t-n+1))}},{key:"setSpriteTexture",value:function(n,t){t&&(n.texture=j.xEZ.from(t))}},{key:"isValidNumber",value:function(n){return/^[0-9\b]+$/.test(n)}},{key:"compareObjectOneLevel",value:function(n,t){return null!=n&&null!=t&&(Object.keys(n).length==Object.keys(t).length&&(Object.keys(n).sort().join(",")===Object.keys(t).sort().join(",")&&JSON.stringify(n,Object.keys(n).sort())===JSON.stringify(t,Object.keys(t).sort())))}},{key:"trimVNCode",value:function(n){return!n.startsWith("084")&&!n.startsWith("+84")||12!==n.length&&13!==n.length?!n.startsWith("84")||11!==n.length&&12!==n.length?n:"0"+n.substring(2):"0"+n.substring(3)}},{key:"formatPhoneNumber",value:function(n){return 11===(n=this.trimVNCode(n)).length||n.length<10?n:n=this.formatOldPhoneNumber(n)}},{key:"formatOldPhoneNumber",value:function(n){if(n.startsWith("03"))return"016"+n.substring(2);if(n.startsWith("07"))switch(n.charAt(2)){case"0":return"0120"+n.substring(3);case"9":return"0121"+n.substring(3);case"7":return"0122"+n.substring(3);case"6":return"0126"+n.substring(3);case"8":return"0128"+n.substring(3)}if(n.startsWith("08"))switch(n.charAt(2)){case"3":return"0123"+n.substring(3);case"4":return"0124"+n.substring(3);case"5":return"0125"+n.substring(3);case"1":return"0127"+n.substring(3);case"2":return"0129"+n.substring(3)}if(n.startsWith("05"))switch(n.charAt(2)){case"2":return"0182"+n.substring(3);case"6":return"0186"+n.substring(3);case"8":return"0188"+n.substring(3);case"9":return"0199"+n.substring(3)}return n}},{key:"numberToK",value:function(n){var t=Math.floor(n/1e3);return t>0?t+"k":n+""}},{key:"checkValueInRange",value:function(n,t,e){return n>=Math.min(t,e)&&n<=Math.max(t,e)}},{key:"convertStringToVND",value:function(n){if(!n)return"";var t=(n=(n=n.replace("\u0111","")).replaceAll(".","")).replace(/\B(?=(\d{3})+(?!\d))/g,".");return t+="\u0111"}},{key:"convertNumberToScoreString",value:function(n){var t=""+n;return t=t.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"convertVNDToString",value:function(n){return n?n=(n=n.replace("\u0111","")).replaceAll(".",""):""}},{key:"convertVNDToNumber",value:function(n){return n?(n=(n=n.replace("\u0111","")).replaceAll(".",""),parseInt(n)):0}},{key:"playPopupRewardSfx",value:function(n){if(n)if(99992023===n)v.play(g.gH.PopupQuaDacBiet);else v.play(g.gH.PopupQuaThuong)}},{key:"moveToTarget",value:function(n,t,e,i){return e=Math.abs(e),n<t?Math.min(n+e*i,t):n>t?Math.max(n-e*i,t):n}},{key:"clamp",value:function(n,t,e){var i=Math.max(t,e),o=Math.min(t,e);return n>i?i:n<o?o:n}},{key:"getItemImageUrl",value:function(n){var t=phoenix.melody.MELODY_BALL_TYPE;switch(n.type){case t.MELODY_BALL_TYPE_NONE:case t.MELODY_BALL_TYPE_NORMAL:return en.colors[n.color];case t.MELODY_BALL_TYPE_ITEM:return en.itemColors[n.color];case t.MELODY_BALL_TYPE_BOOM:case t.MELODY_BALL_TYPE_LINE:case t.MELODY_BALL_TYPE_STONE:case t.MELODY_BALL_TYPE_EXPLODE:case t.MELODY_BALL_TYPE_WHITE:return en.types[n.type];default:return null}}},{key:"getTargetTypeImageUrl",value:function(n,t){var e,i,o,r=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case r.MELODY_LEVEL_TARGET_ANY_BALL:return g.dN.general.levelTargetAnyBall;case r.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return null===(e=this.getItemImageUrl(t))||void 0===e||null===(i=e.baseTexture)||void 0===i||null===(o=i.resource)||void 0===o?void 0:o.url;case r.MELODY_LEVEL_TARGET_SCORE:return g.dN.general.levelTargetScore;case r.MELODY_LEVEL_TARGET_ITEM:return g.dN.general.levelTargetItem;default:return null}}},{key:"getTargetCount",value:function(n,t,e){var i,o,r,a,s=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case s.MELODY_LEVEL_TARGET_ANY_BALL:return e.totalBall;case s.MELODY_LEVEL_TARGET_SCORE:case s.MELODY_LEVEL_TARGET_ITEM:return(null===e||void 0===e||null===(i=e.ballType)||void 0===i||null===(o=i[n])||void 0===o?void 0:o.current)||0;case s.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return(null===e||void 0===e||null===(r=e.ballColor)||void 0===r||null===(a=r[null===t||void 0===t?void 0:t.color])||void 0===a?void 0:a.current)||0;default:return 0}}},{key:"loadSpine",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e,i,o;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t,!this.spineDatas.has(e)){n.next=3;break}return n.abrupt("return",this.spineDatas.get(e));case 3:return n.next=5,j.deM.load(t);case 5:return i=n.sent,(o=i.spineData)&&this.spineDatas.set(e,o),n.abrupt("return",o);case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"getScreenSize",value:function(){var n=E,t=L;return{screenWidth:n,screenHeight:t,offsetX:0,offsetY:(window.innerHeight/window.innerWidth*n-t)/2}}}]),n}());Nn.spineDatas=new Map;var In,Yn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this)).boom_holder=void 0,n.boom_empty=void 0,n.light=void 0,n.boom=void 0,n.mascot=void 0,n.mascot_current_anim="",n.progress=0,n.max=0;var i=E,o=L,r=new j.jyi(en.background);r.anchor.set(0,1),n.addChild(r),n.y=o,(r=new j.jyi(en.background_1)).anchor.set(0,1),r.y=150,n.addChild(r);var a=new j.jyi(en.background_2);a.anchor.set(.5,1),a.scale.set(.6),a.x=.5*i,a.y=-275,r.addChild(a),r=a,(a=n.light=new j.jyi(en.background_3)).anchor.set(.5,1),a.y=-50,r.addChild(a),(a=n.boom_holder=new j.jyi(en.boom_holder)).anchor.set(.5,1),a.x=150,a.y=-110,n.addChild(a),(a=n.boom_empty=new j.jyi(en.boom_empty)).width=a.height=72,a.anchor.set(.5),a.x=0,a.y=-167,n.boom_holder.addChild(a),(a=n.boom=new j.jyi(en.types[cn.MELODY_BALL_TYPE_BOOM])).anchor.set(.5),n.boom_empty.addChild(a);var s=new j.wn$(null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float customUniform;\n\nvoid main(void)\n{\n    vec4 fg = texture2D(uSampler, vTextureCoord);\n\n    float a = step(customUniform, smoothstep(0., 1., vTextureCoord.y * 1.7));\n\n    gl_FragColor = fg * a;\n}\n",{customUniform:1});return a.filters=[s],n.loadMascot((0,wn.Z)(n)),n}return(0,p.Z)(e,[{key:"loadMascot",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e,i;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nn.loadSpine(g.dN.spine.mascot);case 2:e=n.sent,(i=new Bn.PY(e)).scale.set(-.5,.5),i.x=this.width-this.boom_holder.x,i.y=this.boom_holder.y-20,this.mascot=i,t.addChild(i);case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"activeBall",value:function(n){var t=n?"anim_active_ball":"anim_idle_normal";this.mascot_current_anim!=t&&(this.mascot_current_anim=t,this.mascot.state.setAnimation(0,t,!0))}},{key:"combo",value:function(){this.mascot_current_anim="anim_idle_normal",this.mascot.state.setAnimation(0,"anim_combo",!1),this.mascot.state.addAnimation(0,"anim_idle_normal",!0,0)}},{key:"end",value:function(n){this.mascot_current_anim=n?"anim_win":"anim_idle_lose",this.mascot.state.setAnimation(0,this.mascot_current_anim,!0),n&&this.onGunReset(1,0)}},{key:"addScore",value:function(n){if(this.boom_holder.visible&&!(this.progress>=1)){var t=Math.min(this.progress+n/this.max,1);this.boom.filters[0].uniforms.customUniform=1-t,this.progress=t}}},{key:"reset",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.progress=0,this.boom.filters[0].uniforms.customUniform=1,this.boom_empty.visible=!0,this.activeBall(!1),n?(this.max=500,this.boom_holder.visible=t):this.max+=500}},{key:"getBoomPosition",value:function(){this.boom_empty.visible=!1;var n=ln.fromPIXI(this.boom_empty);return n.x+=this.boom_empty.parent.x+this.x,n.y+=this.boom_empty.parent.y+this.y,n}},{key:"onGunReset",value:function(n,t){var e=this,i={value:0};A.ZP.to(i,{value:1,duration:.7,ease:B.sm.easeInOut,onUpdate:function(){var o=2*Math.abs(i.value-.5);o*=o*o,e.light.alpha=n*(1-o)+t*o}})}},{key:"reloadAnim",value:function(n,t){if(this.light.alpha=0,0!==n){var e=this.children,i=e[0],o=e[1],r=this.boom_holder,a=this.mascot;A.ZP.fromTo(i,{y:700},{y:i.y,delay:t,duration:n}),A.ZP.fromTo(o,{y:1e3},{y:o.y,delay:t,duration:n}),A.ZP.fromTo(r,{y:735},{y:r.y,delay:t,duration:n}),A.ZP.fromTo(a,{y:735},{y:a.y,delay:t,duration:n})}}}]),e}(j.W20),Dn=(j.W20,function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this)).balls=[];var i=E,o=L;return n.x=.5*i,n.y=o-80,n}return(0,p.Z)(e,[{key:"addBubble",value:function(n,t,e){var i,o=null,r=(0,O.Z)(this.balls);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!a.isPlaying){o=a;break}}}catch(s){r.e(s)}finally{r.f()}o||(o=new dn,this.addChild(o.sprite),this.addChild(o.text),this.balls.push(o)),o.set(n,t,e)}},{key:"update",value:function(n){var t,e=(0,O.Z)(this.balls);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.isPlaying&&i.update(n)}}catch(o){e.e(o)}finally{e.f()}}}]),e}(j.W20)),Rn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,d.Z)(this,e),(n=t.call(this)).hovers=[],n.scores=[],n.bubbleEffect=[],n.bubbleData=null,n.loadEffect(),n}return(0,p.Z)(e,[{key:"loadEffect",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nn.loadSpine(g.dN.spine.power_effect);case 2:this.bubbleData=n.sent;case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"turnOn",value:function(n){var t=this.hovers.pop();t||((t=new j.jyi(en.hover)).anchor.set(.5),t.width=81,t.height=81,t.alpha=.7,A.ZP.fromTo(t,{rotation:0,ease:B.bJ.easeNone},{rotation:5*Math.PI,ease:B.bJ.easeNone}).duration(3).repeat(-1),this.addChild(t));var e=n.sprite,i=e.x,o=e.y;return t.visible=!0,t.x=i,t.y=o,n.hover=t,t}},{key:"turnOff",value:function(n){this.hovers.push(n.hover),n.hover.visible=!1,n.hover=null}},{key:"spawnText",value:function(n){var t=this.scores.pop();t||((t=new j.xvT("",tn)).anchor.set(.5),t.scale.set(.5),this.addChild(t)),t.visible=!0;var e=n.sprite,i=e.x,o=e.y;return t.x=i,t.y=o,t}},{key:"returnBubbleEffect",value:function(n){n.visible=!1,this.bubbleEffect.push(n)}},{key:"spawnBubbleEffect",value:function(n,t,e){var i=this.bubbleEffect.pop();i||(i=new Bn.PY(this.bubbleData),this.addChild(i),i.visible=!1);var o=n.sprite,r=o.x,a=o.y;return i.x=r,i.y=a,A.ZP.delayedCall(t,(function(){i.visible=!0,i.state.setAnimation(0,e?"power_explosion_effect":"explosion_effect",!1)})),i}},{key:"spawnScore",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.scores.pop();i||((i=new j.xvT("",nn)).anchor.set(.5),this.addChild(i)),i.visible=!0;var o=n.sprite,r=o.x,a=o.y;return i.x=r,i.y=a,i.scale.set(e),A.ZP.to(i,{y:a-30*e,alpha:0,duration:1}).then((function(){i.visible=!1,i.alpha=1,t.scores.push(i)})),i}}]),e}(j.W20),Un=function(){function n(){(0,d.Z)(this,n),this.ballColor=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.ballType=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.totalBall={current:0,target:0},this.comboScore=0,this.wallScore=0,this.totalScore=0}return(0,p.Z)(n,[{key:"getWallScore",value:function(){var n=this.wallScore;return this.wallScore+=25,n}},{key:"init",value:function(n){var t,e=(0,O.Z)(this.ballColor);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.current=i.target=0}}catch(h){e.e(h)}finally{e.f()}var o,r=(0,O.Z)(this.ballType);try{for(r.s();!(o=r.n()).done;){var a=o.value;a.current=a.target=0}}catch(h){r.e(h)}finally{r.f()}this.totalBall.current=this.totalBall.target=0;var s,l=(0,O.Z)(n.targets);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=c.ball;!u||0===u.color&&0===u.type?this.totalBall.target=c.quantity:(u.color>0&&(this.ballColor[u.color-1].target=c.quantity),u.type>0&&(this.ballType[u.type-1].target=c.quantity))}}catch(h){l.e(h)}finally{l.f()}this.comboScore=10,this.wallScore=25,this.totalScore=0,N.Z.dispatch(I.T.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType,totalBall:this.totalBall.current}))}},{key:"countBall",value:function(n,t){this.ballColor[n].current++,this.totalBall.current++,this.ballType[t].current++,N.Z.dispatch(I.T.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType,totalBall:this.totalBall.current}))}},{key:"addScore",value:function(n){return this.totalScore+=n}},{key:"check",value:function(){var n,t=!0,e=(0,O.Z)(this.ballColor);try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.current<i.target){t=!1,console.log(i);break}}}catch(s){e.e(s)}finally{e.f()}var o,r=(0,O.Z)(this.ballType);try{for(r.s();!(o=r.n()).done;){var a=o.value;if(a.current<a.target){t=!1,console.log(a);break}}}catch(s){r.e(s)}finally{r.f()}return this.totalBall.current<this.totalBall.target&&(t=!1,console.log(this.totalBall)),t}}]),n}(),zn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this)).container=void 0,n.data=[],n.gun=void 0,n.physicsBox=void 0,n.boomHolder=void 0,n.colorTool=void 0,n.targetChecker=void 0,n.misc=void 0,n.effect=void 0,n.level=void 0,n.addChild(n.boomHolder=new Yn),n.addChild(n.container=new j.W20),n.addChild(n.physicsBox=new Dn),n.addChild(n.effect=new On),n.addChild(n.misc=new Rn),n.addChild(n.colorTool=new Pn);var i,o=new j.jyi(en.headline);return o.y=9,o.anchor.set(0,1),n.container.addChild(o),i=n.targetChecker=new Un,xn.targetChecker=i,n}return(0,p.Z)(e,[{key:"addBubble",value:function(n,t,e){var i=Math.floor(n/t),o=n%t,r=new hn(o,i),a=r.neighbors;e.push(r);var s=o>0?e[n-1]:null;if(i%2===1&&(n+=1,(o+=1)>=t))return r;var l=i>0&&(i%2===1||o+1<t)?e[n-t]:null,c=i>0&&o>0?e[n-t-1]:null;return l&&(l.neighbors[4]=r),c&&(c.neighbors[5]=r),s&&(s.neighbors[0]=r),a[1]=l,a[2]=c,a[3]=s,r}},{key:"addScore",value:function(n){this.boomHolder.addScore(n);var t=this.targetChecker.addScore(n);N.Z.dispatch(I.T.actions.setCurrentGame({score:t}))}},{key:"load",value:function(n){var t=this;this.level=n,this.targetChecker.init(n);for(var e=this.container,i=n.map,o=this.data,r=i.length,a=0,s=0;a<r;a++){var l=i[a],c=l.color,u=l.type,h=o[a];h||(h=this.addBubble(a,11,o),e.addChild(h.sprite)),h.isMarked=!1,h.setColor(c,c>0),h.setType(u),c>0&&s++}r=o.length,console.log(s),this.targetChecker.totalBall.target=s;var d=9*X;if(d=Math.max(o[a-1].sprite.y-d,0),r<=a)this.addEmptyLine(1);else for(;a<r;a++)o[a].setColor(0);N.Z.dispatch(I.T.actions.setCurrentGame({level:n.id||0,score:0,star1Score:this.level.star1Score,star2Score:this.level.star2Score,star3Score:this.level.star3Score}));var p=.003*d;if(this.boomHolder.reloadAnim(p,1),this.gun)return this.boomHolder.reset(!0,n.id>6),A.ZP.fromTo(e,{y:Q},{y:-d+Q}).delay(1).duration(p).then((function(){return t.gun.reload(n.bullets)}));e.y=-d+Q}},{key:"reload",value:function(n){this.load(e.findLevelConfig(on,n))}},{key:"addEmptyLine",value:function(n){for(var t=this.container,e=this.data,i=e.length,o=0,r=11*n;o<r;o++){var a=this.addBubble(i,11,e);a.setColor(0),t.addChild(a.sprite),i++}}},{key:"reset",value:function(){var n,t=(0,O.Z)(this.data);try{for(t.s();!(n=t.n()).done;){var e=n.value;null===e||void 0===e||e.turn(-1)}}catch(i){t.e(i)}finally{t.f()}}},{key:"update",value:function(n){var t,e,i;null===(t=this.physicsBox)||void 0===t||t.update(n),null===(e=this.colorTool)||void 0===e||e.update(n),null===(i=this.gun)||void 0===i||i.update(n),this.misc.y=this.container.y,this.effect.update(n),D.update(n)}},{key:"putBubble3",value:function(n){var t=this,e=0,i=0,o=[n],r=0,a=0,s=0,l=n,c=l.sprite,u=l.nextType,h=this.container,d=h.x,p=h.y;if(u===cn.MELODY_BALL_TYPE_NORMAL&&!n.neighbors[1]&&!n.neighbors[2]&&this.getGroup(n).length<2)n.setType(cn.MELODY_BALL_TYPE_NONE),A.ZP.to(c,{width:pn,height:pn,duration:.2}).then((function(){n.setColor(0),c.width=q,c.height=q,d+=c.x,p+=c.y,t.effect.spawnErase(d,p,t.gun.rayColor),t.gun.reset(),t.targetChecker.comboScore=10}));else{for(;a<o.length;){if(a===s){i+=e,s=o.length;for(var f=r;f<a;f++){var m=o[f];m.type=m.nextType}for(var g=a;g<s;g++){var x=o[g];x.type!==cn.MELODY_BALL_TYPE_NONE&&x.type!==cn.MELODY_BALL_TYPE_WHITE||x.type===x.nextType||x.nextType===cn.MELODY_BALL_TYPE_NONE||(x.type=x.type===cn.MELODY_BALL_TYPE_WHITE?cn.MELODY_BALL_TYPE_NORMAL:x.nextType,i=yn(x,i))}r=a}n=o[a++];var v,y=(0,O.Z)(n.neighbors);try{for(y.s();!(v=y.n()).done;){var b=v.value;if(b){var w=bn(n,b,i);w>0&&o.push(b),w>e&&(e=w)}}}catch(B){y.e(B)}finally{y.f()}}n=o[0]}var Z=e>0?0:n.sprite.y;if(this.data[this.data.length-1].sprite.y<=Z&&this.addEmptyLine(1),Z+p>9*X+X&&A.ZP.to(this.container,{y:p-X}).duration(.5),this.reset(),i>0)A.ZP.delayedCall(i,this.sweepMap.bind(this)),u===cn.MELODY_BALL_TYPE_NORMAL&&(this.targetChecker.comboScore+=10),this.boomHolder.combo();else if(n.type===cn.MELODY_BALL_TYPE_NORMAL){var P=A.ZP.timeline();P.add(A.ZP.to(c,{width:1.2*q,height:1.2*q,duration:.1})),P.add(A.ZP.to(c,{width:q,height:q,duration:.2})),P.then((function(){t.gun.reset(),t.targetChecker.comboScore=10}))}o=this.getNeighborbyLevel(n,3);var k,_=(0,O.Z)(o);try{for(_.s();!(k=_.n()).done;){var j=k.value;if(j!==n&&!j.isEmpty&&j.type!==cn.MELODY_BALL_TYPE_STONE){var T=j.sprite,E=T.x,L=T.y,C=new ln(E-c.x,L-c.y),S=C.lengthSqr();C.normalize().multiply(1e5/S);var M=A.ZP.timeline();M.add(A.ZP.to(j.sprite,{x:E+C.x,y:L+C.y}).duration(.1)),M.add(A.ZP.to(j.sprite,{x:E,y:L}).duration(.2))}}}catch(B){_.e(B)}finally{_.f()}}},{key:"sweepMap",value:function(){for(var n=this,t=this.data,e=0,i=e+V,o=[];e<i;e++){var r=t[e];r.isEmpty||(o.push(r),r.isMarked=!0)}for(var a=0,s=t[0].sprite.y;a<o.length;){var l,c=o[a].neighbors,u=(0,O.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||(o.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(y){u.e(y)}finally{u.f()}a++}var d=[];for(e=0,i=t.length;e<i;e++){var p=t[e];p.isEmpty||p.isMarked||d.push(p),p.isMarked=!1}var f=Math.min(.1*d.length,.7),m=this.container,g=m.x,x=m.y,v=9*X;s+x<v&&(v=Math.max(s-v,0),(v=Q-v)>x&&A.ZP.to(this.container,{y:v,ease:B.Yv.easeOut,delay:f+.1,duration:Math.max(.002*(v-x),.3)})),g-=this.physicsBox.x,x-=this.physicsBox.y,f>0&&this.effect.shakeScreen(f).then((function(){var t,e=(0,O.Z)(d);try{for(e.s();!(t=e.n()).done;){var i=t.value;n.physicsBox.addBubble(i,g,x),i.isOrigin&&n.targetChecker.countBall(i.color,i.type),i.setColor(0)}}catch(y){e.e(y)}finally{e.f()}})),A.ZP.delayedCall(f+.2,(function(){n.targetChecker.check()?(n.gun.turnOff(),n.boomHolder.end(!0),A.ZP.delayedCall(Math.max(n.gun.scoreBullet(),Math.min(d.length,3),2),(function(){return at.setWinPopupVisible(!0)}))):n.gun.reset()}))}},{key:"getGroup",value:function(n){var t=[n],e=n.color;n.isMarked=!0;for(var i=0;i<t.length;){var o,r=t[i++].neighbors,a=(0,O.Z)(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;!s||s.isMarked||s.isEmpty||s.color!==e||(t.push(s),s.isMarked=!0)}}catch(u){a.e(u)}finally{a.f()}}for(var l=0,c=t;l<c.length;l++){c[l].isMarked=!1}return t}},{key:"getLineNeighbor",value:function(n,t){var e=[n];n.isMarked=!0;for(var i=n.neighbors[0],o=n.neighbors[3],r=1;r<t;r++)i&&(e.push(i),i.isMarked=!0,i=i.neighbors[0]),o&&(e.push(o),o.isMarked=!0,o=o.neighbors[3]);for(var a=0,s=e;a<s.length;a++){s[a].isMarked=!1}return e}},{key:"getNeighborbyLevel",value:function(n,t){var e=[n],i=0,o=e.length;n.isMarked=!0;for(var r=1;r<t;r++){for(;i<o;i++){var a,s=e[i].neighbors,l=(0,O.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c&&!c.isMarked&&(e.push(c),c.isMarked=!0)}}catch(d){l.e(d)}finally{l.f()}}o=e.length}for(var u=0,h=e;u<h.length;u++){h[u].isMarked=!1}return e}},{key:"onButtonOver",value:function(n,t){if(n.isEmpty||t===cn.MELODY_BALL_TYPE_LINE)switch(t){case cn.MELODY_BALL_TYPE_NORMAL:n.turn(0);break;case cn.MELODY_BALL_TYPE_BOOM:var e,i=this.getNeighborbyLevel(n,3),o=(0,O.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.turn(r.color)}}catch(p){o.e(p)}finally{o.f()}break;case cn.MELODY_BALL_TYPE_LINE:var a,s=this.getLineNeighbor(n,3),l=(0,O.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.turn(c.color)}}catch(p){l.e(p)}finally{l.f()}}else{var u,h=this.getGroup(n),d=(0,O.Z)(h);try{for(d.s();!(u=d.n()).done;){u.value.turn(n.color)}}catch(p){d.e(p)}finally{d.f()}}}}],[{key:"findLevelConfig",value:function(n,t){var e,i=(0,O.Z)(n.chapters);try{for(i.s();!(e=i.n()).done;){var o,r=e.value,a=(0,O.Z)(r.levels);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.id===t)return s}}catch(l){a.e(l)}finally{a.f()}}}catch(l){i.e(l)}finally{i.f()}return sn||null}}]),e}(j.W20),Fn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,d.Z)(this,e),(i=t.call(this))._mapPosition=new j.AB0((function(){}),(0,wn.Z)(i),0,0),i._onPositionChange=void 0,i.camera=void 0,i._objectHeight=0,i.camera=n,i}return(0,p.Z)(e,[{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,n.y),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"objectHeight",get:function(){return this._objectHeight},set:function(n){this._objectHeight=n}},{key:"onPositionChange",set:function(n){this._onPositionChange=n}},{key:"updateDrawPosition",value:function(){if(this.camera&&!this.isInactive()){var n=this.camera.calculateDrawPosition(this);this.position.set(n.x,n.y)}}},{key:"addDebugLine",value:function(){}},{key:"addDebugRect",value:function(n){}}]),e}(j.W20),Wn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Wn||{}),Hn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,d.Z)(this,e),(n=t.call(this,null)).isDragging=!1,n.touchDownY=0,n.touchY=0,n.touchDownTime=0,n.touchIdentifier=-1,n.rootY=0,n.nextPos=null,n.state=Wn.Null,n.yMin=0,n.yMax=0,n.targetY=0;var i=Nn.getScreenSize(),o=i.screenWidth,r=i.screenHeight;return n.position.set(.5*o,.5*r),n.interactive=!0,n.on("pointerdown",n.onPointerDown.bind((0,wn.Z)(n))),n.on("pointermove",n.onPointerMove.bind((0,wn.Z)(n))),n.on("pointerup",n.onPointerUp.bind((0,wn.Z)(n))),n.on("pointercancel",n.onPointerUp.bind((0,wn.Z)(n))),n.on("pointerupoutside",n.onPointerUp.bind((0,wn.Z)(n))),n}return(0,p.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Wn.Active:this.isDragging=!1;case Wn.Inactive:}}},{key:"update",value:function(n){if(this.state===Wn.Active)this.updatePosition(n)}},{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,n.y),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"isInactive",value:function(){return this.state===Wn.Active}},{key:"active",value:function(){this.setState(Wn.Active)}},{key:"inactive",value:function(){this.setState(Wn.Inactive)}},{key:"calculateDrawPosition",value:function(n){return{x:n.mapPosition.x-this.mapPosition.x+this.position.x,y:-(n.mapPosition.y-this.mapPosition.y)+this.position.y}}},{key:"setYMinMax",value:function(n,t){this.yMin=n,this.yMax=t,this.setTargetY(this.targetY)}},{key:"setTargetY",value:function(n){this.targetY=Nn.clamp(n,this.yMin,this.yMax)}},{key:"setHitAreaSize",value:function(n,t){this.hitArea||(this.hitArea=new j.AeJ(-.5*n,-.5*t,n,t)),this.hitArea.width=n,this.hitArea.height=t}},{key:"onPointerDown",value:function(n){this.isDragging||(this.isDragging=!0,this.nextPos=null,this.touchDownY=this.touchY=n.clientY,this.touchDownTime=Date.now(),this.rootY=this.mapPosition.y)}},{key:"onPointerMove",value:function(n){if(this.isDragging){this.touchY=n.clientY;var t=(n.clientY-this.touchDownY)*(E/window.innerWidth);this.nextPos={x:this.mapPosition.x,y:this.rootY+t}}}},{key:"onPointerUp",value:function(n){if(this.isDragging){this.isDragging=!1,this.nextPos=null;var t=(this.touchY-this.touchDownY)*(E/window.innerWidth)/((Date.now()-this.touchDownTime)/1e3);t=Math.sign(t)*Math.max(Math.abs(t)-1e3,0),this.setTargetY(this.mapPosition.y+.3*t)}}},{key:"updatePosition",value:function(n){if(this.isDragging){if(!this.nextPos)return;this.mapPosition=this.nextPos,this.nextPos=null}else{if(this.mapPosition.y==this.targetY)return;var t=Nn.moveToTarget(this.mapPosition.y,this.targetY,Math.max(5*Math.abs(this.targetY-this.mapPosition.y),10),n);this.mapPosition={x:this.mapPosition.x,y:t}}}},{key:"getTouchByIdentifier",value:function(n,t){var e,i,o=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.originalEvent)||void 0===i?void 0:i.changedTouches;if(!o)return null;for(var r=0;r<o.length;r++){var a=o[r];if(a.identifier==t)return a}return null}}]),e}(Fn),Gn=new(function(){function n(){(0,d.Z)(this,n),this.textures=new Map}return(0,p.Z)(n,[{key:"from",value:function(n){return this.textures.has(n)||this.textures.set(n,j.xEZ.from(n)),this.textures.get(n)}}]),n}()),Vn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Vn||{}),qn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,d.Z)(this,e),(i=t.call(this,n)).geometry=void 0,i.material=void 0,i.mesh=void 0,i.sprite=void 0,i.state=Vn.Null,i.sprite=new j.jyi,i.sprite.anchor.set(.5,1),i.addChild(i.sprite),i.setState(Vn.Inactive),i}return(0,p.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Vn.Active:this.visible=!0;break;case Vn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Vn.Active)}},{key:"inactive",value:function(){this.setState(Vn.Inactive)}},{key:"isInactive",value:function(){return this.state===Vn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Gn.from(n)}},{key:"addMesh",value:function(){this.geometry=new j.ZXM,this.geometry.addAttribute("aVertexPosition",[-.5,-.5,.5,-.5,.5,.5,-.5,.5],2),this.geometry.addAttribute("aUvs",[0,0,1,0,1,1,0,1],2),this.geometry.addIndex([0,1,2,0,2,3]),this.material=new j.rY4(j.xEZ.WHITE),this.mesh=new j.Kj0(this.geometry,this.material),this.mesh.scale.set(10,10),this.mesh.tint=16711680,this.addChild(this.mesh)}}]),e}(Fn),Jn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Jn||{}),Xn=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,d.Z)(this,e),(i=t.call(this,n)).state=Jn.Null,i.sprite=void 0,i.sprite=new j.jyi,i.sprite.anchor.set(.5,.5),i.addChild(i.sprite),i.addDebugLine(),i.setState(Jn.Inactive),i}return(0,p.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Jn.Active:this.visible=!0;break;case Jn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Jn.Active)}},{key:"inactive",value:function(){this.setState(Jn.Inactive)}},{key:"isInactive",value:function(){return this.state===Jn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Gn.from(n)}},{key:"setImgAnchor",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.sprite.anchor.set(n,t)}}]),e}(Fn),Qn=e(9945),Kn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Kn||{}),$n=new j.pn8({align:"center",fontFamily:"iCielUniSans",fill:["#fffbee"],stroke:"#e366b6",strokeThickness:6,fontSize:36,fontWeight:"900",lineJoin:"round"}),nt=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,d.Z)(this,e),(i=t.call(this,n)).state=Kn.Null,i.sprite=void 0,i.numberText=void 0,i.chapterId=0,i.levelId=0,i.isNewLevel=!1,i.levelInfo=null,i.isTouchAble=!1,i.isPointerDown=!1,i.pointerDownPos={x:0,y:0},i.pointerDownTime=0,i.sprite=new j.jyi,i.sprite.anchor.set(.5,1),i.numberText=new j.xvT("",$n),i.numberText.anchor.set(.5,.5),i.numberText.position.set(0,-70),i.interactive=!0,i.hitArea=new j.AeJ(-60,-110,120,120),i.on("pointerdown",i.onPointerDown,(0,wn.Z)(i)),i.on("pointerup",i.onPointerUp,(0,wn.Z)(i)),i.on("pointercancel",i.onPointerCancle,(0,wn.Z)(i)),i.on("pointerupoutside",i.onPointerCancle,(0,wn.Z)(i)),i.addChild(i.sprite),i.addChild(i.numberText),i.addDebugLine(),i.addDebugRect(i.hitArea),i.setState(Kn.Inactive),i}return(0,p.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Kn.Active:this.visible=!0,this.isPointerDown=!1;break;case Kn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Kn.Active)}},{key:"inactive",value:function(){this.setState(Kn.Inactive)}},{key:"isInactive",value:function(){return this.state===Kn.Inactive}},{key:"setLevelInfo",value:function(n,t){this.chapterId=n,this.levelId=t,this.numberText.text="".concat(this.levelId),this.updateVisible()}},{key:"updateVisible",value:function(){var n,t,e,i,o,r,a=this,s=null===(n=N.Z.getState().user)||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.chapters;if(this.levelInfo=null===s||void 0===s||null===(e=s.find)||void 0===e||null===(i=e.call(s,(function(n){return n.id==a.chapterId})))||void 0===i||null===(o=i.levels)||void 0===o||null===(r=o.find)||void 0===r?void 0:r.call(o,(function(n){return n.id==a.levelId})),this.levelInfo){var l,c=[g.dN.worldMap.level0Star,g.dN.worldMap.level1Star,g.dN.worldMap.level2Star,g.dN.worldMap.level3Star];this.sprite.texture=Gn.from(c[(null===(l=this.levelInfo)||void 0===l?void 0:l.stars)||0]),this.isTouchAble=!0,this.isNewLevel=!1}else{if(1==this.levelId)this.sprite.texture=Gn.from(g.dN.worldMap.level0Star),this.isTouchAble=!0;else{var u,h,d,p,f=null===s||void 0===s||null===(u=s.find)||void 0===u||null===(h=u.call(s,(function(n){return n.id==a.chapterId})))||void 0===h||null===(d=h.levels)||void 0===d||null===(p=d.find)||void 0===p?void 0:p.call(d,(function(n){return n.id==a.levelId-1}));this.sprite.texture=Gn.from(f?g.dN.worldMap.level0Star:g.dN.worldMap.levelDisable),this.isTouchAble=!!f}this.isNewLevel=!0}}},{key:"onClick",value:function(){var n,t,e;this.isTouchAble&&(at.worldMap.cameraTargetToLevelId(this.levelId),N.Z.dispatch(Qn.fp.actions.updateCurrentLevel({id:this.levelId,stars:(null===(n=this.levelInfo)||void 0===n?void 0:n.stars)||0,highScore:(null===(t=this.levelInfo)||void 0===t?void 0:t.highScore)||0,winOnFirstTime:(null===(e=this.levelInfo)||void 0===e?void 0:e.badge)==phoenix.melody.MELODY_LEVEL_BADGE.MELODY_STEP_BADGE_GOLDEN})),this.isNewLevel?N.Z.dispatch(Qn.fp.actions.setShowPlayNewLevelPopup(!0)):N.Z.dispatch(Qn.fp.actions.setShowPlayLevelAgainPopup(!0)))}},{key:"onPointerDown",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerDown(n),this.isPointerDown=!0,this.pointerDownPos.x=n.data.global.x,this.pointerDownPos.y=n.data.global.y,this.pointerDownTime=Date.now()}},{key:"onPointerUp",value:function(n){var t;if(null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown){this.isPointerDown=!1;var e=n.data.global.x-this.pointerDownPos.x,i=n.data.global.y-this.pointerDownPos.y,o=Date.now()-this.pointerDownTime;e<=40&&i<=40&&o<=200&&this.onClick()}}},{key:"onPointerCancle",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown=!1}}]),e}(Fn),tt=function(n){return n[n.Null=0]="Null",n[n.Start=1]="Start",n[n.Active=2]="Active",n[n.Inactive=3]="Inactive",n}(tt||{}),et=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,d.Z)(this,e),(i=t.call(this)).imagesDefine=null,i.chapters=[],i.chapter=null,i.mergeBackgrounds=void 0,i.mergeDecors=void 0,i.mergeCheckpoints=void 0,i.gameRender=void 0,i.state=tt.Null,i.camera=new Hn,i.grounds=[],i.decoObjects=[],i.levelPlatforms=[],i.isSortObjects=!1,i.groundLayer=new j.W20,i.objectLayer=new j.W20,i.gameRender=n,i.camera.onPositionChange=i.onCameraPositionChange.bind((0,wn.Z)(i)),i.addChild(i.camera),i.addChild(i.groundLayer),i.addChild(i.objectLayer),i.setState(tt.Inactive),i}return(0,p.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case tt.Start:this.visible=!0;break;case tt.Active:break;case tt.Inactive:this.visible=!1,this.inactiveAllObjects()}}},{key:"update",value:function(n){switch(this.state){case tt.Start:this.setState(tt.Active);break;case tt.Active:this.camera.update(n),this.sortObjects();case tt.Inactive:}}},{key:"start",value:function(){this.setState(tt.Start)}},{key:"end",value:function(){this.setState(tt.Inactive)}},{key:"setChapters",value:function(n,t,e){this.imagesDefine=n,this.chapters=t.map((function(n){return JSON.parse(JSON.stringify(n))}));var i=this.chapters.find((function(n){return n.id==e})),o=this.chapters.find((function(n){return n.id==e-1})),r=this.chapters.find((function(n){return n.id==e+1}));i&&this.setChapter(i,o,r)}},{key:"cameraTargetToLevelId",value:function(n){var t,e=(null===(t=this.mergeCheckpoints.find((function(t){return t.id==n})))||void 0===t?void 0:t.y)||0;return this.camera.setTargetY(e),e}},{key:"test",value:function(){var n=new qn(this.camera);this.addChild(n),n.position.set(200,200)}},{key:"onCameraPositionChange",value:function(){var n,t,e,i=this,o=this.chapter.id,r=this.gameRender.app.renderer.height,a=this.camera.mapPosition.y-.7*r,s=this.camera.mapPosition.y+.7*r;this.grounds.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<a||s<n.mapPosition.y)&&n.inactive()})),null===(n=this.mergeBackgrounds)||void 0===n||n.forEach((function(n){var t;if(!(s<n.y)){var e=null===(t=i.imagesDefine)||void 0===t?void 0:t[n.imageId],o=(null===e||void 0===e?void 0:e.height)||0;if(!(n.y+o<a)){var r=i.grounds.find((function(t){return t.mapPosition.y==n.y}));r||(r=i.getObject(i.grounds,qn,i.groundLayer)),r.isInactive()&&(r.active(),r.setImg(e.url),r.objectHeight=o,r.mapPosition={x:0,y:n.y})}}})),this.decoObjects.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<a||s<n.mapPosition.y-n.objectHeight)&&n.inactive()})),null===(t=this.mergeDecors)||void 0===t||t.forEach((function(n){var t,e=null===(t=i.imagesDefine)||void 0===t?void 0:t[n.imageId],o=(null===e||void 0===e?void 0:e.height)||0;if(!(n.y+o<a||s<n.y-o)){var r=i.decoObjects.find((function(t){return t.mapPosition.x===n.x&&t.mapPosition.y===n.y}));r||(r=i.getObject(i.decoObjects,Xn,i.objectLayer,null===e||void 0===e?void 0:e.url)),r.isInactive()&&(r.active(),r.setImg(null===e||void 0===e?void 0:e.url),r.setImgAnchor(null===e||void 0===e?void 0:e.anchorX,null===e||void 0===e?void 0:e.anchorY),r.objectHeight=o,r.mapPosition={x:n.x,y:n.y})}})),this.levelPlatforms.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<a||s<n.mapPosition.y-n.objectHeight)&&n.inactive()})),null===(e=this.mergeCheckpoints)||void 0===e||e.forEach((function(n){var t,e=null===(t=i.imagesDefine)||void 0===t?void 0:t[n.imageId],r=(null===e||void 0===e?void 0:e.height)||0;if(!(n.y+r<a||s<n.y-r)){var l=i.levelPlatforms.find((function(t){return t.mapPosition.x===n.x&&t.mapPosition.y===n.y}));l||(l=i.getObject(i.levelPlatforms,nt,i.objectLayer)),l.isInactive()&&(l.active(),l.setLevelInfo(o,n.id),l.mapPosition={x:n.x,y:n.y})}})),this.groundLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.objectLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.onObjectPostionChange()}},{key:"onObjectPostionChange",value:function(){this.isSortObjects=!0}},{key:"getObject",value:function(n,t,e,i){var o=n.find((function(n){var t,e,o=null===(t=(e=n).getImg)||void 0===t?void 0:t.call(e);return i?n.isInactive()&&(!o||o==i):n.isInactive()}));return o||((o=new t(this.camera)).onPositionChange=this.onObjectPostionChange.bind(this),n.push(o),e.addChild(o)),o}},{key:"sortObjects",value:function(){this.isSortObjects&&(this.isSortObjects=!1,this.objectLayer.children.sort((function(n,t){return n.position.y-t.position.y})),this.groundLayer.children.sort((function(n,t){return t.position.y-n.position.y})))}},{key:"inactiveAllObjects",value:function(){this.groundLayer.children.forEach((function(n){return n.inactive()})),this.objectLayer.children.forEach((function(n){return n.inactive()}))}},{key:"setChapter",value:function(n,t,e){var i,o,r;this.chapter=n,this.mergeBackgrounds=[].concat((0,An.Z)((null===t||void 0===t?void 0:t.backgrounds)||[]),(0,An.Z)((null===n||void 0===n?void 0:n.backgrounds)||[]),(0,An.Z)((null===e||void 0===e?void 0:e.backgrounds)||[])),this.mergeDecors=[].concat((0,An.Z)((null===t||void 0===t?void 0:t.decors)||[]),(0,An.Z)((null===n||void 0===n?void 0:n.decors)||[]),(0,An.Z)((null===e||void 0===e?void 0:e.decors)||[])),this.mergeCheckpoints=[].concat((0,An.Z)((null===t||void 0===t?void 0:t.checkpoints)||[]),(0,An.Z)((null===n||void 0===n?void 0:n.checkpoints)||[]),(0,An.Z)((null===e||void 0===e?void 0:e.checkpoints)||[]));var a=this.chapter,s=a.backgrounds,l=a.offsetTop,c=a.offsetBottom;this.inactiveAllObjects();var u=s[0],h=s[s.length-1],d=(null===(i=this.imagesDefine)||void 0===i||null===(o=i[h.imageId])||void 0===o?void 0:o.height)||0,p=E,f=E/window.innerWidth*window.innerHeight;this.camera.setHitAreaSize(p,f);var m=u.y+c+.5*f,g=h.y+d+l-.5*f;this.camera.setYMinMax(m,g),this.camera.active(),null===(r=this.cameraTargetToLevelIdOneTime)||void 0===r||r.call(this,N.Z.getState().user.profile.currentLevel),this.onCameraPositionChange()}},{key:"cameraTargetToLevelIdOneTime",value:function(n){var t=this.cameraTargetToLevelId(n),e=Nn.getScreenSize(),i=e.screenHeight,o=e.offsetY;this.camera.mapPosition={x:0,y:Math.max(.5*i+o,t)},this.cameraTargetToLevelIdOneTime=null}}]),e}(j.W20),it=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,d.Z)(this,e),(n=t.call(this)).background=void 0,n.spBoard=null,n.spBottom=null,n.spStar=null,n.spLightLeft=null,n.spLightRight=null,n.visible=!1,n.background=e.createBackgroundTransparent(),n.addChild(n.background),setTimeout((function(){n.initObject()}),5e3),n}return(0,p.Z)(e,[{key:"show",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e,i,o,r,a,s,l,c,h=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.visible=t,!t){n.next=14;break}return n.next=4,this.initObject();case 4:e=["anim_khangia_lv1","anim_khangia_lv1","anim_khangia_lv2","anim_khangia_lv3"],i=["anim_win_lv1","anim_win_lv1","anim_win_lv2","anim_win_lv3"],o=N.Z.getState().mainGame.currentGame,r=o.score,o.level,a=o.star1Score,s=o.star2Score,l=o.star3Score,c=r>=l?3:r>=s?2:r>=a?1:0,this.spBoard&&setTimeout((function(){h.spBoard.state.setAnimation(0,"anim_popup_appear",!1),h.spBoard.state.addAnimation(0,"anim_popup_idle_loop",!0,0)}),0),this.spBottom&&setTimeout((function(){h.spBottom.state.setAnimation(0,e[c],!0)}),0),this.spStar&&(this.spStar.alpha=0,setTimeout((function(){h.spStar.alpha=c>0?1:0,h.spStar.state.setAnimation(0,i[c],!1)}),500)),this.spLightLeft&&this.spLightLeft.state.setAnimation(0,"anim_stage_light",!0),this.spLightRight&&this.spLightRight.state.setAnimation(0,"anim_stage_light",!0),setTimeout((function(){N.Z.dispatch(I.T.actions.setWinPopupVisible(!0))}),1e3);case 14:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"initObject",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){var t,e,i,o,r,a;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nn.loadSpine(g.dN.spine.popupWin);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:e=Nn.getScreenSize(),i=e.screenWidth,o=e.screenHeight,r=e.offsetX,a=e.offsetY,this.spBottom||(this.spBottom=new Bn.PY(t),this.spBottom.position.set(.5*i,1*o+a),this.addChild(this.spBottom)),this.spBoard||(this.spBoard=new Bn.PY(t),this.spBoard.position.set(.5*i,.4*o),this.addChild(this.spBoard)),this.spStar||(this.spStar=new Bn.PY(t),this.spStar.position.set(.5*i,.4*o),this.addChild(this.spStar)),this.spLightLeft||(this.spLightLeft=new Bn.PY(t),this.spLightLeft.position.set(0*i-r,.1*o),this.spLightLeft.scale.set(2,2),this.addChild(this.spLightLeft)),this.spLightRight||(this.spLightRight=new Bn.PY(t),this.spLightRight.position.set(1*i+r,.1*o),this.spLightRight.scale.set(-2,2),this.addChild(this.spLightRight));case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}],[{key:"createBackgroundTransparent",value:function(){var n=Nn.getScreenSize(),t=n.screenWidth,e=n.screenHeight,i=t+2*n.offsetX,o=e+2*n.offsetY,r=j.jyi.from(j.xEZ.WHITE);return r.tint=0,r.position.set(.5*t,.5*e),r.anchor.set(.5,.5),r.width=i,r.height=o,r.alpha=.5,r.interactive=!0,r.hitArea=new j.AeJ(-.5*i,-.5*o,i,o),r}}]),e}(j.W20),ot=function(n){(0,S.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,d.Z)(this,e),(n=t.call(this)).background=void 0,n.spBoard=null,n.spBottom=null,n.visible=!1,n.background=it.createBackgroundTransparent(),n.addChild(n.background),n}return(0,p.Z)(e,[{key:"show",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(t){var e=this;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.visible=t,!t){n.next=7;break}return n.next=4,this.initObject();case 4:this.spBoard&&(this.spBoard.alpha=0,setTimeout((function(){e.spBoard.alpha=1,e.spBoard.state.setAnimation(0,"anim_popup_appear_lose",!1),e.spBoard.state.addAnimation(0,"anim_popup_idle_loop_lose",!0,0)}),100)),this.spBottom&&(this.spBottom.alpha=0,setTimeout((function(){e.spBottom.alpha=1,e.spBottom.state.setAnimation(0,"anim_khangia_lv1",!0)}),100)),setTimeout((function(){N.Z.dispatch(I.T.actions.setLosePopupVisible(!0))}),1e3);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"initObject",value:function(){var n=(0,h.Z)((0,u.Z)().mark((function n(){var t,e,i,o,r;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nn.loadSpine(g.dN.spine.popupWin);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:e=Nn.getScreenSize(),i=e.screenWidth,o=e.screenHeight,e.offsetX,r=e.offsetY,this.spBottom||(this.spBottom=new Bn.PY(t),this.spBottom.position.set(.5*i,1*o+r),this.addChild(this.spBottom)),this.spBoard||(this.spBoard=new Bn.PY(t),this.spBoard.position.set(.5*i,.5*o-190),this.addChild(this.spBoard));case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),e}(j.W20),rt=function(){function n(){(0,d.Z)(this,n),this.render=void 0,this.map=void 0,this.worldMap=void 0,this.winPopup=new it,this.losePopup=new ot,this._isPlaying=!0,this.render=new C({fitWidth:!0,trasparent:0,alignCenter:!0,maxFPS:45,minFPS:30}),this.init(),console.log("[PixiJs] constructor"),this.render.onUpdate=this.onUpdate.bind(this)}return(0,p.Z)(n,[{key:"view",get:function(){return this.render.view}},{key:"canvas",get:function(){return this.render.canvas}},{key:"scale",get:function(){return this.render.app.stage.scale}},{key:"stage",get:function(){return this.render.stage}},{key:"initDom",value:function(n){this.render.init(n)}},{key:"init",value:function(){this.worldMap=new et(this.render),this.render.stage.addChild(this.worldMap),this.map=new zn(window.location.href.includes(g.dI.ColorTool)),this.render.stage.addChild(this.map),this.render.stage.addChild(this.winPopup),this.render.stage.addChild(this.losePopup)}},{key:"onUpdate",value:function(n){var t,e;null===(t=this.worldMap)||void 0===t||t.update(n),null===(e=this.map)||void 0===e||e.update(n)}},{key:"pause",value:function(){this.isPlaying=!1,this.render.pause()}},{key:"resume",value:function(){this.isPlaying=!0,this.render.resume()}},{key:"getObjectAbsolutePos",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},e=n.x,i=n.y,o=n.parent;o;)e*=o.scale.x,e+=o.x,i*=o.scale.y,i+=o.y,o=o.parent;return{x:(e+t.x)/window.innerWidth*100,y:(i+t.y)/window.innerHeight*100}}},{key:"isPlaying",get:function(){return this._isPlaying},set:function(n){this._isPlaying=n}},{key:"startWorldMap",value:function(){this.worldMap.start(),this.map&&(this.map.visible=!1)}},{key:"endWorldMap",value:function(){this.worldMap.end(),this.map&&(this.map.visible=!0),this.render.app.render()}},{key:"setChapters",value:function(n,t,e){this.worldMap.setChapters(n,t,e)}},{key:"setWinPopupVisible",value:function(n){this.losePopup.visible||(N.Z.dispatch(I.T.actions.setUIVisible(!n)),this.winPopup.show(n))}},{key:"setLosePopupVisible",value:function(n){this.winPopup.visible||(N.Z.dispatch(I.T.actions.setUIVisible(!n)),this.losePopup.show(n))}}]),n}(),at=new rt,st=e(6417);function lt(){var n=(0,i.useRef)(null);k();return(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){return at.initDom(n.current),function(){}}),[n.current]),(0,i.useEffect)((function(){var t=function(){setTimeout((function(){at.initDom(n.current),at.resume()}),500)},e=function(){at.pause()};return t(),c.on(l.On_RESUME,t),c.on(l.On_PAUSE,e),c.on(l.ON_RESIZE,t),function(){e(),c.off(l.On_RESUME,t),c.off(l.On_PAUSE,e),c.off(l.ON_RESIZE,t)}}),[]),(0,st.jsx)(xt,{className:"game",ref:n})}var ct,ut,ht,dt,pt,ft,mt,gt,xt=Z.ZP.div(In||(In=(0,b.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n"])));function vt(n){var t=(0,i.useState)(m.P.getInCache(n)||""),e=(0,kn.Z)(t,2),o=e[0],r=e[1];return(0,i.useLayoutEffect)((function(){n&&m.P.cacheFile(n).then((function(n){r(n)}))}),[n]),o}var yt,bt,wt,Zt,Pt,kt,_t,jt,Tt,Et,Lt,Ct,St,Mt,Ot,At,Bt,Nt,It,Yt,Dt,Rt,Ut,zt,Ft,Wt,Ht,Gt,Vt,qt,Jt,Xt,Qt,Kt,$t,ne,te,ee,ie,oe,re,ae,se,le,ce,ue,he,de,pe,fe,me,ge,xe,ve,ye,be,we,Ze,Pe,ke,_e,je,Te,Ee,Le,Ce,Se,Me,Oe,Ae,Be,Ne,Ie,Ye,De,Re,Ue,ze,Fe,We,He,Ge,Ve,qe,Je,Xe,Qe,Ke,$e,ni,ti,ei,ii,oi,ri,ai,si,li,ci,ui,hi,di,pi,fi,mi,gi,xi,vi,yi,bi,wi,Zi,Pi,ki,_i,ji,Ti=Z.ZP.div(ct||(ct=(0,b.Z)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Ei=(Z.ZP.div(ut||(ut=(0,b.Z)(["\n    min-width: 80px;\n\n    border: 1px solid #000;\n    border-radius: 5px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    padding: 5px 10px;\n"]))),Z.ZP.div(ht||(ht=(0,b.Z)(["\n    font-size: 20px;\n    color: #000;\n    text-align: center;\n    white-space: nowrap;\n"]))),Z.ZP.div(dt||(dt=(0,b.Z)(["\n    background-image: url(",");\n    background-size: contain;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    width: ",";\n    height: ",";\n"])),(function(n){return n.src}),(function(n){return n.width||"unset"}),(function(n){return n.height||"unset"}))),Li=Z.ZP.div(pt||(pt=(0,b.Z)(["\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n\n    background-color: ",";\n    z-index: 10;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"])),(function(n){return n.backgroundColor||"rgba(0, 0, 0, 0.8)"})),Ci=(0,Z.ZP)(Ei)(ft||(ft=(0,b.Z)(["\n    width: ",";\n    height: ",";\n    min-width: 135px;\n\n    background-size: 100% 100%;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    margin-top: ",";\n"])),(function(n){return n.width||"auto"}),(function(n){return n.height||"40px"}),(function(n){return n.marginTop||"unset"})),Si=Z.ZP.div(mt||(mt=(0,b.Z)(["\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin: 2px 10px 0px;\n"])),(function(n){return n.fontSize||"18px"})),Mi=Z.ZP.div(gt||(gt=(0,b.Z)(["\n    width: ",";\n    height: ",";\n    background-image: ",";\n    background-size: 100% 100%;\n"])),(function(n){return n.width}),(function(n){return n.height}),(function(n){return'url("'.concat(n.src,'")')})),Oi=function(n){var t=n.target,e=t.type,i=t.quantity,o=t.ball,r=vt(Nn.getTargetTypeImageUrl(e,o)||""),a=vt(g.dN.general.checkIcon),s=_((function(n){return n.mainGame.targetChecker})),l=Nn.getTargetCount(e,o,s),c=Math.max(i-l,0);return(0,st.jsxs)(Ai,{children:[(0,st.jsx)(Bi,{src:r}),(0,st.jsx)(Ni,{children:c<=0?(0,st.jsx)(Yi,{src:a}):(0,st.jsx)(Ii,{children:c})})]})},Ai=Z.ZP.div(yt||(yt=(0,b.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n"]))),Bi=(0,Z.ZP)(Ei)(bt||(bt=(0,b.Z)(["\n    width: 28px;\n    height: 28px;\n    flex: none;\n"]))),Ni=Z.ZP.div(wt||(wt=(0,b.Z)(["\n    height: 15px;\n    min-width: 22px;\n    background-color: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    flex: none;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: -5px;\n    padding-left: 5px;\n    padding-right: 5px;\n"]))),Ii=Z.ZP.div(Zt||(Zt=(0,b.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"]))),Yi=(0,Z.ZP)(Ei)(Pt||(Pt=(0,b.Z)(["\n    width: 16px;\n    height: 16px;\n    margin-top: -2px;\n"]))),Di=function(n){var t=n.target,e=t.type,i=t.quantity,o=t.ball,r=vt(Nn.getTargetTypeImageUrl(e,o)||""),a=vt(g.dN.general.checkIcon),s=_((function(n){return n.mainGame.targetChecker})),l=Nn.getTargetCount(e,o,s),c=Math.max(i-l,0);return(0,st.jsxs)(Ai,{children:[(0,st.jsx)(Ri,{src:r}),(0,st.jsx)(Ui,{children:c<=0?(0,st.jsx)(Yi,{src:a}):(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)(zi,{children:"".concat(l)}),(0,st.jsx)(Fi,{children:"/".concat(i)})]})})]})},Ri=(0,Z.ZP)(Bi)(kt||(kt=(0,b.Z)(["\n    width: 40px;\n    height: 40px;\n"]))),Ui=(0,Z.ZP)(Ni)(_t||(_t=(0,b.Z)(["\n    margin-top: 5px;\n    height: 18px;\n"]))),zi=(0,Z.ZP)(Ii)(jt||(jt=(0,b.Z)(["\n    font-size: 14px;\n    color: #fe77cd;\n    margin-top: 4px;\n"]))),Fi=(0,Z.ZP)(zi)(Tt||(Tt=(0,b.Z)(["\n    color: #fff;\n"]))),Wi=function(){var n=_((function(n){return n.mainGame.config}));return(0,st.jsx)(st.Fragment,{children:!!n&&(0,st.jsx)(Hi,{})})},Hi=function(){var n=_((function(n){return n.worldMap.currentLevel})).id,t=_((function(n){return n.mainGame.config})),e=zn.findLevelConfig(t,n);return(0,st.jsx)(Gi,{children:(0,st.jsx)(Vi,{children:function(){var n;return null===e||void 0===e||null===(n=e.targets)||void 0===n?void 0:n.map((function(n,t){return(0,st.jsx)(Oi,{target:n},t)}))}()})})},Gi=Z.ZP.div(Et||(Et=(0,b.Z)(["\n    position: absolute;\n    bottom: 23px;\n    left: 16px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n"]))),Vi=Z.ZP.div(Lt||(Lt=(0,b.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n"]))),qi=function(){var n=_((function(n){return n.mainGame.config}));return(0,st.jsx)(st.Fragment,{children:!!n&&(0,st.jsx)(Ji,{})})},Ji=function(){var n=_((function(n){return n.worldMap.currentLevel})).id,t=_((function(n){return n.mainGame.config})),e=zn.findLevelConfig(t,n);return(0,st.jsx)(Xi,{children:(0,st.jsx)(Vi,{children:function(){var n;return null===e||void 0===e||null===(n=e.targets)||void 0===n?void 0:n.map((function(n,t){return(0,st.jsx)(Di,{target:n},t)}))}()})})},Xi=Z.ZP.div(Ct||(Ct=(0,b.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n    margin-top: 13px;\n"]))),Qi=function(n){var t=n.starScore,e=n.maxScore,i=_((function(n){return n.mainGame.currentGame.score})),o=vt(g.dN.general.starIconDisable),r=vt(g.dN.general.starIconAble);return(0,st.jsx)(Ki,{left:"".concat(t/e*100,"%"),children:(0,st.jsx)($i,{src:o,children:i>=t&&(0,st.jsx)(to,{src:r})})})},Ki=Z.ZP.div(St||(St=(0,b.Z)(["\n    position: absolute;\n    left: ",";\n    top: 50%;\n    transform: translate(-50%, -50%);\n"])),(function(n){return n.left})),$i=(0,Z.ZP)(Ei)(Mt||(Mt=(0,b.Z)(["\n    width: 16px;\n    height: 16px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),no=(0,Z.F4)(Ot||(Ot=(0,b.Z)(["\n      0% {transform: translate(-50%, -50%) scale(0);}\n    100% {transform: translate(-50%, -50%) scale(1);}\n"]))),to=(0,Z.ZP)($i)(At||(At=(0,b.Z)(["\n    width: 28px;\n    height: 28px;\n    transform: translate(-50%, -50%) scale(0);\n    animation-name: ",";\n    animation-duration: 0.3s;\n    animation-fill-mode: forwards;\n    animation-timing-function: cubic-bezier(0, 0.8, 0.8, 1.5);\n"])),no),eo=function(){var n=_((function(n){return n.mainGame.currentGame})),t=n.score,e=n.star1Score,i=n.star2Score,o=n.star3Score,r=o/85*100,a=t/r*100;return(0,st.jsxs)(io,{children:[(0,st.jsx)(ro,{src:vt(g.dN.general.progressBarBg),children:(0,st.jsxs)(ao,{children:[(0,st.jsx)(so,{style:{clipPath:"polygon(0% 0%, ".concat(a,"% 0%, ").concat(a,"% 100%, 0 100%)")}}),[e,i,o].map((function(n,t){return(0,st.jsx)(Qi,{starScore:n,maxScore:r},t)}))]})}),(0,st.jsx)(oo,{children:Nn.convertNumberToScoreString(t)})]})},io=Z.ZP.div(Bt||(Bt=(0,b.Z)(["\n    position: absolute;\n    bottom: 21px;\n    right: 16px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n"]))),oo=Z.ZP.div(Nt||(Nt=(0,b.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: 18px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n"]))),ro=(0,Z.ZP)(Ei)(It||(It=(0,b.Z)(["\n    width: 94px;\n    height: 16px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),ao=Z.ZP.div(Yt||(Yt=(0,b.Z)(["\n    width: 88px;\n    height: 4px;\n    position: relative;\n"]))),so=Z.ZP.div(Dt||(Dt=(0,b.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-image: linear-gradient(90deg, #ff0000, #ffff00);\n    border-radius: 2px;\n    transition: 0.2s linear;\n"]))),lo=function(){var n=_((function(n){return n.mainGame.isUIVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(co,{})})},co=function(){var n=_((function(n){return n.mainGame.topOpacity}));return(0,st.jsxs)(uo,{src:vt(g.dN.MainGame.headerBg),style:{opacity:n},children:[(0,st.jsx)(Wi,{}),(0,st.jsx)(eo,{})]})},uo=(0,Z.ZP)(Ei)(Rt||(Rt=(0,b.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 104px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    transition: opacity 1s ease-in;\n"]))),ho=function(){var n=_((function(n){return n.mainGame.isUIVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(po,{})})},po=function(){var n=k();return(0,st.jsx)(fo,{children:(0,st.jsx)(mo,{src:g.dN.MainGame.optionBtn,onClick:function(){n(I.T.actions.setSettingPopupVisible(!0))}})})},fo=Z.ZP.div(Ut||(Ut=(0,b.Z)(["\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n    width: 100%;\n"]))),mo=(0,Z.ZP)(Ei)(zt||(zt=(0,b.Z)(["\n    position: absolute;\n    left: 24px;\n    bottom: 45px;\n\n    width: 32px;\n    height: 32px;\n"]))),go=e(728),xo=function(n){var t=n.title,e=n.children,i=n.onClose,o=n.marginBottom,r=n.isAppear,a=void 0===r||r;return(0,st.jsx)(bo,{isAppear:a,children:(0,st.jsxs)(Po,{marginBottom:o,isAppear:a,children:[(0,st.jsx)(ko,{src:vt(g.dN.general.popupHeader),children:(0,st.jsx)(_o,{children:t})}),(0,st.jsxs)(jo,{children:[(0,st.jsx)(To,{src:vt(g.dN.general.popupBody)}),(0,st.jsx)(Eo,{src:vt(g.dN.general.popupBody),children:e}),(0,st.jsx)(Lo,{src:vt(g.dN.general.popupBody)})]}),(0,st.jsx)(Co,{src:vt(g.dN.general.exitBtn1),onClick:function(){null===i||void 0===i||i()}})]})})},vo=(0,Z.F4)(Ft||(Ft=(0,b.Z)(["\n    0% {opacity: 0}\n    100% {opacity: 1}\n"]))),yo=(0,Z.F4)(Wt||(Wt=(0,b.Z)(["\n    0% {opacity: 1}\n    100% {opacity: 0}\n"]))),bo=(0,Z.ZP)(Li)(Ht||(Ht=(0,b.Z)(["\n    animation-name: ",";\n    animation-duration: 0.2s;\n    animation-timing-function: linear;\n    animation-fill-mode: forwards;\n"])),(function(n){return n.isAppear?vo:yo})),wo=(0,Z.F4)(Gt||(Gt=(0,b.Z)(["\n    0% {transform: scale(0)}\n    100% {transform: scale(1)}\n"]))),Zo=(0,Z.F4)(Vt||(Vt=(0,b.Z)(["\n    0% {transform: scale(1)}\n    100% {transform: scale(0)}\n"]))),Po=Z.ZP.div(qt||(qt=(0,b.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    position: relative;\n    width: 327px;\n    margin-bottom: ",";\n\n    animation-name: ",";\n    animation-duration: ",";\n    animation-timing-function: ",";\n    animation-fill-mode: forwards;\n"])),(function(n){return n.marginBottom||"unset"}),(function(n){return n.isAppear?wo:Zo}),(function(n){return n.isAppear?"0.4s":"0.2s"}),(function(n){return n.isAppear?"cubic-bezier(0, 0.5, 0.5, 1.3)":"cubic-bezier(0, 0, 1, 0.5)"})),ko=(0,Z.ZP)(Ei)(Jt||(Jt=(0,b.Z)(["\n    flex: none;\n    width: 100%;\n    height: 63px;\n    margin-bottom: -9px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"]))),_o=Z.ZP.div(Xt||(Xt=(0,b.Z)(["\n    text-shadow: 0 -1px 3px rgba(0, 0, 0, 0.5);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 12px;\n"]))),jo=Z.ZP.div(Qt||(Qt=(0,b.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n"]))),To=(0,Z.ZP)(Ei)(Kt||(Kt=(0,b.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 0px;\n    background-repeat: no-repeat;\n"]))),Eo=(0,Z.ZP)(Ei)($t||($t=(0,b.Z)(["\n    width: 100%;\n    background-origin: border-box;\n    background-size: 100% 200%;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    /* height: 50px; */\n\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Lo=(0,Z.ZP)(Ei)(ne||(ne=(0,b.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-repeat: no-repeat;\n"]))),Co=(0,Z.ZP)(Ei)(te||(te=(0,b.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 15px;\n    right: 0px;\n"]))),So=function(n){var t=n.title,e=n.ctaText,i=n.onClose,o=n.onCta;return(0,st.jsx)(xo,{title:t,onClose:i,children:(0,st.jsxs)(Mo,{children:[(0,st.jsxs)(Oo,{children:[(0,st.jsx)(Ao,{src:vt(g.dN.general.soundIcon)}),(0,st.jsx)(Bo,{children:"\xc2m thanh"}),(0,st.jsx)(No,{src:vt(g.dN.general.switchBtnOn)})]}),(0,st.jsx)(Io,{}),(0,st.jsxs)(Oo,{children:[(0,st.jsx)(Ao,{src:vt(g.dN.general.vibraIcon)}),(0,st.jsx)(Bo,{children:"Rung"}),(0,st.jsx)(No,{src:vt(g.dN.general.switchBtnOn)})]}),(0,st.jsx)(Io,{}),(0,st.jsx)(Oo,{children:(0,st.jsx)(Bo,{onClick:function(){go.h.resetUserProfile()},children:"Reset User Profile"})}),(0,st.jsx)(Oo,{children:(0,st.jsx)(Ci,{src:vt(g.dN.general.button_1),onClick:function(){null===o||void 0===o||o()},children:(0,st.jsx)(Si,{children:e})})})]})})},Mo=Z.ZP.div(ee||(ee=(0,b.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n\n    margin: 5px 0px;\n"]))),Oo=Z.ZP.div(ie||(ie=(0,b.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    width: 100%;\n"]))),Ao=(0,Z.ZP)(Ei)(oe||(oe=(0,b.Z)(["\n    flex: none;\n    width: 32px;\n    height: 32px;\n"]))),Bo=Z.ZP.div(re||(re=(0,b.Z)(["\n    flex: auto;\n\n    font-family: SFProText;\n    font-size: 14px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),No=(0,Z.ZP)(Ei)(ae||(ae=(0,b.Z)(["\n    flex: none;\n    width: 60px;\n    height: 28px;\n"]))),Io=Z.ZP.div(se||(se=(0,b.Z)(["\n    width: 100%;\n    height: 2px;\n    background-color: #cba5ff;\n"]))),Yo=function(){var n=_((function(n){return n.mainGame.isSettingPopupVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Do,{})})},Do=function(){var n=k();return(0,st.jsx)(So,{title:"Thi\u1ebft l\u1eadp",ctaText:"D\u1eebng tr\u1eadn \u0111\u1ea5u",onClose:function(){n(I.T.actions.setSettingPopupVisible(!1))},onCta:function(){n(I.T.actions.setSettingPopupVisible(!1)),n(I.T.actions.setConfirmExitPopupVisible(!0))}})},Ro=function(){var n=_((function(n){return n.mainGame.isConfirmExitPopupVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Uo,{})})},Uo=function(){var n=k(),t=function(){n(I.T.actions.setConfirmExitPopupVisible(!1))};return(0,st.jsx)(xo,{title:"K\u1ebft th\xfac tr\xf2 ch\u01a1i",onClose:t,children:(0,st.jsxs)(zo,{children:[(0,st.jsx)(Fo,{src:vt(g.dN.general.closeGameBanner)}),(0,st.jsxs)(Wo,{children:[(0,st.jsx)(Ho,{children:"B\u1ea1n s\u1ebd b\u1ecb "}),(0,st.jsx)(Ho,{children:"-1 "}),(0,st.jsx)(Go,{src:vt(g.dN.general.miniHeartIcon)}),(0,st.jsx)(Ho,{children:" n\u1ebfu k\u1ebft th\xfac tr\xf2 ch\u01a1i m\xe0 ch\u01b0a ho\xe0n th\xe0nh m\u1ee5c ti\xeau"})]}),(0,st.jsxs)(Vo,{children:[(0,st.jsx)(Ci,{src:vt(g.dN.general.button_2),onClick:function(){n(I.T.actions.setConfirmExitPopupVisible(!1)),at.setLosePopupVisible(!0)},children:(0,st.jsx)(Si,{children:"\u0110\u1ed3ng \xfd"})}),(0,st.jsx)(Ci,{src:vt(g.dN.general.button_1),onClick:t,children:(0,st.jsx)(Si,{children:"Ch\u01a1i ti\u1ebfp"})})]})]})})},zo=Z.ZP.div(le||(le=(0,b.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),Fo=(0,Z.ZP)(Ei)(ce||(ce=(0,b.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),Wo=Z.ZP.div(ue||(ue=(0,b.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Ho=Z.ZP.div(he||(he=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),Go=(0,Z.ZP)(Ei)(de||(de=(0,b.Z)(["\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-bottom: -3px;\n"]))),Vo=Z.ZP.div(pe||(pe=(0,b.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n"]))),qo=e(1884),Jo=function(){var n=_((function(n){return n.mainGame.isWinPopupVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Xo,{})})},Xo=function(){var n=k(),t=_((function(n){return n.mainGame.currentGame})),e=t.score,o=t.level,r=t.star1Score,a=t.star2Score,s=t.star3Score,u=_((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.currentChapter}));(0,i.useEffect)((function(){n((0,qo.GE)({chapterId:u,levelId:o,stars:e>=s?3:e>=a?2:e>=r?1:0,highScore:e})),n((0,qo.My)({levelId:o,score:e,isComplete:!0}))}),[]);var h=function(){n(I.T.actions.setWinPopupVisible(!1)),at.setWinPopupVisible(!1),c.emit(l.Navigate,-1)};return(0,st.jsxs)(Li,{backgroundColor:"rgba(0, 0, 0, 0)",children:[(0,st.jsxs)(Qo,{children:[(0,st.jsx)($o,{fontSize:"20px",marginTop:"81px",children:"V\u01b0\u1ee3t \u1ea3i th\xe0nh c\xf4ng"}),(0,st.jsx)($o,{fontSize:"16px",marginTop:"30px",children:"\u0110i\u1ec3m"}),(0,st.jsx)(nr,{fontSize:"32px",marginTop:"10px",children:Nn.convertNumberToScoreString(e)})]}),(0,st.jsx)(Ko,{height:"20px"}),(0,st.jsx)(Ci,{src:vt(g.dN.general.button_1),width:"200px",height:"46px",onClick:function(){h(),n(Qn.fp.actions.updateCurrentLevel({id:o+1,stars:0,highScore:0,winOnFirstTime:!1})),n(Qn.fp.actions.setShowPlayNewLevelPopup(!0))},children:(0,st.jsx)(Si,{children:"\u1ea2i ti\u1ebfp theo"})}),(0,st.jsx)(tr,{src:vt(g.dN.general.exitBtn2),onClick:h})]})},Qo=Z.ZP.div(fe||(fe=(0,b.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Ko=Z.ZP.div(me||(me=(0,b.Z)(["\n    height: ",";\n"])),(function(n){return n.height})),$o=Z.ZP.div(ge||(ge=(0,b.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),nr=Z.ZP.div(xe||(xe=(0,b.Z)(["\n    text-shadow: 0 1px 8px rgba(231, 116, 255, 0.75);\n    -webkit-text-stroke: 1px rgba(207, 7, 240, 0.69);\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),tr=(0,Z.ZP)(Ei)(ve||(ve=(0,b.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"]))),er=function(){var n=_((function(n){return n.mainGame.isLosePopupVisible}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(ir,{})})},ir=function(){var n=k(),t=_((function(n){return n.worldMap.currentLevel})).id;(0,i.useEffect)((function(){n((0,qo.My)({levelId:t,score:0,isComplete:!0}))}),[]);var e=function(){console.log("onClose"),n(I.T.actions.setLosePopupVisible(!1)),at.setLosePopupVisible(!1),c.emit(l.Navigate,-1)};return(0,st.jsxs)(rr,{children:[(0,st.jsxs)(ar,{children:[(0,st.jsx)(sr,{fontSize:"20px",marginTop:"0px",children:"V\u01b0\u1ee3t \u1ea3i th\u1ea5t b\u1ea1i"}),(0,st.jsx)(lr,{fontSize:"12px",marginTop:"15px",children:"Ho\xe0n th\xe0nh t\u1ea5t c\xe1c m\u1ee5c ti\xeau c\u1ee7a \u1ea3i \u0111\u1ec3 chi\u1ebfn th\u1eafng"}),(0,st.jsx)(qi,{}),(0,st.jsxs)(Ci,{src:vt(g.dN.general.button_1),marginTop:"70px",width:"200px",height:"46px",onClick:function(){e(),n(Qn.fp.actions.updateCurrentLevel({id:t,stars:0,highScore:0,winOnFirstTime:!1})),n(Qn.fp.actions.setShowPlayNewLevelPopup(!0))},children:[(0,st.jsx)(Si,{children:"Ch\u01a1i l\u1ea1i (-1"}),(0,st.jsx)(Ei,{src:vt(g.dN.general.miniHeartIcon),width:"24px",height:"24px"}),(0,st.jsx)(Si,{children:")"})]}),(0,st.jsx)(Ci,{src:vt(g.dN.general.button_2),marginTop:"16px",width:"200px",height:"46px",onClick:e,children:(0,st.jsx)(Si,{children:"Trang ch\u1ee7"})})]}),(0,st.jsx)(cr,{src:vt(g.dN.general.exitBtn2),onClick:e})]})},or=(0,Z.F4)(ye||(ye=(0,b.Z)(["\n    0% {opacity: 0}\n    100% {opacity: 1}\n"]))),rr=(0,Z.ZP)(Li)(be||(be=(0,b.Z)(["\n    background-color: rgba(0, 0, 0, 0);\n    animation-name: ",";\n    animation-duration: 0.5s;\n    animation-timing-function: linear;\n    animation-fill-mode: forwards;\n"])),or),ar=Z.ZP.div(we||(we=(0,b.Z)(["\n    width: 347px;\n    margin-top: 70px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),sr=Z.ZP.div(Ze||(Ze=(0,b.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),lr=Z.ZP.div(Pe||(Pe=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: ",";\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fff;\n    margin-top: ",";\n    width: 75%;\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),cr=(0,Z.ZP)(Ei)(ke||(ke=(0,b.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"]))),ur=e(2072),hr=function(n){var t=n.children;return(0,st.jsxs)(st.Fragment,{children:[(0,st.jsx)(dr,{src:vt(g.dN.onboarding.speechBubble)}),(0,st.jsxs)(fr,{children:[(0,st.jsx)(mr,{src:vt(g.dN.onboarding.speechBubble)}),t]}),(0,st.jsx)(pr,{src:vt(g.dN.onboarding.speechBubble)})]})},dr=(0,Z.ZP)(Ei)(_e||(_e=(0,b.Z)(["\n    width: 100%;\n    height: 25px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),pr=(0,Z.ZP)(dr)(je||(je=(0,b.Z)(["\n    background-position: 0px 100%;\n"]))),fr=Z.ZP.div(Te||(Te=(0,b.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 5px;\n    margin-top: -10px;\n    margin-bottom: -10px;\n"]))),mr=(0,Z.ZP)(Ei)(Ee||(Ee=(0,b.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% 1000%;\n    background-position: 0px 50%;\n    position: absolute;\n    left: 0;\n    top: 10px;\n    bottom: 10px;\n"]))),gr=Z.ZP.div(Le||(Le=(0,b.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 130%;\n    letter-spacing: normal;\n    color: #681c8d;\n    position: relative;\n    z-index: 2;\n    margin: 0px 15px;\n    width: calc(100% - 30px);\n"])),(function(n){return n.fontFamily||"SFProText"}),(function(n){return n.fontSize||"12px"})),xr=Z.ZP.div(Ce||(Ce=(0,b.Z)(["\n    width: 240px;\n    position: absolute;\n    bottom: ",";\n    right: ",";\n"])),(function(n){return n.bottom||"130px"}),(function(n){return n.right||"20px"})),vr=(0,Z.F4)(Se||(Se=(0,b.Z)(["\n    0% {opacity: 0}\n    100% {opacity: 1}\n"]))),yr=(0,Z.ZP)(Li)(Me||(Me=(0,b.Z)(["\n    opacity: 0;\n\n    animation-name: ",";\n    animation-duration: 0.5s;\n    animation-fill-mode: forwards;\n    animation-delay: ",";\n\n    *{\n        pointer-events: none;\n    }\n"])),vr,(function(n){return n.animationDelay||"unset"})),br=(0,Z.ZP)(Ei)(Oe||(Oe=(0,b.Z)(["\n    width: 100%;\n    height: ",";\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n"])),(function(n){return n.height||"286px"})),wr=function(n){var t=n.children,e=n.speechBubbleContent,i=n.speechBubbleMarginTop;return(0,st.jsxs)(Zr,{children:[(0,st.jsx)(Pr,{src:vt(g.dN.onboarding.stageTop)}),t,(0,st.jsxs)(kr,{src:vt(g.dN.onboarding.stageBottom),children:[(0,st.jsx)(_r,{src:vt(g.dN.onboarding.mascot)}),(0,st.jsx)(jr,{marginTop:i,children:(0,st.jsx)(hr,{children:e})})]})]})},Zr=Z.ZP.div(Ae||(Ae=(0,b.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Pr=(0,Z.ZP)(Ei)(Be||(Be=(0,b.Z)(["\n    width: 100%;\n    height: 44px;\n    position: relative;\n    z-index: 1;\n"]))),kr=(0,Z.ZP)(Ei)(Ne||(Ne=(0,b.Z)(["\n    width: 100%;\n    height: 92px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n"]))),_r=(0,Z.ZP)(Ei)(Ie||(Ie=(0,b.Z)(["\n    width: 112px;\n    height: 155px;\n    margin-bottom: 80px;\n"]))),jr=Z.ZP.div(Ye||(Ye=(0,b.Z)(["\n    width: 236px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Tr=function(n){var t=n.content,e=n.marginTop;return(0,st.jsxs)(Er,{marginTop:e,children:[(0,st.jsx)(Lr,{src:vt(g.dN.onboarding.iIcon)}),(0,st.jsx)(Cr,{children:t})]})},Er=Z.ZP.div(De||(De=(0,b.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Lr=(0,Z.ZP)(Ei)(Re||(Re=(0,b.Z)(["\n    width: 15px;\n    height: 15px;\n    margin-right: 2px;\n    margin-bottom: -1px;\n"]))),Cr=Z.ZP.div(Ue||(Ue=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 10px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n"]))),Sr=(0,Z.ZP)(yr)(ze||(ze=(0,b.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    background-blend-mode: multiply;\n"])),(function(n){return n.src})),Mr=Z.ZP.div(Fe||(Fe=(0,b.Z)(["\n    width: 100%;\n    min-height: ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),(function(n){return n.minHeight})),Or=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_1")}),[]);return(0,st.jsxs)(yr,{animationDelay:"1.5s",children:[(0,st.jsx)(br,{src:vt(g.dN.onboarding.step1Bottom)}),(0,st.jsxs)(Ar,{children:[(0,st.jsxs)(Br,{src:vt(g.dN.onboarding.levelEffect),children:[(0,st.jsx)(Nr,{src:vt(g.dN.onboarding.level1),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep())}}),(0,st.jsx)(Yr,{src:vt(g.dN.onboarding.hand)})]}),(0,st.jsx)(Rr,{src:vt(g.dN.onboarding.effectLightLeft)}),(0,st.jsx)(Ur,{src:vt(g.dN.onboarding.effectLightRight)})]}),(0,st.jsxs)(xr,{children:[(0,st.jsxs)(hr,{children:[(0,st.jsx)(gr,{children:"Ch\xe0o m\u1eebng idol \u0111\u1ebfn v\u1edbi h\xe0nh tr\xecnh kh\xe1m ph\xe1 \xe2m nh\u1ea1c"}),(0,st.jsx)(gr,{children:"C\xf9ng tui \u0111\u1ebfn v\u1edbi th\u1eed th\xe1ch \u0111\u1ea7u ti\xean n\xe0o"})]}),(0,st.jsx)(Tr,{content:"Nh\u1ea5p v\xe0o \u1ea2i theo h\u01b0\u1edbng ng\xf3n tay",marginTop:"5px"})]})]})},Ar=Z.ZP.div(We||(We=(0,b.Z)(["\n    width: 100%;\n    height: 0;\n    position: absolute;\n    left: 0;\n    bottom: 300px;\n"]))),Br=(0,Z.ZP)(Ei)(He||(He=(0,b.Z)(["\n    width: 94px;\n    height: 54px;\n    position: absolute;\n    bottom: 5px;\n    left: 57%;\n    transform: translate(-50%, 50%);\n"]))),Nr=(0,Z.ZP)(Ei)(Ge||(Ge=(0,b.Z)(["\n    width: 51px;\n    height: 49px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    pointer-events: auto;\n"]))),Ir=(0,Z.F4)(Ve||(Ve=(0,b.Z)(["\n    0% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n    20% {        transform: translate(calc(-50% + 30px), calc(50% + 0px)) rotate(-30deg) scale(1);    }\n    100% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n"]))),Yr=(0,Z.ZP)(Ei)(qe||(qe=(0,b.Z)(["\n    width: 45px;\n    height: 39px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n"])),Ir),Dr=(0,Z.F4)(Je||(Je=(0,b.Z)(["\n    0% {\n        opacity: 1;\n        transform: rotate(-1deg) scale(1.05);\n    }\n    100% {\n        opacity: 0.7;\n        transform: rotate(1deg) scale(1);\n    }\n"]))),Rr=(0,Z.ZP)(Ei)(Xe||(Xe=(0,b.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -50px;\n    left: -45px;\n    transform-origin: 5% 5%;\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Dr),Ur=(0,Z.ZP)(Ei)(Qe||(Qe=(0,b.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -60px;\n    right: -25px;\n    transform-origin: 95% 5%;\n    animation-name: ",";\n    animation-duration: 2.3s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Dr),zr=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_2")}),[]);return(0,st.jsxs)(yr,{children:[(0,st.jsx)(br,{src:vt(g.dN.onboarding.step2Bottom)}),(0,st.jsxs)(Fr,{children:[(0,st.jsx)(Wr,{children:(0,st.jsx)(Hr,{src:vt(g.dN.onboarding.ballBg),children:(0,st.jsx)(Vr,{src:vt(g.dN.onboarding.ball1)})})}),(0,st.jsx)(Wr,{children:(0,st.jsx)(Hr,{src:vt(g.dN.onboarding.ballBg),children:(0,st.jsx)(Vr,{src:vt(g.dN.onboarding.ball2),animationDelay:"0.5s"})})}),(0,st.jsx)(Wr,{children:(0,st.jsx)(Hr,{src:vt(g.dN.onboarding.ballBg),children:(0,st.jsx)(Vr,{src:vt(g.dN.onboarding.ball3),animationDelay:"1s"})})}),(0,st.jsx)(Wr,{children:(0,st.jsx)(Hr,{src:vt(g.dN.onboarding.ballBg),children:(0,st.jsx)(Vr,{src:vt(g.dN.onboarding.ball4),animationDelay:"1.5s"})})})]}),(0,st.jsx)(xr,{bottom:"215px",children:(0,st.jsxs)(hr,{children:[(0,st.jsx)(gr,{fontSize:"16px",fontFamily:"iCielUniSans",children:"Th\u1eed th\xe1ch \u0111\u1ea7u ti\xean"}),(0,st.jsx)(gr,{children:"L\xe0m quen \xe2m nh\u1ea1c"})]})}),(0,st.jsx)(qr,{src:vt(g.dN.onboarding.step2CtaBtn),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep()),n((0,qo.hU)(1)),at.map.reload(1),c.emit(l.Navigate,g.dI.MainGame)},children:(0,st.jsx)(Si,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},Fr=Z.ZP.div(Ke||(Ke=(0,b.Z)(["\n    position: absolute;\n    bottom: 145px;\n    right: 10px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),Wr=Z.ZP.div($e||($e=(0,b.Z)(["\n    width: 56px;\n    height: 15px;\n    margin: 35px 0 0;\n    box-shadow: 0 0 0 0.5px #ffd8eb, inset 0 0 0 0.5px #ffd8eb, 0 0 0 1px #fff6fa, inset 0 0 0 1px #fff6fa, 0 0 4px 2px #ff89d5, 0 0 2px 1px rgba(255, 255, 255, 0.5);\n    border-radius: 50%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Hr=(0,Z.ZP)(Ei)(ni||(ni=(0,b.Z)(["\n    width: 48px;\n    height: 40px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    margin-bottom: 25px;\n"]))),Gr=(0,Z.F4)(ti||(ti=(0,b.Z)(["\n    0% {transform: translateY(0px)}\n    100% {transform: translateY(-3px)}\n"]))),Vr=(0,Z.ZP)(Ei)(ei||(ei=(0,b.Z)(["\n    width: 40px;\n    height: 40px;\n    margin-bottom: 28px;\n    flex: none;\n    animation-name: ",";\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n    animation-direction: alternate;\n    animation-delay: ",";\n"])),Gr,(function(n){return n.animationDelay||"unset"})),qr=(0,Z.ZP)(Ci)(ii||(ii=(0,b.Z)(["\n    width: 336px;\n    height: 46px;\n    position: absolute;\n    bottom: 41px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: auto;\n"]))),Jr=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_3")}),[]);return(0,st.jsxs)(Xr,{src:vt(g.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep())},animationDelay:"1s",children:[(0,st.jsx)(Qr,{src:vt(g.dN.MainGame.backgroundDeco1)}),(0,st.jsx)(Kr,{}),(0,st.jsx)($r,{src:vt(g.dN.onboarding.mascot)}),(0,st.jsx)(xr,{bottom:"102px",right:"16px",children:(0,st.jsx)(hr,{children:(0,st.jsx)(gr,{children:"B\u1eafn v\u1ee1 t\u1ea5t c\u1ea3 c\xe1c b\xf3ng \u0111\u1ec3 sang m\xe0n"})})})]})},Xr=(0,Z.ZP)(yr)(oi||(oi=(0,b.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"])),(function(n){return n.src})),Qr=(0,Z.ZP)(Ei)(ri||(ri=(0,b.Z)(["\n    width: 100%;\n    height: 311px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n"]))),Kr=Z.ZP.div(ai||(ai=(0,b.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n"]))),$r=(0,Z.ZP)(Ei)(si||(si=(0,b.Z)(["\n    width: 112px;\n    height: 155px;\n    position: absolute;\n    left: 7px;\n    bottom: 93px;\n"]))),na=e(3683),ta=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_4")}),[]);return(0,st.jsxs)(Sr,{src:vt(g.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep())},children:[(0,st.jsx)(wr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,st.jsx)(gr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,st.jsx)(Mr,{minHeight:"175px",children:(0,st.jsx)(ra,{src:vt(g.dN.onboarding.ob4)})})}),(0,st.jsx)(Tr,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ea=(0,Z.F4)(li||(li=(0,b.Z)(["\n    0%{ opacity: 0; }\n    5%{ opacity: 1; }\n    40%{ opacity: 1; }\n    45%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),ia=(0,Z.F4)(ci||(ci=(0,b.Z)(["\n    0%{ transform: translate(0, 0); }\n    20%{ transform: translate(0, 0); }\n    40%{ transform: translate(-67px, -128px); }\n    100%{ transform: translate(-67px, -128px); }\n"]))),oa=(0,Z.F4)(ui||(ui=(0,b.Z)(["\n    0%{ opacity: 0; }\n    40%{ opacity: 0; }\n    50%{ opacity: 1; }\n    70%{ opacity: 1; }\n    80%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),ra=(0,Z.ZP)(na.Z)(hi||(hi=(0,b.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #dynamic-objects{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n    #dynamic-objects #move-ball{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n\n        position: relative;\n    }\n\n    #dynamic-objects-2{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n\n"])),ea,ia,oa),aa=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_5")}),[]);return(0,st.jsxs)(Sr,{src:vt(g.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep())},animationDelay:"4s",children:[(0,st.jsx)(wr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,st.jsx)(gr,{children:"Nh\u1ea5n gi\u1eef \u0111i\u1ec1u ch\u1ec9nh h\u01b0\u1edbng m\u0169i t\xean v\xe0 th\u1ea3 tay \u0111\u1ec3 b\u1eafn"}),children:(0,st.jsx)(Mr,{minHeight:"175px",children:(0,st.jsx)(fa,{src:vt(g.dN.onboarding.ob5)})})}),(0,st.jsx)(Tr,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},sa=5.5,la=(0,Z.F4)(di||(di=(0,b.Z)(["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(340px,-184px);}\n    ","%        {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"],["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(340px,-184px);}\n    ","\\%        {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"])),3.6363636363636367,7.272727272727273,40,50.90909090909091,54.54545454545454,60,65.45454545454545),ca=(0,Z.F4)(pi||(pi=(0,b.Z)(["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"],["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,36.36363636363637,40),ua=(0,Z.F4)(fi||(fi=(0,b.Z)(["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"],["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,60,65.45454545454545),ha=(0,Z.F4)(mi||(mi=(0,b.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),25.454545454545453,29.090909090909093,60,65.45454545454545),da=(0,Z.F4)(gi||(gi=(0,b.Z)(["\n    0%                                  {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),60,65.45454545454545),pa=(0,Z.F4)(xi||(xi=(0,b.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),63.63636363636363,69.0909090909091,81.81818181818183,87.27272727272727),fa=(0,Z.ZP)(na.Z)(vi||(vi=(0,b.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #ob5-move-ball {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform: translate(0px, 0px);\n    }\n    #ob5-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 83% 130%;\n    }\n    #ob5-path {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 0% 135%;\n    }\n    #ob5-dynamic-objects {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n    #ob5-dynamic-objects-3 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n    #ob5-dynamic-objects-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n"])),la,sa,ca,sa,ua,sa,ha,sa,da,sa,pa,sa),ma=function(){var n=k();(0,i.useEffect)((function(){console.log("OnboardingStep_6")}),[]);return(0,st.jsxs)(Sr,{src:vt(g.dN.MainGame.background),onClick:function(){console.log("on next step"),n(ur.z.actions.nextStep())},animationDelay:"4s",children:[(0,st.jsx)(wr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,st.jsx)(gr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,st.jsx)(Mr,{minHeight:"155px",children:(0,st.jsx)(Za,{src:vt(g.dN.onboarding.ob6)})})}),(0,st.jsx)(Tr,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ga=(0,Z.F4)(yi||(yi=(0,b.Z)(["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"],["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"])),7.5,15,22.5,50,.575*100,65,72.5),xa=(0,Z.F4)(bi||(bi=(0,b.Z)(["\n    0%                              {transform: rotate(0deg)}\n    ","%       {transform: rotate(0deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"],["\n    0%                              {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"])),10,20,60,70),va=(0,Z.F4)(wi||(wi=(0,b.Z)(["\n    0%                              {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"],["\n    0%                              {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"])),10,20,60,70),ya=(0,Z.F4)(Zi||(Zi=(0,b.Z)(["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"],["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"])),10,20,60,70),ba=(0,Z.F4)(Pi||(Pi=(0,b.Z)(["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"],["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"])),10,20,60,70),wa=(0,Z.F4)(ki||(ki=(0,b.Z)(["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"],["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"])),10,20,60,70),Za=(0,Z.ZP)(na.Z)(_i||(_i=(0,b.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: 20px;\n    margin-bottom: -5px;\n\n    #ob6-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        transform-origin: 85% 257%;\n        /* transform: translate(-228px,-59px) rotate(0deg) scale(1.3); */\n    }\n    #ob6-ball-1-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-2-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-1 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-ball-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-circle {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: cubic-bezier(0, 0.5, 0.7, 1.1);\n        transform-origin: 57.5% 214%;\n        /* transform: translate(-52px, 27px) rotate(0deg); */\n    }\n"])),ga,4,xa,4,va,4,ya,4,ba,4,wa,4),Pa=function(n){var t,e=k(),o=n.steps,r=n.checkLevelId,a=_((function(n){return n.onboarding.currentStep})),s=o.find((function(n){return n==a})),l=_((function(n){return n.user.profile.chapters})),c=null===l||void 0===l||null===(t=l.map((function(n){return n.levels.find((function(n){return n.id==r}))})).filter((function(n){return n})))||void 0===t?void 0:t[0],u=void 0!=s&&((null===c||void 0===c?void 0:c.highScore)||0)<=0;return(0,i.useEffect)((function(){e(ur.z.actions.setStep((null===o||void 0===o?void 0:o[0])||0))}),[]),console.log("Onboarding visible: ",u),(0,st.jsx)(st.Fragment,{children:u&&(0,st.jsx)(ka,{step:s})})},ka=function(n){var t=n.step;return(0,st.jsx)(st.Fragment,{children:[null,(0,st.jsx)(Or,{}),(0,st.jsx)(zr,{}),(0,st.jsx)(Jr,{}),(0,st.jsx)(ta,{}),(0,st.jsx)(aa,{}),(0,st.jsx)(ma,{})][t]})};function _a(n){var t=w(),e=_((function(n){return n.mainGame.currentGame.level}));(0,i.useEffect)((function(){return c.on(l.ON_BACK_KEY,(function(){t(-1)})),function(){c.removeAllListeners(l.ON_BACK_KEY)}}),[]);return(0,st.jsxs)(Ta,{children:[(0,st.jsx)(lt,{}),(0,st.jsx)(lo,{}),(0,st.jsx)(ho,{}),(0,st.jsx)(Yo,{}),(0,st.jsx)(Ro,{}),(0,st.jsx)(Jo,{}),(0,st.jsx)(er,{}),function(){switch(e){case 1:return(0,st.jsx)(Pa,{steps:[3,4],checkLevelId:e});case 3:return(0,st.jsx)(Pa,{steps:[5],checkLevelId:e});case 5:return(0,st.jsx)(Pa,{steps:[6],checkLevelId:e});default:return null}}()]})}var ja,Ta=Z.ZP.div(ji||(ji=(0,b.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"])));function Ea(){var n=(0,i.useRef)(null),t=(0,r.s0)(),e=(0,i.useState)(!1),o=(0,kn.Z)(e,2),a=o[0],s=o[1],u=(0,i.useState)(""),h=(0,kn.Z)(u,2),d=h[0],p=h[1],f=(0,i.useState)({}),m=(0,kn.Z)(f,2),g=m[0],x=m[1];(0,i.useEffect)((function(){return c.on(l.Navigate,v),function(){c.removeAllListeners(l.Navigate)}}),[]),(0,i.useEffect)((function(){a&&(t(d,g),A.ZP.fromTo(n.current,{opacity:1},{opacity:0,duration:.5,onComplete:function(){s(!1)}}))}),[a,d]);var v=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(n),x(t),s(!0)};return a?(0,st.jsx)(Sa,{ref:n}):null}var La,Ca,Sa=Z.ZP.div(ja||(ja=(0,b.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000;\n    z-index: 9999;\n"]))),Ma=function(n){var t=n.onStart,e=n.onEnd,o=n.onInitDom,r=n.onResume,a=n.onPause,s=(0,i.useRef)(null);return(0,i.useEffect)((function(){s.current&&(null===o||void 0===o||o(s.current))}),[s,o]),(0,i.useEffect)((function(){return null===t||void 0===t||t(),null===r||void 0===r||r(),c.on(l.On_RESUME,r),c.on(l.ON_RESIZE,r),c.on(l.On_PAUSE,a),function(){null===e||void 0===e||e(),null===a||void 0===a||a(),c.off(l.On_RESUME,r),c.off(l.ON_RESIZE,r),c.off(l.On_PAUSE,a)}}),[e,a,r,t]),(0,st.jsx)(Oa,{ref:s})},Oa=Z.ZP.div(La||(La=(0,b.Z)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    overflow: hidden;\n"])));function Aa(n){var t=(0,i.useState)(Math.max(n.countdown,0)),e=(0,kn.Z)(t,2),o=e[0],r=e[1],a=vt(g.dN.worldMap.timeBubble);(0,i.useEffect)((function(){r(Math.max(n.countdown,0));var t=setInterval((function(){r((function(n){return Math.max(n-1e3,0)}))}),1e3);return function(){clearInterval(t)}}),[n.countdown]);var s=Nn.msToTime(o);return(0,st.jsx)(ps,{src:a,marginTop:n.marginTop,children:s})}var Ba,Na,Ia,Ya,Da,Ra,Ua,za,Fa,Wa,Ha,Ga,Va,qa,Ja,Xa,Qa,Ka,$a,ns,ts,es,is,os,rs,as,ss,ls,cs,us,hs,ds,ps=Z.ZP.div(Ca||(Ca=(0,b.Z)(["\n    width: 80px;\n    height: 28px;\n\n    border-image-source: url(",");\n    border-image-slice: 6 0 fill;\n    border-image-width: 3px 0;\n\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    /* align-items: center; */\n    padding-top: 8px;\n\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: bold;\n    color: #681c8d;\n\n    position: absolute;\n    left: 50%;\n    top: ",";\n    transform: translateX(-50%);\n"])),(function(n){return n.src}),(function(n){return n.marginTop})),fs=function(){var n=_((function(n){return n.user.profile.hearts})),t=_((function(n){return n.worldMap.player.heartReloadTime})),e=_((function(n){return n.user.profile.heartLast})),i=_((function(n){return n.worldMap.player.heartMax})),o=k();return(0,st.jsxs)(ms,{src:vt(g.dN.worldMap.topBg),children:[(0,st.jsx)(gs,{src:vt(g.dN.worldMap.optionBtn),onClick:function(){console.log("onClickOptionBtn"),o(Qn.fp.actions.setShowSettingPopup(!0))}}),(0,st.jsxs)(xs,{children:[(0,st.jsx)(vs,{src:vt(g.dN.general.heartIcon),children:(0,st.jsx)(ys,{children:n})}),(0,st.jsx)(bs,{children:n===i?"\u0110\u1ea7y":"+1"}),(0,st.jsx)(ws,{src:vt(g.dN.general.plusIcon),onClick:function(){console.log("onClickPlusIcon"),o(n===i?Qn.fp.actions.setShowFullHeartPopup(!0):Qn.fp.actions.setShowRecoveringHeartPopup(!0))}}),(0,st.jsx)(Aa,{countdown:t-(Date.now()-e),marginTop:"23px"})]})]})},ms=(0,Z.ZP)(Ei)(Ba||(Ba=(0,b.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 144px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n"]))),gs=(0,Z.ZP)(Ei)(Na||(Na=(0,b.Z)(["\n    position: absolute;\n    right: 16px;\n    top: 53px;\n\n    width: 32px;\n    height: 32px;\n    pointer-events: auto;\n"]))),xs=Z.ZP.div(Ia||(Ia=(0,b.Z)(["\n    position: absolute;\n    left: 25px;\n    top: 53px;\n    height: 30px;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n\n    border-radius: 45px 34px 34px 15px;\n    background-color: rgba(36, 36, 36, 0.6);\n    pointer-events: auto;\n"]))),vs=(0,Z.ZP)(Ei)(Ya||(Ya=(0,b.Z)(["\n    width: 40px;\n    height: 40px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-left: -15px;\n    margin-top: -3px;\n"]))),ys=Z.ZP.div(Da||(Da=(0,b.Z)(["\n    -webkit-text-stroke: 1px rgba(149, 56, 56, 0.63);\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n    margin-top: 6px;\n"]))),bs=Z.ZP.div(Ra||(Ra=(0,b.Z)(["\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    min-width: 40px;\n    margin-top: 3px;\n    margin-left: 3px;\n"]))),ws=(0,Z.ZP)(Ei)(Ua||(Ua=(0,b.Z)(["\n    width: 24px;\n    height: 24px;\n"]))),Zs=function(){var n=_((function(n){return n.worldMap.showSettingPopup}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Ps,{})})},Ps=function(){var n=k();return(0,st.jsx)(So,{title:"Thi\u1ebft l\u1eadp",ctaText:"Tho\xe1t tr\xf2 ch\u01a1i",onClose:function(){n(Qn.fp.actions.setShowSettingPopup(!1))},onCta:function(){console.log("EXIT GAME"),n(Qn.fp.actions.setShowSettingPopup(!1)),n((0,qo.g_)()),y.x.request(y.w.dismiss)}})},ks=function(n){var t=n.target,e=t.type,i=t.quantity,o=t.ball,r=vt(Nn.getTargetTypeImageUrl(e,o)||"");return(0,st.jsxs)(_s,{children:[(0,st.jsx)(js,{src:r}),(0,st.jsx)(Ts,{children:(0,st.jsx)(Es,{children:i})}),(0,st.jsx)(Ls,{src:vt(g.dN.general.targetItemBg)})]})},_s=Z.ZP.div(za||(za=(0,b.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),js=(0,Z.ZP)(Ei)(Fa||(Fa=(0,b.Z)(["\n    width: 36px;\n    height: 36px;\n"]))),Ts=Z.ZP.div(Wa||(Wa=(0,b.Z)(["  \n    background-color: rgba(0, 0, 0, 0.4);\n    border-radius: 10px;\n    min-width: 30px;\n"]))),Es=Z.ZP.div(Ha||(Ha=(0,b.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin: 1px 6px -1px;\n"]))),Ls=(0,Z.ZP)(Ei)(Ga||(Ga=(0,b.Z)(["\n    width: 58px;\n    height: 46px;\n    margin-top: -37px;\n    position: relative;\n    z-index: -1;\n"]))),Cs=function(n){var t=n.marginTop,e=vt(g.dN.general.levelTargetBg),i=_((function(n){return n.worldMap.currentLevel})).id,o=_((function(n){return n.mainGame.config})),r=zn.findLevelConfig(o,i);return(0,st.jsxs)(Ss,{marginTop:t,children:[(0,st.jsx)(Ms,{src:e}),(0,st.jsxs)(As,{children:[(0,st.jsx)(Bs,{src:e}),(0,st.jsx)(Ns,{children:"B\u1eafn v\u1ee1 to\xe0n b\u1ed9 b\xf3ng m\xe0u"}),(0,st.jsx)(Is,{children:function(){var n;return null===r||void 0===r||null===(n=r.targets)||void 0===n?void 0:n.map((function(n,t){return(0,st.jsx)(ks,{target:n},t)}))}()})]}),(0,st.jsx)(Os,{src:e})]})},Ss=Z.ZP.div(Va||(Va=(0,b.Z)(["\n    width: 292px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Ms=(0,Z.ZP)(Ei)(qa||(qa=(0,b.Z)(["\n    width: 100%;\n    height: 50px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),Os=(0,Z.ZP)(Ms)(Ja||(Ja=(0,b.Z)(["\n    height: 30px;\n    background-position: 0px 100%;\n"]))),As=Z.ZP.div(Xa||(Xa=(0,b.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),Bs=(0,Z.ZP)(Ei)(Qa||(Qa=(0,b.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% ","%;\n    background-position: 0px ","%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    bottom: 0px;\n    z-index: -1;\n"])),95/15*100,57.5/95*100),Ns=Z.ZP.div(Ka||(Ka=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: -45px;\n"]))),Is=Z.ZP.div($a||($a=(0,b.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 15px;\n    margin-bottom: -31px;\n"]))),Ys=function(){var n=_((function(n){return n.worldMap.showPlayNewLevelPopup}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Ds,{})})},Ds=function(){var n=k(),t=_((function(n){return n.worldMap.currentLevel})).id;return(0,st.jsxs)(xo,{title:"M\xe0n ".concat(t),onClose:function(){console.log("onClose"),n(Qn.fp.actions.setShowPlayNewLevelPopup(!1))},marginBottom:"20vh",children:[(0,st.jsx)(Cs,{}),(0,st.jsx)(Ci,{src:vt(g.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Qn.fp.actions.setShowPlayNewLevelPopup(!1)),n((0,qo.hU)(t)),at.map.reload(t),c.emit(l.Navigate,g.dI.MainGame)},children:(0,st.jsx)(Si,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},Rs=Z.ZP.div(ns||(ns=(0,b.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),Us=(0,Z.ZP)(Ei)(ts||(ts=(0,b.Z)(["\n    width: 72px;\n    height: 72px;\n    position: relative;\n    transform: translate(",") scale(",") rotate(",");\n"])),(function(n){return n.translateXY}),(function(n){return n.scale}),(function(n){return n.rotate})),zs=Z.ZP.div(es||(es=(0,b.Z)(["\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: 10px;\n"]))),Fs=Z.ZP.div(is||(is=(0,b.Z)(["\n    -webkit-text-stroke: 2px rgba(255, 255, 255, 0.55);\n    background-image: linear-gradient(to bottom, #681c8d 50%, #e74cdf 99%);\n    font-family: iCielUniSans;\n    font-size: 28px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    -webkit-background-clip: text;\n    background-clip: text;\n    -webkit-text-fill-color: transparent;\n"]))),Ws=(0,Z.ZP)(Ei)(os||(os=(0,b.Z)(["\n    width: 108px;\n    height: 40px;\n    margin-top: -4px;\n"]))),Hs=((0,Z.ZP)(Ei)(rs||(rs=(0,b.Z)(["\n    width: 253px;\n    height: 111px;\n    margin-top: -25px;\n"]))),Z.ZP.div(as||(as=(0,b.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: -108px;\n"]))),function(){var n=_((function(n){return n.worldMap.showPlayLevelAgainPopup}));return(0,st.jsx)(st.Fragment,{children:n&&(0,st.jsx)(Gs,{})})}),Gs=function(){var n=k(),t=_((function(n){return n.worldMap.currentLevel})),e=t.id,i=t.stars,o=t.highScore,r=vt(g.dN.general.bigStarAble);return(0,st.jsxs)(xo,{title:"M\xe0n ".concat(e),onClose:function(){console.log("onClose"),n(Qn.fp.actions.setShowPlayLevelAgainPopup(!1))},children:[(0,st.jsxs)(Rs,{children:[(0,st.jsx)(Us,{src:vt(g.dN.general.bigStarDisable),scale:.8,rotate:"-20deg",translateXY:"8px, 18px",children:i>=1&&(0,st.jsx)(qs,{src:r,animationDelay:"0.3s"})}),(0,st.jsx)(Us,{src:vt(g.dN.general.bigStarDisable),scale:1,rotate:"0deg",translateXY:"0px, 0px",children:i>=2&&(0,st.jsx)(qs,{src:r,animationDelay:"0.5s"})}),(0,st.jsx)(Us,{src:vt(g.dN.general.bigStarDisable),scale:.8,rotate:"20deg",translateXY:"-8px, 18px",children:i>=3&&(0,st.jsx)(qs,{src:r,animationDelay:"0.7s"})})]}),(0,st.jsx)(zs,{children:"\u0110i\u1ec3m"}),(0,st.jsx)(Fs,{children:Nn.convertNumberToScoreString(o)}),(0,st.jsx)(Ws,{src:vt(g.dN.general.scoreBg)}),(0,st.jsx)(Cs,{marginTop:"-15px"}),(0,st.jsx)(Ci,{src:vt(g.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Qn.fp.actions.setShowPlayLevelAgainPopup(!1)),n((0,qo.hU)(e)),at.map.reload(e),c.emit(l.Navigate,g.dI.MainGame)},children:(0,st.jsx)(Si,{fontSize:"22px",children:"Ch\u01a1i l\u1ea1i"})})]})},Vs=(0,Z.F4)(ss||(ss=(0,b.Z)(["\n    0%      {transform: translate(-50%, -50%) scale(0)}\n    100%    {transform: translate(-50%, -50%) scale(1)}\n"]))),qs=(0,Z.ZP)(Ei)(ls||(ls=(0,b.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0);\n    animation-name: ",";\n    animation-duration: 0.4s;\n    animation-delay: ",";\n    animation-fill-mode: forwards;\n    animation-timing-function: cubic-bezier(0, 1.5, 0.5, 1.5);\n"])),Vs,(function(n){return n.animationDelay||"unset"}));function Js(){var n=_((function(n){return n.worldMap.player.heartReloadTime})),t=_((function(n){return n.worldMap.showFullHeartPopup})),e=k(),i=vt(g.dN.worldMap.fullHeart);return t?(0,st.jsx)(xo,{title:"T\xecnh \u0111\u1ea7y tim",onClose:function(){e(Qn.fp.actions.setShowFullHeartPopup(!1))},children:(0,st.jsxs)(tl,{children:[(0,st.jsx)(el,{src:i}),(0,st.jsx)(il,{children:(0,st.jsxs)(ol,{children:["Tim c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u1ea7y. S\u1ed1 tim t\u01b0\u01a1ng \u1ee9ng v\u1edbi s\u1ed1 l\u01b0\u1ee3t ch\u01a1i. M\u1ed7i ",n/36e5," gi\u1edd s\u1ebd h\u1ed3i l\u1ea1i 1 tim"]})})]})}):null}var Xs,Qs,Ks,$s,nl,tl=Z.ZP.div(cs||(cs=(0,b.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),el=(0,Z.ZP)(Ei)(us||(us=(0,b.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),il=Z.ZP.div(hs||(hs=(0,b.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),ol=Z.ZP.div(ds||(ds=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"])));function rl(){var n=_((function(n){return n.worldMap.player.heartReloadTime})),t=_((function(n){return n.user.profile.heartLast})),e=_((function(n){return n.worldMap.showRecoveringHeartPopup})),i=k(),o=vt(g.dN.worldMap.recoveringHeart);return e?(console.log("heartReload: ",n,"heartLast: ",t),(0,st.jsx)(xo,{title:"Tim \u0111ang h\u1ed3i",onClose:function(){i(Qn.fp.actions.setShowRecoveringHeartPopup(!1))},children:(0,st.jsxs)(ll,{children:[(0,st.jsx)(cl,{src:o,children:(0,st.jsx)(Aa,{countdown:n-(Date.now()-t),marginTop:"77px"})}),(0,st.jsx)(ul,{children:(0,st.jsxs)(hl,{children:["Tim c\u1ee7a b\u1ea1n \u0111ang \u0111\u01b0\u1ee3c h\u1ed3i. S\u1ed1 tim t\u01b0\u01a1ng \u1ee9ng v\u1edbi s\u1ed1 l\u01b0\u1ee3t ch\u01a1i. M\u1ed7i ",n/36e5," gi\u1edd s\u1ebd h\u1ed3i l\u1ea1i 1 tim"]})})]})})):null}var al,sl,ll=Z.ZP.div(Xs||(Xs=(0,b.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),cl=(0,Z.ZP)(Ei)(Qs||(Qs=(0,b.Z)(["\n    width: 283px;\n    height: 108px;\n\n    position: relative;\n"]))),ul=Z.ZP.div(Ks||(Ks=(0,b.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),hl=Z.ZP.div($s||($s=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),dl=(Z.ZP.div(nl||(nl=(0,b.Z)(["\n    width: 80px;\n    height: 28px;\n\n    border-image-source: url(",");\n    border-image-slice: 6 0 fill;\n    border-image-width: 3px 0;\n\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    /* align-items: center; */\n    padding-top: 8px;\n\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: bold;\n    color: #681c8d;\n\n    position: absolute;\n    left: 50%;\n    top: 77px;\n    transform: translateX(-50%);\n"])),(function(n){return n.src})),function(){var n=_((function(n){return n.worldMap.imagesDefine})),t=_((function(n){return n.worldMap.chapters})),e=_((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.currentChapter})),o=(0,i.useState)(!1),r=(0,kn.Z)(o,2),a=r[0],s=r[1];(0,i.useEffect)((function(){n&&t&&e?(at.setChapters(n,t,e),s(!0)):s(!1)}),[n,t,e]);return(0,st.jsxs)(Ti,{children:[a&&(0,st.jsx)(Ma,{onStart:function(){at.startWorldMap()},onEnd:function(){at.endWorldMap()},onInitDom:function(n){at.initDom(n)},onResume:function(){at.resume()},onPause:function(){at.pause()}}),(0,st.jsx)(fs,{}),(0,st.jsx)(Zs,{}),(0,st.jsx)(Ys,{}),(0,st.jsx)(Hs,{}),(0,st.jsx)(Js,{}),(0,st.jsx)(rl,{}),(0,st.jsx)(Pa,{steps:[1,2],checkLevelId:1})]})}),pl=function(n){var t=(0,i.useState)(!1),e=(0,kn.Z)(t,2),o=e[0],r=e[1],a=(0,i.useRef)(null);return(0,st.jsx)(fl,{ref:a,onClick:function(){o||a.current&&(r(!0),A.ZP.timeline().to(a.current,{scale:1.1,duration:.05}).to(a.current,{scale:1,duration:.05}).then((function(){r(!1)})).then(n.onClick))},children:n.children})},fl=Z.ZP.div(al||(al=(0,b.Z)(["\n    min-height: 42px;\n    max-height: 42px;\n\n    padding: 5px 10px;\n    box-sizing: border-box;\n\n    background-color: white;\n    color: black;\n    font-size: 13px;\n\n    display: flex;\n    text-align: center;\n    align-items: center;\n\n    border-radius: 20px;\n\n    position: relative;\n"])));function ml(n){return(0,st.jsx)(pl,{onClick:n.onClick,children:n.children})}function gl(n){var t,e=k();return(0,st.jsx)(vl,{src:null===(t=en.colors[n.color])||void 0===t?void 0:t.baseTexture.cacheId,onClick:function(){e(Zn.J.actions.setBulletColor(n.num-1))},children:n.num})}var xl,vl=(0,Z.ZP)(Mi)(sl||(sl=(0,b.Z)(["\n    width: 34px;\n    height: 34px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    font-size: 12px;\n    font-weight: bold;\n    color: white;\n"]))),yl=e(8925);function bl(){var n=_((function(n){return n.colorTool.showLoadBase64Popup})),t=k(),e=function(){t(Zn.J.actions.setShowLoadBase64Popup(!1))};return n?(0,st.jsxs)(xo,{title:"Load Map From Base64",onClose:e,children:[(0,st.jsx)(Sl,{autoComplete:"off",onChange:Zl,placeholder:"Input base64 string here"}),(0,st.jsx)(ml,{onClick:function(){at.map.colorTool.loadFromBase64(wl),e()},children:"Load"})]}):null}var wl=void 0;function Zl(n){n.target.value&&(wl=n.target.value)}var Pl,kl,_l,jl,Tl,El,Ll,Cl,Sl=Z.ZP.input(xl||(xl=(0,b.Z)(["\n    width: 90%;\n    height: 30px;\n\n    text-align: center;\n\n    margin-bottom: 20px;\n"])));function Ml(n){var t=_((function(n){return n.colorTool.bubbleCount})),e=_((function(n){return n.colorTool.bullets})),o=(w(),k());(0,i.useLayoutEffect)((function(){o(Zn.J.actions.initCacheLevel(void 0))}),[]);var r=function(){return e.map((function(n,t){return(0,st.jsx)(gl,{num:t+1,color:n},t)}))},a=(0,st.jsxs)(ql,{children:["Choose level to edit",(0,st.jsxs)(Jl,{children:[(0,st.jsx)(ml,{onClick:Nl,children:"Choose"}),(0,st.jsx)(Hl,{id:"url",type:"number",autoComplete:"off",onChange:Bl,defaultValue:Al})]})]});return void 0===Ol?(0,st.jsxs)(Wl,{children:[(0,st.jsx)(lt,{}),(0,st.jsx)(Ql,{children:r()}),(0,st.jsx)(Vl,{children:a})]}):(0,st.jsxs)(Wl,{children:[(0,st.jsx)(lt,{}),(0,st.jsxs)(Gl,{children:[(0,st.jsx)(ml,{onClick:Il,left:20,children:"Add Line"}),(0,st.jsx)(ml,{onClick:Yl,left:90,children:"Trim Lines"}),(0,st.jsx)(ml,{onClick:function(){o(Zn.J.actions.addBullet(5))},left:160,children:"Add 5 Bullet"}),(0,st.jsx)(ml,{onClick:function(){o(Zn.J.actions.setTrimBullet(void 0))},left:230,children:"Trim Bullet"})]}),(0,st.jsx)(Ql,{children:r()}),(0,st.jsxs)(Vl,{children:[a,(0,st.jsxs)(ml,{onClick:function(){var n,t=[],e=at.map.colorTool.maxHeight,i=(0,O.Z)(at.map.data);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.sprite.y>e||t.push(10*r.type+r.color)}}catch(l){i.e(l)}finally{i.f()}var a=N.Z.getState().colorTool.bullets.filter((function(n){return n>0})),s=an(t,a);o(Zn.J.actions.addCacheLevel({levelId:Al,base64:s})),window.isSecureContext&&navigator.clipboard&&(navigator.clipboard.writeText(s),window.alert("Copied"))},children:["Save & Copy",(0,st.jsxs)(Xl,{children:["Bubbles: ",t]})]}),(0,st.jsx)(ml,{onClick:function(){var n=at.map.colorTool.drawMapForCapture();(0,yl.saveAs)(n,"level".concat(Al,".jpg"))},children:"Export Map"}),(0,st.jsx)(ml,{onClick:function(){o(Zn.J.actions.setShowLoadBase64Popup(!0))},children:"Load Base64"})]}),(0,st.jsx)(bl,{})]})}var Ol=void 0,Al=void 0;function Bl(n){n.target.value&&(Ol=parseInt(n.target.value))}function Nl(){void 0!==Ol&&Ol!==Al&&(at.map.colorTool.loadLevel(Ol),Al=Ol)}function Il(){at.map.colorTool.addEmptyLine()}function Yl(){at.map.colorTool.trimLine()}var Dl,Rl,Ul,zl,Fl,Wl=Z.ZP.div(Pl||(Pl=(0,b.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),Hl=Z.ZP.input(kl||(kl=(0,b.Z)(["\n    width: 50px;\n    height: 30px;\n\n    text-align: center;\n"]))),Gl=Z.ZP.div(_l||(_l=(0,b.Z)(["\n    position: fixed;\n    top: 0px;\n\n    padding: 20px;\n\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n"]))),Vl=Z.ZP.div(jl||(jl=(0,b.Z)(["\n    position: fixed;\n    bottom: 0px;\n\n    width: 100%;\n    padding: 10px 10px;\n    box-sizing: border-box;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    gap: 10px;\n\n    font-size: 13px;\n"]))),ql=Z.ZP.div(Tl||(Tl=(0,b.Z)(["\n    color: white;\n    text-align: center;\n\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n"]))),Jl=Z.ZP.div(El||(El=(0,b.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),Xl=Z.ZP.div(Ll||(Ll=(0,b.Z)(["\n    color: white;\n    position: absolute;\n    top: -30px;\n"]))),Ql=Z.ZP.div(Cl||(Cl=(0,b.Z)(["\n    width: 90%;\n    height: 34px;\n\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    /* gap: 2px; */\n    align-content: flex-start;\n\n    overflow-x: scroll;\n    overflow-y: hidden;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    position: absolute;\n    bottom: 200px;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 1px dashed white;\n"]))),Kl=function(){var n=_((function(n){return n.user.profile})),t=_((function(n){return n.mainGame.config}));return(0,i.useEffect)((function(){console.log("[LoadingView] ",n,t),n&&"{}"!=JSON.stringify(n)&&t&&setTimeout((function(){c.emit(l.Navigate,g.dI.WorldMap,{replace:!0})}),100)}),[n,t]),(0,st.jsx)($l,{children:(0,st.jsx)(nc,{children:"Loading..."})})},$l=Z.ZP.div(Dl||(Dl=(0,b.Z)(["\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    top: 0;\n    left: 0;\n    background-color: #fff;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),nc=Z.ZP.div(Rl||(Rl=(0,b.Z)(["\n    font-family: SFProText;\n    font-size: 20px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),tc=e(5703),ec=function(){var n=_((function(n){return n.popup.popupErrorQueues}));return(0,st.jsx)(st.Fragment,{children:(null===n||void 0===n?void 0:n.length)>0&&(0,st.jsx)(ic,{errorInfo:n[0]})})},ic=function(n){var t=k(),e=n.errorInfo,o=e.title,r=e.desc,a=e.bannerUrl,s=e.onCloseClick,l=e.cta1Text,c=e.onCta1Click,u=e.cta2Text,h=e.onCta2Click,d=(0,i.useState)(!0),p=(0,kn.Z)(d,2),f=p[0],m=p[1],x=vt(a),v=function(n){f&&(m(!1),null===n||void 0===n||n(),setTimeout((function(){t(tc.k.actions.removeFirstErrorQueue()),m(!0)}),500))};return(0,st.jsxs)(xo,{title:o,onClose:function(){v(s)},isAppear:f,children:[(0,st.jsx)(oc,{src:x}),(0,st.jsx)(rc,{children:r}),(0,st.jsxs)(ac,{children:[l&&(0,st.jsx)(Ci,{src:g.dN.general.button_2,marginTop:"15px",onClick:function(){v(c)},children:(0,st.jsx)(Si,{children:l})}),u&&(0,st.jsx)(Ci,{src:g.dN.general.button_1,marginTop:"15px",onClick:function(){v(h)},children:(0,st.jsx)(Si,{children:u})})]})]})},oc=(0,Z.ZP)(Ei)(Ul||(Ul=(0,b.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),rc=Z.ZP.div(zl||(zl=(0,b.Z)(["\n    width: 283px;\n    margin: 10px 0 0;\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),ac=Z.ZP.div(Fl||(Fl=(0,b.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n"])));function sc(n){k(),w();var t=_((function(n){return n.global.backStacks})),e=_((function(n){return n.game.setting})).sound;(0,i.useLayoutEffect)((function(){a()}),[]),(0,i.useEffect)((function(){return s(),function(){u()}}),[]),(0,i.useEffect)((function(){var n=function(n){n&&"onBackPress"==n.data&&c.emit(t.length>0?t[t.length-1]:l.ON_BACK_KEY)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]),(0,i.useEffect)((function(){v.enable=e}),[e]);var a=function(){y.x.request(y.w.stopTrace,window.traceScreenLoadId),window.onresize=h,y.x.listen("onFocusApp",d),y.x.listen("onBlurApp",p)},s=function(){y.x.request(y.w.stopTrace,window.traceScreenInterractionId),y.x.request(y.w.stopTrace,window.traceScreenGoalId),window.addEventListener("visibilitychange",f)},u=function(){window.removeEventListener("visibilitychange",f)},h=function(){c.emit(l.ON_RESIZE,window.innerWidth,window.innerHeight)};function d(){c.emit(l.On_RESUME),console.log("[App.jsx] handleFocusMiniApp")}function p(){console.log("[App.jsx] handleBlurMiniApp"),v.pauseBgMusic(),c.emit(l.On_PAUSE)}function f(n){"visible"===window.document.visibilityState?d():p()}return(0,st.jsxs)(o.VK,{children:[(0,st.jsxs)(r.Z5,{children:[(0,st.jsx)(r.AW,{path:"/*",element:(0,st.jsx)(Ml,{})}),(0,st.jsx)(r.AW,{path:g.dI.Loading,element:(0,st.jsx)(Kl,{})}),(0,st.jsx)(r.AW,{path:g.dI.MainGame,element:(0,st.jsx)(_a,{})}),(0,st.jsx)(r.AW,{path:g.dI.WorldMap,element:(0,st.jsx)(dl,{})}),(0,st.jsx)(r.AW,{path:g.dI.ColorTool,element:(0,st.jsx)(Ml,{})})]}),(0,st.jsx)(Ea,{}),(0,st.jsx)(ec,{})]})}y.x.initTracking()},808:function(){!function(){function n(){var n=this;return new Promise((function(t){var e=new FileReader;e.onload=function(){t(e.result)},e.readAsArrayBuffer(n)}))}"File"in window&&(File.prototype.arrayBuffer=File.prototype.arrayBuffer||n),Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||n}()},5301:function(n,t,e){"use strict";n.exports=e.p+"static/media/melodyConfig.13399a228d3f5a87e064"}}]);