(self.webpackChunkmomo_game=self.webpackChunkmomo_game||[]).push([[466],{2466:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return hl}});e(808),e(9018);var i=e(7313),o=e(2135),r=e(8467),a=e(5422),s=e(4165),l=e(5861),c=e(5671),u=e(3144),h=e(2923),d=e(2749),p=e(8197),f=function(){function n(){(0,c.Z)(this,n),this.cdnUrl=""}return(0,u.Z)(n,[{key:"init",value:function(n){this.cdnUrl=n,this.resumeBgMusic(),console.log("BG MUSIC: ",this.cdnUrl)}},{key:"enable",set:function(n){var t=n?1:0;h.eq.volumeAll=t}},{key:"load",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!h.eq.exists(t)){n.next=2;break}return n.abrupt("return");case 2:return e=this.cdnUrl+t+".mp3",n.next=5,d.P.cacheFile(e);case 5:e=n.sent,h.eq.add(t,e);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"play",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i=arguments;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=i.length>1&&void 0!==i[1]&&i[1],h.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:h.eq.play(t,{loop:e});case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"playMusic",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i,o=arguments;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=o.length>1&&void 0!==o[1]&&o[1],h.eq.exists(t)){n.next=4;break}return n.next=4,this.load(t);case 4:(i=h.eq.find(p.gH.BGMusic))&&i.paused?i.resume():i.isPlaying||i.play(),i.loop=e;case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"pauseBgMusic",value:function(){h.eq.exists(p.gH.BGMusic)&&h.eq.pause(p.gH.BGMusic)}},{key:"resumeBgMusic",value:function(){this.playMusic(p.gH.BGMusic,!0)}}]),n}(),m=new f,g=e(3303),x=e(168),v=function(){return function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.r.emit(a.B.Navigate,n,t)}},y=e(244),b=e(5554),w=b.I0,Z=b.v9,k=e(2070),P=Math.min(2,window.devicePixelRatio||1),j=750,_=1334,L=function(){function n(t){var e=this;(0,c.Z)(this,n),this.app=void 0,this.options=void 0,this.canvas=void 0,this.view=void 0,this.stage=void 0,this.onUpdate=void 0,this.lastUpdateTime=Date.now(),this.fpsInterval=1e3/60,this.isPause=!1,this.update=function(){var n,t=Date.now(),i=.001*(t-e.lastUpdateTime);e.isPause||(e.app.render(),null===(n=e.onUpdate)||void 0===n||n.call(e,i));e.lastUpdateTime=t,requestAnimationFrame(e.update)},this.options=t;var i=this.options,o=i.maxFPS,r=void 0===o?45:o,a=i.trasparent,s=void 0===a?1:a,l=i.backgroundColor,u=void 0===l?0:l;this.fpsInterval=1e3/r,this.canvas=document.createElement("canvas"),this.app=new k.MxU({backgroundAlpha:s,backgroundColor:u,width:j,height:_,resolution:P,autoStart:!1,view:this.canvas}),globalThis.__PIXI_APP__=this.app,this.view=this.app.view,this.view.style.width="100%",this.view.style.height="100%",this.stage=this.app.stage,this.app.ticker.remove(this.app.render,this.app),this.update()}return(0,u.Z)(n,[{key:"init",value:function(n){if(n){n.appendChild(this.canvas),this.app.resizeTo=n,this.app.resize();var t=this.options,e=t.alignCenter,i=t.fitWidth,o=t.fitHeight,r=_/j,a=j/_,s=this.app.renderer.width,l=this.app.renderer.height,c=l/_,u=s/j;if(i===o===!0||(i&&(c=s*r/_),o&&(u=l*a/j)),this.app.stage.scale.set(u/P,c/P),e){var h=(s-j*u)/2,d=(l-_*c)/2;this.app.stage.position.set(h/P,d/P)}}}},{key:"pause",value:function(){this.app.stop(),this.isPause=!0}},{key:"resume",value:function(){this.app.start(),this.isPause=!1}},{key:"destroy",value:function(){this.app.stop(),this.app.stage.destroy(!0),this.app.destroy(!0)}}]),n}(),E=e(3433),T=e(136),M=e(9388),C=e(7762),S=e(3589),B=e(7757),O=e(5869),A=e(1413),N=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).meshes=[],n}return(0,u.Z)(e,[{key:"update",value:function(n){this.meshes.forEach((function(t){t.visible&&(t.shader.uniforms.time+=3*n)}))}},{key:"setRayPoints",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1];this.meshes.length<n.length-1;)this.addMesh();this.meshes.forEach((function(e,i){if(e.visible=i<n.length-1,i<n.length-1){var o=n[i],r=n[i+1],a=r.x-o.x,s=r.y-o.y,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));e.position.set(o.x,o.y),e.rotation=Math.atan2(s,a),e.scale.set(l,100),e.shader.uniforms.ratioxy=l/100,e.shader.uniforms.mainColor=t,e.shader.uniforms.startRatio=0==i?I.startRatio:1,e.shader.uniforms.startOffset=0==i?I.startOffset:0,e.shader.uniforms.endRatio=i>=n.length-2?I.endRatio:1,e.shader.uniforms.endOffset=i>=n.length-2?I.endOffset:0}})),B.Z.dispatch(O.X.actions.setTopOpacity(n.length<=0?1:.2))}},{key:"addMesh",value:function(){var n=(new k.ZXM).addAttribute("aVertexPosition",[0,-1,1,-1,1,1,0,1],2).addAttribute("aUvs",[0,0,1,0,1,1,0,1],2).addIndex([0,1,2,0,2,3]),t=k.exe.from(D,R,(0,A.Z)({},I)),e=new k.Kj0(n,t);return this.meshes.push(e),this.addChild(e),e}}]),e}(k.W20),Y=new N,I={time:0,ratioxy:1,mainColor:[1,0,0],startRatio:2.5,startOffset:1.5,endRatio:.05,endOffset:.5,noiseSampler:k.xEZ.from("effects/smooth-noise-3.jpg")},D="\n    precision mediump float;\n\n    attribute vec2 aVertexPosition;\n    attribute vec2 aUvs;\n\n    uniform mat3 translationMatrix;\n    uniform mat3 projectionMatrix;\n\n    varying vec2 vUvs;\n\n    void main() {\n\n        vUvs = aUvs;\n        gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    }\n",R="\n    precision mediump float;\n    varying vec2 vUvs;\n    uniform float time;\n    uniform float ratioxy;\n    uniform vec3 mainColor;\n    uniform float startRatio;\n    uniform float startOffset;\n    uniform float endRatio;\n    uniform float endOffset;\n    uniform sampler2D noiseSampler;\n\n    vec4 getColor(vec2 uv, float offsetYRatio, float waveLengthRatio, float waveSpeed, float waveOffset, float width, float subWidth, float subStrength, float samplerY){\n        float startOffset_ = startOffset/ratioxy;\n        float endOffset_ = endOffset/ratioxy;\n\n        float uvx = (uv.x + 1.)/2.; //map uvx 0. -> 1.\n        float widthRatio = 1.;\n        widthRatio = max(widthRatio, (1. - startRatio)/startOffset_*uvx + startRatio);\n        widthRatio = min(widthRatio, (endRatio - 1.)/endOffset_*uvx + endRatio - (endRatio - 1.)/endOffset_);\n\n        float subFadeOutOffset = 1./ratioxy;\n        float fadeRatio = pow(min(1. - abs(uv.x), subFadeOutOffset)/subFadeOutOffset, .5);\n\n        float offsetY = (texture2D(noiseSampler, vec2(mod((vUvs.x*ratioxy/waveLengthRatio - (time + floor(time*2.))*waveSpeed + waveOffset)*1., 1.), samplerY)).r - 0.5)*2.*offsetYRatio;\n        float y = uv.y + offsetY*widthRatio;\n        float main = step(1. - width*widthRatio, 1. - abs(y));\n        // main *= fadeRatio;\n        float sub = pow(max(1. - abs(y) - (1. - subWidth), 0.)*subStrength, 2.)*widthRatio;\n        sub *= fadeRatio;\n\n        float mixValue = .25;\n        float r = max(mix(main, sub*mainColor.r, mixValue), sub*mainColor.r);\n        float g = max(mix(main, sub*mainColor.g, mixValue), sub*mainColor.g);\n        float b = max(mix(main, sub*mainColor.b, mixValue), sub*mainColor.b);\n        float a = max(main, sub);\n        return vec4(r, g, b, a);\n    }\n\n    void main()\n    {\n        //Offset uv so that center is 0,0 and edges are -1,1\n        vec2 uv = (vUvs-vec2(0.5))*2.0;\n\n        vec4 color1 = getColor(uv, 0.03, 20., 1., 0., 0.025 , 0.5, 2., .5);\n        vec4 color2 = getColor(uv, 0.1, 7., .17, 1., 0.01, 0.3, 3., .3);\n        vec4 color3 = getColor(uv, 0.12, 8., .2, 4., 0.01, 0.3, 3., .7);\n\n        float r = max(max(color1.r, color2.r), color3.r);\n        float g = max(max(color1.g, color2.g), color3.g);\n        float b = max(max(color1.b, color2.b), color3.b);\n        float a = max(max(color1.a, color2.a), color3.a);\n        vec4 outColor = vec4(r, g, b, a);\n        gl_FragColor = outColor;\n    }\n",U=e(918),z=e(2173),F=e.n(z),W=Math.cos(30/180*Math.PI),H=11,V=68,G=310,X=V*W,q=.7*X,J=X,Q=J*W,K=new k.pn8({fontFamily:"iCielUniSans",fontSize:31,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),$=new k.pn8({fontFamily:"iCielUniSans",fontSize:60,fill:["#fffbee","#beebee"],stroke:"#fe33b5",strokeThickness:3}),nn={hover:k.xEZ.from("images/hover-ring.png"),ring:k.xEZ.from("images/Ring.png"),ring_light:k.xEZ.from("images/Ring_light.png"),colors:[null,k.xEZ.from("bubbles/red.png"),k.xEZ.from("bubbles/blue.png"),k.xEZ.from("bubbles/green.png"),null,k.xEZ.from("bubbles/yellow.png"),null,null],types:[null,k.xEZ.from("bubbles/yellow.png"),k.xEZ.from("bubbles/boom.png"),k.xEZ.from("bubbles/line.png"),k.xEZ.from("bubbles/red-item.png"),k.xEZ.from("bubbles/stone.png"),k.xEZ.from("bubbles/explode.png"),k.xEZ.from("bubbles/white.png")],itemColors:[null,k.xEZ.from("bubbles/red-item.png"),k.xEZ.from("bubbles/blue-item.png"),k.xEZ.from("bubbles/green-item.png"),null,k.xEZ.from("bubbles/yellow-item.png"),null,null],boom_empty:k.xEZ.from("images/boom_empty.png"),boom_holder:k.xEZ.from("images/boom_holder.png"),headline:k.xEZ.from("images/headline.png"),background:k.xEZ.from("images/background.png"),background_1:k.xEZ.from("images/background_deco_1.png"),background_2:k.xEZ.from("images/background_deco_2.png"),background_3:k.xEZ.from("images/background_deco_3.png"),star_particle:k.xEZ.from("effects/star_particle.png"),blaze_particle:k.xEZ.from("effects/blaze_particle.png"),dot_particle:k.xEZ.from("effects/dot_particle.png"),rayColor:[[1,1,1],[252/255,72/255,61/255],[67/255,144/255,220/255],[32/255,237/255,144/255],[0,0,0],[253/255,181/255,44/255]]},tn=phoenix.melody.MelodyConfig.create();!function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,i,o;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e(5301));case 2:return t=n.sent,n.next=5,t.arrayBuffer();case 5:return i=n.sent,o=phoenix.melody.MelodyConfig.decode(new Uint8Array(i)),Object.assign(tn,o),F().util.toJSONOptions={enums:Number},B.Z.dispatch(O.X.actions.setConfig(tn.toJSON())),n.abrupt("return",o);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()();var en=function(n){var t=U.lW.from(n,"base64");return phoenix.melody.MelodyLevelConfig.decode(t)},on=function(n,t){var e=phoenix.melody.MelodyLevelConfig.create();e.columns=H,e.rows=n.length/H,e.id=1;var i,o=(0,C.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,a=phoenix.melody.MelodyBall.create(),s=r%10,l=Math.floor(r/10);a.color=s,a.type=l,e.map.push(a)}}catch(x){o.e(x)}finally{o.f()}var c,u=(0,C.Z)(t);try{for(u.s();!(c=u.n()).done;){var h=c.value,d=phoenix.melody.MelodyBall.create(),p=h%10,f=Math.floor(h/10);d.color=p,d.type=f,e.bullets.push(d)}}catch(x){u.e(x)}finally{u.f()}e.star1Score=1,e.star2Score=2,e.star3Score=3,e.targets.push(function(n){var t=phoenix.melody.MelodyLevelTarget.create();t.type=phoenix.melody.MELODY_LEVEL_TARGET_TYPE.MELODY_LEVEL_TARGET_ANY_BALL;var e,i=0,o=(0,C.Z)(n);try{for(o.s();!(e=o.n()).done;){e.value>0&&i++}}catch(x){o.e(x)}finally{o.f()}return console.log(i),t.quantity=i,t}(n));var m=phoenix.melody.MelodyLevelConfig.encode(e).finish(),g=U.lW.from(m).toString("base64");return console.log(g),g};var rn=en("CAEoATACOANAAUgLUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAUgQIABAAYgQIARAA"),an=function(){function n(t,e){(0,c.Z)(this,n),this.x=0,this.y=0,this.set(t,e)}return(0,u.Z)(n,[{key:"set",value:function(n,t){return this.x=n,this.y=t,this}},{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copy",value:function(n){this.set(n.x,n.y)}},{key:"subtract",value:function(n){return this.x-=n.x,this.y-=n.y,this}},{key:"add",value:function(n){return this.x+=n.x,this.y+=n.y,this}},{key:"multiply",value:function(n){return this.x*=n,this.y*=n,this}},{key:"normalize",value:function(){var n=this.length();return this.x/=n,this.y/=n,this}},{key:"length",value:function(){return Math.sqrt(this.lengthSqr())}},{key:"lengthSqr",value:function(){return this.x*this.x+this.y*this.y}}],[{key:"angle",value:function(n,t){var e=n.x*n.x+n.y*n.y,i=t.x*t.x+t.y*t.y;if(0===e||0===i)return 0;var o=(n.x*t.x+n.y*t.y)/Math.sqrt(e*i);return o=Math.max(Math.min(o,-1),1),Math.acos(o)}},{key:"fromPIXI",value:function(t){return new n(t.x,t.y)}}]),n}(),sn=phoenix.melody.MELODY_BALL_TYPE,ln=phoenix.melody.MELODY_BALL_COLOR,cn=function(){function n(t,e){(0,c.Z)(this,n),this.sprite=null,this.hover=null,this.color=0,this.type=sn.MELODY_BALL_TYPE_NONE,this.nextType=sn.MELODY_BALL_TYPE_NONE,this.isOrigin=!1,this.isMarked=!1,this.isLogged=!1,this.neighbors=[null,null,null,null,null,null];var i=this.sprite=new k.jyi;i.width=V,i.height=V,i.anchor.set(.5),this.setPosition(t,e)}return(0,u.Z)(n,[{key:"setPosition",value:function(n,t){n=(1+n-.5*(1-t%2))*V,t=t*X+.5*V,this.sprite.x=n,this.sprite.y=t}},{key:"isEmpty",get:function(){return this.nextType===sn.MELODY_BALL_TYPE_NONE||this.type===sn.MELODY_BALL_TYPE_NORMAL&&this.nextType!==this.type}},{key:"setColor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.color=n,this.sprite.texture=nn.colors[n],0===n&&(this.type=0,this.nextType=0),this.isOrigin=t}},{key:"setType",value:function(n){if(0===this.color)return this.type=0,void(this.nextType=0);if(this.type=n,this.nextType=n,!(n<=sn.MELODY_BALL_TYPE_NORMAL)){var t=n===sn.MELODY_BALL_TYPE_ITEM;this.sprite.texture=t?nn.itemColors[this.color]:nn.types[n],this.color=t?this.color:7}}},{key:"turn",value:function(n){var t=n===this.color;t&&!this.hover&&$n.map.misc.turnOn(this),!t&&this.hover&&$n.map.misc.turnOff(this)}}]),n}(),un=function(){function n(){(0,c.Z)(this,n),this.sprite=void 0,this.text=void 0,this.height=void 0,this.radius=void 0,this.angle=void 0,this.veclocity=new an(0,0);var t=this.sprite=new k.jyi;t.width=V,t.height=V,t.anchor.set(.5);var e=this.text=new k.xvT("50",K);e.anchor.set(.5),e.visible=!1}return(0,u.Z)(n,[{key:"set",value:function(n,t,e){var i=this.sprite;i.visible=!0,i.texture=n.sprite.texture,this.angle=0,this.height=G,i.x=n.sprite.x+t,i.y=n.sprite.y+e,i.width=V,i.height=V,this.veclocity.x=900*(Math.random()-.5),this.veclocity.y=900*(Math.random()-.5)}},{key:"isPlaying",get:function(){return this.sprite.visible}},{key:"update",value:function(n){var t=this.sprite;if(t.y<-310){var e=this.veclocity,i=.5*(j-V);if((t.x>i||t.x<-i)&&(e.x=-e.x),t.x+=e.x*n,t.y+=e.y*n,e.y+=1300*n,t.y>=-310){t.x>0?this.angle=0:this.angle=Math.PI;var o=Math.abs(t.x);if(o<290){var r=t.x/290;this.angle=Math.acos(r),this.radius=290}else this.angle=t.x>0?0:Math.PI,this.radius=o}}else{var a=this.angle+13*n,s=this.height-290*n,l=this.radius*Math.max(s/G,.1);if(s<20){t.visible=!1;var c=this.text;c.visible=!0,$n.map.addScore(50);var u=$n.map.physicsBox,h=u.x,d=u.y;return c.x=200*(Math.random()-.5),c.y=t.y-50*Math.random()+20,S.ZP.to(c,{y:c.y-20,alpha:0}).duration(.5).then((function(){c.visible=!1,c.alpha=1,c.y=t.y})),void $n.map.effect.spawnBlazeParticle(c.x+h,c.y+d)}this.angle=a,this.height=s,t.x=Math.cos(a)*l,t.y=-s;var p=V*(.25*Math.sin(a)+1);t.width=p,t.height=p}}}]),n}(),hn=.2*V;function dn(n,t,e){var i=$n.map,o=i.container,r=o.x,a=o.y,s=n.sprite;return S.ZP.to(s,{width:hn,height:hn,delay:t,duration:.3}).then((function(){n.isOrigin&&i.targetChecker.countBall(n.color,n.type),n.setColor(0),s.width=V,s.height=V,i.addScore(e),i.misc.spawnScore(n).text=e})),S.ZP.delayedCall(t,(function(){return i.effect.spawnStarEffect(s.x+r,s.y+a)})),.13}function pn(n,t,e){return S.ZP.delayedCall(e,(function(){t.setColor(t.color,t.isOrigin),S.ZP.fromTo(t.sprite,{width:hn,height:hn},{width:V,height:V,duration:.3})})),.13}var fn={normal:function(n,t){var e=$n.map.getGroup(n);if(e.length<3)return!0;var i,o=(0,C.Z)(e);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.type&&(r.nextType=sn.MELODY_BALL_TYPE_EXPLODE)}}catch(a){o.e(a)}finally{o.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,fn.targetChecker.comboScore),!0},boom:function(n,t){var e,i=$n.map.getNeighborbyLevel(n,3),o=(0,C.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.type&&(r.nextType=sn.MELODY_BALL_TYPE_BOOM)}}catch(a){o.e(a)}finally{o.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,250),!0},line:function(n,t){var e,i=$n.map.getLineNeighbor(n,3),o=(0,C.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.type&&(r.nextType=sn.MELODY_BALL_TYPE_LINE)}}catch(a){o.e(a)}finally{o.f()}return n.nextType=sn.MELODY_BALL_TYPE_NONE,dn(n,t,500),!0},normal2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_EXPLODE?0:(t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore))},normal2item:function(n,t,e){return fn.normal2normal(n,t,e)},normal2stone:function(n,t,e){return 0},normal2white:function(n,t,e){return n.nextType===sn.MELODY_BALL_TYPE_NORMAL?0:t.nextType===sn.MELODY_BALL_TYPE_WHITE?(t.nextType=sn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,pn(0,t,e)):0},normal2explode:function(n,t,e){return n.isOrigin?0:(t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore))},normal2boom:function(n,t,e){return 0},normal2line:function(n,t,e){return 0},boom2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_BOOM?0:(t.type=sn.MELODY_BALL_TYPE_BOOM,t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,250))},boom2item:function(n,t,e){return fn.boom2normal(n,t,e)},boom2stone:function(n,t,e){return fn.boom2normal(n,t,e)},boom2white:function(n,t,e){return fn.boom2normal(n,t,e)},boom2explode:function(n,t,e){return fn.boom2normal(n,t,e)},boom2boom:function(n,t,e){return 0},boom2line:function(n,t,e){return 0},line2normal:function(n,t,e){return t.nextType!==sn.MELODY_BALL_TYPE_LINE?0:(t.type=sn.MELODY_BALL_TYPE_LINE,t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,500))},line2item:function(n,t,e){return fn.line2normal(n,t,e)},line2stone:function(n,t,e){return fn.line2normal(n,t,e)},line2white:function(n,t,e){return fn.line2normal(n,t,e)},line2explode:function(n,t,e){return fn.line2normal(n,t,e)},line2boom:function(n,t,e){return 0},line2line:function(n,t,e){return 0},item2normal:function(n,t,e){return fn.normal2normal(n,t,e)},item2item:function(n,t,e){return fn.normal2item(n,t,e)},item2stone:function(n,t,e){return 0},item2white:function(n,t,e){return n.nextType===sn.MELODY_BALL_TYPE_ITEM?0:t.nextType===sn.MELODY_BALL_TYPE_WHITE?(t.nextType=sn.MELODY_BALL_TYPE_NORMAL,t.color=n.color,pn(0,t,e)):0},item2explode:function(n,t,e){return fn.normal2explode(n,t,e)},item2boom:function(n,t,e){return 0},item2line:function(n,t,e){return 0},stone2normal:function(n,t,e){return 0},stone2item:function(n,t,e){return 0},stone2stone:function(n,t,e){return 0},stone2white:function(n,t,e){return 0},stone2explode:function(n,t,e){return 0},stone2boom:function(n,t,e){return 0},stone2line:function(n,t,e){return 0},explode2normal:function(n,t,e){return t.nextType=sn.MELODY_BALL_TYPE_NONE,dn(t,e,fn.targetChecker.comboScore)},explode2item:function(n,t,e){return fn.explode2normal(n,t,e)},explode2stone:function(n,t,e){return fn.explode2normal(n,t,e)},explode2white:function(n,t,e){return t.color=ln.MELODY_BALL_COLOR_RANDOM,fn.explode2normal(n,t,e)},explode2explode:function(n,t,e){return fn.explode2normal(n,t,e)},explode2boom:function(n,t,e){return 0},explode2line:function(n,t,e){return 0},white2normal:function(n,t,e){return 0},white2item:function(n,t,e){return 0},white2stone:function(n,t,e){return 0},white2white:function(n,t,e){return 0},white2explode:function(n,t,e){return 0},white2boom:function(n,t,e){return 0},white2line:function(n,t,e){return 0},targetChecker:null},mn=["none","normal","boom","line","item","stone","explode","white"];function gn(n,t){var e=fn[mn[n.nextType]];return e&&e(n,t)}function xn(n,t,e){if(t.type===sn.MELODY_BALL_TYPE_NONE||n.type===sn.MELODY_BALL_TYPE_NONE||t.nextType===sn.MELODY_BALL_TYPE_NONE)return 0;var i="".concat(mn[n.type],"2").concat(mn[t.type]);return fn[i](n,t,e)}var vn=e(7326),yn=e(5661),bn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).select_color=void 0,n.select_type=void 0,n.deltaY=0,n.speed=0,n.target=void 0,n.colors=void 0,n.types=void 0,n.lines=[],n.maxHeight=0;var i=j,o=_,r=(nn.colors.length,k.jyi.from("images/header.png"));r.y=.7*o,r.width=i,r.height=1e3,n.addChild(r);var a=100,s=n.colors=new k.W20;s.y=.86*o,n.addChild(s),(r=new k.jyi(nn.hover)).anchor.set(.5),r.x=a,a+=100,r.width=1.2*V,r.height=1.2*V,r.interactive=!0,r.on("pointerup",n.onColorClick.bind((0,vn.Z)(n))),s.addChild(r);var l,u=(0,C.Z)(nn.colors);try{for(u.s();!(l=u.n()).done;){var h=l.value;h&&((r=new k.jyi(h)).anchor.set(.5),r.x=a,a+=100,r.width=V,r.height=V,r.interactive=!0,r.on("pointerup",n.onColorClick.bind((0,vn.Z)(n))),s.addChild(r))}}catch(g){u.e(g)}finally{u.f()}var d=n.types=new k.W20;d.y=.94*o,n.addChild(d),a=100;var p,f=(0,C.Z)(nn.types);try{for(f.s();!(p=f.n()).done;){var m=p.value;m&&m!==nn.types[2]&&m!==nn.types[3]&&((r=new k.jyi(m)).anchor.set(.5),r.x=a,a+=100,r.width=V,r.height=V,r.interactive=!0,r.on("pointerup",n.onTypeClick.bind((0,vn.Z)(n))),d.addChild(r))}}catch(g){f.e(g)}finally{f.f()}return(r=k.jyi.from(k.xEZ.WHITE)).width=i,r.height=10,r.anchor.set(0,.5),r.x=0,r.y=9*X+q,n.addChild(r),n.hitArea=new k.AeJ(0,0,i,o),n.interactive=!0,n.on("pointermove",n.onButtonOver.bind((0,vn.Z)(n))),n.on("pointerdown",n.onButtonOver.bind((0,vn.Z)(n))),n.on("pointermove",n.countBubble.bind((0,vn.Z)(n))),n.on("pointerdown",n.countBubble.bind((0,vn.Z)(n))),n}return(0,u.Z)(e,[{key:"getText",value:function(n,t){var e,i=null,o=(0,C.Z)(this.lines);try{for(o.s();!(e=o.n()).done;){var r=e.value;if(r.y>=n.sprite.y){i=r;break}}}catch(a){o.e(a)}finally{o.f()}return i||((i=$n.map.misc.spawnText(n)).text=t,this.lines.push(i)),i.visible=!0,i}},{key:"loadLevel",value:function(n){var t,e=$n.map,i=B.Z.getState().colorTool.cacheLevels,o=void 0,r=(0,C.Z)(i);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.levelId===n&&(o=en(a.base64))}}catch(s){r.e(s)}finally{r.f()}o?e.load(o):e.reload(n),this.initMap()}},{key:"loadFromBase64",value:function(n){try{var t=en(n);$n.map.load(t),this.initMap()}catch(e){return void console.log("WRONG BASE64")}}},{key:"initMap",value:function(){var n=$n.map;$n.canvas.onwheel=this.onButtonWheel.bind(this),this.target=n.container;var t,e=0,i=(0,C.Z)(n.data);try{for(i.s();!(t=i.n()).done;){var o=t.value,r=Math.floor(e/H),a=e%H;r%2===1&&10===a||(o.turn(o.color),0==a&&this.getText(o,r+1+"")),e++}}catch(s){i.e(s)}finally{i.f()}B.Z.dispatch(yn.J.actions.initBullets($n.map.level.bullets.map((function(n){return n.color})))),this.trimLine()}},{key:"addEmptyLine",value:function(){var n=$n.map.data;n[n.length-1].sprite.y<=this.maxHeight&&$n.map.addEmptyLine(1);var t=Math.ceil(this.maxHeight/X)*H,e=t+H,i=Math.floor(t/H);for(this.getText(n[t],i+1+"");t<e;t++){var o=n[t];i%2===1&&t===e-1||o.turn(o.color)}this.maxHeight=n[t-1].sprite.y}},{key:"trimLine",value:function(){for(var n=$n.map.data,t=0,e=t+H,i=[];t<e;t++){var o=n[t];o.isEmpty||(i.push(o),o.isMarked=!0)}for(var r=0,a=n[0].sprite.y,s=a;r<i.length;){var l,c=i[r].neighbors,u=(0,C.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||h.sprite.y<a||(i.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(v){u.e(v)}finally{u.f()}r++}var d,p=(0,C.Z)(n);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.sprite.y>s&&f.turn(-1),f.isMarked=!1}}catch(v){p.e(v)}finally{p.f()}var m,g=(0,C.Z)(this.lines);try{for(g.s();!(m=g.n()).done;){var x=m.value;x.y>s&&(x.visible=!1)}}catch(v){g.e(v)}finally{g.f()}this.maxHeight=s}},{key:"onButtonOver",value:function(n){if(void 0!==this.select_color&&void 0!==this.select_type){var t=$n.map,e=n.data.global,i=$n.scale;if(!(e.x+5>window.innerWidth||e.y>window.innerHeight-265)){e.y-=t.parent.y,e.x/=i.x,e.y/=i.y;var o=an.fromPIXI(t.container),r=t.data,a=e.y-o.y;a=Math.floor(a/X);var s=Math.max(a%2?e.x-.5*V:e.x,0),l=r[(s=Math.floor(s/V))+11*a];l&&l.hover&&(l.setColor(nn.colors.indexOf(this.select_color)),l.setType(nn.types.indexOf(this.select_type)))}}}},{key:"onButtonWheel",value:function(n){this.deltaY=n.deltaY,this.speed=-1}},{key:"onColorClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_color=t.texture==nn.hover?null:t.texture;for(var e=0,i=this.colors.children;e<i.length;e++){var o=i[e];o.width=V,o.height=V}t.width=1.4*V,t.height=1.4*V,console.log("maingame scale: ",$n.scale.y),B.Z.dispatch(yn.J.actions.setSelectedColor(nn.colors.indexOf(this.select_color)))}},{key:"onTypeClick",value:function(n){n.stopPropagation();var t=n.currentTarget;this.select_type=t.texture==nn.hover?null:t.texture;for(var e=0,i=this.types.children;e<i.length;e++){var o=i[e];o.width=V,o.height=V}t.width=1.4*V,t.height=1.4*V}},{key:"update",value:function(n){var t=Math.abs(this.speed);if(0!=t){var e=this.target.y+this.deltaY*t;e>q&&(e=q);var i=-Math.max($n.map.data.length/H-9,0)*X;e<i&&(e=i),this.target.y=e,this.speed<0&&(t-=n,this.speed=t<0?0:-t)}}},{key:"countBubble",value:function(){var n,t=0,e=this.maxHeight,i=(0,C.Z)($n.map.data);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.sprite.y<=e&&!o.isEmpty&&++t}}catch(r){i.e(r)}finally{i.f()}B.Z.dispatch(yn.J.actions.setBubbleCount(t))}},{key:"drawMapForCapture",value:function(){var n=$n.map.data,t=new k.MxU({width:$n.view.width/2,height:(this.maxHeight+V)*$n.scale.y,backgroundColor:4078474}),e=new k.W20;t.stage.addChild(e),t.stage.scale=$n.scale;var i,o=(0,C.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r.hover){var a=new k.jyi(r.sprite.texture),s=r.sprite,l=s.x,c=s.y,u=s.width,h=s.height;a.x=l,a.y=c,a.anchor.set(.5),a.width=u,a.height=h,e.addChild(a)}if(r.hover){var d=new k.jyi(r.hover.texture),p=r.hover,f=p.x,m=p.y,g=p.width,x=p.height;d.x=f,d.y=m,d.anchor.set(.5),d.alpha=.5,d.width=g,d.height=x,e.addChild(d)}0}}catch(P){o.e(P)}finally{o.f()}var v,y=0,b=(0,C.Z)(this.lines);try{for(b.s();!(v=b.n()).done;){var w=v.value;if(w.visible){var Z=new k.xvT("",$);Z.anchor.set(.5),Z.scale.set(.5),Z.text=(++y).toString(),Z.x=w.x,Z.y=w.y,e.addChild(Z)}}}catch(P){b.e(P)}finally{b.f()}return t.render(),t.view.toDataURL("image/jpeg")}}]),e}(k.W20),wn=e(3439),Zn=(0,wn.oC)({alpha:{start:1,end:0},scale:{start:.1,end:.3,minimumScaleMultiplier:.1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:300,end:50,minimumSpeedMultiplier:.1},acceleration:{x:0,y:300},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.01,emitterLifetime:.3,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:3,particleSpacing:0,angleStart:0},nn.star_particle),kn=(0,wn.oC)({alpha:{start:.5,end:0},scale:{start:.3,end:.2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:1e3,end:100,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-90,max:-90},noRotation:!0,rotationSpeed:{min:0,max:10},lifetime:{min:.1,max:.2},blendMode:"add",frequency:.01,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:50,h:30}},nn.blaze_particle),Pn=(0,wn.oC)({alpha:{start:.5,end:.7},scale:{start:.3,end:.2,minimumScaleMultiplier:.3},color:{start:"#ffaa33",end:"#ffdd22"},speed:{start:2e3,end:0,minimumSpeedMultiplier:.3},acceleration:{x:0,y:2e3},maxSpeed:0,startRotation:{min:255,max:280},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:.7},blendMode:"add",frequency:.001,emitterLifetime:3,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:10,h:0}},[nn.star_particle,nn.blaze_particle]),jn=(0,wn.oC)({alpha:{start:1,end:0},scale:{start:.5,end:.7,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:200,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:.2,max:.3},blendMode:"add",frequency:.05,emitterLifetime:.5,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:1,particleSpacing:0,angleStart:0},nn.dot_particle),_n=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).star_particles=[],n.blaze_particles=[],n.fireworks_particles=[],n.erase_particle=null,n.running_particles=[];var i=j,o=_;return n.fireworks_particles.push(n.createFirework(130,o-70)),n.fireworks_particles.push(n.createFirework(i-130,o-70)),n.fireworks_particles[0].parent.scale.set(-1,1),n}return(0,u.Z)(e,[{key:"play",value:function(n,t){var e=this.running_particles;return e.push(n),n.cleanup(),n.playOnce((function(){var i=e.indexOf(n);e[i]=e[e.length-1],e.length--,null===t||void 0===t||t.push(n)})),n}},{key:"spawnStarEffect",value:function(n,t){var e=this.star_particles.pop();if(!e){var i=new k.W20;e=new wn.Q5(i,Zn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.star_particles)}},{key:"spawnBlazeParticle",value:function(n,t){var e=this.blaze_particles.pop();if(!e){var i=new k.W20;e=new wn.Q5(i,kn),this.addChild(i)}return e.parent.x=n,e.parent.y=t,this.play(e,this.blaze_particles)}},{key:"createFirework",value:function(n,t){var e=new k.W20,i=new wn.Q5(e,Pn);return this.addChild(e),e.x=n,e.y=t,i}},{key:"spawnFirework",value:function(){var n,t=(0,C.Z)(this.fireworks_particles);try{for(t.s();!(n=t.n()).done;){var e=n.value;this.play(e,null)}}catch(i){t.e(i)}finally{t.f()}}},{key:"spawnErase",value:function(n,t,e){var i=this.erase_particle,o={value:new k.Ilk(e).value};if(!i){var r=new k.W20;i=new wn.Q5(r,jn),this.addChild(r),this.erase_particle=i}return i.parent.x=n,i.parent.y=t,Object.assign(i.getBehavior(wn.U1.StaticColorBehavior.type),o),this.play(i,null)}},{key:"update",value:function(n){var t,e=(0,C.Z)(this.running_particles);try{for(e.s();!(t=e.n()).done;){t.value.update(n)}}catch(i){e.e(i)}finally{e.f()}}}]),e}(k.W20),Ln=e(9439),En=e(800),Tn=(En.PY,function(){function n(){(0,c.Z)(this,n)}return(0,u.Z)(n,null,[{key:"getDateTimeVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds())," - ").concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getDateVN",value:function(n){var t=new Date(n),e=function(n){return n<10?"0"+n:n};return"".concat([e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/"))}},{key:"getTime",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=new Date(n),i=function(n){return n<10?"0"+n:n},o="";if(t&&""!=t)switch(t){case"h":o="".concat(i(e.getUTCHours()));break;case"m":o="".concat(i(e.getUTCMinutes()));break;case"s":o="".concat(i(e.getUTCSeconds()))}else o="".concat(i(Math.floor(e.getUTCHours()/24)),":").concat(i(e.getUTCHours()%24),":").concat(i(e.getUTCMinutes()),":").concat(i(e.getUTCSeconds()));return o}},{key:"msToTime",value:function(n,t){var e=n/1e3,i=Math.floor(e/86400);e%=86400;var o=Math.floor(e/3600);e%=3600;var r=t?Math.ceil(e/60):Math.floor(e/60);return e=Math.floor(e%60),"".concat(i<10?"0"+i:i,":").concat(o<10?"0"+o:o,":").concat(r<10?"0"+r:r,":").concat(e<10?"0"+e:e)}},{key:"msToTimeWithFormat",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day:hour:minute:second",e=n/1e3,i=Math.floor(e),o=Math.floor(e/60),r=Math.floor(e/3600),a=Math.floor(e/86400);return t.includes("minute")&&(i%=60),t.includes("hour")&&(o%=60),t.includes("day")&&(r%=24),t.replace("day",this.formatNumber(a)).replace("hour",this.formatNumber(r)).replace("minute",this.formatNumber(o)).replace("second",this.formatNumber(i))}},{key:"formatNumber",value:function(n){return(n<0?"-":"")+(Math.abs(n)<10?"0":"")+Math.abs(n)}},{key:"msToReadable",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e="";if(t&&""!=t)switch(t){case"h":e="".concat(Math.floor(n/36e5));break;case"m":var i=n%36e5;e="".concat(Math.floor(i/6e4));break;case"s":var o=n%36e5%6e4;e="".concat(Math.floor(o/1e3))}return e}},{key:"msToSocialTime",value:function(n){var t=(Date.now()-n)/1e3,e=(Math.floor(t),Math.floor(t/60)),i=Math.floor(t/3600),o=Math.floor(t/86400);return o>0?"".concat(o," ng\xe0y tr\u01b0\u1edbc"):i>0?"".concat(i," gi\u1edd tr\u01b0\u1edbc"):e>0?"".concat(e," ph\xfat tr\u01b0\u1edbc"):"V\u1eeba xong"}},{key:"reduceLengthString",value:function(n,t){if(n.length<=t)return n;var e=n.substring(0,t),i=e.lastIndexOf(" ");return e.substring(0,i)+"..."}},{key:"formatName",value:function(n){return n?n.trim().toLowerCase().replace(/(^| )./g,(function(n){return n.toUpperCase()})):""}},{key:"getFirstName",value:function(n){var t;return null===(t=this.formatName(n).match(/\S*$/))||void 0===t?void 0:t[0]}},{key:"convertToShortName",value:function(n,t){return n.length<=t?n:n.replace(/\S* /g,(function(n){return n.charAt(0)+"."}))}},{key:"convertToShortName2",value:function(n,t){if(n.length<=t)return n;var e=n;return e=e.replace(/\s.*\s/g,(function(n){return n.replace(/\S{1,}\s/g,(function(n){return n[0].toUpperCase()+"."})).replace(/.$/," ")}))}},{key:"convertToShortName3",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999;if(n.length<=t)return n;var e=n,i=e.split(" ");return e="".concat(i[0]).concat(i.length>1?" "+i[i.length-1]:"")}},{key:"convertToShortName4",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return(e=e.split(" ").splice(-2).join(" ")).length<t?e:e.split(" ").splice(-1)[0]}},{key:"convertToShortName5",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:999,e=n;return e.length<t?e:e.split(" ").splice(-1)[0]}},{key:"getLastName",value:function(n){var t=n;return t.split(" ").splice(-1)[0]}},{key:"uuid",get:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}))}},{key:"convertDistanceToString",value:function(n){return Math.abs(n)<1?Math.round(1e3*n)+"m":Math.round(10*n)/10+"km"}},{key:"toggleClass",value:function(n,t){var e=" ".concat(n," ").replace(/  +/g," ");return e.includes(" ".concat(t," "))?e.replaceAll(" ".concat(t," ")," "):e+"".concat(t," ")}},{key:"randomInt",value:function(n,t){return Math.floor(n+Math.random()*(t-n+1))}},{key:"setSpriteTexture",value:function(n,t){t&&(n.texture=k.xEZ.from(t))}},{key:"isValidNumber",value:function(n){return/^[0-9\b]+$/.test(n)}},{key:"compareObjectOneLevel",value:function(n,t){return null!=n&&null!=t&&(Object.keys(n).length==Object.keys(t).length&&(Object.keys(n).sort().join(",")===Object.keys(t).sort().join(",")&&JSON.stringify(n,Object.keys(n).sort())===JSON.stringify(t,Object.keys(t).sort())))}},{key:"trimVNCode",value:function(n){return!n.startsWith("084")&&!n.startsWith("+84")||12!==n.length&&13!==n.length?!n.startsWith("84")||11!==n.length&&12!==n.length?n:"0"+n.substring(2):"0"+n.substring(3)}},{key:"formatPhoneNumber",value:function(n){return 11===(n=this.trimVNCode(n)).length||n.length<10?n:n=this.formatOldPhoneNumber(n)}},{key:"formatOldPhoneNumber",value:function(n){if(n.startsWith("03"))return"016"+n.substring(2);if(n.startsWith("07"))switch(n.charAt(2)){case"0":return"0120"+n.substring(3);case"9":return"0121"+n.substring(3);case"7":return"0122"+n.substring(3);case"6":return"0126"+n.substring(3);case"8":return"0128"+n.substring(3)}if(n.startsWith("08"))switch(n.charAt(2)){case"3":return"0123"+n.substring(3);case"4":return"0124"+n.substring(3);case"5":return"0125"+n.substring(3);case"1":return"0127"+n.substring(3);case"2":return"0129"+n.substring(3)}if(n.startsWith("05"))switch(n.charAt(2)){case"2":return"0182"+n.substring(3);case"6":return"0186"+n.substring(3);case"8":return"0188"+n.substring(3);case"9":return"0199"+n.substring(3)}return n}},{key:"sortPuzzles",value:function(n){for(var t=Math.floor(n.length/2),e=n.length%2,i=[],o=0;o<t;++o)i.push(n[o]),i.push(n[o+t+e]);return e&&i.push(n[t]),i}},{key:"numberToK",value:function(n){var t=Math.floor(n/1e3);return t>0?t+"k":n+""}},{key:"checkValueInRange",value:function(n,t,e){return n>=Math.min(t,e)&&n<=Math.max(t,e)}},{key:"convertStringToVND",value:function(n){if(!n)return"";var t=(n=(n=n.replace("\u0111","")).replaceAll(".","")).replace(/\B(?=(\d{3})+(?!\d))/g,".");return t+="\u0111"}},{key:"convertNumberToScoreString",value:function(n){var t=""+n;return t=t.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"convertVNDToString",value:function(n){return n?n=(n=n.replace("\u0111","")).replaceAll(".",""):""}},{key:"convertVNDToNumber",value:function(n){return n?(n=(n=n.replace("\u0111","")).replaceAll(".",""),parseInt(n)):0}},{key:"playPopupRewardSfx",value:function(n){if(n)if(99992023===n)m.play(p.gH.PopupQuaDacBiet);else m.play(p.gH.PopupQuaThuong)}},{key:"moveToTarget",value:function(n,t,e,i){return e=Math.abs(e),n<t?Math.min(n+e*i,t):n>t?Math.max(n-e*i,t):n}},{key:"clamp",value:function(n,t,e){var i=Math.max(t,e),o=Math.min(t,e);return n>i?i:n<o?o:n}},{key:"getItemImageUrl",value:function(n){var t=phoenix.melody.MELODY_BALL_TYPE;switch(n.type){case t.MELODY_BALL_TYPE_NONE:case t.MELODY_BALL_TYPE_NORMAL:return nn.colors[n.color];case t.MELODY_BALL_TYPE_ITEM:return nn.itemColors[n.color];case t.MELODY_BALL_TYPE_BOOM:case t.MELODY_BALL_TYPE_LINE:case t.MELODY_BALL_TYPE_STONE:case t.MELODY_BALL_TYPE_EXPLODE:case t.MELODY_BALL_TYPE_WHITE:return nn.types[n.type];default:return null}}},{key:"getTargetTypeImageUrl",value:function(n,t){var e,i,o,r=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case r.MELODY_LEVEL_TARGET_ANY_BALL:return p.dN.general.levelTargetAnyBall;case r.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return null===(e=this.getItemImageUrl(t))||void 0===e||null===(i=e.baseTexture)||void 0===i||null===(o=i.resource)||void 0===o?void 0:o.url;case r.MELODY_LEVEL_TARGET_SCORE:return p.dN.general.levelTargetScore;case r.MELODY_LEVEL_TARGET_ITEM:return p.dN.general.levelTargetItem;default:return null}}},{key:"getTargetCount",value:function(n,t,e){var i,o,r,a,s=phoenix.melody.MELODY_LEVEL_TARGET_TYPE;switch(n){case s.MELODY_LEVEL_TARGET_ANY_BALL:case s.MELODY_LEVEL_TARGET_SCORE:case s.MELODY_LEVEL_TARGET_ITEM:return(null===e||void 0===e||null===(i=e.ballType)||void 0===i||null===(o=i[n])||void 0===o?void 0:o.current)||0;case s.MELODY_LEVEL_TARGET_SPECIFIC_BALL:return(null===e||void 0===e||null===(r=e.ballColor)||void 0===r||null===(a=r[null===t||void 0===t?void 0:t.color])||void 0===a?void 0:a.current)||0;default:return 0}}},{key:"loadSpine",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i,o;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t,!this.spineDatas.has(e)){n.next=3;break}return n.abrupt("return",this.spineDatas.get(e));case 3:return n.next=5,k.deM.load(window.location.origin+t);case 5:return i=n.sent,(o=i.spineData)&&this.spineDatas.set(e,o),n.abrupt("return",o);case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"getScreenSize",value:function(){var n=j,t=_;return{screenWidth:n,screenHeight:t,offsetX:0,offsetY:(window.innerHeight/window.innerWidth*n-t)/2}}}]),n}());Tn.spineDatas=new Map;var Mn,Cn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).boom_holder=void 0,n.boom_empty=void 0,n.boom=void 0,n.mascot=void 0,n.mascot_current_anim="",n.progress=0,n.max=0;var i=j,o=_,r=new k.jyi(nn.background);r.anchor.set(0,1),n.addChild(r),n.y=o,(r=new k.jyi(nn.background_1)).anchor.set(0,1),r.y=150,n.addChild(r);var a=new k.jyi(nn.background_2);a.anchor.set(.5,1),a.x=.5*i,a.y=-253,r.addChild(a),r=a,(a=new k.jyi(nn.background_3)).anchor.set(.5,1),a.y=-50,r.addChild(a),(a=n.boom_holder=new k.jyi(nn.boom_holder)).anchor.set(.5,1),a.x=150,a.y=-110,n.addChild(a),n.loadMascot((0,vn.Z)(n)),(a=n.boom_empty=new k.jyi(nn.boom_empty)).width=a.height=72,a.anchor.set(.5),a.x=0,a.y=-167,n.boom_holder.addChild(a),(a=n.boom=new k.jyi(nn.types[sn.MELODY_BALL_TYPE_BOOM])).anchor.set(.5),n.boom_empty.addChild(a);var s=new k.wn$(null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float customUniform;\n\nvoid main(void)\n{\n   vec4 fg = texture2D(uSampler, vTextureCoord);\n\n   float a = step(customUniform, vTextureCoord.y * 1.33);\n\n   gl_FragColor = fg * a;\n}\n",{customUniform:1});return a.filters=[s],n}return(0,u.Z)(e,[{key:"loadMascot",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tn.loadSpine("/mascot/Melody_mascot.json");case 2:e=n.sent,(i=new En.PY(e)).scale.set(-.5,.5),i.x=this.width-this.boom_holder.x,i.y=this.boom_holder.y,this.mascot=i,t.addChild(i);case 9:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"activeBall",value:function(n){var t=n?"anim_active_ball":"anim_idle_normal";this.mascot_current_anim!=t&&(this.mascot_current_anim=t,this.mascot.state.setAnimation(0,t,!0))}},{key:"combo",value:function(){this.mascot_current_anim="anim_idle_normal",this.mascot.state.setAnimation(0,"anim_combo",!1),this.mascot.state.addAnimation(0,"anim_idle_normal",!0,0)}},{key:"end",value:function(n){this.mascot_current_anim=n?"anim_win":"anim_idle_lose",this.mascot.state.setAnimation(0,this.mascot_current_anim,!0)}},{key:"addScore",value:function(n){if(this.boom_holder.visible&&!(this.progress>=1)){var t=Math.min(this.progress+n/this.max,1);this.boom.filters[0].uniforms.customUniform=1-t,this.progress=t}}},{key:"reset",value:function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.progress=0,this.boom.filters[0].uniforms.customUniform=1,this.boom_empty.visible=!0,this.activeBall(!1),n?(this.max=500,this.boom_holder.visible=t):this.max+=500}},{key:"getBoomPosition",value:function(){this.boom_empty.visible=!1;var n=an.fromPIXI(this.boom_empty);return n.x+=this.boom_empty.parent.x+this.x,n.y+=this.boom_empty.parent.y+this.y,n}},{key:"reloadAnim",value:function(n,t){var e=this.children,i=e[0],o=e[1],r=this.boom_holder,a=this.mascot;S.ZP.fromTo(i,{y:700},{y:i.y,delay:t,duration:n}),S.ZP.fromTo(o,{y:1e3},{y:o.y,delay:t,duration:n}),S.ZP.fromTo(r,{y:735},{y:r.y,delay:t,duration:n}),S.ZP.fromTo(a,{y:735},{y:a.y,delay:t,duration:n})}}]),e}(k.W20),Sn=(k.W20,function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).balls=[];var i=j,o=_;return n.x=.5*i,n.y=o-80,n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i,o=null,r=(0,C.Z)(this.balls);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(!a.isPlaying){o=a;break}}}catch(s){r.e(s)}finally{r.f()}o||(o=new un,this.addChild(o.sprite),this.addChild(o.text),this.balls.push(o)),o.set(n,t,e)}},{key:"update",value:function(n){var t,e=(0,C.Z)(this.balls);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.isPlaying&&i.update(n)}}catch(o){e.e(o)}finally{e.f()}}}]),e}(k.W20)),Bn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).hovers=[],n.scores=[],n}return(0,u.Z)(e,[{key:"turnOn",value:function(n){var t=this.hovers.pop();t||((t=new k.jyi(nn.hover)).anchor.set(.5),t.width=81,t.height=81,t.alpha=.7,S.ZP.fromTo(t,{rotation:0,ease:"linear"},{rotation:2*Math.PI,ease:"linear"}).duration(3).repeat(-1),this.addChild(t));var e=n.sprite,i=e.x,o=e.y;return t.visible=!0,t.x=i,t.y=o,n.hover=t,t}},{key:"turnOff",value:function(n){this.hovers.push(n.hover),n.hover.visible=!1,n.hover=null}},{key:"spawnText",value:function(n){var t=this.scores.pop();t||((t=new k.xvT("",$)).anchor.set(.5),t.scale.set(.5),this.addChild(t)),t.visible=!0;var e=n.sprite,i=e.x,o=e.y;return t.x=i,t.y=o,t}},{key:"spawnScore",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.scores.pop();i||((i=new k.xvT("",K)).anchor.set(.5),this.addChild(i)),i.visible=!0;var o=n.sprite,r=o.x,a=o.y;return i.x=r,i.y=a,i.scale.set(e),S.ZP.to(i,{y:a-30*e,alpha:0,duration:1}).then((function(){i.visible=!1,i.alpha=1,t.scores.push(i)})),i}}]),e}(k.W20),On=function(){function n(){(0,c.Z)(this,n),this.ballColor=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.ballType=[{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0},{current:0,target:0}],this.totalBall={current:0,target:0},this.comboScore=0,this.wallScore=0,this.totalScore=0}return(0,u.Z)(n,[{key:"getWallScore",value:function(){var n=this.wallScore;return this.wallScore+=25,n}},{key:"init",value:function(n){var t,e=(0,C.Z)(this.ballColor);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.current=i.target=0}}catch(l){e.e(l)}finally{e.f()}this.totalBall.current=this.totalBall.target=0;var o,r=(0,C.Z)(n.targets);try{for(r.s();!(o=r.n()).done;){var a=o.value,s=a.ball;!s||0===s.color&&0===s.type?this.totalBall.target=a.quantity:(s.color>0&&(this.ballColor[s.color-1].target=a.quantity),s.type>0&&(this.ballType[s.type-1].target=a.quantity))}}catch(l){r.e(l)}finally{r.f()}this.comboScore=10,this.wallScore=25,this.totalScore=0,B.Z.dispatch(O.X.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType}))}},{key:"countBall",value:function(n,t){this.ballColor[n].current++,this.totalBall.current++,this.ballType[t].current++,B.Z.dispatch(O.X.actions.updateTargetChecker({ballColor:this.ballColor,ballType:this.ballType}))}},{key:"addScore",value:function(n){return this.totalScore+=n}},{key:"check",value:function(){var n,t=!0,e=(0,C.Z)(this.ballColor);try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.current<i.target){t=!1,console.log(i);break}}}catch(s){e.e(s)}finally{e.f()}var o,r=(0,C.Z)(this.ballType);try{for(r.s();!(o=r.n()).done;){var a=o.value;if(a.current<a.target){t=!1,console.log(a);break}}}catch(s){r.e(s)}finally{r.f()}return this.totalBall.current<this.totalBall.target&&(t=!1,console.log(this.totalBall)),t}}]),n}(),An=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;(0,c.Z)(this,e),(n=t.call(this)).container=void 0,n.data=[],n.gun=void 0,n.physicsBox=void 0,n.boomHolder=void 0,n.colorTool=void 0,n.targetChecker=void 0,n.misc=void 0,n.effect=void 0,n.level=void 0,n.addChild(n.boomHolder=new Cn),n.addChild(n.container=new k.W20),n.addChild(n.physicsBox=new Sn),n.addChild(n.effect=new _n),n.addChild(n.misc=new Bn),n.addChild(n.colorTool=new bn);var i,o=new k.jyi(nn.headline);return o.y=9,o.anchor.set(0,1),n.container.addChild(o),i=n.targetChecker=new On,fn.targetChecker=i,n}return(0,u.Z)(e,[{key:"addBubble",value:function(n,t,e){var i=Math.floor(n/t),o=n%t,r=new cn(o,i),a=r.neighbors;e.push(r);var s=o>0?e[n-1]:null;if(i%2===1&&(n+=1,(o+=1)>=t))return r;var l=i>0&&(i%2===1||o+1<t)?e[n-t]:null,c=i>0&&o>0?e[n-t-1]:null;return l&&(l.neighbors[4]=r),c&&(c.neighbors[5]=r),s&&(s.neighbors[0]=r),a[1]=l,a[2]=c,a[3]=s,r}},{key:"addScore",value:function(n){this.boomHolder.addScore(n);var t=this.targetChecker.addScore(n);B.Z.dispatch(O.X.actions.setCurrentGame({score:t}))}},{key:"load",value:function(n){var t=this;this.level=n,this.targetChecker.init(n);for(var e=this.container,i=n.map,o=this.data,r=i.length,a=0;a<r;a++){var s=i[a],l=s.color,c=s.type,u=o[a];u||(u=this.addBubble(a,11,o),e.addChild(u.sprite)),u.isMarked=!1,u.setColor(l,l>0),u.setType(c)}r=o.length;var h=9*X;if(h=Math.max(o[a-1].sprite.y-h,0),r<=a)this.addEmptyLine(1);else for(;a<r;a++)o[a].setColor(0);if(B.Z.dispatch(O.X.actions.setCurrentGame({level:n.id||0,score:0,star1Score:this.level.star1Score,star2Score:this.level.star2Score,star3Score:this.level.star3Score})),this.gun)return this.gun.turnOff(),this.boomHolder.reset(!0,n.id>6),0!==h&&this.boomHolder.reloadAnim(.003*h,1),S.ZP.fromTo(e,{y:q},{y:-h+q}).delay(1).duration(.003*h).then((function(){return t.gun.reload(n.bullets)}));e.y=-h+q}},{key:"reload",value:function(n){this.load(e.findLevelConfig(tn,n))}},{key:"addEmptyLine",value:function(n){for(var t=this.container,e=this.data,i=e.length,o=0,r=11*n;o<r;o++){var a=this.addBubble(i,11,e);a.setColor(0),t.addChild(a.sprite),i++}}},{key:"reset",value:function(){var n,t=(0,C.Z)(this.data);try{for(t.s();!(n=t.n()).done;){var e=n.value;null===e||void 0===e||e.turn(-1)}}catch(i){t.e(i)}finally{t.f()}}},{key:"update",value:function(n){var t,e,i;null===(t=this.physicsBox)||void 0===t||t.update(n),null===(e=this.colorTool)||void 0===e||e.update(n),null===(i=this.gun)||void 0===i||i.update(n),this.misc.y=this.container.y,this.effect.update(n),Y.update(n)}},{key:"pickBubble",value:function(n,t,e){var i,o=this,r=this.container,a=r.x,s=r.y,l=.2*V,c=.3,u=n[0],h=0,d=[],p=(0,C.Z)(n);try{var f=function(){var n=i.value,r=n.sprite,p=3e-6*new an(r.x-u.sprite.x,r.y-u.sprite.y).lengthSqr()+e;S.ZP.to(r,{width:l,height:l,delay:p,duration:c}).then((function(){n.setColor(0),r.width=V,r.height=V,o.addScore(t),o.misc.spawnScore(n).text=t})),S.ZP.delayedCall(p,(function(){return o.effect.spawnStarEffect(r.x+a,r.y+s)})),n.isOrigin&&o.targetChecker.countBall(n.color,n.type),n.setType(sn.MELODY_BALL_TYPE_NONE),p>h&&(h=p);var f,m=(0,C.Z)(n.neighbors);try{var g=function(){var t=f.value;t&&t.type===sn.MELODY_BALL_TYPE_WHITE&&n.color>0&&n.color<7&&(t.color=n.color,d.push(t),S.ZP.delayedCall(p+c,(function(){t.setColor(t.color,t.isOrigin),S.ZP.fromTo(t.sprite,{width:l,height:l},{width:V,height:V,duration:c})})))};for(m.s();!(f=m.n()).done;)g()}catch(x){m.e(x)}finally{m.f()}};for(p.s();!(i=p.n()).done;)f()}catch(b){p.e(b)}finally{p.f()}for(var m=0,g=d;m<g.length;m++){var x=g[m];if(x.type===sn.MELODY_BALL_TYPE_WHITE){n=this.getGroup(x);var v,y=(0,C.Z)(n);try{for(y.s();!(v=y.n()).done;){v.value.isMarked=!1}}catch(b){y.e(b)}finally{y.f()}n.length<3||(h=this.pickBubble(n,this.targetChecker.comboScore,c+h+c))}}return c+h}},{key:"onFire",value:function(n){var t=null,e=this.targetChecker.comboScore,i=n.type;i===sn.MELODY_BALL_TYPE_NORMAL&&(t=this.getGroup(n),this.targetChecker.comboScore+=10),i===sn.MELODY_BALL_TYPE_BOOM&&(t=this.getNeighborbyLevel(n,3),e=250),i===sn.MELODY_BALL_TYPE_LINE&&(t=this.getLineNeighbor(n,3),e=500);var o,r=n.neighbors.filter((function(n){return n&&n.type===sn.MELODY_BALL_TYPE_EXPLODE})),a=(0,C.Z)(r);try{for(a.s();!(o=a.n()).done;){var s,l=o.value;(s=t).push.apply(s,(0,E.Z)(this.getNeighborbyLevel(l,2)))}}catch(h){a.e(h)}finally{a.f()}var c,u=(0,C.Z)(t);try{for(u.s();!(c=u.n()).done;){c.value.isMarked=!1}}catch(h){u.e(h)}finally{u.f()}return t=t.filter((function(n){return!n.isEmpty})),t.length<3&&i===sn.MELODY_BALL_TYPE_NORMAL?(this.gun.reset(),this.targetChecker.comboScore=10,t.length<2&&!n.neighbors[1]&&!n.neighbors[2]?-1:0):this.pickBubble(t,e,0)}},{key:"putBubble3",value:function(n){var t=this,e=0,i=0,o=[n],r=0,a=0,s=0,l=n,c=l.sprite,u=l.nextType,h=this.container,d=h.x,p=h.y;if(u===sn.MELODY_BALL_TYPE_NORMAL&&!n.neighbors[1]&&!n.neighbors[2]&&this.getGroup(n).length<2)n.setType(sn.MELODY_BALL_TYPE_NONE),S.ZP.to(c,{width:hn,height:hn,duration:.2}).then((function(){n.setColor(0),c.width=V,c.height=V,d+=c.x,p+=c.y,t.effect.spawnErase(d,p,t.gun.rayColor),t.gun.reset(),t.targetChecker.comboScore=10}));else{for(;a<o.length;){if(a===s){i+=e,s=o.length;for(var f=r;f<a;f++){var m=o[f];m.type=m.nextType}for(var g=a;g<s;g++){var x=o[g];x.type!==sn.MELODY_BALL_TYPE_NONE&&x.type!==sn.MELODY_BALL_TYPE_WHITE||x.type===x.nextType||x.nextType===sn.MELODY_BALL_TYPE_NONE||(x.type=x.type===sn.MELODY_BALL_TYPE_WHITE?sn.MELODY_BALL_TYPE_NORMAL:x.nextType,gn(x,i))}r=a}n=o[a++];var v,y=(0,C.Z)(n.neighbors);try{for(y.s();!(v=y.n()).done;){var b=v.value;if(b){var w=xn(n,b,i);w>0&&o.push(b),w>e&&(e=w)}}}catch(A){y.e(A)}finally{y.f()}}n=o[0]}var Z=e>0?0:n.sprite.y;if(this.data[this.data.length-1].sprite.y<=Z&&this.addEmptyLine(1),Z+p>9*X+q&&S.ZP.to(this.container,{y:p-X}).duration(.5),this.reset(),i>0)S.ZP.delayedCall(i,this.sweepMap.bind(this)),u===sn.MELODY_BALL_TYPE_NORMAL&&(this.targetChecker.comboScore+=10),this.boomHolder.combo();else if(n.type===sn.MELODY_BALL_TYPE_NORMAL){var k=S.ZP.timeline();k.add(S.ZP.to(c,{width:1.2*V,height:1.2*V,duration:.1})),k.add(S.ZP.to(c,{width:V,height:V,duration:.2})),k.then((function(){t.gun.reset(),t.targetChecker.comboScore=10}))}o=this.getNeighborbyLevel(n,3);var P,j=(0,C.Z)(o);try{for(j.s();!(P=j.n()).done;){var _=P.value;if(_!==n&&!_.isEmpty&&_.type!==sn.MELODY_BALL_TYPE_STONE){var L=_.sprite,E=L.x,T=L.y,M=new an(E-c.x,T-c.y),B=M.lengthSqr();M.normalize().multiply(1e5/B);var O=S.ZP.timeline();O.add(S.ZP.to(_.sprite,{x:E+M.x,y:T+M.y}).duration(.1)),O.add(S.ZP.to(_.sprite,{x:E,y:T}).duration(.2))}}}catch(A){j.e(A)}finally{j.f()}}},{key:"putBubble",value:function(n){var t=this,e=this.gun.rayColor,i=this.container,o=this.onFire(n),r=o>0?0:n.sprite.y;this.data[this.data.length-1].sprite.y<=r&&this.addEmptyLine(1),r+i.y>9*X+q&&S.ZP.to(i,{y:i.y-X}).duration(.5),this.reset();var a=V,s=n.sprite;if(0===o){var l=S.ZP.timeline();l.add(S.ZP.to(s,{width:1.1*a,height:1.1*a,duration:.1})),l.add(S.ZP.to(s,{width:a,height:a,duration:.2}))}else o<0?(o=0,S.ZP.to(s,{width:.1*a,height:.1*a,duration:.2}).then((function(){n.setColor(0),s.width=a,s.height=a;var o=i.x,r=i.y;o+=s.x,r+=s.y,t.effect.spawnErase(o,r,e)}))):S.ZP.delayedCall(Math.max(o-.1,0),this.sweepMap.bind(this));var c,u=this.getNeighborbyLevel(n,3),h=(0,C.Z)(u);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(d.isMarked=!1,d!==n&&!d.isEmpty){var p=d.sprite,f=p.x,m=p.y,g=new an(f-s.x,m-s.y),x=g.lengthSqr();g.normalize().multiply(1e5/x);var v=S.ZP.timeline();v.add(S.ZP.to(d.sprite,{x:f+g.x,y:m+g.y}).duration(.1)),v.add(S.ZP.to(d.sprite,{x:f,y:m}).duration(.2))}}}catch(y){h.e(y)}finally{h.f()}return o+.5}},{key:"sweepMap",value:function(){for(var n=this,t=this.data,e=0,i=e+H,o=[];e<i;e++){var r=t[e];r.isEmpty||(o.push(r),r.isMarked=!0)}for(var a=0,s=t[0].sprite.y;a<o.length;){var l,c=o[a].neighbors,u=(0,C.Z)(c);try{for(u.s();!(l=u.n()).done;){var h=l.value;!h||h.isEmpty||h.isMarked||(o.push(h),h.isMarked=!0,h.sprite.y>s&&(s=h.sprite.y))}}catch(w){u.e(w)}finally{u.f()}a++}var d=[];for(e=0,i=t.length;e<i;e++){var p=t[e];p.isEmpty||p.isMarked||d.push(p),p.isMarked=!1}var f=this.container;if(s+f.y<q+V){var m=9*X;m=-(m=Math.max(s-m,0))+q,S.ZP.to(f,{y:m}).duration(Math.max(.002*Math.abs(m-f.y),.3))}for(var g=f.x-this.physicsBox.x,x=f.y-this.physicsBox.y,v=0,y=d;v<y.length;v++){var b=y[v];this.physicsBox.addBubble(b,g,x),b.isOrigin&&this.targetChecker.countBall(b.color,b.type),b.setColor(0)}S.ZP.delayedCall(.2,(function(){n.targetChecker.check()?(n.gun.turnOff(),n.gun.scoreBullet(),n.boomHolder.end(!0),n.effect.spawnFirework(),S.ZP.delayedCall(Math.max(Math.min(d.length,3),2),(function(){return $n.setWinPopupVisible(!0)}))):n.gun.reset()}))}},{key:"getGroup",value:function(n){var t=[n],e=n.color;n.isMarked=!0;for(var i=0;i<t.length;){var o,r=t[i++].neighbors,a=(0,C.Z)(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;!s||s.isMarked||s.isEmpty||s.color!==e||(t.push(s),s.isMarked=!0)}}catch(u){a.e(u)}finally{a.f()}}for(var l=0,c=t;l<c.length;l++){c[l].isMarked=!1}return t}},{key:"getLineNeighbor",value:function(n,t){var e=[n];n.isMarked=!0;for(var i=n.neighbors[0],o=n.neighbors[3],r=1;r<t;r++)i&&(e.push(i),i.isMarked=!0,i=i.neighbors[0]),o&&(e.push(o),o.isMarked=!0,o=o.neighbors[3]);for(var a=0,s=e;a<s.length;a++){s[a].isMarked=!1}return e}},{key:"getNeighborbyLevel",value:function(n,t){var e=[n],i=0,o=e.length;n.isMarked=!0;for(var r=1;r<t;r++){for(;i<o;i++){var a,s=e[i].neighbors,l=(0,C.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c&&!c.isMarked&&(e.push(c),c.isMarked=!0)}}catch(d){l.e(d)}finally{l.f()}}o=e.length}for(var u=0,h=e;u<h.length;u++){h[u].isMarked=!1}return e}},{key:"onButtonOver",value:function(n,t){if(n.isEmpty||t===sn.MELODY_BALL_TYPE_LINE)switch(t){case sn.MELODY_BALL_TYPE_NORMAL:n.turn(0);break;case sn.MELODY_BALL_TYPE_BOOM:var e,i=this.getNeighborbyLevel(n,3),o=(0,C.Z)(i);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.turn(r.color)}}catch(p){o.e(p)}finally{o.f()}break;case sn.MELODY_BALL_TYPE_LINE:var a,s=this.getLineNeighbor(n,3),l=(0,C.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=a.value;c.turn(c.color)}}catch(p){l.e(p)}finally{l.f()}}else{var u,h=this.getGroup(n),d=(0,C.Z)(h);try{for(d.s();!(u=d.n()).done;){u.value.turn(n.color)}}catch(p){d.e(p)}finally{d.f()}}}}],[{key:"findLevelConfig",value:function(n,t){var e,i=(0,C.Z)(n.chapters);try{for(i.s();!(e=i.n()).done;){var o,r=e.value,a=(0,C.Z)(r.levels);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.id===t)return s}}catch(l){a.e(l)}finally{a.f()}}}catch(l){i.e(l)}finally{i.f()}return rn||null}}]),e}(k.W20),Nn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this))._mapPosition=new k.AB0((function(){}),(0,vn.Z)(i),0,0),i._onPositionChange=void 0,i.camera=void 0,i._objectHeight=0,i.camera=n,i}return(0,u.Z)(e,[{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,n.y),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"objectHeight",get:function(){return this._objectHeight},set:function(n){this._objectHeight=n}},{key:"onPositionChange",set:function(n){this._onPositionChange=n}},{key:"updateDrawPosition",value:function(){if(this.camera&&!this.isInactive()){var n=this.camera.calculateDrawPosition(this);this.position.set(n.x,n.y)}}},{key:"addDebugLine",value:function(){}},{key:"addDebugRect",value:function(n){}}]),e}(k.W20),Yn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Yn||{}),In=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this,null)).isDragging=!1,n.touchDownY=0,n.touchY=0,n.touchDownTime=0,n.touchIdentifier=-1,n.rootY=0,n.state=Yn.Null,n.speedY=0,n.yMin=0,n.yMax=0,n.position.set(.5*j,.5*_),n.interactive=!0,n.on("pointerdown",n.onPointerDown.bind((0,vn.Z)(n))),n.on("pointermove",n.onPointerMove.bind((0,vn.Z)(n))),n.on("pointerup",n.onPointerUp.bind((0,vn.Z)(n))),n.on("pointercancel",n.onPointerUp.bind((0,vn.Z)(n))),n.on("pointerupoutside",n.onPointerUp.bind((0,vn.Z)(n))),n}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Yn.Active:this.isDragging=!1,this.speedY=0;case Yn.Inactive:}}},{key:"update",value:function(n){if(this.state===Yn.Active)this.updatePosition(n)}},{key:"mapPosition",get:function(){return this._mapPosition},set:function(n){var t;this._mapPosition.set(n.x,Tn.clamp(n.y,this.yMin,this.yMax)),null===(t=this._onPositionChange)||void 0===t||t.call(this)}},{key:"isInactive",value:function(){return this.state===Yn.Active}},{key:"active",value:function(){this.setState(Yn.Active)}},{key:"inactive",value:function(){this.setState(Yn.Inactive)}},{key:"calculateDrawPosition",value:function(n){return{x:n.mapPosition.x-this.mapPosition.x+.5*j,y:-(n.mapPosition.y-this.mapPosition.y)+.5*_}}},{key:"setYMinMax",value:function(n,t){this.yMin=n,this.yMax=t}},{key:"setHitAreaSize",value:function(n,t){this.hitArea||(this.hitArea=new k.AeJ(-.5*n,-.5*t,n,t)),this.hitArea.width=n,this.hitArea.height=t}},{key:"onPointerDown",value:function(n){this.isDragging||(this.isDragging=!0,this.touchDownY=this.touchY=n.clientY,this.touchDownTime=Date.now(),this.rootY=this.mapPosition.y)}},{key:"onPointerMove",value:function(n){if(this.isDragging){this.touchY=n.clientY;var t=(n.clientY-this.touchDownY)*(j/window.innerWidth);this.mapPosition={x:this.mapPosition.x,y:this.rootY+t}}}},{key:"onPointerUp",value:function(n){if(this.isDragging){this.isDragging=!1;var t=(this.touchY-this.touchDownY)*(j/window.innerWidth),e=Date.now()-this.touchDownTime;this.speedY=t/(e/1e3),this.speedY=Math.sign(this.speedY)*Math.max(Math.abs(this.speedY)-1e3,0)}}},{key:"updatePosition",value:function(n){if(!this.isDragging&&0!==this.speedY){this.speedY=Tn.moveToTarget(this.speedY,0,Math.max(Math.abs(1*this.speedY),6e3),n);var t=this.mapPosition.x,e=this.mapPosition.y+this.speedY*n;this.mapPosition={x:t,y:e}}}},{key:"getTouchByIdentifier",value:function(n,t){var e,i,o=null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.originalEvent)||void 0===i?void 0:i.changedTouches;if(!o)return null;for(var r=0;r<o.length;r++){var a=o[r];if(a.identifier==t)return a}return null}}]),e}(Nn),Dn=new(function(){function n(){(0,c.Z)(this,n),this.textures=new Map}return(0,u.Z)(n,[{key:"from",value:function(n){return this.textures.has(n)||this.textures.set(n,k.xEZ.from(n)),this.textures.get(n)}}]),n}()),Rn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Rn||{}),Un=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).geometry=void 0,i.material=void 0,i.mesh=void 0,i.sprite=void 0,i.state=Rn.Null,i.sprite=new k.jyi,i.sprite.anchor.set(.5,1),i.addChild(i.sprite),i.setState(Rn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Rn.Active:this.visible=!0;break;case Rn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Rn.Active)}},{key:"inactive",value:function(){this.setState(Rn.Inactive)}},{key:"isInactive",value:function(){return this.state===Rn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Dn.from(n)}},{key:"addMesh",value:function(){this.geometry=new k.ZXM,this.geometry.addAttribute("aVertexPosition",[-.5,-.5,.5,-.5,.5,.5,-.5,.5],2),this.geometry.addAttribute("aUvs",[0,0,1,0,1,1,0,1],2),this.geometry.addIndex([0,1,2,0,2,3]),this.material=new k.rY4(k.xEZ.WHITE),this.mesh=new k.Kj0(this.geometry,this.material),this.mesh.scale.set(10,10),this.mesh.tint=16711680,this.addChild(this.mesh)}}]),e}(Nn),zn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(zn||{}),Fn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=zn.Null,i.sprite=void 0,i.sprite=new k.jyi,i.sprite.anchor.set(.5,.5),i.addChild(i.sprite),i.addDebugLine(),i.setState(zn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case zn.Active:this.visible=!0;break;case zn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(zn.Active)}},{key:"inactive",value:function(){this.setState(zn.Inactive)}},{key:"isInactive",value:function(){return this.state===zn.Inactive}},{key:"setImg",value:function(n){this.sprite.texture=Dn.from(n)}},{key:"setImgAnchor",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.sprite.anchor.set(n,t)}}]),e}(Nn),Wn=e(9945),Hn=function(n){return n[n.Null=0]="Null",n[n.Active=1]="Active",n[n.Inactive=2]="Inactive",n}(Hn||{}),Vn=new k.pn8({align:"center",fontFamily:"iCielUniSans",fill:["#fffbee"],stroke:"#e366b6",strokeThickness:6,fontSize:36,fontWeight:"900",lineJoin:"round"}),Gn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this,n)).state=Hn.Null,i.sprite=void 0,i.numberText=void 0,i.chapterId=0,i.levelId=0,i.isNewLevel=!1,i.levelInfo=null,i.isTouchAble=!1,i.isPointerDown=!1,i.pointerDownPos={x:0,y:0},i.pointerDownTime=0,i.sprite=new k.jyi,i.sprite.anchor.set(.5,1),i.numberText=new k.xvT("",Vn),i.numberText.anchor.set(.5,.5),i.numberText.position.set(0,-70),i.interactive=!0,i.hitArea=new k.AeJ(-60,-110,120,120),i.on("pointerdown",i.onPointerDown,(0,vn.Z)(i)),i.on("pointerup",i.onPointerUp,(0,vn.Z)(i)),i.on("pointercancel",i.onPointerCancle,(0,vn.Z)(i)),i.on("pointerupoutside",i.onPointerCancle,(0,vn.Z)(i)),i.addChild(i.sprite),i.addChild(i.numberText),i.addDebugLine(),i.addDebugRect(i.hitArea),i.setState(Hn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Hn.Active:this.visible=!0,this.isPointerDown=!1;break;case Hn.Inactive:this.visible=!1}}},{key:"active",value:function(){this.setState(Hn.Active)}},{key:"inactive",value:function(){this.setState(Hn.Inactive)}},{key:"isInactive",value:function(){return this.state===Hn.Inactive}},{key:"setLevelInfo",value:function(n,t){this.chapterId=n,this.levelId=t,this.numberText.text="".concat(this.levelId),this.updateVisible()}},{key:"updateVisible",value:function(){var n,t,e,i,o,r,a=this,s=null===(n=B.Z.getState().user)||void 0===n||null===(t=n.profile)||void 0===t?void 0:t.chapters;if(this.levelInfo=null===s||void 0===s||null===(e=s.find)||void 0===e||null===(i=e.call(s,(function(n){return n.id==a.chapterId})))||void 0===i||null===(o=i.levels)||void 0===o||null===(r=o.find)||void 0===r?void 0:r.call(o,(function(n){return n.id==a.levelId})),this.levelInfo){var l=[p.dN.worldMap.level0Star,p.dN.worldMap.level1Star,p.dN.worldMap.level2Star,p.dN.worldMap.level3Star];this.sprite.texture=Dn.from(l[this.levelInfo.stars]),this.isTouchAble=!0,this.isNewLevel=!1}else{if(1==this.levelId)this.sprite.texture=Dn.from(p.dN.worldMap.level0Star),this.isTouchAble=!0;else{var c,u,h,d,f=null===s||void 0===s||null===(c=s.find)||void 0===c||null===(u=c.call(s,(function(n){return n.id==a.chapterId})))||void 0===u||null===(h=u.levels)||void 0===h||null===(d=h.find)||void 0===d?void 0:d.call(h,(function(n){return n.id==a.levelId-1}));this.sprite.texture=Dn.from(f?p.dN.worldMap.level0Star:p.dN.worldMap.levelDisable),this.isTouchAble=!!f}this.isNewLevel=!0}}},{key:"onClick",value:function(){var n,t,e;this.isTouchAble&&(B.Z.dispatch(Wn.U.actions.updateCurrentLevel({id:this.levelId,stars:(null===(n=this.levelInfo)||void 0===n?void 0:n.stars)||0,highScore:(null===(t=this.levelInfo)||void 0===t?void 0:t.highScore)||0,goldenStep:!(null===(e=this.levelInfo)||void 0===e||!e.goldenStep)})),this.isNewLevel?B.Z.dispatch(Wn.U.actions.setShowPlayNewLevelPopup(!0)):B.Z.dispatch(Wn.U.actions.setShowPlayLevelAgainPopup(!0)))}},{key:"onPointerDown",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerDown(n),this.isPointerDown=!0,this.pointerDownPos.x=n.data.global.x,this.pointerDownPos.y=n.data.global.y,this.pointerDownTime=Date.now()}},{key:"onPointerUp",value:function(n){var t;if(null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown){this.isPointerDown=!1;var e=n.data.global.x-this.pointerDownPos.x,i=n.data.global.y-this.pointerDownPos.y,o=Date.now()-this.pointerDownTime;e<=20&&i<=20&&o<=100&&this.onClick()}}},{key:"onPointerCancle",value:function(n){var t;null===(t=this.camera)||void 0===t||t.onPointerUp(n),this.isPointerDown=!1}}]),e}(Nn),Xn=function(n){return n[n.Null=0]="Null",n[n.Start=1]="Start",n[n.Active=2]="Active",n[n.Inactive=3]="Inactive",n}(Xn||{}),qn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(n){var i;return(0,c.Z)(this,e),(i=t.call(this)).imagesDefine=null,i.chapters=[],i.chapter=null,i.gameRender=void 0,i.state=Xn.Null,i.camera=new In,i.grounds=[],i.decoObjects=[],i.levelPlatforms=[],i.isSortObjects=!1,i.groundLayer=new k.W20,i.objectLayer=new k.W20,i.gameRender=n,i.camera.onPositionChange=i.onCameraPositionChange.bind((0,vn.Z)(i)),i.addChild(i.camera),i.addChild(i.groundLayer),i.addChild(i.objectLayer),i.setState(Xn.Inactive),i}return(0,u.Z)(e,[{key:"setState",value:function(n){switch(this.state=n,this.state){case Xn.Start:this.visible=!0;break;case Xn.Active:break;case Xn.Inactive:this.visible=!1,this.inactiveAllObjects()}}},{key:"update",value:function(n){switch(this.state){case Xn.Start:this.setState(Xn.Active);break;case Xn.Active:this.camera.update(n),this.sortObjects();case Xn.Inactive:}}},{key:"start",value:function(){this.setState(Xn.Start)}},{key:"end",value:function(){this.setState(Xn.Inactive)}},{key:"setChapters",value:function(n,t,e){this.imagesDefine=n,this.chapters=t.map((function(n){return JSON.parse(JSON.stringify(n))}));var i=this.chapters.find((function(n){return n.id==e}));i&&this.setChapter(i)}},{key:"test",value:function(){var n=new Un(this.camera);this.addChild(n),n.position.set(200,200)}},{key:"onCameraPositionChange",value:function(){var n=this,t=this.chapter,e=t.backgrounds,i=t.decors,o=t.checkpoints,r=t.id,a=this.gameRender.app.renderer.height,s=this.camera.mapPosition.y-.7*a,l=this.camera.mapPosition.y+.7*a;this.grounds.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y)&&n.inactive()})),e.forEach((function(t){var e;if(!(l<t.y)){var i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],o=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+o<s)){var r=n.grounds.find((function(n){return n.mapPosition.y==t.y}));r||(r=n.getObject(n.grounds,Un,n.groundLayer)),r.isInactive()&&(r.active(),r.setImg(i.url),r.objectHeight=o,r.mapPosition={x:0,y:t.y})}}})),this.decoObjects.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),i.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],o=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+o<s||l<t.y-o)){var r=n.decoObjects.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));r||(r=n.getObject(n.decoObjects,Fn,n.objectLayer,null===i||void 0===i?void 0:i.url)),r.isInactive()&&(r.active(),r.setImg(null===i||void 0===i?void 0:i.url),r.setImgAnchor(null===i||void 0===i?void 0:i.anchorX,null===i||void 0===i?void 0:i.anchorY),r.objectHeight=o,r.mapPosition={x:t.x,y:t.y})}})),this.levelPlatforms.forEach((function(n){n.isInactive()||(n.mapPosition.y+n.objectHeight<s||l<n.mapPosition.y-n.objectHeight)&&n.inactive()})),o.forEach((function(t){var e,i=null===(e=n.imagesDefine)||void 0===e?void 0:e[t.imageId],o=(null===i||void 0===i?void 0:i.height)||0;if(!(t.y+o<s||l<t.y-o)){var a=n.levelPlatforms.find((function(n){return n.mapPosition.x===t.x&&n.mapPosition.y===t.y}));a||(a=n.getObject(n.levelPlatforms,Gn,n.objectLayer)),a.isInactive()&&(a.active(),a.setLevelInfo(r,t.id),a.mapPosition={x:t.x,y:t.y})}})),this.groundLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.objectLayer.children.forEach((function(n){return n.updateDrawPosition()})),this.onObjectPostionChange()}},{key:"onObjectPostionChange",value:function(){this.isSortObjects=!0}},{key:"getObject",value:function(n,t,e,i){var o=n.find((function(n){var t,e,o=null===(t=(e=n).getImg)||void 0===t?void 0:t.call(e);return i?n.isInactive()&&(!o||o==i):n.isInactive()}));return o||((o=new t(this.camera)).onPositionChange=this.onObjectPostionChange.bind(this),n.push(o),e.addChild(o)),o}},{key:"sortObjects",value:function(){this.isSortObjects&&(this.isSortObjects=!1,this.objectLayer.children.sort((function(n,t){return n.position.y-t.position.y})))}},{key:"inactiveAllObjects",value:function(){this.groundLayer.children.forEach((function(n){return n.inactive()})),this.objectLayer.children.forEach((function(n){return n.inactive()}))}},{key:"setChapter",value:function(n){var t,e;this.chapter=n;var i=this.chapter,o=i.backgrounds,r=i.offsetTop,a=i.offsetBottom;this.inactiveAllObjects();var s=o[o.length-1],l=(null===(t=this.imagesDefine)||void 0===t||null===(e=t[s.imageId])||void 0===e?void 0:e.height)||0,c=j,u=j/window.innerWidth*window.innerHeight;this.camera.setHitAreaSize(c,u),this.camera.setYMinMax(0+.5*u+a,s.y+l-.5*u+r),this.camera.mapPosition={x:0,y:0},this.camera.active()}}]),e}(k.W20),Jn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).background=void 0,n.spBoard=null,n.spBottom=null,n.spStar=null,n.spLightLeft=null,n.spLightRight=null,n.visible=!1,n.background=e.createBackgroundTransparent(),n.addChild(n.background),setTimeout((function(){n.initObject()}),5e3),n}return(0,u.Z)(e,[{key:"show",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e,i,o,r,a,l,c,u,h=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.visible=t,!t){n.next=14;break}return n.next=4,this.initObject();case 4:e=["anim_khangia_lv1","anim_khangia_lv1","anim_khangia_lv2","anim_khangia_lv3"],i=["anim_win_lv1","anim_win_lv1","anim_win_lv2","anim_win_lv3"],o=B.Z.getState().mainGame.currentGame,r=o.score,o.level,a=o.star1Score,l=o.star2Score,c=o.star3Score,u=r>=c?3:r>=l?2:r>=a?1:0,this.spBoard&&setTimeout((function(){h.spBoard.state.setAnimation(0,"anim_popup_appear",!1),h.spBoard.state.addAnimation(0,"anim_popup_idle_loop",!0,0)}),0),this.spBottom&&setTimeout((function(){h.spBottom.state.setAnimation(0,e[u],!0)}),0),this.spStar&&(this.spStar.alpha=0,setTimeout((function(){h.spStar.alpha=u>0?1:0,h.spStar.state.setAnimation(0,i[u],!1)}),500)),this.spLightLeft&&this.spLightLeft.state.setAnimation(0,"anim_stage_light",!0),this.spLightRight&&this.spLightRight.state.setAnimation(0,"anim_stage_light",!0),setTimeout((function(){B.Z.dispatch(O.X.actions.setWinPopupVisible(!0))}),1e3);case 14:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"initObject",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,e,i,o,r,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tn.loadSpine(p.dN.spine.popupWin);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:e=Tn.getScreenSize(),i=e.screenWidth,o=e.screenHeight,r=e.offsetX,a=e.offsetY,this.spBottom||(this.spBottom=new En.PY(t),this.spBottom.position.set(.5*i,1*o+a),this.addChild(this.spBottom)),this.spBoard||(this.spBoard=new En.PY(t),this.spBoard.position.set(.5*i,.4*o),this.addChild(this.spBoard)),this.spStar||(this.spStar=new En.PY(t),this.spStar.position.set(.5*i,.4*o),this.addChild(this.spStar)),this.spLightLeft||(this.spLightLeft=new En.PY(t),this.spLightLeft.position.set(0*i-r,.1*o),this.spLightLeft.scale.set(2,2),this.addChild(this.spLightLeft)),this.spLightRight||(this.spLightRight=new En.PY(t),this.spLightRight.position.set(1*i+r,.1*o),this.spLightRight.scale.set(-2,2),this.addChild(this.spLightRight));case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}],[{key:"createBackgroundTransparent",value:function(){var n=Tn.getScreenSize(),t=n.screenWidth,e=n.screenHeight,i=t+2*n.offsetX,o=e+2*n.offsetY,r=k.jyi.from(k.xEZ.WHITE);return r.tint=0,r.position.set(.5*t,.5*e),r.anchor.set(.5,.5),r.scale.set(i/16,o/16),r.alpha=.5,r.interactive=!0,r.hitArea=new k.AeJ(-.5*i,-.5*o,i,o),r}}]),e}(k.W20),Qn=function(n){(0,T.Z)(e,n);var t=(0,M.Z)(e);function e(){var n;return(0,c.Z)(this,e),(n=t.call(this)).background=void 0,n.spBoard=null,n.visible=!1,n.background=Jn.createBackgroundTransparent(),n.addChild(n.background),n}return(0,u.Z)(e,[{key:"show",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var e=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.visible=t,!t){n.next=6;break}return n.next=4,this.initObject();case 4:this.spBoard&&setTimeout((function(){e.spBoard.state.setAnimation(0,"anim_popup_appear_lose",!1),e.spBoard.state.addAnimation(0,"anim_popup_idle_loop_lose",!0,0)}),0),setTimeout((function(){B.Z.dispatch(O.X.actions.setLosePopupVisible(!0))}),1e3);case 6:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}()},{key:"initObject",value:function(){var n=(0,l.Z)((0,s.Z)().mark((function n(){var t,e,i,o;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tn.loadSpine(p.dN.spine.popupWin);case 2:if(t=n.sent){n.next=5;break}return n.abrupt("return");case 5:e=Tn.getScreenSize(),i=e.screenWidth,o=e.screenHeight,e.offsetX,e.offsetY,this.spBoard||(this.spBoard=new En.PY(t),this.spBoard.position.set(.5*i,.4*o),this.addChild(this.spBoard));case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()}]),e}(k.W20),Kn=function(){function n(){(0,c.Z)(this,n),this.render=void 0,this.map=void 0,this.worldMap=void 0,this.winPopup=new Jn,this.losePopup=new Qn,this._isPlaying=!0,this.render=new L({fitWidth:!0,trasparent:0,alignCenter:!0,maxFPS:45,minFPS:30}),this.init(),console.log("[PixiJs] constructor"),this.render.onUpdate=this.onUpdate.bind(this)}return(0,u.Z)(n,[{key:"view",get:function(){return this.render.view}},{key:"canvas",get:function(){return this.render.canvas}},{key:"scale",get:function(){return this.render.app.stage.scale}},{key:"stage",get:function(){return this.render.stage}},{key:"initDom",value:function(n){this.render.init(n)}},{key:"init",value:function(){this.worldMap=new qn(this.render),this.render.stage.addChild(this.worldMap),this.map=new An(window.location.href.includes(p.dI.ColorTool)),this.render.stage.addChild(this.map),this.render.stage.addChild(this.winPopup),this.render.stage.addChild(this.losePopup)}},{key:"onUpdate",value:function(n){var t,e;null===(t=this.worldMap)||void 0===t||t.update(n),null===(e=this.map)||void 0===e||e.update(n)}},{key:"pause",value:function(){this.isPlaying=!1,this.render.pause()}},{key:"resume",value:function(){this.isPlaying=!0,this.render.resume()}},{key:"getObjectAbsolutePos",value:function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},e=n.x,i=n.y,o=n.parent;o;)e*=o.scale.x,e+=o.x,i*=o.scale.y,i+=o.y,o=o.parent;return{x:(e+t.x)/window.innerWidth*100,y:(i+t.y)/window.innerHeight*100}}},{key:"isPlaying",get:function(){return this._isPlaying},set:function(n){this._isPlaying=n}},{key:"startWorldMap",value:function(){this.worldMap.start(),this.map&&(this.map.visible=!1)}},{key:"endWorldMap",value:function(){this.worldMap.end(),this.map&&(this.map.visible=!0),this.render.app.render()}},{key:"setChapters",value:function(n,t,e){this.worldMap.setChapters(n,t,e)}},{key:"setWinPopupVisible",value:function(n){B.Z.dispatch(O.X.actions.setUIVisible(!n)),this.winPopup.show(n)}},{key:"setLosePopupVisible",value:function(n){B.Z.dispatch(O.X.actions.setUIVisible(!n)),this.losePopup.show(n)}}]),n}(),$n=new Kn,nt=e(6417);function tt(){var n=(0,i.useRef)(null);w();return(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){return $n.initDom(n.current),function(){}}),[n.current]),(0,i.useEffect)((function(){var t=function(){setTimeout((function(){$n.initDom(n.current),$n.resume()}),500)},e=function(){$n.pause()};return t(),a.r.on(a.B.On_RESUME,t),a.r.on(a.B.On_PAUSE,e),a.r.on(a.B.ON_RESIZE,t),function(){e(),a.r.off(a.B.On_RESUME,t),a.r.off(a.B.On_PAUSE,e),a.r.off(a.B.ON_RESIZE,t)}}),[]),(0,nt.jsx)(ut,{className:"game",ref:n})}var et,it,ot,rt,at,st,lt,ct,ut=y.ZP.div(Mn||(Mn=(0,x.Z)(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n"])));function ht(n){var t=(0,i.useState)(d.P.getInCache(n)||""),e=(0,Ln.Z)(t,2),o=e[0],r=e[1];return(0,i.useLayoutEffect)((function(){n&&d.P.cacheFile(n).then((function(n){r(n)}))}),[n]),o}var dt,pt,ft,mt,gt,xt,vt,yt,bt,wt,Zt,kt,Pt,jt,_t,Lt,Et,Tt,Mt,Ct,St,Bt,Ot,At,Nt,Yt,It,Dt,Rt,Ut,zt,Ft,Wt,Ht,Vt,Gt,Xt,qt,Jt,Qt,Kt,$t,ne,te,ee,ie,oe,re,ae,se,le,ce,ue=y.ZP.div(et||(et=(0,x.Z)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),he=(y.ZP.div(it||(it=(0,x.Z)(["\n    min-width: 80px;\n\n    border: 1px solid #000;\n    border-radius: 5px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    padding: 5px 10px;\n"]))),y.ZP.div(ot||(ot=(0,x.Z)(["\n    font-size: 20px;\n    color: #000;\n    text-align: center;\n    white-space: nowrap;\n"]))),y.ZP.div(rt||(rt=(0,x.Z)(["\n    background-image: url(",");\n    background-size: contain;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    width: ",";\n    height: ",";\n"])),(function(n){return n.src}),(function(n){return n.width||"unset"}),(function(n){return n.height||"unset"}))),de=y.ZP.div(at||(at=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n\n    background-color: ",";\n    z-index: 10;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"])),(function(n){return n.backgroundColor||"rgba(0, 0, 0, 0.8)"})),pe=(0,y.ZP)(he)(st||(st=(0,x.Z)(["\n    width: ",";\n    height: ",";\n\n    background-size: 100% 100%;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    margin-top: ",";\n"])),(function(n){return n.width||"135px"}),(function(n){return n.height||"40px"}),(function(n){return n.marginTop||"unset"})),fe=y.ZP.div(lt||(lt=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"])),(function(n){return n.fontSize||"18px"})),me=y.ZP.div(ct||(ct=(0,x.Z)(["\n    width: ",";\n    height: ",";\n    background-image: ",";\n    background-size: 100% 100%;\n"])),(function(n){return n.width}),(function(n){return n.height}),(function(n){return'url("'.concat(n.src,'")')})),ge=function(n){var t=n.target,e=t.type,i=t.quantity,o=t.ball,r=ht(Tn.getTargetTypeImageUrl(e,o)||""),a=ht(p.dN.general.checkIcon),s=Z((function(n){return n.mainGame.targetChecker})),l=Tn.getTargetCount(e,o,s),c=Math.max(i-l,0);return(0,nt.jsxs)(xe,{children:[(0,nt.jsx)(ve,{src:r}),(0,nt.jsx)(ye,{children:c<=0?(0,nt.jsx)(we,{src:a}):(0,nt.jsx)(be,{children:c})})]})},xe=y.ZP.div(dt||(dt=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n"]))),ve=(0,y.ZP)(he)(pt||(pt=(0,x.Z)(["\n    width: 28px;\n    height: 28px;\n    flex: none;\n"]))),ye=y.ZP.div(ft||(ft=(0,x.Z)(["\n    height: 15px;\n    min-width: 32px;\n    background-color: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    flex: none;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: -5px;\n"]))),be=y.ZP.div(mt||(mt=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 2px;\n"]))),we=(0,y.ZP)(he)(gt||(gt=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    margin-top: -2px;\n"]))),Ze=function(){var n=Z((function(n){return n.mainGame.config}));return(0,nt.jsx)(nt.Fragment,{children:!!n&&(0,nt.jsx)(ke,{})})},ke=function(){var n=Z((function(n){return n.worldMap.currentLevel})).id,t=Z((function(n){return n.mainGame.config})),e=An.findLevelConfig(t,n);return(0,nt.jsx)(Pe,{children:(0,nt.jsx)(je,{children:function(){var n;return null===e||void 0===e||null===(n=e.targets)||void 0===n?void 0:n.map((function(n,t){return(0,nt.jsx)(ge,{target:n},t)}))}()})})},Pe=y.ZP.div(xt||(xt=(0,x.Z)(["\n    position: absolute;\n    bottom: 23px;\n    left: 16px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-start;\n    gap: 10px;\n"]))),je=(y.ZP.div(vt||(vt=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),(0,y.ZP)(he)(yt||(yt=(0,x.Z)(["\n    width: 13px;\n    height: 15px;\n"]))),y.ZP.div(bt||(bt=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fff;\n"]))),y.ZP.div(wt||(wt=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 20px;\n"])))),_e=function(n){var t=n.starScore,e=n.maxScore,i=Z((function(n){return n.mainGame.currentGame.score})),o=ht(p.dN.general.starIconDisable),r=ht(p.dN.general.starIconAble);return(0,nt.jsx)(Le,{left:"".concat(t/e*100,"%"),children:(0,nt.jsx)(Ee,{src:o,children:i>=t&&(0,nt.jsx)(Me,{src:r})})})},Le=y.ZP.div(Zt||(Zt=(0,x.Z)(["\n    position: absolute;\n    left: ",";\n    top: 50%;\n    transform: translate(-50%, -50%);\n"])),(function(n){return n.left})),Ee=(0,y.ZP)(he)(kt||(kt=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Te=(0,y.F4)(Pt||(Pt=(0,x.Z)(["\n      0% {transform: translate(-50%, -50%) scale(0);}\n    100% {transform: translate(-50%, -50%) scale(1);}\n"]))),Me=(0,y.ZP)(Ee)(jt||(jt=(0,x.Z)(["\n    width: 28px;\n    height: 28px;\n    transform: translate(-50%, -50%) scale(0);\n    animation-name: ",";\n    animation-duration: 0.3s;\n    animation-fill-mode: forwards;\n    animation-timing-function: cubic-bezier(0, 0.8, 0.8, 1.5);\n"])),Te),Ce=function(){var n=Z((function(n){return n.mainGame.currentGame})),t=n.score,e=n.star1Score,i=n.star2Score,o=n.star3Score,r=o/85*100,a=t/r*100;return(0,nt.jsxs)(Se,{children:[(0,nt.jsx)(Oe,{src:ht(p.dN.general.progressBarBg),children:(0,nt.jsxs)(Ae,{children:[(0,nt.jsx)(Ne,{style:{clipPath:"polygon(0% 0%, ".concat(a,"% 0%, ").concat(a,"% 100%, 0 100%)")}}),[e,i,o].map((function(n,t){return(0,nt.jsx)(_e,{starScore:n,maxScore:r},t)}))]})}),(0,nt.jsx)(Be,{children:Tn.convertNumberToScoreString(t)})]})},Se=y.ZP.div(_t||(_t=(0,x.Z)(["\n    position: absolute;\n    bottom: 21px;\n    right: 16px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n"]))),Be=y.ZP.div(Lt||(Lt=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: 18px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n"]))),Oe=(0,y.ZP)(he)(Et||(Et=(0,x.Z)(["\n    width: 94px;\n    height: 16px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Ae=y.ZP.div(Tt||(Tt=(0,x.Z)(["\n    width: 88px;\n    height: 4px;\n    position: relative;\n"]))),Ne=y.ZP.div(Mt||(Mt=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-image: linear-gradient(90deg, #ff0000, #ffff00);\n    border-radius: 2px;\n    transition: 0.2s linear;\n"]))),Ye=function(){var n=Z((function(n){return n.mainGame.isUIVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(Ie,{})})},Ie=function(){var n=Z((function(n){return n.mainGame.topOpacity}));return(0,nt.jsxs)(De,{src:ht(p.dN.MainGame.headerBg),style:{opacity:n},children:[(0,nt.jsx)(Ze,{}),(0,nt.jsx)(Ce,{})]})},De=(0,y.ZP)(he)(Ct||(Ct=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 104px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    transition: opacity 1s ease-in;\n"]))),Re=function(){var n=Z((function(n){return n.mainGame.isUIVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(Ue,{})})},Ue=function(){var n=w();return(0,nt.jsx)(ze,{children:(0,nt.jsx)(Fe,{src:p.dN.MainGame.optionBtn,onClick:function(){n(O.X.actions.setSettingPopupVisible(!0))}})})},ze=y.ZP.div(St||(St=(0,x.Z)(["\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n    width: 100%;\n"]))),Fe=(0,y.ZP)(he)(Bt||(Bt=(0,x.Z)(["\n    position: absolute;\n    left: 24px;\n    bottom: 45px;\n\n    width: 32px;\n    height: 32px;\n"]))),We=function(n){var t=n.title,e=n.children,i=n.onClose,o=n.marginBottom;return(0,nt.jsx)(de,{children:(0,nt.jsxs)(He,{marginBottom:o,children:[(0,nt.jsx)(Ve,{src:ht(p.dN.general.popupHeader),children:(0,nt.jsx)(Ge,{children:t})}),(0,nt.jsxs)(Xe,{children:[(0,nt.jsx)(qe,{src:ht(p.dN.general.popupBody)}),(0,nt.jsx)(Je,{src:ht(p.dN.general.popupBody),children:e}),(0,nt.jsx)(Qe,{src:ht(p.dN.general.popupBody)})]}),(0,nt.jsx)(Ke,{src:ht(p.dN.general.exitBtn1),onClick:function(){null===i||void 0===i||i()}})]})})},He=y.ZP.div(Ot||(Ot=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    position: relative;\n    width: 327px;\n    margin-bottom: ",";\n"])),(function(n){return n.marginBottom||"unset"})),Ve=(0,y.ZP)(he)(At||(At=(0,x.Z)(["\n    flex: none;\n    width: 100%;\n    height: 63px;\n    margin-bottom: -9px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n"]))),Ge=y.ZP.div(Nt||(Nt=(0,x.Z)(["\n    text-shadow: 0 -1px 3px rgba(0, 0, 0, 0.5);\n    font-family: iCielUniSans;\n    font-size: 20px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n\n    margin-top: 12px;\n"]))),Xe=y.ZP.div(Yt||(Yt=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n"]))),qe=(0,y.ZP)(he)(It||(It=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 0px;\n    background-repeat: no-repeat;\n"]))),Je=(0,y.ZP)(he)(Dt||(Dt=(0,x.Z)(["\n    width: 100%;\n    background-origin: border-box;\n    background-size: 100% 200%;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    /* height: 50px; */\n\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Qe=(0,y.ZP)(he)(Rt||(Rt=(0,x.Z)(["\n    width: 100%;\n    height: 20px;\n    background-origin: border-box;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-repeat: no-repeat;\n"]))),Ke=(0,y.ZP)(he)(Ut||(Ut=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 15px;\n    right: 0px;\n"]))),$e=function(n){var t=n.title,e=n.ctaText,i=n.onClose,o=n.onCta;return(0,nt.jsx)(We,{title:t,onClose:i,children:(0,nt.jsxs)(ni,{children:[(0,nt.jsxs)(ti,{children:[(0,nt.jsx)(ei,{src:ht(p.dN.general.soundIcon)}),(0,nt.jsx)(ii,{children:"\xc2m thanh"}),(0,nt.jsx)(oi,{src:ht(p.dN.general.switchBtnOn)})]}),(0,nt.jsx)(ri,{}),(0,nt.jsxs)(ti,{children:[(0,nt.jsx)(ei,{src:ht(p.dN.general.vibraIcon)}),(0,nt.jsx)(ii,{children:"Rung"}),(0,nt.jsx)(oi,{src:ht(p.dN.general.switchBtnOn)})]}),(0,nt.jsx)(ti,{children:(0,nt.jsx)(pe,{src:ht(p.dN.general.button_1),onClick:function(){null===o||void 0===o||o()},children:(0,nt.jsx)(fe,{children:e})})})]})})},ni=y.ZP.div(zt||(zt=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n\n    margin: 5px 0px;\n"]))),ti=y.ZP.div(Ft||(Ft=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    width: 100%;\n"]))),ei=(0,y.ZP)(he)(Wt||(Wt=(0,x.Z)(["\n    flex: none;\n    width: 32px;\n    height: 32px;\n"]))),ii=y.ZP.div(Ht||(Ht=(0,x.Z)(["\n    flex: auto;\n\n    font-family: SFProText;\n    font-size: 14px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"]))),oi=(0,y.ZP)(he)(Vt||(Vt=(0,x.Z)(["\n    flex: none;\n    width: 60px;\n    height: 28px;\n"]))),ri=y.ZP.div(Gt||(Gt=(0,x.Z)(["\n    width: 100%;\n    height: 2px;\n    background-color: #cba5ff;\n"]))),ai=function(){var n=Z((function(n){return n.mainGame.isSettingPopupVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(si,{})})},si=function(){var n=w();return(0,nt.jsx)($e,{title:"Thi\u1ebft l\u1eadp",ctaText:"D\u1eebng tr\u1eadn \u0111\u1ea5u",onClose:function(){n(O.X.actions.setSettingPopupVisible(!1))},onCta:function(){n(O.X.actions.setSettingPopupVisible(!1)),n(O.X.actions.setConfirmExitPopupVisible(!0))}})},li=function(){var n=Z((function(n){return n.mainGame.isConfirmExitPopupVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(ci,{})})},ci=function(){var n=w(),t=function(){n(O.X.actions.setConfirmExitPopupVisible(!1))};return(0,nt.jsx)(We,{title:"K\u1ebft th\xfac tr\xf2 ch\u01a1i",onClose:t,children:(0,nt.jsxs)(ui,{children:[(0,nt.jsx)(hi,{src:ht(p.dN.general.closeGameBanner)}),(0,nt.jsxs)(di,{children:[(0,nt.jsx)(pi,{children:"B\u1ea1n s\u1ebd b\u1ecb "}),(0,nt.jsx)(pi,{children:"-1 "}),(0,nt.jsx)(fi,{src:ht(p.dN.general.miniHeartIcon)}),(0,nt.jsx)(pi,{children:" n\u1ebfu k\u1ebft th\xfac tr\xf2 ch\u01a1i m\xe0 ch\u01b0a ho\xe0n th\xe0nh m\u1ee5c ti\xeau"})]}),(0,nt.jsxs)(mi,{children:[(0,nt.jsx)(pe,{src:ht(p.dN.general.button_2),onClick:function(){n(O.X.actions.setConfirmExitPopupVisible(!1)),$n.setLosePopupVisible(!0)},children:(0,nt.jsx)(fe,{children:"\u0110\u1ed3ng \xfd"})}),(0,nt.jsx)(pe,{src:ht(p.dN.general.button_1),onClick:t,children:(0,nt.jsx)(fe,{children:"Ch\u01a1i ti\u1ebfp"})})]})]})})},ui=y.ZP.div(Xt||(Xt=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),hi=(0,y.ZP)(he)(qt||(qt=(0,x.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),di=y.ZP.div(Jt||(Jt=(0,x.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),pi=y.ZP.div(Qt||(Qt=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),fi=(0,y.ZP)(he)(Kt||(Kt=(0,x.Z)(["\n    width: 16px;\n    height: 16px;\n    display: inline-block;\n    margin-bottom: -3px;\n"]))),mi=y.ZP.div($t||($t=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n"]))),gi=e(1884),xi=function(){var n=Z((function(n){return n.mainGame.isWinPopupVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(vi,{})})},vi=function(){var n=w(),t=Z((function(n){return n.mainGame.currentGame})),e=t.score,o=t.level,r=t.star1Score,s=t.star2Score,l=t.star3Score,c=Z((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.chapterId}));(0,i.useEffect)((function(){n((0,gi.GE)({chapterId:c,levelId:o,stars:e>=l?3:e>=s?2:e>=r?1:0,highScore:e}))}),[]);return(0,nt.jsxs)(de,{backgroundColor:"rgba(0, 0, 0, 0)",children:[(0,nt.jsxs)(yi,{children:[(0,nt.jsx)(wi,{fontSize:"20px",marginTop:"81px",children:"V\u01b0\u1ee3t \u1ea3i th\xe0nh c\xf4ng"}),(0,nt.jsx)(wi,{fontSize:"16px",marginTop:"30px",children:"\u0110i\u1ec3m"}),(0,nt.jsx)(Zi,{fontSize:"32px",marginTop:"10px",children:Tn.convertNumberToScoreString(e)})]}),(0,nt.jsx)(bi,{height:"20px"}),(0,nt.jsx)(pe,{src:ht(p.dN.general.button_1),width:"200px",height:"46px",onClick:function(){n(O.X.actions.setWinPopupVisible(!1)),$n.setWinPopupVisible(!1),$n.map.reload(o+1)},children:(0,nt.jsx)(fe,{children:"\u1ea2i ti\u1ebfp theo"})}),(0,nt.jsx)(ki,{src:ht(p.dN.general.exitBtn2),onClick:function(){n(O.X.actions.setWinPopupVisible(!1)),$n.setWinPopupVisible(!1),a.r.emit(a.B.Navigate,-1)}})]})},yi=y.ZP.div(ne||(ne=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),bi=y.ZP.div(te||(te=(0,x.Z)(["\n    height: ",";\n"])),(function(n){return n.height})),wi=y.ZP.div(ee||(ee=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Zi=y.ZP.div(ie||(ie=(0,x.Z)(["\n    text-shadow: 0 1px 8px rgba(231, 116, 255, 0.75);\n    -webkit-text-stroke: 1px rgba(207, 7, 240, 0.69);\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),ki=(0,y.ZP)(he)(oe||(oe=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"]))),Pi=function(){var n=Z((function(n){return n.mainGame.isLosePopupVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(ji,{})})},ji=function(){var n=w(),t=function(){console.log("onClose"),n(O.X.actions.setLosePopupVisible(!1)),a.r.emit(a.B.Navigate,-1)};return(0,nt.jsxs)(de,{children:[(0,nt.jsxs)(_i,{src:ht(p.dN.MainGame.loseBg),children:[(0,nt.jsx)(Li,{fontSize:"20px",marginTop:"83px",children:"V\u01b0\u1ee3t \u1ea3i th\u1ea5t b\u1ea1i"}),(0,nt.jsx)(Ei,{fontSize:"12px",marginTop:"15px",children:"Ho\xe0n th\xe0nh t\u1ea5t c\xe1c m\u1ee5c ti\xeau c\u1ee7a \u1ea3i \u0111\u1ec3 chi\u1ebfn th\u1eafng"})]}),(0,nt.jsxs)(pe,{src:ht(p.dN.general.button_1),marginTop:"24px",width:"200px",height:"46px",onClick:function(){console.log("onPlayAgain"),n(O.X.actions.setLosePopupVisible(!1)),a.r.emit(a.B.Navigate,-1)},children:[(0,nt.jsx)(fe,{children:"Ch\u01a1i l\u1ea1i (-1"}),(0,nt.jsx)(he,{src:ht(p.dN.general.miniHeartIcon),width:"24px",height:"24px"}),(0,nt.jsx)(fe,{children:")"})]}),(0,nt.jsx)(pe,{src:ht(p.dN.general.button_2),marginTop:"16px",width:"200px",height:"46px",onClick:t,children:(0,nt.jsx)(fe,{children:"Trang ch\u1ee7"})}),(0,nt.jsx)(Ti,{src:ht(p.dN.general.exitBtn2),onClick:t})]})},_i=(0,y.ZP)(he)(re||(re=(0,x.Z)(["\n    width: 347px;\n    height: 290px;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Li=y.ZP.div(ae||(ae=(0,x.Z)(["\n    -webkit-text-stroke: 1px #681c8d;\n    font-family: iCielUniSans;\n    font-size: ",";\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: ",";\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Ei=y.ZP.div(se||(se=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: ",";\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fff;\n    margin-top: ",";\n    width: 75%;\n"])),(function(n){return n.fontSize||"20px"}),(function(n){return n.marginTop||"unset"})),Ti=(0,y.ZP)(he)(le||(le=(0,x.Z)(["\n    width: 32px;\n    height: 32px;\n    position: absolute;\n    top: 53px;\n    right: 16px;\n"])));function Mi(n){var t=v();return(0,i.useEffect)((function(){return a.r.on(a.B.ON_BACK_KEY,(function(){t(-1)})),function(){a.r.removeAllListeners(a.B.ON_BACK_KEY)}}),[]),(0,nt.jsxs)(Si,{children:[(0,nt.jsx)(tt,{}),(0,nt.jsx)(Ye,{}),(0,nt.jsx)(Re,{}),(0,nt.jsx)(ai,{}),(0,nt.jsx)(li,{}),(0,nt.jsx)(xi,{}),(0,nt.jsx)(Pi,{})]})}var Ci,Si=y.ZP.div(ce||(ce=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"])));function Bi(){var n=(0,i.useRef)(null),t=(0,r.s0)(),e=(0,i.useState)(!1),o=(0,Ln.Z)(e,2),s=o[0],l=o[1],c=(0,i.useState)(""),u=(0,Ln.Z)(c,2),h=u[0],d=u[1],p=(0,i.useState)({}),f=(0,Ln.Z)(p,2),m=f[0],g=f[1];(0,i.useEffect)((function(){return a.r.on(a.B.Navigate,x),function(){a.r.removeAllListeners(a.B.Navigate)}}),[]),(0,i.useEffect)((function(){s&&(t(h,m),S.ZP.fromTo(n.current,{opacity:1},{opacity:0,duration:.5,onComplete:function(){l(!1)}}))}),[s,h]);var x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(n),g(t),l(!0)};return s?(0,nt.jsx)(gr,{ref:n}):null}var Oi,Ai,Ni,Yi,Ii,Di,Ri,Ui,zi,Fi,Wi,Hi,Vi,Gi,Xi,qi,Ji,Qi,Ki,$i,no,to,eo,io,oo,ro,ao,so,lo,co,uo,ho,po,fo,mo,go,xo,vo,yo,bo,wo,Zo,ko,Po,jo,_o,Lo,Eo,To,Mo,Co,So,Bo,Oo,Ao,No,Yo,Io,Do,Ro,Uo,zo,Fo,Wo,Ho,Vo,Go,Xo,qo,Jo,Qo,Ko,$o,nr,tr,er,ir,or,rr,ar,sr,lr,cr,ur,hr,dr,pr,fr,mr,gr=y.ZP.div(Ci||(Ci=(0,x.Z)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000;\n    z-index: 9999;\n"]))),xr=function(n){var t=n.onStart,e=n.onEnd,o=n.onInitDom,r=n.onResume,s=n.onPause,l=(0,i.useRef)(null);return(0,i.useEffect)((function(){l.current&&(null===o||void 0===o||o(l.current))}),[l,o]),(0,i.useEffect)((function(){return null===t||void 0===t||t(),null===r||void 0===r||r(),a.r.on(a.B.On_RESUME,r),a.r.on(a.B.ON_RESIZE,r),a.r.on(a.B.On_PAUSE,s),function(){null===e||void 0===e||e(),null===s||void 0===s||s(),a.r.off(a.B.On_RESUME,r),a.r.off(a.B.ON_RESIZE,r),a.r.off(a.B.On_PAUSE,s)}}),[e,s,r,t]),(0,nt.jsx)(vr,{ref:l})},vr=y.ZP.div(Oi||(Oi=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    top: 0;\n    left: 0;\n\n    overflow: hidden;\n"]))),yr=e(2072),br=function(n){var t=n.children;return(0,nt.jsxs)(nt.Fragment,{children:[(0,nt.jsx)(wr,{src:ht(p.dN.onboarding.speechBubble)}),(0,nt.jsxs)(kr,{children:[(0,nt.jsx)(Pr,{src:ht(p.dN.onboarding.speechBubble)}),t]}),(0,nt.jsx)(Zr,{src:ht(p.dN.onboarding.speechBubble)})]})},wr=(0,y.ZP)(he)(Ai||(Ai=(0,x.Z)(["\n    width: 100%;\n    height: 25px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),Zr=(0,y.ZP)(wr)(Ni||(Ni=(0,x.Z)(["\n    background-position: 0px 100%;\n"]))),kr=y.ZP.div(Yi||(Yi=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 5px;\n    margin-top: -10px;\n    margin-bottom: -10px;\n"]))),Pr=(0,y.ZP)(he)(Ii||(Ii=(0,x.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% 1000%;\n    background-position: 0px 50%;\n    position: absolute;\n    left: 0;\n    top: 10px;\n    bottom: 10px;\n"]))),jr=y.ZP.div(Di||(Di=(0,x.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: 130%;\n    letter-spacing: normal;\n    color: #681c8d;\n    position: relative;\n    z-index: 2;\n    margin: 0px 15px;\n    width: calc(100% - 30px);\n"])),(function(n){return n.fontFamily||"SFProText"}),(function(n){return n.fontSize||"12px"})),_r=y.ZP.div(Ri||(Ri=(0,x.Z)(["\n    width: 240px;\n    position: absolute;\n    bottom: ",";\n    right: ",";\n"])),(function(n){return n.bottom||"130px"}),(function(n){return n.right||"20px"})),Lr=(0,y.ZP)(de)(Ui||(Ui=(0,x.Z)(["\n    *{\n        pointer-events: none;\n    }\n"]))),Er=(0,y.ZP)(he)(zi||(zi=(0,x.Z)(["\n    width: 100%;\n    height: ",";\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n"])),(function(n){return n.height||"286px"})),Tr=function(n){var t=n.children,e=n.speechBubbleContent,i=n.speechBubbleMarginTop;return(0,nt.jsxs)(Mr,{children:[(0,nt.jsx)(Cr,{src:ht(p.dN.onboarding.stageTop)}),t,(0,nt.jsxs)(Sr,{src:ht(p.dN.onboarding.stageBottom),children:[(0,nt.jsx)(Br,{src:ht(p.dN.onboarding.mascot)}),(0,nt.jsx)(Or,{marginTop:i,children:(0,nt.jsx)(br,{children:e})})]})]})},Mr=y.ZP.div(Fi||(Fi=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),Cr=(0,y.ZP)(he)(Wi||(Wi=(0,x.Z)(["\n    width: 100%;\n    height: 44px;\n    position: relative;\n    z-index: 1;\n"]))),Sr=(0,y.ZP)(he)(Hi||(Hi=(0,x.Z)(["\n    width: 100%;\n    height: 92px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n"]))),Br=(0,y.ZP)(he)(Vi||(Vi=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    margin-bottom: 80px;\n"]))),Or=y.ZP.div(Gi||(Gi=(0,x.Z)(["\n    width: 236px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Ar=function(n){var t=n.content,e=n.marginTop;return(0,nt.jsxs)(Nr,{marginTop:e,children:[(0,nt.jsx)(Yr,{src:ht(p.dN.onboarding.iIcon)}),(0,nt.jsx)(Ir,{children:t})]})},Nr=y.ZP.div(Xi||(Xi=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),Yr=(0,y.ZP)(he)(qi||(qi=(0,x.Z)(["\n    width: 15px;\n    height: 15px;\n    margin-right: 2px;\n    margin-bottom: -1px;\n"]))),Ir=y.ZP.div(Ji||(Ji=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 10px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n"]))),Dr=(0,y.ZP)(Lr)(Qi||(Qi=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    background-blend-mode: multiply;\n"])),(function(n){return n.src})),Rr=y.ZP.div(Ki||(Ki=(0,x.Z)(["\n    width: 100%;\n    min-height: ",";\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),(function(n){return n.minHeight})),Ur=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_1")}),[]);return(0,nt.jsxs)(Lr,{children:[(0,nt.jsx)(Er,{src:ht(p.dN.onboarding.step1Bottom)}),(0,nt.jsxs)(zr,{children:[(0,nt.jsxs)(Fr,{src:ht(p.dN.onboarding.levelEffect),children:[(0,nt.jsx)(Wr,{src:ht(p.dN.onboarding.level1),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())}}),(0,nt.jsx)(Vr,{src:ht(p.dN.onboarding.hand)})]}),(0,nt.jsx)(Xr,{src:ht(p.dN.onboarding.effectLightLeft)}),(0,nt.jsx)(qr,{src:ht(p.dN.onboarding.effectLightRight)})]}),(0,nt.jsxs)(_r,{children:[(0,nt.jsxs)(br,{children:[(0,nt.jsx)(jr,{children:"Ch\xe0o m\u1eebng idol \u0111\u1ebfn v\u1edbi h\xe0nh tr\xecnh kh\xe1m ph\xe1 \xe2m nh\u1ea1c"}),(0,nt.jsx)(jr,{children:"C\xf9ng tui \u0111\u1ebfn v\u1edbi th\u1eed th\xe1ch \u0111\u1ea7u ti\xean n\xe0o"})]}),(0,nt.jsx)(Ar,{content:"Nh\u1ea5p v\xe0o \u1ea2i theo h\u01b0\u1edbng ng\xf3n tay",marginTop:"5px"})]})]})},zr=y.ZP.div($i||($i=(0,x.Z)(["\n    width: 100%;\n    height: 0;\n    position: absolute;\n    left: 0;\n    bottom: 300px;\n"]))),Fr=(0,y.ZP)(he)(no||(no=(0,x.Z)(["\n    width: 94px;\n    height: 54px;\n    position: absolute;\n    bottom: 0;\n    left: 51%;\n    transform: translate(-50%, 50%);\n"]))),Wr=(0,y.ZP)(he)(to||(to=(0,x.Z)(["\n    width: 51px;\n    height: 49px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    pointer-events: auto;\n"]))),Hr=(0,y.F4)(eo||(eo=(0,x.Z)(["\n    0% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n    20% {        transform: translate(calc(-50% + 30px), calc(50% + 0px)) rotate(-30deg) scale(1);    }\n    100% {        transform: translate(calc(-50% + 50px), calc(50% + 10px)) rotate(15deg) scale(1.6);    }\n"]))),Vr=(0,y.ZP)(he)(io||(io=(0,x.Z)(["\n    width: 45px;\n    height: 39px;\n    position: absolute;\n    bottom: 34px;\n    left: 51%;\n    transform: translate(-50%, 50%);\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n"])),Hr),Gr=(0,y.F4)(oo||(oo=(0,x.Z)(["\n    0% {\n        opacity: 1;\n        transform: rotate(-1deg) scale(1.05);\n    }\n    100% {\n        opacity: 0.7;\n        transform: rotate(1deg) scale(1);\n    }\n"]))),Xr=(0,y.ZP)(he)(ro||(ro=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -50px;\n    left: -45px;\n    transform-origin: 5% 5%;\n    animation-name: ",";\n    animation-duration: 2s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Gr),qr=(0,y.ZP)(he)(ao||(ao=(0,x.Z)(["\n    width: 227px;\n    height: 244px;\n    position: absolute;\n    bottom: -60px;\n    right: -25px;\n    transform-origin: 95% 5%;\n    animation-name: ",";\n    animation-duration: 2.3s;\n    animation-iteration-count: infinite;\n    animation-direction: alternate;\n    animation-timing-function: ease-in-out;\n"])),Gr),Jr=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_2")}),[]);return(0,nt.jsxs)(Lr,{children:[(0,nt.jsx)(Er,{src:ht(p.dN.onboarding.step2Bottom)}),(0,nt.jsxs)(Qr,{children:[(0,nt.jsx)(Kr,{children:(0,nt.jsx)($r,{src:ht(p.dN.onboarding.ballBg),children:(0,nt.jsx)(ta,{src:ht(p.dN.onboarding.ball1)})})}),(0,nt.jsx)(Kr,{children:(0,nt.jsx)($r,{src:ht(p.dN.onboarding.ballBg),children:(0,nt.jsx)(ta,{src:ht(p.dN.onboarding.ball2),animationDelay:"0.5s"})})}),(0,nt.jsx)(Kr,{children:(0,nt.jsx)($r,{src:ht(p.dN.onboarding.ballBg),children:(0,nt.jsx)(ta,{src:ht(p.dN.onboarding.ball3),animationDelay:"1s"})})}),(0,nt.jsx)(Kr,{children:(0,nt.jsx)($r,{src:ht(p.dN.onboarding.ballBg),children:(0,nt.jsx)(ta,{src:ht(p.dN.onboarding.ball4),animationDelay:"1.5s"})})})]}),(0,nt.jsx)(_r,{bottom:"215px",children:(0,nt.jsxs)(br,{children:[(0,nt.jsx)(jr,{fontSize:"16px",fontFamily:"iCielUniSans",children:"Th\u1eed th\xe1ch \u0111\u1ea7u ti\xean"}),(0,nt.jsx)(jr,{children:"L\xe0m quen \xe2m nh\u1ea1c"})]})}),(0,nt.jsx)(ea,{src:ht(p.dN.onboarding.step2CtaBtn),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())},children:(0,nt.jsx)(fe,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},Qr=y.ZP.div(so||(so=(0,x.Z)(["\n    position: absolute;\n    bottom: 145px;\n    right: 10px;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),Kr=y.ZP.div(lo||(lo=(0,x.Z)(["\n    width: 56px;\n    height: 15px;\n    margin: 35px 0 0;\n    box-shadow: 0 0 0 0.5px #ffd8eb, inset 0 0 0 0.5px #ffd8eb, 0 0 0 1px #fff6fa, inset 0 0 0 1px #fff6fa, 0 0 4px 2px #ff89d5, 0 0 2px 1px rgba(255, 255, 255, 0.5);\n    border-radius: 50%;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),$r=(0,y.ZP)(he)(co||(co=(0,x.Z)(["\n    width: 48px;\n    height: 40px;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    margin-bottom: 25px;\n"]))),na=(0,y.F4)(uo||(uo=(0,x.Z)(["\n    0% {transform: translateY(0px)}\n    100% {transform: translateY(-3px)}\n"]))),ta=(0,y.ZP)(he)(ho||(ho=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    margin-bottom: 28px;\n    flex: none;\n    animation-name: ",";\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n    animation-direction: alternate;\n    animation-delay: ",";\n"])),na,(function(n){return n.animationDelay||"unset"})),ea=(0,y.ZP)(pe)(po||(po=(0,x.Z)(["\n    width: 336px;\n    height: 46px;\n    position: absolute;\n    bottom: 41px;\n    left: 50%;\n    transform: translateX(-50%);\n    pointer-events: auto;\n"]))),ia=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_3")}),[]);return(0,nt.jsxs)(oa,{src:ht(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())},children:[(0,nt.jsx)(ra,{src:ht(p.dN.MainGame.backgroundDeco1)}),(0,nt.jsx)(aa,{}),(0,nt.jsx)(sa,{src:ht(p.dN.onboarding.mascot)}),(0,nt.jsx)(_r,{bottom:"102px",right:"16px",children:(0,nt.jsx)(br,{children:(0,nt.jsx)(jr,{children:"B\u1eafn v\u1ee1 t\u1ea5t c\u1ea3 c\xe1c b\xf3ng \u0111\u1ec3 sang m\xe0n"})})})]})},oa=(0,y.ZP)(Lr)(fo||(fo=(0,x.Z)(["\n    background-image: url(",");\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"])),(function(n){return n.src})),ra=(0,y.ZP)(he)(mo||(mo=(0,x.Z)(["\n    width: 100%;\n    height: 311px;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n"]))),aa=y.ZP.div(go||(go=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n"]))),sa=(0,y.ZP)(he)(xo||(xo=(0,x.Z)(["\n    width: 112px;\n    height: 155px;\n    position: absolute;\n    left: 7px;\n    bottom: 93px;\n"]))),la=e(3683),ca=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_4")}),[]);return(0,nt.jsxs)(Dr,{src:ht(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())},children:[(0,nt.jsx)(Tr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,nt.jsx)(jr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,nt.jsx)(Rr,{minHeight:"175px",children:(0,nt.jsx)(pa,{src:ht(p.dN.onboarding.ob4)})})}),(0,nt.jsx)(Ar,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ua=(0,y.F4)(vo||(vo=(0,x.Z)(["\n    0%{ opacity: 0; }\n    5%{ opacity: 1; }\n    40%{ opacity: 1; }\n    45%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),ha=(0,y.F4)(yo||(yo=(0,x.Z)(["\n    0%{ transform: translate(0, 0); }\n    20%{ transform: translate(0, 0); }\n    40%{ transform: translate(-67px, -128px); }\n    100%{ transform: translate(-67px, -128px); }\n"]))),da=(0,y.F4)(bo||(bo=(0,x.Z)(["\n    0%{ opacity: 0; }\n    40%{ opacity: 0; }\n    50%{ opacity: 1; }\n    70%{ opacity: 1; }\n    80%{ opacity: 0; }\n    100%{ opacity: 0; }\n"]))),pa=(0,y.ZP)(la.Z)(wo||(wo=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #dynamic-objects{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n    #dynamic-objects #move-ball{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n\n        position: relative;\n    }\n\n    #dynamic-objects-2{\n        animation-name: ",";\n        animation-duration: 3s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n\n"])),ua,ha,da),fa=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_5")}),[]);return(0,nt.jsxs)(Dr,{src:ht(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())},children:[(0,nt.jsx)(Tr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,nt.jsx)(jr,{children:"Nh\u1ea5n gi\u1eef \u0111i\u1ec1u ch\u1ec9nh h\u01b0\u1edbng m\u0169i t\xean v\xe0 th\u1ea3 tay \u0111\u1ec3 b\u1eafn"}),children:(0,nt.jsx)(Rr,{minHeight:"175px",children:(0,nt.jsx)(Za,{src:ht(p.dN.onboarding.ob5)})})}),(0,nt.jsx)(Ar,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},ma=5.5,ga=(0,y.F4)(Zo||(Zo=(0,x.Z)(["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 0; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(0px, 0px);}\n    ","%      {opacity: 1; transform: translate(340px,-184px);}\n    ","%        {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 1; transform: translate(257px,-240px);}\n    ","%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"],["\n    0%                             {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 0; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(0px, 0px);}\n    ","\\%      {opacity: 1; transform: translate(340px,-184px);}\n    ","\\%        {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 1; transform: translate(257px,-240px);}\n    ","\\%      {opacity: 0; transform: translate(257px,-240px);}\n    100%                           {opacity: 0; transform: translate(257px,-240px);}\n"])),3.6363636363636367,7.272727272727273,40,50.90909090909091,54.54545454545454,60,65.45454545454545),xa=(0,y.F4)(ko||(ko=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"],["\n    0%                             {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-56px);}\n    ","\\%      {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%        {opacity: 1; transform: scale(1) translateY(-100px);}\n    ","\\%      {opacity: 0; transform: scale(1.2) translateY(-100px);}\n    100%                           {opacity: 0; transform: scale(1.2) translateY(-100px);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,36.36363636363637,40),va=(0,y.F4)(Po||(Po=(0,x.Z)(["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 0; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(0.65);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 1; transform: scaleY(1);}\n    ","%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"],["\n    0%                             {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 0; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(0.65);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 1; transform: scaleY(1);}\n    ","\\%      {opacity: 0; transform: scaleY(1);}\n    100%                           {opacity: 0; transform: scaleY(1);}\n"])),12.727272727272727,16.363636363636363,25.454545454545453,60,65.45454545454545),ya=(0,y.F4)(jo||(jo=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),25.454545454545453,29.090909090909093,60,65.45454545454545),ba=(0,y.F4)(_o||(_o=(0,x.Z)(["\n    0%                                  {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),60,65.45454545454545),wa=(0,y.F4)(Lo||(Lo=(0,x.Z)(["\n    0%                                  {opacity: 0;}\n    ","%           {opacity: 0;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 1;}\n    ","%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"],["\n    0%                                  {opacity: 0;}\n    ","\\%           {opacity: 0;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 1;}\n    ","\\%           {opacity: 0;}\n    100%                                {opacity: 0;}\n"])),63.63636363636363,69.0909090909091,81.81818181818183,87.27272727272727),Za=(0,y.ZP)(la.Z)(Eo||(Eo=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: -10px;\n    margin-bottom: -90px;\n\n    #ob5-move-ball {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform: translate(0px, 0px);\n    }\n    #ob5-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 83% 130%;\n    }\n    #ob5-path {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        position: relative;\n        transform-origin: 0% 135%;\n    }\n    #ob5-dynamic-objects {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n    #ob5-dynamic-objects-3 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n    #ob5-dynamic-objects-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;  \n    }\n"])),ga,ma,xa,ma,va,ma,ya,ma,ba,ma,wa,ma),ka=function(){var n=w();(0,i.useEffect)((function(){console.log("OnboardingStep_6")}),[]);return(0,nt.jsxs)(Dr,{src:ht(p.dN.MainGame.background),onClick:function(){console.log("on next step"),n(yr.v.actions.nextStep())},children:[(0,nt.jsx)(Tr,{speechBubbleMarginTop:"15px",speechBubbleContent:(0,nt.jsx)(jr,{children:"X\u1ebfp th\xe0nh \xedt nh\u1ea5t 3 qu\u1ea3 b\xf3ng c\xf9ng lo\u1ea1i \u0111\u1ec3 ghi \u0111i\u1ec3m"}),children:(0,nt.jsx)(Rr,{minHeight:"155px",children:(0,nt.jsx)(Ma,{src:ht(p.dN.onboarding.ob6)})})}),(0,nt.jsx)(Ar,{content:"Ch\u1ea1m v\xe0o m\xe0nh h\xecnh \u0111\u1ec3 ti\u1ebfp t\u1ee5c",marginTop:"10px"})]})},Pa=(0,y.F4)(To||(To=(0,x.Z)(["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"],["\n    0%                              {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%         {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 1; transform: translate(-228px,-59px) rotate(-10deg) scale(1)}\n    ","\\%       {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n    100%                            {opacity: 0; transform: translate(-228px,-59px) rotate(0deg) scale(1.3)}\n"])),7.5,15,22.5,50,.575*100,65,72.5),ja=(0,y.F4)(Mo||(Mo=(0,x.Z)(["\n    0%                              {transform: rotate(0deg)}\n    ","%       {transform: rotate(0deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"],["\n    0%                              {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(0deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    100%                            {transform: rotate(360deg)}\n"])),10,20,60,70),_a=(0,y.F4)(Co||(Co=(0,x.Z)(["\n    0%                              {transform: rotate(240deg)}\n    ","%       {transform: rotate(240deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(360deg)}\n    ","%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"],["\n    0%                              {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(240deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(360deg)}\n    ","\\%       {transform: rotate(600deg)}\n    100%                            {transform: rotate(600deg)}\n"])),10,20,60,70),La=(0,y.F4)(So||(So=(0,x.Z)(["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(1) rotate(0deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"],["\n    0%                              {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(1) rotate(0deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    100%                            {transform: scale(1) rotate(-360deg)}\n"])),10,20,60,70),Ea=(0,y.F4)(Bo||(Bo=(0,x.Z)(["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(0.75) rotate(-240deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(1) rotate(-360deg)}\n    ","%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"],["\n    0%                              {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(0.75) rotate(-240deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(1) rotate(-360deg)}\n    ","\\%       {transform: scale(0.75) rotate(-600deg)}\n    100%                            {transform: scale(0.75) rotate(-600deg)}\n"])),10,20,60,70),Ta=(0,y.F4)(Oo||(Oo=(0,x.Z)(["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"],["\n    0%                              {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(0deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(360deg)}\n    ","\\%       {transform: translate(-52px, 27px) rotate(720deg)}\n    100%                            {transform: translate(-52px, 27px) rotate(720deg)}\n"])),10,20,60,70),Ma=(0,y.ZP)(la.Z)(Ao||(Ao=(0,x.Z)(["\n    width: 100%;\n    height: auto;\n\n    margin-top: 20px;\n    margin-bottom: -5px;\n\n    #ob6-hand {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        transform-origin: 85% 257%;\n        /* transform: translate(-228px,-59px) rotate(0deg) scale(1.3); */\n    }\n    #ob6-ball-1-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-2-container {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.5% 225%;\n        /* transform: rotate(0deg); */\n    }\n    #ob6-ball-1 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-ball-2 {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: ease-out;\n        transform-origin: 50.8% 191%;\n        /* transform: scale(1) rotate(0deg); */\n    }\n    #ob6-circle {\n        animation-name: ",";\n        animation-duration: ","s;\n        animation-iteration-count: infinite;\n        animation-timing-function: cubic-bezier(0, 0.5, 0.7, 1.1);\n        transform-origin: 57.5% 214%;\n        /* transform: translate(-52px, 27px) rotate(0deg); */\n    }\n"])),Pa,4,ja,4,_a,4,La,4,Ea,4,Ta,4),Ca=function(){var n=Z((function(n){return n.onboarding.isOBVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(Sa,{})})},Sa=function(){var n=w(),t=Z((function(n){return n.onboarding.currentStep}));return(0,nt.jsx)(nt.Fragment,{children:function(){switch(t){case 1:return(0,nt.jsx)(Ur,{});case 2:return(0,nt.jsx)(Jr,{});case 3:return(0,nt.jsx)(ia,{});case 4:return(0,nt.jsx)(ca,{});case 5:return(0,nt.jsx)(fa,{});case 6:return(0,nt.jsx)(ka,{});default:return setTimeout((function(){$n.map.reload(1),a.r.emit(a.B.Navigate,p.dI.MainGame),n(yr.v.actions.setOBVisible(!1))}),0),null}}()})},Ba=function(){var n=w();return(0,nt.jsxs)(Oa,{src:ht(p.dN.worldMap.topBg),children:[(0,nt.jsx)(Aa,{src:ht(p.dN.worldMap.optionBtn),onClick:function(){console.log("onClickOptionBtn"),n(Wn.U.actions.setShowSettingPopup(!0))}}),(0,nt.jsxs)(Na,{children:[(0,nt.jsx)(Ya,{src:ht(p.dN.general.heartIcon),children:(0,nt.jsx)(Ia,{children:"5"})}),(0,nt.jsx)(Da,{children:"\u0110\u1ea7y"}),(0,nt.jsx)(Ra,{src:ht(p.dN.general.plusIcon),onClick:function(){console.log("onClickPlusIcon"),n(Wn.U.actions.setShowFullHeartPopup(!0))}})]})]})},Oa=(0,y.ZP)(he)(No||(No=(0,x.Z)(["\n    background-size: 100% 100%;\n    width: 100%;\n    height: 144px;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n"]))),Aa=(0,y.ZP)(he)(Yo||(Yo=(0,x.Z)(["\n    position: absolute;\n    right: 16px;\n    top: 53px;\n\n    width: 32px;\n    height: 32px;\n    pointer-events: auto;\n"]))),Na=y.ZP.div(Io||(Io=(0,x.Z)(["\n    position: absolute;\n    left: 25px;\n    top: 53px;\n    height: 30px;\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n\n    border-radius: 45px 34px 34px 15px;\n    background-color: rgba(36, 36, 36, 0.6);\n    pointer-events: auto;\n"]))),Ya=(0,y.ZP)(he)(Do||(Do=(0,x.Z)(["\n    width: 40px;\n    height: 40px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-left: -15px;\n    margin-top: -3px;\n"]))),Ia=y.ZP.div(Ro||(Ro=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(149, 56, 56, 0.63);\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #fffbee;\n    margin-top: 6px;\n"]))),Da=y.ZP.div(Uo||(Uo=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 16px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    min-width: 40px;\n    margin-top: 3px;\n    margin-left: 3px;\n"]))),Ra=(0,y.ZP)(he)(zo||(zo=(0,x.Z)(["\n    width: 24px;\n    height: 24px;\n"]))),Ua=function(){var n=Z((function(n){return n.worldMap.showSettingPopup}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(za,{})})},za=function(){var n=w();return(0,nt.jsx)($e,{title:"Thi\u1ebft l\u1eadp",ctaText:"Tho\xe1t tr\xf2 ch\u01a1i",onClose:function(){n(Wn.U.actions.setShowSettingPopup(!1))},onCta:function(){console.log("EXIT GAME"),n(Wn.U.actions.setShowSettingPopup(!1)),g.x.request(g.w.dismiss)}})},Fa=function(){var n=Z((function(n){return n.onboarding.isOBVisible}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(Wa,{})})},Wa=function(){var n=Z((function(n){return n.onboarding.currentStep})),t=ht(p.dN.onboarding.faceBgStep1);return(0,nt.jsx)(nt.Fragment,{children:function(){switch(n){case 1:case 2:return(0,nt.jsx)(Va,{src:t});default:return null}}()})},Ha=(0,y.ZP)(he)(Fo||(Fo=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* z-index: 100; */\n"]))),Va=(0,y.ZP)(Ha)(Wo||(Wo=(0,x.Z)(["\n    background-repeat: repeat;\n    background-size: 100% auto;\n    background-position: 50% 100%;\n"]))),Ga=function(n){var t=n.target,e=t.type,i=t.quantity,o=t.ball,r=ht(Tn.getTargetTypeImageUrl(e,o)||"");return(0,nt.jsxs)(Xa,{children:[(0,nt.jsx)(qa,{src:r}),(0,nt.jsx)(Ja,{children:(0,nt.jsx)(Qa,{children:i})}),(0,nt.jsx)(Ka,{src:ht(p.dN.general.targetItemBg)})]})},Xa=y.ZP.div(Ho||(Ho=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),qa=(0,y.ZP)(he)(Vo||(Vo=(0,x.Z)(["\n    width: 36px;\n    height: 36px;\n"]))),Ja=y.ZP.div(Go||(Go=(0,x.Z)(["  \n    background-color: rgba(0, 0, 0, 0.4);\n    border-radius: 10px;\n    min-width: 30px;\n"]))),Qa=y.ZP.div(Xo||(Xo=(0,x.Z)(["\n    -webkit-text-stroke: 1px rgba(36, 36, 36, 0.6);\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin: 1px 6px -1px;\n"]))),Ka=(0,y.ZP)(he)(qo||(qo=(0,x.Z)(["\n    width: 58px;\n    height: 46px;\n    margin-top: -37px;\n    position: relative;\n    z-index: -1;\n"]))),$a=function(n){var t=n.marginTop,e=ht(p.dN.general.levelTargetBg),i=Z((function(n){return n.worldMap.currentLevel})).id,o=Z((function(n){return n.mainGame.config})),r=An.findLevelConfig(o,i);return(0,nt.jsxs)(ns,{marginTop:t,children:[(0,nt.jsx)(ts,{src:e}),(0,nt.jsxs)(is,{children:[(0,nt.jsx)(os,{src:e}),(0,nt.jsx)(rs,{children:"B\u1eafn v\u1ee1 to\xe0n b\u1ed9 b\xf3ng m\xe0u"}),(0,nt.jsx)(as,{children:function(){var n;return null===r||void 0===r||null===(n=r.targets)||void 0===n?void 0:n.map((function(n,t){return(0,nt.jsx)(Ga,{target:n},t)}))}()})]}),(0,nt.jsx)(es,{src:e})]})},ns=y.ZP.div(Jo||(Jo=(0,x.Z)(["\n    width: 292px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin-top: ",";\n"])),(function(n){return n.marginTop||"unset"})),ts=(0,y.ZP)(he)(Qo||(Qo=(0,x.Z)(["\n    width: 100%;\n    height: 50px;\n    background-size: 100% auto;\n    background-position: 0px 0px;\n"]))),es=(0,y.ZP)(ts)(Ko||(Ko=(0,x.Z)(["\n    height: 30px;\n    background-position: 0px 100%;\n"]))),is=y.ZP.div($o||($o=(0,x.Z)(["\n    width: 100%;\n    position: relative;\n    z-index: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 5px;\n"]))),os=(0,y.ZP)(he)(nr||(nr=(0,x.Z)(["\n    width: 100%;\n    /* height: 300px; */\n    background-size: 100% ","%;\n    background-position: 0px ","%;\n    position: absolute;\n    left: 0;\n    top: 0px;\n    bottom: 0px;\n    z-index: -1;\n"])),95/15*100,57.5/95*100),rs=y.ZP.div(tr||(tr=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: 600;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: -45px;\n"]))),as=y.ZP.div(er||(er=(0,x.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 15px;\n    margin-bottom: -31px;\n"]))),ss=function(){var n=Z((function(n){return n.worldMap.showPlayNewLevelPopup}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(ls,{})})},ls=function(){var n=w(),t=Z((function(n){return n.worldMap.currentLevel})).id;return(0,nt.jsxs)(We,{title:"M\xe0n ".concat(t),onClose:function(){console.log("onClose"),n(Wn.U.actions.setShowPlayNewLevelPopup(!1))},marginBottom:"20vh",children:[(0,nt.jsx)($a,{}),(0,nt.jsx)(pe,{src:ht(p.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Wn.U.actions.setShowPlayNewLevelPopup(!1)),$n.map.reload(t),a.r.emit(a.B.Navigate,p.dI.MainGame)},children:(0,nt.jsx)(fe,{fontSize:"22px",children:"Ch\u01a1i ngay"})})]})},cs=y.ZP.div(ir||(ir=(0,x.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),us=(0,y.ZP)(he)(or||(or=(0,x.Z)(["\n    width: 72px;\n    height: 72px;\n    position: relative;\n    transform: translate(",") scale(",") rotate(",");\n"])),(function(n){return n.translateXY}),(function(n){return n.scale}),(function(n){return n.rotate})),hs=y.ZP.div(rr||(rr=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 14px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #681c8d;\n    margin-top: 10px;\n"]))),ds=y.ZP.div(ar||(ar=(0,x.Z)(["\n    -webkit-text-stroke: 2px rgba(255, 255, 255, 0.55);\n    background-image: linear-gradient(to bottom, #681c8d 50%, #e74cdf 99%);\n    font-family: iCielUniSans;\n    font-size: 28px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    -webkit-background-clip: text;\n    background-clip: text;\n    -webkit-text-fill-color: transparent;\n"]))),ps=(0,y.ZP)(he)(sr||(sr=(0,x.Z)(["\n    width: 108px;\n    height: 40px;\n    margin-top: -4px;\n"]))),fs=((0,y.ZP)(he)(lr||(lr=(0,x.Z)(["\n    width: 253px;\n    height: 111px;\n    margin-top: -25px;\n"]))),y.ZP.div(cr||(cr=(0,x.Z)(["\n    font-family: iCielUniSans;\n    font-size: 12px;\n    font-weight: 900;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    text-align: center;\n    color: #fffbee;\n    margin-top: -108px;\n"]))),function(){var n=Z((function(n){return n.worldMap.showPlayLevelAgainPopup}));return(0,nt.jsx)(nt.Fragment,{children:n&&(0,nt.jsx)(ms,{})})}),ms=function(){var n=w(),t=Z((function(n){return n.worldMap.currentLevel})),e=t.id,i=t.stars,o=t.highScore,r=ht(p.dN.general.bigStarAble);return(0,nt.jsxs)(We,{title:"M\xe0n ".concat(e),onClose:function(){console.log("onClose"),n(Wn.U.actions.setShowPlayLevelAgainPopup(!1))},children:[(0,nt.jsxs)(cs,{children:[(0,nt.jsx)(us,{src:ht(p.dN.general.bigStarDisable),scale:.8,rotate:"-20deg",translateXY:"8px, 18px",children:i>=1&&(0,nt.jsx)(xs,{src:r,animationDelay:"0.3s"})}),(0,nt.jsx)(us,{src:ht(p.dN.general.bigStarDisable),scale:1,rotate:"0deg",translateXY:"0px, 0px",children:i>=2&&(0,nt.jsx)(xs,{src:r,animationDelay:"0.5s"})}),(0,nt.jsx)(us,{src:ht(p.dN.general.bigStarDisable),scale:.8,rotate:"20deg",translateXY:"-8px, 18px",children:i>=3&&(0,nt.jsx)(xs,{src:r,animationDelay:"0.7s"})})]}),(0,nt.jsx)(hs,{children:"\u0110i\u1ec3m"}),(0,nt.jsx)(ds,{children:Tn.convertNumberToScoreString(o)}),(0,nt.jsx)(ps,{src:ht(p.dN.general.scoreBg)}),(0,nt.jsx)($a,{marginTop:"-15px"}),(0,nt.jsx)(pe,{src:ht(p.dN.general.button_1),width:"168px",height:"46px",marginTop:"15px",onClick:function(){console.log("onPlayGame"),n(Wn.U.actions.setShowPlayLevelAgainPopup(!1)),$n.map.reload(e),a.r.emit(a.B.Navigate,p.dI.MainGame)},children:(0,nt.jsx)(fe,{fontSize:"22px",children:"Ch\u01a1i l\u1ea1i"})})]})},gs=(0,y.F4)(ur||(ur=(0,x.Z)(["\n    0%      {transform: translate(-50%, -50%) scale(0)}\n    100%    {transform: translate(-50%, -50%) scale(1)}\n"]))),xs=(0,y.ZP)(he)(hr||(hr=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0);\n    animation-name: ",";\n    animation-duration: 0.4s;\n    animation-delay: ",";\n    animation-fill-mode: forwards;\n    animation-timing-function: cubic-bezier(0, 1.5, 0.5, 1.5);\n"])),gs,(function(n){return n.animationDelay||"unset"}));function vs(){var n=Z((function(n){return n.worldMap.showFullHeartPopup})),t=w(),e=ht(p.dN.worldMap.fullHeart);return n?(0,nt.jsx)(We,{title:"T\xecnh \u0111\u1ea7y tim",onClose:function(){t(Wn.U.actions.setShowFullHeartPopup(!1))},children:(0,nt.jsxs)(ws,{children:[(0,nt.jsx)(Zs,{src:e}),(0,nt.jsx)(ks,{children:(0,nt.jsx)(Ps,{children:"Tim c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u1ea7y. S\u1ed1 tim t\u01b0\u01a1ng \u1ee9ng v\u1edbi s\u1ed1 l\u01b0\u1ee3t ch\u01a1i. M\u1ed7i 3 gi\u1edd s\u1ebd h\u1ed3i l\u1ea1i 1 tim"})})]})}):null}var ys,bs,ws=y.ZP.div(dr||(dr=(0,x.Z)(["\n    width: calc(100% - 50px);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n\n    margin: 5px 0px;\n"]))),Zs=(0,y.ZP)(he)(pr||(pr=(0,x.Z)(["\n    width: 283px;\n    height: 108px;\n"]))),ks=y.ZP.div(fr||(fr=(0,x.Z)(["\n    display: inline-block;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n"]))),Ps=y.ZP.div(mr||(mr=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 12px;\n    font-weight: normal;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n\n    display: inline;\n"]))),js=function(){var n=Z((function(n){return n.worldMap.imagesDefine})),t=Z((function(n){return n.worldMap.chapters})),e=Z((function(n){var t;return null===(t=n.user.profile)||void 0===t?void 0:t.chapterId})),o=(0,i.useState)(!1),r=(0,Ln.Z)(o,2),a=r[0],s=r[1];(0,i.useEffect)((function(){n&&t&&e?($n.setChapters(n,t,e),s(!0)):s(!1)}),[n,t,e]);return(0,nt.jsxs)(ue,{children:[a&&(0,nt.jsx)(xr,{onStart:function(){$n.startWorldMap()},onEnd:function(){$n.endWorldMap()},onInitDom:function(n){$n.initDom(n)},onResume:function(){$n.resume()},onPause:function(){$n.pause()}}),(0,nt.jsx)(Fa,{}),(0,nt.jsx)(Ba,{}),(0,nt.jsx)(Ua,{}),(0,nt.jsx)(ss,{}),(0,nt.jsx)(fs,{}),(0,nt.jsx)(vs,{}),(0,nt.jsx)(Ca,{})]})},_s=function(n){var t=(0,i.useState)(!1),e=(0,Ln.Z)(t,2),o=e[0],r=e[1],a=(0,i.useRef)(null);return(0,nt.jsx)(Ls,{ref:a,onClick:function(){o||a.current&&(r(!0),S.ZP.timeline().to(a.current,{scale:1.1,duration:.05}).to(a.current,{scale:1,duration:.05}).then((function(){r(!1)})).then(n.onClick))},children:n.children})},Ls=y.ZP.div(ys||(ys=(0,x.Z)(["\n    min-height: 42px;\n    max-height: 42px;\n\n    padding: 5px 10px;\n    box-sizing: border-box;\n\n    background-color: white;\n    color: black;\n    font-size: 13px;\n\n    display: flex;\n    text-align: center;\n    align-items: center;\n\n    border-radius: 20px;\n\n    position: relative;\n"])));function Es(n){return(0,nt.jsx)(_s,{onClick:n.onClick,children:n.children})}function Ts(n){var t=w();return(0,nt.jsx)(Cs,{src:nn.colors[n.color].baseTexture.cacheId,onClick:function(){t(yn.J.actions.setBulletColor(n.num-1))},children:n.num})}var Ms,Cs=(0,y.ZP)(me)(bs||(bs=(0,x.Z)(["\n    width: 34px;\n    height: 34px;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    font-size: 12px;\n    font-weight: bold;\n    color: white;\n"]))),Ss=e(8925);function Bs(){var n=Z((function(n){return n.colorTool.showLoadBase64Popup})),t=w(),e=function(){t(yn.J.actions.setShowLoadBase64Popup(!1))};return n?(0,nt.jsxs)(We,{title:"Load Map From Base64",onClose:e,children:[(0,nt.jsx)(Ws,{autoComplete:"off",onChange:As,placeholder:"Input base64 string here"}),(0,nt.jsx)(Es,{onClick:function(){$n.map.colorTool.loadFromBase64(Os),e()},children:"Load"})]}):null}var Os=void 0;function As(n){n.target.value&&(Os=n.target.value)}var Ns,Ys,Is,Ds,Rs,Us,zs,Fs,Ws=y.ZP.input(Ms||(Ms=(0,x.Z)(["\n    width: 90%;\n    height: 30px;\n\n    text-align: center;\n\n    margin-bottom: 20px;\n"])));function Hs(n){var t=Z((function(n){return n.colorTool.bubbleCount})),e=Z((function(n){return n.colorTool.bullets})),o=(v(),w());(0,i.useLayoutEffect)((function(){o(yn.J.actions.initCacheLevel(void 0))}),[]);var r=function(){return e.map((function(n,t){return(0,nt.jsx)(Ts,{num:t+1,color:n},t)}))},a=(0,nt.jsxs)(ol,{children:["Choose level to edit",(0,nt.jsxs)(rl,{children:[(0,nt.jsx)(Es,{onClick:qs,children:"Choose"}),(0,nt.jsx)(tl,{id:"url",type:"number",autoComplete:"off",onChange:Xs,defaultValue:Gs})]})]});return void 0===Vs?(0,nt.jsxs)(nl,{children:[(0,nt.jsx)(tt,{}),(0,nt.jsx)(sl,{children:r()}),(0,nt.jsx)(il,{children:a})]}):(0,nt.jsxs)(nl,{children:[(0,nt.jsx)(tt,{}),(0,nt.jsxs)(el,{children:[(0,nt.jsx)(Es,{onClick:Js,left:20,children:"Add Line"}),(0,nt.jsx)(Es,{onClick:Qs,left:90,children:"Trim Lines"}),(0,nt.jsx)(Es,{onClick:function(){o(yn.J.actions.addBullet(5))},left:160,children:"Add 5 Bullet"}),(0,nt.jsx)(Es,{onClick:function(){o(yn.J.actions.setTrimBullet(void 0))},left:230,children:"Trim Bullet"})]}),(0,nt.jsx)(sl,{children:r()}),(0,nt.jsxs)(il,{children:[a,(0,nt.jsxs)(Es,{onClick:function(){var n,t=[],e=$n.map.colorTool.maxHeight,i=(0,C.Z)($n.map.data);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.sprite.y>e||t.push(10*r.type+r.color)}}catch(l){i.e(l)}finally{i.f()}var a=B.Z.getState().colorTool.bullets.filter((function(n){return n>0})),s=on(t,a);o(yn.J.actions.addCacheLevel({levelId:Gs,base64:s})),window.isSecureContext&&navigator.clipboard&&(navigator.clipboard.writeText(s),window.alert("Copied"))},children:["Save & Copy",(0,nt.jsxs)(al,{children:["Bubbles: ",t]})]}),(0,nt.jsx)(Es,{onClick:function(){var n=$n.map.colorTool.drawMapForCapture();(0,Ss.saveAs)(n,"level".concat(Gs,".jpg"))},children:"Export Map"}),(0,nt.jsx)(Es,{onClick:function(){o(yn.J.actions.setShowLoadBase64Popup(!0))},children:"Load Base64"})]}),(0,nt.jsx)(Bs,{})]})}var Vs=void 0,Gs=void 0;function Xs(n){n.target.value&&(Vs=parseInt(n.target.value))}function qs(){void 0!==Vs&&Vs!==Gs&&($n.map.colorTool.loadLevel(Vs),Gs=Vs)}function Js(){$n.map.colorTool.addEmptyLine()}function Qs(){$n.map.colorTool.trimLine()}var Ks,$s,nl=y.ZP.div(Ns||(Ns=(0,x.Z)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    left: 0px;\n"]))),tl=y.ZP.input(Ys||(Ys=(0,x.Z)(["\n    width: 50px;\n    height: 30px;\n\n    text-align: center;\n"]))),el=y.ZP.div(Is||(Is=(0,x.Z)(["\n    position: fixed;\n    top: 0px;\n\n    padding: 20px;\n\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n"]))),il=y.ZP.div(Ds||(Ds=(0,x.Z)(["\n    position: fixed;\n    bottom: 0px;\n\n    width: 100%;\n    padding: 10px 10px;\n    box-sizing: border-box;\n\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    gap: 10px;\n\n    font-size: 13px;\n"]))),ol=y.ZP.div(Rs||(Rs=(0,x.Z)(["\n    color: white;\n    text-align: center;\n\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n"]))),rl=y.ZP.div(Us||(Us=(0,x.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 10px;\n"]))),al=y.ZP.div(zs||(zs=(0,x.Z)(["\n    color: white;\n    position: absolute;\n    top: -30px;\n"]))),sl=y.ZP.div(Fs||(Fs=(0,x.Z)(["\n    width: 90%;\n    height: 34px;\n\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    /* gap: 2px; */\n    align-content: flex-start;\n\n    overflow-x: scroll;\n    overflow-y: hidden;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    position: absolute;\n    bottom: 200px;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 1px dashed white;\n"]))),ll=function(){var n=Z((function(n){return n.user.profile})),t=Z((function(n){return n.mainGame.config}));return(0,i.useEffect)((function(){n&&"{}"!=JSON.stringify(n)&&t&&setTimeout((function(){a.r.emit(a.B.Navigate,p.dI.WorldMap,{replace:!0})}),100)}),[n,t]),(0,nt.jsx)(cl,{children:(0,nt.jsx)(ul,{children:"Loading..."})})},cl=y.ZP.div(Ks||(Ks=(0,x.Z)(["\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    top: 0;\n    left: 0;\n    background-color: #fff;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"]))),ul=y.ZP.div($s||($s=(0,x.Z)(["\n    font-family: SFProText;\n    font-size: 20px;\n    font-weight: bold;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #681c8d;\n"])));function hl(n){w(),v();var t=Z((function(n){return n.global.backStacks})),e=Z((function(n){return n.game.setting})).sound;(0,i.useLayoutEffect)((function(){s()}),[]),(0,i.useEffect)((function(){return l(),function(){c()}}),[]),(0,i.useEffect)((function(){var n=function(n){n&&"onBackPress"==n.data&&a.r.emit(t.length>0?t[t.length-1]:a.B.ON_BACK_KEY)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]),(0,i.useEffect)((function(){m.enable=e}),[e]);var s=function(){g.x.request(g.w.stopTrace,window.traceScreenLoadId),window.onresize=u,g.x.listen("onFocusApp",h),g.x.listen("onBlurApp",d)},l=function(){g.x.request(g.w.stopTrace,window.traceScreenInterractionId),g.x.request(g.w.stopTrace,window.traceScreenGoalId),window.addEventListener("visibilitychange",f)},c=function(){window.removeEventListener("visibilitychange",f)},u=function(){a.r.emit(a.B.ON_RESIZE,window.innerWidth,window.innerHeight)};function h(){a.r.emit(a.B.On_RESUME),console.log("[App.jsx] handleFocusMiniApp")}function d(){console.log("[App.jsx] handleBlurMiniApp"),m.pauseBgMusic(),a.r.emit(a.B.On_PAUSE)}function f(n){"visible"===window.document.visibilityState?h():d()}return(0,nt.jsxs)(o.VK,{children:[(0,nt.jsxs)(r.Z5,{children:[(0,nt.jsx)(r.AW,{path:"/*",element:(0,nt.jsx)(Hs,{})}),(0,nt.jsx)(r.AW,{path:p.dI.Loading,element:(0,nt.jsx)(ll,{})}),(0,nt.jsx)(r.AW,{path:p.dI.MainGame,element:(0,nt.jsx)(Mi,{})}),(0,nt.jsx)(r.AW,{path:p.dI.WorldMap,element:(0,nt.jsx)(js,{})}),(0,nt.jsx)(r.AW,{path:p.dI.ColorTool,element:(0,nt.jsx)(Hs,{})})]}),(0,nt.jsx)(Bi,{})]})}g.x.initTracking()},808:function(){!function(){function n(){var n=this;return new Promise((function(t){var e=new FileReader;e.onload=function(){t(e.result)},e.readAsArrayBuffer(n)}))}"File"in window&&(File.prototype.arrayBuffer=File.prototype.arrayBuffer||n),Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||n}()},5301:function(n,t,e){"use strict";n.exports=e.p+"static/media/melodyConfig.13399a228d3f5a87e064"}}]);