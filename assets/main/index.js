System.register("chunks:///_virtual/a-protobuf.ts",["cc","./index.mjs_cjs=&original=.js","./index.js"],(function(){"use strict";var t,n;return{setters:[function(n){t=n.cclegacy},null,function(t){n=t.default}],execute:function(){t._RF.push({},"55100wlTAVGGaIFArbn+z6n","a-protobuf",void 0),window.protobuf=n,t._RF.pop()}}}));

System.register("chunks:///_virtual/ApiMock.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"792a1PeVsBG5pMMZEpj/Viu","ApiMock",void 0);var c=e("ApiMock",(function(){}));c.deviceInfo={instanceID:"FTWJFBDPQMYDQFAJB5VOPB",totalStorage:107209,totalRam:5584,countryCode:"084",devicePerformance:"high-end",bundleId:"vn.momo.platform.test",isEmulator:"false",BSSID:"02:00:00:00:00:00",deviceMCC:"452",firebaseToken:"ftwjFbDPQMydqfAjB5vOpb:APA91bF_DVNBUdmVH9JXcp9aGlZZMF2eVmvqj_5ksm7KRenkvSsRYGbTJRvdWjOR_I35rcQvZuuCUhdDDq0xwG3Rks_5taONd_x5vZVw9D15ceeRT87gXEMxqk3aGpeRiEc2GwqyNFpN",googlePlayServicesAvailable:!0,deviceSecureId:"230c8f27a54b97de",buildVersion:31040,deviceModelName:"Z818L",isDev:"true",deviceName:"Z818L",deviceManufacturer:"Xiaomi",AAID:"461b635f-1f94-4dea-90a0-cd04e3f6f2c9",deviceHardwareVersion:"qcom",appVersion:"3.1.4-debug",IDFA:"",deviceSoftwareVersion:"30",deviceNetworkOperatorName:"Viettel",icc:"",deviceImei:"20aef116-ae34-41be-abf3-fcb58da6c12d",countryName:"Vietnam",freeStorage:63899,deviceModelID:"xiaomi m2101k7agqcomnull"},c.feature={feature:{featureID:"shaking-game",params:{}}},c.GAME_CONFIG={response_info:{error_message:"success",error_code:0,event_tracking:"v1_get_global_config"},result:{cdnURL:"https://cdn-test.momoapp.vn/game/tiles/v220601"}},a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts"],(function(i){"use strict";var o,u,t,s,e,n,a,c,l,r,h,d;return{setters:[function(i){o=i.applyDecoratedDescriptor,u=i.inheritsLoose,t=i.initializerDefineProperty,s=i.assertThisInitialized,e=i.createClass},function(i){n=i.cclegacy,a=i._decorator,c=i.AudioClip,l=i.AudioSource,r=i.Component},function(i){h=i.SoundName},function(i){d=i.utils}],execute:function(){var S,p,f,g,m,M;n._RF.push({},"9dd765fsdpBTYPuaYbGlpDj","AudioMgr",void 0);var y=a.ccclass,v=a.property;i("AudioMgr",(S=y("AudioMgr"),p=v(c),S(((M=function(i){function o(){for(var o,u=arguments.length,e=new Array(u),n=0;n<u;n++)e[n]=arguments[n];return o=i.call.apply(i,[this].concat(e))||this,t(o,"audioClips",m,s(o)),o.bgVolume=.5,o.sfxVolume=.5,o.preBgVolume=.5,o.preSfxVolume=.5,o.audioSourceSFX=null,o.audioSourceMusic=null,o.IsEnable=!0,o.muteBg=!1,o.muteSfx=!1,o}u(o,i);var n=o.prototype;return n.onLoad=function(){o.instance=this,this.audioSourceSFX=this.addComponent(l),this.audioSourceSFX.loop=!1,this.audioSourceSFX.volume=this.sfxVolume,this.audioSourceMusic=this.addComponent(l),this.audioSourceMusic.play()},n.PlayOneShot=function(i,o){void 0===o&&(o=!1),this.audioSourceSFX.playing&&this.audioSourceSFX.stop(),i&&this.IsEnable&&(o?this.audioSourceSFX.playOneShot(i):(this.audioSourceSFX.clip=i,this.audioSourceSFX.play()))},n.PlayMusic=function(i,o){i&&this.IsEnable&&(this.audioSourceMusic.clip==i&&this.audioSourceMusic.playing||(this.Stop(),this.audioSourceMusic.clip=i,this.audioSourceMusic.loop=o,this.On(),this.audioSourceMusic.volume=this.bgVolume,this.audioSourceMusic.play()))},n.Stop=function(){this.audioSourceMusic.stop()},n.Start=function(){this.audioSourceMusic.play()},n.Load=function(i){var o=this;void 0===i&&(i=null);var u=Object.keys(h);u.forEach((function(t){var s=h[t];d.getAudioRes("bundle/sounds/"+s,(function(t){t?(t.name=s,o.audioClips.push(t),console.log("[AudioMgr] Sound load: "+s)):console.log("[AudioMgr] Sound not load: "+s),s==h.BackgroundMusic&&(console.log("PLAY BG MUSIC"),o.PlayMusicWithName(h.BackgroundMusic,!0)),o.audioClips.length==u.length&&i&&i()}))}))},n.PlaySfx=function(i,o){void 0===o&&(o=!1);var u=this.audioClips.find((function(o){return o.name==i}));u&&this.PlayOneShot(u,o)},n.StopSfx=function(i){var o=this;this.audioClips.forEach((function(u){u.name==i&&o.audioSourceSFX.clip==u&&o.audioSourceSFX.playing&&o.audioSourceSFX.stop()}))},n.PlayMusicWithName=function(i,o){var u=this;this.audioClips.forEach((function(t){t.name==i&&u.PlayMusic(t,o)}))},n.On=function(){this.IsEnable=!0,this.Start()},n.Off=function(){this.IsEnable=!1,this.Stop()},n.NextStatus=function(){this.IsEnable=!this.IsEnable,this.IsEnable?this.On():this.Off()},n.settingMusic=function(i){this.audioSourceMusic.volume=i,this.preBgVolume=this.bgVolume,this.bgVolume=i,this.muteBg=0==i},n.settingSFX=function(i){this.audioSourceSFX.volume=i,this.preSfxVolume=this.sfxVolume,this.sfxVolume=i,this.muteSfx=0==i},e(o,null,[{key:"Instance",get:function(){return this.instance}}]),o}(r)).instance=null,m=o((g=M).prototype,"audioClips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=g))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts"],(function(e){"use strict";var t,i,o,n,a,r,s,l,c,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,c=e.Vec3,p=e.Component},function(e){u=e.default},function(e){h=e.GamePlayEventName}],execute:function(){var f,y,d,m,v;r._RF.push({},"bce94NCBehMI7cF6jUKqB75","CameraFollow",void 0);var C=s.ccclass,P=s.property;e("CameraFollow",(f=C("CameraFollow"),y=P(l),f((v=t((m=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"map",v,n(t)),t.originPosition=null,t.player=null,t}i(t,e);var r=t.prototype;return r.start=function(){this.originPosition=this.node.position.clone(),u.on(h.UpdateCamera,this.updateCamera,this),this.updateCamera()},r.updateCamera=function(e){if(void 0===e&&(e=null),this.player)if(e){var t=e.subtract(this.node.position),i=this.player.position.clone();this.node.setPosition(i.subtract(t))}else{var o=this.player.position.clone();this.node.setPosition(o)}},r.update=function(e){if(this.player){var t=this.player.position.clone();c.lerp(t,this.node.position,t,5*e),this.node.setPosition(t)}},a(t,[{key:"Player",set:function(e){console.log("[CameraFollow] set Player"),this.player=e}}]),t}(p)).prototype,"map",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){e({EventName:void 0,GamePlayEventName:void 0,MaxAPIEvent:void 0,ObstacleType:void 0,PopupEvent:void 0,PopupName:void 0,ScreenName:void 0,SoundName:void 0,TileType:void 0,TouchState:void 0}),a._RF.push({},"5a564xrd41Lir3Sb4uzkBZI","Define",void 0);var n,o,t,i,d,p,c,u=e("Define",(function(){}));u.NUMBER_SLOT=8,u.MAX_SPEED=5,function(e){e.Loading="Loading",e.Menu="Menu",e.Standby="Standby",e.GamePlay="GamePlay",e.Result="Result"}(n||(n=e("ScreenName",{}))),o||(o=e("PopupName",{})),function(e){e.BackgroundMusic="gnork-party",e.CollectGold="collectcoin",e.Freeze="rocks",e.Unfreeze="dropping-rocks",e.Moving="stone-steps",e.ExchangeMoney="gold-coin",e.Burning="fire-swoosh",e.Bite="monster-bite"}(t||(t=e("SoundName",{}))),function(e){e.CaptureScreenShoot="game-capture-screen-shoot",e.onGameDefine="onGameDefine",e.onMatchingInfo="onMatchingInfo",e.onPing="onPing",e.onMatchingFailed="onMatchingFailed",e.onPlayerWakeUp="onPlayerWakeUp"}(i||(i=e("EventName",{}))),function(e){e.UpdateCamera="game-update-camera",e.UpdateGoldBalance="game-update-gold-balance",e.UpdateMoneyBalance="game-update-money-balance",e.UpdatePlayerFREEZE="game-update-player-freeze",e.UpdatePlayerStopAttack="game-update-player-stop-attack",e.UpdateMoneyChange="game-update-money-change",e.LostHp="game-lost-hp"}(d||(d=e("GamePlayEventName",{}))),function(e){e.Load="popup-load",e.Show="popup-show",e.Hide="popup-hide",e.HideAll="popup-hide-all"}(p||(p=e("PopupEvent",{}))),function(e){e.request="maxapi-request"}(c||(c=e("MaxAPIEvent",{})));var r,l=e("GameDefine",(function(){}));l.timeEndLoading=1,l.timeAppearLoading=.5,l.instance=void 0,function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Press=2]="Press",e[e.Up=3]="Up"}(r||(r=e("TouchState",{})));var m,s,g=e("Layer",(function(){}));g.GamePlay=1,g.UI_2D=1<<25,function(e){e[e.Land=1]="Land",e[e.Land2=2]="Land2",e[e.Land3=3]="Land3",e[e.Land4=4]="Land4",e[e.Left=5]="Left",e[e.Right=6]="Right",e[e.Magma=7]="Magma",e[e.Lava=8]="Lava",e[e.BothBoder=9]="BothBoder"}(m||(m=e("TileType",{}))),function(e){e[e.Skull=0]="Skull",e[e.Tree=1]="Tree",e[e.Bush=2]="Bush"}(s||(s=e("ObstacleType",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/GameApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var n,t,r,u;return{setters:[function(e){n=e.asyncToGenerator},function(e){t=e.cclegacy},function(e){r=e.NetworkDefine},function(e){u=e.networkMgr}],execute:function(){t._RF.push({},"ec3e9CNQE1PPrbYHgLu6+Bx","GameApi",void 0);e("gameApi",new(function(){function e(){}return e.prototype.genDeepLink=function(){var e=n(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){u.postRequest(r.DEEP_LINK,n)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameMgr.ts"],(function(e){"use strict";var n,_,t,r,i,O,N,M,o,u;return{setters:[function(e){n=e.inheritsLoose,_=e.createClass},function(e){t=e.cclegacy,r=e._decorator,i=e.Color,O=e.Vec2,N=e.Component},function(e){M=e.default},function(e){o=e.EventName},function(e){u=e.GameMgr}],execute:function(){var E,V;t._RF.push({},"22c1et0Qr9NCJByGDeWlHWX","GameDefine",void 0);var s=r.ccclass;r.property,e("GameDefine",s("GameDefine")(((V=function(e){function t(){for(var n,_=arguments.length,t=new Array(_),r=0;r<_;r++)t[r]=arguments[r];return(n=e.call.apply(e,[this].concat(t))||this)._gameDefine=null,n.anglePerCmnd=10,n.MOVE_000=new O(1,0),n.MOVE_010=new O(.9848,.1736),n.MOVE_020=new O(.9396,.342),n.MOVE_030=new O(.866,.4999),n.MOVE_040=new O(.766,.6427),n.MOVE_050=new O(.6427,.766),n.MOVE_060=new O(.5,.866),n.MOVE_070=new O(.342,.9396),n.MOVE_080=new O(.1736,.9848),n.MOVE_090=new O(0,1),n.MOVE_100=new O(-.1736,.9848),n.MOVE_110=new O(-.342,.9396),n.MOVE_120=new O(-.4999,.866),n.MOVE_130=new O(-.6427,.766),n.MOVE_140=new O(-.766,.6427),n.MOVE_150=new O(-.866,.4999),n.MOVE_160=new O(-.9396,.342),n.MOVE_170=new O(-.9848,.1736),n.MOVE_180=new O(-1,0),n.MOVE_190=new O(-.9848,-.1736),n.MOVE_200=new O(-.9396,-.342),n.MOVE_210=new O(-.866,-.5),n.MOVE_220=new O(-.766,-.6427),n.MOVE_230=new O(-.6427,-.766),n.MOVE_240=new O(-.5,-.866),n.MOVE_250=new O(-.342,-.9396),n.MOVE_260=new O(-.1736,-.9848),n.MOVE_270=new O(0,-1),n.MOVE_280=new O(.1736,-.9848),n.MOVE_290=new O(.342,-.9396),n.MOVE_300=new O(.5,-.866),n.MOVE_310=new O(.6427,-.766),n.MOVE_320=new O(.766,-.6427),n.MOVE_330=new O(.866,-.5),n.MOVE_340=new O(.9396,-.342),n.MOVE_350=new O(.9848,-.1736),n.KEY_TO_MOVE=(new Map).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_000,n.MOVE_000).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_010,n.MOVE_010).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_020,n.MOVE_020).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_030,n.MOVE_030).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_040,n.MOVE_040).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_050,n.MOVE_050).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_060,n.MOVE_060).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_070,n.MOVE_070).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_080,n.MOVE_080).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_090,n.MOVE_090).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_100,n.MOVE_100).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_110,n.MOVE_110).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_120,n.MOVE_120).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_130,n.MOVE_130).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_140,n.MOVE_140).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_150,n.MOVE_150).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_160,n.MOVE_160).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_170,n.MOVE_170).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_180,n.MOVE_180).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_190,n.MOVE_190).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_200,n.MOVE_200).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_210,n.MOVE_210).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_220,n.MOVE_220).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_230,n.MOVE_230).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_240,n.MOVE_240).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_250,n.MOVE_250).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_260,n.MOVE_260).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_270,n.MOVE_270).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_280,n.MOVE_280).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_290,n.MOVE_290).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_300,n.MOVE_300).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_310,n.MOVE_310).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_320,n.MOVE_320).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_330,n.MOVE_330).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_340,n.MOVE_340).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_350,n.MOVE_350),n}n(t,e);var r=t.prototype;return r.getMaxHpPoint=function(e){return e?this.maxHpPointHunter:this.maxHpPointFarmer},r.start=function(){t.instance=this,M.on(o.onGameDefine,this.setGameDefine,this)},r.setGameDefine=function(e){console.log("[GameDefine] setGameDefine",e),this._gameDefine=e},r.getDirectionFromCmd=function(e){return this.KEY_TO_MOVE.get(e)},r.convertRadToMoveCmd=function(e){var n=Math.round(e/this.anglePerCmnd)*this.anglePerCmnd,_="KRUN_CMD_PLAYER_MOVE_"+(0===n?"000":n<100?"0"+n:n);return phoenix.krun.KRUN_CMD[_]||phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_MOVE_000},_(t,[{key:"gameDefine",get:function(){return this._gameDefine}},{key:"timePerFrameServerMilisecond",get:function(){return this._gameDefine.timePerFrame}},{key:"timePerFrameServerSecond",get:function(){return this.timePerFrameServerMilisecond/1e3}},{key:"timePerFrameFakeForInput",get:function(){return(this._gameDefine.timePerFrame+20)/1e3}},{key:"timePerFrameServerMilisecondFake",get:function(){return this._gameDefine.timePerFrame+u.instance.ping/2}},{key:"timePerFrameServerSecondFake",get:function(){return this.timePerFrameServerMilisecondFake/1e3}},{key:"serverFPS",get:function(){return Math.round(1e3/this._gameDefine.timePerFrame)}},{key:"farmerSpeedPerServerFrame",get:function(){return this._gameDefine.farmerMoveSpeed*this.cellUnit}},{key:"hunterSpeedPerServerFrame",get:function(){return this._gameDefine.hunterMoveSpeed*this.cellUnit}},{key:"farmerSpeedPerFrame",get:function(){return this._gameDefine.farmerMoveSpeed/this.serverFPS*this.cellUnit}},{key:"hunterSpeedPerFrame",get:function(){return this._gameDefine.hunterMoveSpeed/this.serverFPS*this.cellUnit}},{key:"cellHeight",get:function(){return this._gameDefine.dungeonHeight}},{key:"cellWidth",get:function(){return this._gameDefine.dungeonWidth}},{key:"cellUnit",get:function(){return this._gameDefine.pixelPerUnit}},{key:"mapWidth",get:function(){return this.cellWidth*this.cellUnit}},{key:"mapHeight",get:function(){return this.cellHeight*this.cellUnit}},{key:"boundWidth",get:function(){return new O(0,this.mapWidth)}},{key:"boundHeight",get:function(){return new O(0,this.mapHeight)}},{key:"boundCamera",get:function(){return new O(2e3,2e3)}},{key:"maxHpPointFarmer",get:function(){return this._gameDefine.farmerHealPointMax}},{key:"maxHpPointHunter",get:function(){return this._gameDefine.hunterHealPointMax}}]),t}(N)).instance=null,V.RED_COLOR=new i(255,0,60),V.BLU_COLOR=new i(2,177,243),E=V))||E);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy,c=e.EventTarget}],execute:function(){t._RF.push({},"cf67fV7rxVL5IrLlgHmZ3Xi","GameEvent",void 0);e("default",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./MaxApiUtils2.ts","./TrimBase64.ts","./PopupMgr.ts","./ScreenMgr.ts","./Define.ts","./GameEvent.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./GamePlay.ts","./AudioMgr.ts"],(function(e){"use strict";var n,t,i,a,r,o,s,c,u,h,d,l,g,k,R,p,m,M,f,_,S,y,b,w;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,a=e._decorator,r=e.director,o=e.Director,s=e.game,c=e.view,u=e.Component},function(e){h=e.globalDefine,d=e.profile},function(e){l=e.maxApiUtils,g=e.MaxApiName},function(e){k=e.TrimBase64},function(e){R=e.PopupMgr},function(e){p=e.ScreenMgr},function(e){m=e.EventName,M=e.ScreenName},function(e){f=e.default},function(e){_=e.NetworkBrigde},function(e){S=e.NetworkDefine,y=e.WSCmd},function(e){b=e.GamePlay},function(e){w=e.AudioMgr}],execute:function(){var N,U;i._RF.push({},"b7472axsNtOc6fjgxtXsqcK","GameMgr",void 0);var A,E=a.ccclass;a.property;!function(e){e[e.Load=0]="Load",e[e.Init=1]="Init",e[e.CheckToken=2]="CheckToken",e[e.Connecting=3]="Connecting",e[e.Authentication=4]="Authentication",e[e.ReqWorker=5]="ReqWorker",e[e.ReqDefines=6]="ReqDefines",e[e.Standby=7]="Standby",e[e.Playing=8]="Playing",e[e.Result=9]="Result",e[e.NetworkError=10]="NetworkError",e[e.FindMatch=11]="FindMatch"}(A||(A={}));e("GameMgr",E("GameMgr")(((U=function(e){function i(){var n;return(n=e.call(this)||this).state=void 0,n.isCapture=!1,n.captureCallBack=null,n.time=0,n.networkBrigde=new _,n.isHunter=!1,n.isStandby=!1,n.endInfo=null,n.cheatSkipStandby=!1,n._ping=0,n}n(i,e);var a=i.prototype;return a.onLoad=function(){f.on(m.onGameDefine,this.menuReady,this)},a.start=function(){i.instance=this,window.OnHideLoading&&(window.OnHideLoading(),console.log("HIDE LOADING"),l.request(g.stopTrace,window.traceScreenLoadId),l.request(g.stopTrace,window.traceScreenInterractionId)),r.on(o.EVENT_AFTER_DRAW,this.canvasAfterDraw,this),this.SetState(A.Load),f.on(m.CaptureScreenShoot,this.captureScreen,this),l.listen("onFocusApp",this.handleFocusMiniApp.bind(this)),l.listen("onBlurApp",this.handleBlurMiniApp.bind(this))},a.handleFocusMiniApp=function(){s.resume(),console.log("[GameMgr] handleFocusMiniApp")},a.handleBlurMiniApp=function(){s.pause(),console.log("[GameMgr] handleBlurMiniApp")},a.update=function(e){switch(this.state){case A.Init:break;case A.CheckToken:this.time+=e,h.profile.isOk?this.SetState(A.Connecting):this.time>=1&&(S.IS_DEV?this.SetState(A.Connecting):this.SetState(A.NetworkError));break;case A.Connecting:this.time+=e,this.time>10?this.SetState(A.NetworkError):this.networkBrigde.isReady&&this.SetState(A.Authentication);break;case A.Standby:if(0==this.isStandby)return;p.instance.isLoaded(M.Standby)&&p.instance.isLoaded(M.GamePlay)&&(p.instance.hide(M.Menu),p.instance.show(M.GamePlay),this.cheatSkipStandby?this.networkBrigde.joinGame(this.isHunter):p.instance.show(M.Standby),this.isStandby=!1);case A.Playing:}},a.SetState=function(e){var n=this;switch(console.log("[GameMgr] state: "+A[this.state]+" => "+A[e]),this.state=e,e){case A.Load:R.instance.load(),p.instance.load(),w.instance.Load(),this.SetState(A.Init);break;case A.Init:this.initNetwork(),this.SetState(A.CheckToken);break;case A.CheckToken:case A.Connecting:this.time=0;break;case A.Authentication:this.networkBrigde.authentication(d.userToken);break;case A.ReqWorker:R.instance.hideAll(),this.networkBrigde.reqWorker();break;case A.ReqDefines:this.networkBrigde.reqDefines();break;case A.FindMatch:this.networkBrigde.joinGame(this.isHunter);var t=setInterval((function(){n.state!=A.Playing?n.networkBrigde.joinGame(n.isHunter):clearInterval(t)}),3e3);break;case A.Playing:l.request(g.stopTrace,window.traceScreenGoldId);break;case A.Result:setTimeout((function(){R.instance.hideAll(),p.instance.hideAll(),b.instance.end(),p.instance.show(M.Result),n.networkBrigde.quitGame()}),2e3)}},a.initNetwork=function(){this.networkBrigde.connect(),this.networkBrigde.onMessage=this.onMessage.bind(this)},a.onMessage=function(e){switch(e.msgClass){case y.ResVerify:var n=phoenix.krun.internal.ResVerify.decode(e.msg);d.Uid=n.uid,this.SetState(A.ReqWorker),console.log("[GameMgr] ResVerify: ",n);break;case y.MsgPing:var t=phoenix.krun.internal.MsgPing.decode(e.msg),i=Date.now()-t.createAt;f.emit(m.onPing,t.workerAt+i/2,i),console.log("[GameMgr] ping: ",i),this.ping=i;break;case y.ResWorker:this.SetState(A.ReqDefines);break;case y.KrunMsg:this.onGameMsg(e.msg)}},a.onGameMsg=function(e){var n=phoenix.krun.KrunMsg.decode(e);if(n.error==phoenix.krun.KRUN_ERROR.KRUN_ERROR_NONE)switch(n.cmd){case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_MATCHING:var t=phoenix.krun.KrunGameMatching.decode(n.body);console.log("[GameMgr] matchingInfo: ",t),f.emit(m.onMatchingInfo,t),this.SetState(A.Playing);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES:var i=phoenix.krun.KrunGameDefines.decode(n.body);f.emit(m.onGameDefine,i);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_END:this.endInfo=phoenix.krun.KrunGameEnd.decode(n.body),console.log("[GameMgr] endgame: ",this.endInfo),b.instance.player.setHp(0),this.SetState(A.Result);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_UPDATE:var a=phoenix.krun.KrunGameUpdate.decode(n.body);b.instance.netUpdate(a);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP:var r=phoenix.krun.KrunResPlayerWakeUp.decode(n.body);r.uid==d.Uid&&r.ok&&f.emit(m.onPlayerWakeUp);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME:var o=phoenix.krun.KrunPlayerJoin.decode(n.body);b.instance.handlePlayerJoin(o);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME:var s=phoenix.krun.KrunPlayerQuit.decode(n.body);b.instance.handlePlayerQuit(s);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_DEAD:var c=phoenix.krun.KrunPlayer.decode(n.body);b.instance.handlePlayerQuit(c)}else switch(console.log("[GameMgr] ongameMsg Error: ",n),n.error){case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_FAIL:console.log("Failed matching");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_TIMEOUT:console.log("Time out"),f.emit(m.onMatchingFailed);break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_INVALID:console.log("User invalid");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_DOUBLE:console.log("User double");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_DISABLE:console.log("Matching disable")}},a.requestServerTime=function(){this.networkBrigde.ping()},a.menuReady=function(){p.instance.hide(M.Loading)},a.startStandby=function(e){void 0===e&&(e=!1),this.isHunter=e,this.isStandby=!0,this.SetState(A.Standby)},a.startFindmatch=function(){this.SetState(A.FindMatch)},a.backToLobby=function(){p.instance.hide(M.GamePlay),p.instance.show(M.Menu),this.networkBrigde.quitGame()},a.playerMove=function(e){this.networkBrigde.sendAction(e,null)},a.playerWakeUp=function(){console.log("Send action player wake up");var e=new phoenix.krun.KrunReqPlayerWakeUp;this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP,phoenix.krun.KrunReqPlayerWakeUp.encode(e))},a.IsHunter=function(){return this.isHunter},a.canvasAfterDraw=function(){if(this.isCapture){this.isCapture=!1;var e=document.getElementById("GameCanvas"),n=document.createElement("canvas"),t=n.getContext("2d"),i=c.getVisibleSize().width,a=c.getVisibleSize().height;n.width=i,n.height=a,t.drawImage(e,0,0,i,a,0,0,i,a);var r=k.trimCanvas(n).toDataURL("image/png");this.captureCallBack(r)}},a.captureScreen=function(e){this.captureCallBack=e,this.isCapture=!0},t(i,[{key:"ping",get:function(){return this._ping},set:function(e){this._ping=e}},{key:"isPlaying",get:function(){return this.state==A.Playing}},{key:"isPingReady",get:function(){return this.networkBrigde.isPingReady}}]),i}(u)).instance=null,N=U))||N);i._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Screen.ts","./GameEvent.ts","./Define.ts","./PlayerManager.ts","./ItemManager.ts","./GameMgr.ts","./GameUIManager.ts","./GameDefine.ts","./MapManager.ts","./CameraFollow.ts","./TimeMgr.ts","./ScreenMgr.ts","./MeteorManager.ts","./ItemSpecialManager.ts","./TrapManager.ts"],(function(e){"use strict";var a,t,n,i,r,o,s,c,l,u,p,f,m,h,g,y,M,d,b,P,I,v,S,k,E;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,c=e.Rect},function(e){l=e.Screen},function(e){u=e.default},function(e){p=e.EventName,f=e.ScreenName,m=e.GamePlayEventName},function(e){h=e.PlayerManager},function(e){g=e.ItemManager},function(e){y=e.GameMgr},function(e){M=e.GameUIManager},function(e){d=e.GameDefine},function(e){b=e.MapManager},function(e){P=e.CameraFollow},function(e){I=e.TimeMgr},function(e){v=e.ScreenMgr},function(e){S=e.MeteorManager},function(e){k=e.ItemSpecialManager},function(e){E=e.TrapManager}],execute:function(){var w,G,T,D,U,C,z,B,_,F,x,N,V,j,A,J,L,O,R,q;o._RF.push({},"5ae0bNOoFtBfrUexD3IPSUb","GamePlay",void 0);var H,Q=s.ccclass,K=s.property;!function(e){e[e.Init=0]="Init",e[e.Playing=1]="Playing",e[e.End=2]="End"}(H||(H={}));e("GamePlay",(w=Q("GamePlay"),G=K(b),T=K(h),D=K(g),U=K(S),C=K(k),z=K(E),B=K(M),_=K(P),w(((q=function(e){function a(){for(var a,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return a=e.call.apply(e,[this].concat(r))||this,n(a,"mapManager",N,i(a)),n(a,"playerManager",V,i(a)),n(a,"itemManager",j,i(a)),n(a,"meteorManager",A,i(a)),n(a,"itemSpecialManager",J,i(a)),n(a,"trapManager",L,i(a)),n(a,"uiManager",O,i(a)),n(a,"camera",R,i(a)),a._player=null,a.state=H.Init,a}t(a,e),a.getInstance=function(){return a.instance};var o=a.prototype;return o.show=function(){e.prototype.show.call(this),a.instance||(a.instance=this),this.setState(H.Init),u.on(p.onMatchingInfo,this.initGame,this)},o.update=function(e){switch(this.state){case H.Playing:this.cloneObjectsToFakeMap(),this.map.setVisiableInPlayerView()}},o.setState=function(e){switch(console.log("[GamePlay] state: "+H[this.state]+" => "+H[e]),this.state=e,e){case H.Playing:y.instance.requestServerTime(),v.instance.hide(f.Standby);break;case H.End:this.reset()}},o.initGame=function(e){var a=this,t=e.dungeon;this.mapManager.getMapData(e),this.mapManager.initGameMaps(),t.goldPieces.forEach((function(e){a.itemManager.initItem(e,a.map)})),t.items.forEach((function(e){a.itemSpecialManager.initItemSpecial(e,a.map)})),t.traps.forEach((function(e){a.trapManager.initTrap(e,a.map)})),e.players.forEach((function(e,t){a.playerManager.initPlayer(e,a.map)})),this.setState(H.Playing)},o.setCamera=function(e){this.camera.Player=e,u.emit(m.UpdateCamera)},o.cloneObjectsToFakeMap=function(){for(var e=0;e<this.fakeMaps.length;e++){var a=this.fakeMaps[e];a.bound.intersects(this.playerBound)?(a.setVisiable(!0),a.cloneItems(this.map.getItems()),a.cloneSpecialItems(this.map.getSpecialItems()),a.cloneTraps(this.map.getTraps()),a.clonePlayers(this.map.getPlayers())):(a.setVisiable(!1),a.removeAllItems(),a.removeAllPlayers())}},o.netUpdate=function(e){var a=this;this.state==H.Playing&&(I.instance.gameTime=e.gameTime,this.map.netUpdate(e),this.fakeMaps.forEach((function(t){t.bound.intersects(a.playerBound)&&t.netUpdate(e)})),this.itemManager.netUpdate(e),this.itemSpecialManager.netUpdate(e),this.trapManager.netUpdate(e),this.meteorManager.netUpdate(e))},o.handlePlayerJoin=function(e){var a=this;this.state==H.Playing&&(this.playerManager.initPlayerJoin(e,this.map),this.fakeMaps.forEach((function(t){a.playerManager.initPlayerJoin(e,t)})))},o.handlePlayerQuit=function(e){this.state==H.Playing&&(this.map.removePlayer(e.uid),this.fakeMaps.forEach((function(a){a.removePlayer(e.uid)})))},o.handleDestroyItem=function(e){this.fakeMaps.forEach((function(a){a.removeItemById(e)}))},o.handleDestroySpecialItem=function(e){this.fakeMaps.forEach((function(a){a.removeSpecialItemById(e)}))},o.handleDestroyTrap=function(e){this.fakeMaps.forEach((function(a){a.removeTrapById(e)}))},o.handleDestroyMeteor=function(e){this.fakeMaps.forEach((function(a){a.removeMeteorById(e)}))},o.end=function(){this.setState(H.End)},o.backClick=function(){y.instance.backToLobby(),this.end()},o.reset=function(){this.map.reset(),this.fakeMaps.forEach((function(e){e.reset()})),this._player=null,this.camera.Player=null,this.uiManager.reset()},r(a,[{key:"player",get:function(){return this._player},set:function(e){this._player=e,this.setCamera(e.node)}},{key:"map",get:function(){return this.mapManager.map}},{key:"fakeMaps",get:function(){return this.mapManager.fakeMaps}},{key:"playerBound",get:function(){var e=this.player.node.position;return new c(e.x-d.instance.boundCamera.x/2,e.y-d.instance.boundCamera.y/2,d.instance.boundCamera.x,d.instance.boundCamera.y)}}]),a}(l)).instance=null,N=a((x=q).prototype,"mapManager",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=a(x.prototype,"playerManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=a(x.prototype,"itemManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=a(x.prototype,"meteorManager",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=a(x.prototype,"itemSpecialManager",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=a(x.prototype,"trapManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=a(x.prototype,"uiManager",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=a(x.prototype,"camera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=x))||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./GameEvent.ts","./GlobalDefine.ts","./MySprite.ts","./Utils.ts","./Define.ts","./GameMgr.ts","./GamePlay.ts","./PlayerDead.ts","./MoneyChange.ts","./PlayerAttack.ts"],(function(e){"use strict";var t,n,a,l,o,i,r,c,s,u,y,p,f,d,h,g,b,m,E,M,L,G,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,r=e.Label,c=e.Color,s=e.Vec3,u=e.tween,y=e.Component},function(e){p=e.AudioMgr},function(e){f=e.default},function(e){d=e.profile},function(e){h=e.MySprite},function(e){g=e.utils},function(e){b=e.GamePlayEventName,m=e.SoundName},function(e){E=e.GameMgr},function(e){M=e.GamePlay},function(e){L=e.PlayerDead},function(e){G=e.MoneyChange},function(e){w=e.PlayerAttack}],execute:function(){var v,B,S,A,D,P,U,C,k,z,I,N,R,F,T,x,_;o._RF.push({},"eb558Etau1CmpoyrjypGeO4","GameUIManager",void 0);var H=i.ccclass,O=i.property;e("GameUIManager",(v=H("GameUIManager"),B=O(h),S=O(r),A=O(r),D=O(r),P=O(L),U=O(w),C=O(G),v((I=t((z=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"avatar",I,l(t)),a(t,"playerName",N,l(t)),a(t,"goldLabel",R,l(t)),a(t,"moneyLabel",F,l(t)),a(t,"playerDead",T,l(t)),a(t,"playerAttack",x,l(t)),a(t,"moneyChange",_,l(t)),t.goldBalance=0,t.moneyBalance=0,t.tweenGoldEffect=null,t.tweenMoneyEffect=null,t}n(t,e);var o=t.prototype;return o.start=function(){this.avatar.FetchAvatar("01662984381"),this.playerName.string=g.trimName(d.UserName,2),f.on(b.UpdateGoldBalance,this.updateGoldBalance.bind(this)),f.on(b.UpdateMoneyBalance,this.updateMoneyBalance.bind(this)),f.on(b.UpdatePlayerFREEZE,this.playerFreeze.bind(this)),f.on(b.UpdatePlayerStopAttack,this.playerStopAtack.bind(this)),f.on(b.UpdateMoneyChange,this.updateMoneyChange.bind(this))},o.playerFreeze=function(e){var t=this;setTimeout((function(){E.instance.isPlaying&&t.playerDead.onDead(e)}),300)},o.playerStopAtack=function(e){this.playerAttack.stopAttack(e)},o.updateMoneyChange=function(e){this.moneyChange.setEndTime(e)},o.updateGoldBalance=function(e){var t=this;this.goldBalance!=e&&(this.goldBalance<e?(this.goldLabel.color=c.GREEN,M.instance.player.earnMoneyEffect(),p.instance.PlaySfx(m.CollectGold)):this.goldLabel.color=c.RED,this.goldBalance=e,this.tweenGoldEffect&&(this.tweenGoldEffect.stop(),this.tweenGoldEffect=null),this.goldLabel.node.parent.setScale(new s(1.1,1.1)),this.tweenGoldEffect=u({gold:parseInt(this.goldLabel.string)}).delay(.5).to(.3,{gold:e},{onUpdate:function(e,n){var a=Math.round(e.gold);parseInt(t.goldLabel.string)!=a&&(t.goldLabel.string=a.toString())}}).delay(.1).call((function(){t.tweenGoldEffect=null,t.goldLabel.color=c.WHITE,t.goldLabel.node.parent.setScale(s.ONE)})).start())},o.updateMoneyBalance=function(e){var t=this;this.moneyBalance!=e&&(this.moneyBalance<e?(this.moneyLabel.color=c.GREEN,p.instance.PlaySfx(m.ExchangeMoney)):this.moneyLabel.color=c.RED,this.moneyBalance=e,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new s(1.1,1.1)),this.tweenMoneyEffect=u({money:parseInt(this.moneyLabel.string)}).delay(.5).to(.3,{money:e},{onUpdate:function(e,n){var a=Math.round(e.money);parseInt(t.moneyLabel.string)!=a&&(t.moneyLabel.string=a.toString())}}).delay(.1).call((function(){t.tweenMoneyEffect=null,t.moneyLabel.color=c.WHITE,t.moneyLabel.node.parent.setScale(s.ONE)})).start())},o.reset=function(){this.goldLabel.string="0",this.moneyLabel.string="0",this.goldBalance=0,this.moneyBalance=0,this.playerAttack.reset(),this.playerDead.reset()},t}(y)).prototype,"avatar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"playerName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"goldLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"moneyLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(z.prototype,"playerDead",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"playerAttack",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"moneyChange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=z))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Profile.ts","./MaxApiUtils2.ts"],(function(e){"use strict";var n,t,i,r,o,a,c;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator},function(e){i=e.cclegacy,r=e.log},function(e){o=e.Profile},function(e){a=e.maxApiUtils,c=e.MaxApiName}],execute:function(){var u;e("DevicePerformance",void 0),i._RF.push({},"bd878PhQoVBopiCOx304mmp","GlobalDefine",void 0),function(e){e.LowEnd="low-end",e.MideEnd="mid-end",e.HighEnd="high-end"}(u||(u=e("DevicePerformance",{})));var f=e("globalDefine",new(function(){function e(){this.deviceInfo=void 0,this.feature=void 0,this.gameConfig=void 0,this.profile=new o,this.init()}var i=e.prototype;return i.init=function(){var e=t(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.request(c.getDeviceInfo).then((function(e){n.deviceInfo=e,r("[globalDefine] getDeviceInfo: ",e)})),this.getGameParams().then((function(e){n.feature=e,r("[globalDefine] getGameParams: ",e)})),e.next=4,this.profile.init();case 4:r("[globalDefine] Init done.....");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getGameParams=function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var t=localStorage.getItem("feature"),i=JSON.parse(t);i&&i.feature?e(i.feature):e(null)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(e,[{key:"osPlatform",get:function(){return"apple"==this.deviceInfo.deviceManufacturer.toLocaleLowerCase()?"ios":"android"}},{key:"isIOS",get:function(){return"ios"==this.osPlatform}},{key:"env",get:function(){return this.deviceInfo.isDev?"dev":"prod"}},{key:"isLowEndDevice",get:function(){return!this.deviceInfo||this.deviceInfo.devicePerformance==u.LowEnd}},{key:"isHighEndDevice",get:function(){return!!this.deviceInfo&&this.deviceInfo.devicePerformance==u.HighEnd}}]),e}()));e("profile",f.profile);i._RF.pop()}}}));

System.register("chunks:///_virtual/ImageCache.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,s,i;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,r=e.SpriteFrame,a=e.sys,s=e.ImageAsset,i=e.Texture2D}],execute:function(){n._RF.push({},"36400DoKO9IurGOTW+nfKD5","ImageCache",void 0);e("default",new(function(){var e=n.prototype;function n(){this.canvas=void 0,this.context=void 0,this.images=new Map,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return e.get=function(e){return this.images.get(e)},e.request=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=0),t&&""!=t){e.next=3;break}return e.abrupt("return",null);case 3:if(t=t.replace("img.mservice.io","atc-edge03.mservice.com.vn"),s=this.images.get(t)){e.next=20;break}if(i=null,u=t,a.isNative||!(n>0)){e.next=12;break}return e.next=11,this.resizeImage(t,n);case 11:t=e.sent;case 12:return e.next=14,this.getRemoteTextureImage(t);case 14:if(i=e.sent){e.next=17;break}return e.abrupt("return",null);case 17:(s=new r).texture=i,this.images.set(u,s);case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.requestAvatar=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://s3-ap-southeast-1.amazonaws.com/avatars.mservice.io/"+t+".png",e.abrupt("return",this.request(n,128));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.clear=function(){this.images.clear()},e.getRemoteTextureImage=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var t=new s(r),n=new i;n.image=t,e(n)},r.onerror=function(){e(null)},r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.resizeImage=function(e,t){var n=this;return void 0===t&&(t=128),new Promise((function(r,a){var s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.height/s.width;n.canvas.width=t*e,n.canvas.height=t,n.context.drawImage(s,0,0,n.canvas.width,n.canvas.height),r(n.canvas.toDataURL())},s.onerror=function(){r(e)},s.src=e}))},n}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/Input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts"],(function(t){"use strict";var n,o,e,s,i,c,a,h;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,s=t._decorator,i=t.Vec2,c=t.Node,a=t.Component},function(t){h=t.TouchState}],execute:function(){var u,r;e._RF.push({},"0e413Vz005IYIfIPMIFSklJ","Input",void 0);var p=s.ccclass;s.property,t("Input",p("Input")(((r=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this).state=h.None,n.isTouchDown=!1,n.downPosition=new i,n.position=new i,n.delta=new i,n}n(e,t);var s=e.prototype;return s.onLoad=function(){e.instance=this,this.node.on(c.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},s.lateUpdate=function(){this.state==h.Down?this.state=h.Press:this.state==h.Up&&(this.state=h.None,this.delta.set(0,0))},s.onTouchBegan=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.downPosition=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Down,this.StopPropagation(t)},s.onTouchEnded=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchCancelled=function(t){this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchMove=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Press,this.StopPropagation(t)},s.reset=function(){this.state=h.None,this.delta.set(0,0)},s.StopPropagation=function(t){},e.Reset=function(){e.instance.reset()},o(e,null,[{key:"Instance",get:function(){return e.instance}},{key:"State",get:function(){return e.instance.state}},{key:"IsTouchDown",get:function(){return e.instance.state==h.Down}},{key:"IsTouchUp",get:function(){return e.instance.state==h.Up}},{key:"IsTouchMove",get:function(){return e.instance.state==h.Press}},{key:"IsTouchNone",get:function(){return e.instance.state==h.None}}]),e}(a)).instance=null,u=r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,r,o,a,s,l,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Sprite,l=t.Label,u=t.tween,c=t.Vec3,p=t.Component}],execute:function(){var m,f,d,h,y,b,g;o._RF.push({},"30205GJNRRJY64cYiDjQ65b","Item",void 0);var v=a.ccclass,I=a.property;t("Item",(m=v("Item"),f=I(s),d=I(l),m((b=e((y=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"model",b,r(e)),i(e,"amount",g,r(e)),e}n(e,t);var o=e.prototype;return o.setInfo=function(t,e){this.model.spriteFrame=t,this.amount.string="x"+e},o.cloneInfo=function(t){this.model.spriteFrame=t.model.spriteFrame,this.amount.string=t.amount.string},o.destroyItem=function(t){var e=null;this.node.active&&(e=u(this.node).parallel(u(this.node).by(.5,{position:new c(0,150)}),u(this.node).to(.5,{scale:c.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){e&&e.stop(),t()}),500)},e}(p)).prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(y.prototype,"amount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GamePlay.ts","./Item.ts"],(function(e){"use strict";var t,i,n,r,a,o,c,s,m,u,l,f,p,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Prefab,s=e.SpriteFrame,m=e.NodePool,u=e.Vec3,l=e.instantiate,f=e.Component},function(e){p=e.GameDefine},function(e){g=e.GamePlay},function(e){h=e.Item}],execute:function(){var I,d,P,v,y,b,S;a._RF.push({},"2b1b9aACPxPRLBtUFqGKDcS","ItemManager",void 0);var F=o.ccclass,D=o.property;e("ItemManager",(I=F("ItemManager"),d=D(c),P=D(s),I((b=t((y=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"itemPrefab",b,r(t)),n(t,"itemSpriteFrames",S,r(t)),t.itemPool=new m,t}i(t,e);var a=t.prototype;return a.initItem=function(e,t){var i=this.getItem();i.active=!1,i.position=new u(e.x*p.instance.cellUnit,e.y*p.instance.cellUnit),i.name=e.id.toString(),t.addItem(i),i.getComponent(h).setInfo(this.getItemSpriteFrame(e.value),e.value),i.active=!0},a.netUpdate=function(e){var t=this,i=g.instance.map;e.dungeon.goldPieces.forEach((function(e){i.findItem(e.id.toString())||(t.initItem(e,i),g.instance.fakeMaps.forEach((function(i){t.initItem(e,i)})))})),i.getItems().forEach((function(t){e.dungeon.goldPieces.find((function(e){return e.id.toString()==t.name}))||(g.instance.handleDestroyItem(t.name),i.removeItem(t))}))},a.getItemSpriteFrame=function(e){return 1==e?this.itemSpriteFrames[0]:2==e?this.itemSpriteFrames[1]:this.itemSpriteFrames[2]},a.getItem=function(){return this.itemPool.size()>0?this.itemPool.get():l(this.itemPrefab)},t}(f)).prototype,"itemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"itemSpriteFrames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,r,c,s,a,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.Sprite,a=e.tween,l=e.Vec3,p=e.Component}],execute:function(){var u,f,m,d,h;r._RF.push({},"c5c424fnnFOCKoLo1WxNSRB","ItemSpecial",void 0);var y=c.ccclass,v=c.property;e("ItemSpecial",(u=y("ItemSpecial"),f=v(s),u((h=t((d=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(t,"model",h,o(t)),t}i(t,e);var r=t.prototype;return r.setInfo=function(e){this.model.spriteFrame=e},r.cloneInfo=function(e){this.model.spriteFrame=e.model.spriteFrame},r.destroyItem=function(e){var t=null;this.node.active&&(t=a(this.node).parallel(a(this.node).by(.5,{position:new l(0,150)}),a(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){t&&t.stop(),e()}),500)},t}(p)).prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GamePlay.ts","./ItemSpecial.ts"],(function(e){"use strict";var t,i,n,a,r,c,o,l,p,m,s,u,S,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,o=e.Prefab,l=e.SpriteFrame,p=e.NodePool,m=e.Vec3,s=e.instantiate,u=e.Component},function(e){S=e.GameDefine},function(e){f=e.GamePlay},function(e){g=e.ItemSpecial}],execute:function(){var I,h,d,y,N,_,v;r._RF.push({},"eefe5Ij3/BJ4pgCUN07oo82","ItemSpecialManager",void 0);var P=c.ccclass,U=c.property;e("ItemSpecialManager",(I=P("ItemSpecialManager"),h=U(o),d=U(l),I((_=t((N=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(t,"itemSpecialPrefab",_,a(t)),n(t,"itemSpecialSpriteFrames",v,a(t)),t.itemSpecialPool=new p,t}i(t,e);var r=t.prototype;return r.initItemSpecial=function(e,t){var i=this.getItemSpecial();i.active=!1,i.position=new m(e.x*S.instance.cellUnit,e.y*S.instance.cellUnit),i.name=e.id.toString(),t.addItemSpecial(i),i.getComponent(g).setInfo(this.getItemSpecialSpriteFrame(e.type)),i.active=!0},r.netUpdate=function(e){var t=this,i=f.instance.map;e.dungeon.items.forEach((function(e){i.findSpecialItem(e.id.toString())||(t.initItemSpecial(e,i),f.instance.fakeMaps.forEach((function(i){t.initItemSpecial(e,i)})))})),i.getSpecialItems().forEach((function(t){e.dungeon.items.find((function(e){return e.id.toString()==t.name}))||(f.instance.handleDestroySpecialItem(t.name),i.removeSpecialItem(t))}))},r.getItemSpecialSpriteFrame=function(e){return e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST?this.itemSpecialSpriteFrames[0]:e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_HEAL_POTION?this.itemSpecialSpriteFrames[1]:void 0},r.getItemSpecial=function(){return this.itemSpecialPool.size()>0?this.itemSpecialPool.get():s(this.itemSpecialPrefab)},t}(u)).prototype,"itemSpecialPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(N.prototype,"itemSpecialSpriteFrames",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=N))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Input.ts"],(function(t){"use strict";var e,i,n,s,o,r,c,a,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Node,a=t.Vec3,p=t.UITransform,l=t.Component},function(t){u=t.Input}],execute:function(){var h,d,m,f,y;o._RF.push({},"5c332ws8gtKmLamvSRyIAJr","Joystick",void 0);var v=r.ccclass,I=r.property;t("Joystick",(h=v("Joystick"),d=I(c),h((y=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"middle",y,s(e)),e.radius=200,e.direction=new a,e.tempV3=new a,e}i(e,t);var o=e.prototype;return o.start=function(){this.radius=this.getComponent(p).contentSize.width/2},o.update=function(){if(u.IsTouchUp)this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset();else if(u.IsTouchMove){var t=Math.min(u.Instance.delta.length(),this.radius);this.tempV3.set(u.Instance.delta.x,u.Instance.delta.y,0),this.tempV3.normalize(),this.tempV3.multiplyScalar(t),this.middle.position=this.tempV3}},o.reset=function(){this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset()},e}(l)).prototype,"middle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var e,i,n,o,r,a,c,s,l,h,u,d,p,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,s=t.UIOpacity,l=t.Vec3,h=t.tween,u=t.UITransform},function(t){d=t.GameDefine,p=t.ScreenName},function(t){f=t.Screen},function(t){g=t.ScreenMgr}],execute:function(){var m,y,b,w,v,z,L,S,E,D,T,C,A,O,j,F,M;r._RF.push({},"c940for3pBF+YmHZQPdRudK","Loading",void 0);var P=a.ccclass,x=a.property;t("Loading",(m=P("Loading"),y=x(c),b=x(c),w=x(c),v=x(c),z=x(c),L=x(c),S=x(s),m((T=e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).timeLoading=0,e.isDone=!1,e.isLoadingFalse=!1,n(e,"zoom",T,o(e)),n(e,"bgEffect",C,o(e)),n(e,"objectContainer",A,o(e)),n(e,"door",O,o(e)),n(e,"ghosts",j,o(e)),n(e,"lights",F,o(e)),n(e,"whiteScreen",M,o(e)),e}i(e,t);var r=e.prototype;return r.hide=function(){this.isDone=!0,this.onDone()},r.start=function(){this.init(),this.zoomToDoor()},r.update=function(t){this.isDone||this.isLoadingFalse||(this.timeLoading+=t,this.timeLoading>=10&&(this.isLoadingFalse=!0))},r.onDone=function(){this.openDoor()},r.init=function(){this.zoom.setPosition(l.ZERO),this.zoom.setScale(l.ONE)},r.zoomToDoor=function(){var t=new l(2,2,2),e=new l(-50,900);h(this.zoom).delay(d.timeAppearLoading).to(d.timeEndLoading,{scale:t,position:e}).start(),h(this.bgEffect).delay(d.timeAppearLoading).to(d.timeEndLoading,{scale:new l(.5,.5),position:new l(25,-450)}).start(),this.moveObjectsToSide()},r.moveObjectsToSide=function(){var t=[];this.addChildrenToArray(this.objectContainer,t),t.sort((function(t,e){return e.position.y-t.position.y}));var e=this.node.getComponent(u).contentSize;t.forEach((function(t,i){var n=t.getComponent(u),o=e.width/2+50;t.position.x<0?(o*=-1,n.setAnchorPoint(1,.5)):n.setAnchorPoint(0,.5);var r=new l(o,t.position.y);h(t).delay(d.timeAppearLoading).to(.2*(i+1),{position:r}).start()}))},r.addChildrenToArray=function(t,e){var i=this;0==t.children.length?e.push(t):t.children.forEach((function(t){i.addChildrenToArray(t,e)}))},r.tweenObjectToSize=function(t,e){var i=this,n=t.getComponent(u).contentSize.width;t.position.x<0&&(n*=-1);var o=new l(t.position.x+n,t.position.y);0==t.children.length?h(t).to(d.timeAppearLoading*(e+1),{position:o}).start():t.children.forEach((function(t,e){i.tweenObjectToSize(t,e)}))},r.openDoor=function(){var e=this,i=this.door.children[0],n=this.door.children[1];h(i).to(d.timeEndLoading,{scale:new l(0,1,1)}).start(),h(n).to(d.timeEndLoading,{scale:new l(0,1,1)}).start(),this.lights.children.forEach((function(t){h(t).to(d.timeEndLoading,{scale:l.ONE}).start()})),h(this.whiteScreen).to(d.timeEndLoading,{opacity:255}).call((function(){g.instance.show(p.Menu),t.prototype.hide.call(e)})).start()},r.ghostFlyToDoor=function(){var e=this,i=this.door.getComponent(u).contentSize,n=Math.max(i.width,i.height);this.ghosts.children.forEach((function(t,i){var o=t.getComponent(u).contentSize,r=Math.max(o.width,o.height),a=1,c=.5;r<n?a=n/r:n<r&&(a=n/r,c=.25),h(t).set({scale:new l(l.ONE).multiplyScalar(a)}).to(2,{position:e.door.getPosition().clone(),scale:new l(l.ONE).multiplyScalar(c)}).call((function(){t.active=!1})).start(),h(t.getComponent(s)).to(2,{opacity:50}).start()}));var o=.1*(this.ghosts.children.length-1)+2;setTimeout((function(){g.instance.show(p.Menu),t.prototype.hide.call(e)}),1e3*o)},e}(f)).prototype,"zoom",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(D.prototype,"bgEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(D.prototype,"objectContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(D.prototype,"door",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(D.prototype,"ghosts",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"lights",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"whiteScreen",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=D))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/LostHpEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts"],(function(t){"use strict";var e,i,n,o,c,a,r,s,f,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,r=t.UIOpacity,s=t.tween,f=t.Component},function(t){p=t.default},function(t){l=t.GamePlayEventName}],execute:function(){var u,y,h,E,v;c._RF.push({},"14da0iCYJRPBZhIbpbSJ0xX","LostHpEffect",void 0);var d=a.ccclass,w=a.property;t("LostHpEffect",(u=d("LostHpEffect"),y=w(r),u((v=e((E=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,n(e,"opacity",v,o(e)),e.tweenEffect=null,e}i(e,t);var c=e.prototype;return c.start=function(){this.node.active=!1,p.on(l.LostHp,this.startEffect,this)},c.startEffect=function(){var t=this;this.node.active=!0,this.tweenEffect&&(this.tweenEffect.stop(),this.tweenEffect=null),this.tweenEffect=s(this.opacity).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).call((function(){t.tweenEffect=null,t.node.active=!1})).start()},e}(f)).prototype,"opacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=E))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/MagmaCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,a,i,o,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Animation,c=e.tween,s=e.Component}],execute:function(){var u,p,f,m,y;i._RF.push({},"149b21G4XtJAopzNOabkBf1","MagmaCell",void 0);var g=o.ccclass,h=o.property;e("MagmaCell",(u=g("MagmaCell"),p=h(l),u((y=t((m=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"animController",y,a(t)),t}return r(t,e),t.prototype.startMagma=function(e){var t=this;this.animController.play(),c(this.node).delay(e).call((function(){t.animController.play()})).union().repeatForever().start()},t}(s)).prototype,"animController",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./MaxApiUtils2.ts","./AudioMgr.ts","./GameEvent.ts","./GlobalDefine.ts","./ImageCache.ts","./MyButton.ts","./MySprite.ts","./ApiMock.ts","./GameApi.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./NetworkMgr.ts","./PerformanceTracking.ts","./TimeMgr.ts","./Random.ts","./RemoteImage.ts","./SpineRemote.ts","./TrimBase64.ts","./Utils.ts","./Meteor.ts","./SpawnMeteor.ts","./CameraFollow.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts","./Item.ts","./ItemSpecial.ts","./Joystick.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObstacleCell.ts","./Player.ts","./PlayerDead.ts","./Profile.ts","./Trap.ts","./LostHpEffect.ts","./ShadowEffect.ts","./ItemManager.ts","./ItemSpecialManager.ts","./MapManager.ts","./MeteorManager.ts","./PlayerManager.ts","./TrapManager.ts","./MoneyChange.ts","./PlayerAttack.ts","./GameUIManager.ts","./MaxApiUtils.ts","./a-protobuf.ts","./patchproto.mjs_cjs=&original=.js","./phoenix.mjs_cjs=&original=.js","./Popup.ts","./PopupMgr.ts","./Loading.ts","./Menu.ts","./Result.ts","./Screen.ts","./ScreenMgr.ts","./Standby.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./GlobalDefine.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./Item.ts","./ItemSpecial.ts","./Player.ts","./Trap.ts"],(function(e){"use strict";var t,n,i,a,r,o,l,c,s,p,m,u,f,h,d,g,y,C,M,v,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.Node,s=e.instantiate,p=e.Vec2,m=e.Rect,u=e.Component},function(e){f=e.default},function(e){h=e.profile},function(e){d=e.GamePlayEventName},function(e){g=e.GameDefine},function(e){y=e.GamePlay},function(e){C=e.Item},function(e){M=e.ItemSpecial},function(e){v=e.Player},function(e){P=e.Trap}],execute:function(){var E,I,b,A,S,_,T,F,R,U,V,N,w,z,B,G,H;o._RF.push({},"da5a0M5cCNC6Jf2+fAilgOQ","Map",void 0);var L=l.ccclass,Y=l.property;e("Map",(E=L("Map"),I=Y(c),b=Y(c),A=Y(c),S=Y(c),_=Y(c),T=Y(c),F=Y(c),E((V=t((U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"cellContainer",V,a(t)),i(t,"itemManager",N,a(t)),i(t,"playerManager",w,a(t)),i(t,"obstacleContainer",z,a(t)),i(t,"meteorContainer",B,a(t)),i(t,"itemSpecialManager",G,a(t)),i(t,"trapManager",H,a(t)),t}n(t,e);var o=t.prototype;return o.setPosition=function(e){this.node.position=e,this.cellContainer.position=e,this.itemManager.position=e,this.playerManager.position=e,this.obstacleContainer.position=e,this.meteorContainer.position=e,this.itemSpecialManager.position=e,this.trapManager.position=e},o.setVisiable=function(e){this.node.active=e,this.cellContainer.active=e,this.itemManager.active=e,this.playerManager.active=e,this.obstacleContainer.active=e,this.meteorContainer.active=e,this.itemSpecialManager.active=e,this.trapManager.active=e,1==e&&this.setVisiableInPlayerView()},o.netUpdate=function(e){var t=this;e.players.forEach((function(e){var n=t.findPlayer(e.uid);if(n){var i=n.getComponent(v);e.uid==h.Uid&&(f.emit(d.UpdateGoldBalance,e.gold),f.emit(d.UpdateMoneyBalance,e.money)),i.setPositionFromServer(e.x,e.y),i.setHp(e.healPoint);var a=e.effects,r=!1;a.length>0&&a.forEach((function(t){t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FREEZE&&(e.uid==h.Uid&&f.emit(d.UpdatePlayerFREEZE,t.end),r=!0,i.setFrezze(!0)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_STOP_ATTACK&&(e.uid==h.Uid&&f.emit(d.UpdatePlayerStopAttack,t.end),i.setAttack(t.end)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FARMER_MONEY_CHANGE&&e.uid==h.Uid&&f.emit(d.UpdateMoneyChange,t.end),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_HUNTER_MONEY_CHANGE&&e.uid==h.Uid&&f.emit(d.UpdateMoneyChange,t.end)})),r||i.setFrezze(!1)}}))},o.addCell=function(e){e.setParent(this.cellContainer)},o.removeCell=function(e){e.removeFromParent(),e.destroy()},o.removeAllCells=function(){this.cellContainer.children.forEach((function(e){e.destroy()})),this.cellContainer.removeAllChildren()},o.addObstacle=function(e){e.setParent(this.obstacleContainer)},o.removeObstacle=function(e){e.removeFromParent(),e.destroy()},o.removeAllObstacles=function(){this.obstacleContainer.children.forEach((function(e){e.destroy()})),this.obstacleContainer.removeAllChildren()},o.addPlayer=function(e){e.setParent(this.playerManager)},o.clonePlayers=function(e){var t=this;e.forEach((function(e){if(!t.findPlayer(e.name)){var n=s(e);n.active=!1,n.parent=t.playerManager,n.position=e.position,n.name=e.name;var i=n.getComponent(v);i.isJoinGame=!0,n.active=!0;var a=e.getComponent(v);i.setHunter(a.isHunter),i.playIdleAnimaton(),i.setHp(a.getHpPoint(),!0),i.direction=a.direction}}))},o.findPlayer=function(e){return this.playerManager.getChildByName(e)},o.getPlayers=function(){return this.playerManager.children.filter((function(e){return e.name!=h.Uid}))},o.removePlayer=function(e){var t=this.findPlayer(e);t&&y.instance.playerManager.playerPool.put(t)},o.removeAllPlayers=function(){this.playerManager.children.forEach((function(e){y.instance.playerManager.playerPool.put(e)}))},o.addItem=function(e){this.itemManager.addChild(e)},o.cloneItems=function(e){var t=this;e.forEach((function(e){if(!t.findItem(e.name)){var n=y.instance.itemManager.getItem();n.parent=t.itemManager,n.position=e.position,n.name=e.name,n.getComponent(C).cloneInfo(e.getComponent(C)),n.active=!0}}))},o.getItems=function(){return this.itemManager.children},o.findItem=function(e){return this.itemManager.getChildByName(e)},o.removeItem=function(e){e.getComponent(C).destroyItem((function(){y.instance.itemManager.itemPool.put(e)}))},o.removeItemById=function(e){var t=this.findItem(e);t&&t.getComponent(C).destroyItem((function(){y.instance.itemManager.itemPool.put(t)}))},o.removeAllItems=function(e){this.itemManager.children.forEach((function(e){y.instance.itemManager.itemPool.put(e)}))},o.addMeteor=function(e){this.meteorContainer.addChild(e)},o.findMeteor=function(e){return this.meteorContainer.getChildByName(e)},o.getMeteors=function(){return this.meteorContainer.children},o.removeMeteor=function(e){y.instance.meteorManager.meteorPool.put(e)},o.removeMeteorById=function(e){var t=this.findMeteor(e);t&&y.instance.meteorManager.meteorPool.put(t)},o.removeAllMeteors=function(){this.meteorContainer.children.forEach((function(e){y.instance.meteorManager.meteorPool.put(e)}))},o.addItemSpecial=function(e){this.itemSpecialManager.addChild(e)},o.cloneSpecialItems=function(e){var t=this;e.forEach((function(e){if(!t.findSpecialItem(e.name)){var n=y.instance.itemSpecialManager.getItemSpecial();n.parent=t.itemSpecialManager,n.position=e.position,n.name=e.name,n.getComponent(M).cloneInfo(e.getComponent(M)),n.active=!0}}))},o.getSpecialItems=function(){return this.itemSpecialManager.children},o.findSpecialItem=function(e){return this.itemSpecialManager.getChildByName(e)},o.removeSpecialItem=function(e){e.getComponent(M).destroyItem((function(){y.instance.itemSpecialManager.itemSpecialPool.put(e)}))},o.removeSpecialItemById=function(e){var t=this.findSpecialItem(e);t&&t.getComponent(M).destroyItem((function(){y.instance.itemSpecialManager.itemSpecialPool.put(t)}))},o.removeAllSpecialItems=function(e){this.itemSpecialManager.children.forEach((function(e){y.instance.itemSpecialManager.itemSpecialPool.put(e)}))},o.addTrap=function(e){this.trapManager.addChild(e)},o.cloneTraps=function(e){var t=this;e.forEach((function(e){if(!t.findTrap(e.name)){var n=y.instance.trapManager.getTrap();n.parent=t.trapManager,n.position=e.position,n.name=e.name,n.getComponent(P).cloneInfo(e.getComponent(P)),n.active=!0}}))},o.getTraps=function(){return this.trapManager.children},o.findTrap=function(e){return this.trapManager.getChildByName(e)},o.removeTrap=function(e){e.getComponent(P).destroyTrap((function(){y.instance.trapManager.trapPool.put(e)}))},o.removeTrapById=function(e){var t=this.findTrap(e);t&&t.getComponent(P).destroyTrap((function(){y.instance.trapManager.trapPool.put(t)}))},o.removeAllTraps=function(e){this.trapManager.children.forEach((function(e){y.instance.trapManager.trapPool.put(e)}))},o.setVisiableContainerInPlayerView=function(e,t){e.children.forEach((function(n){var i=n.position.clone().add(e.position);t.contains(new p(i.x,i.y))?n.active=!0:n.active=!1}))},o.setVisiableInPlayerView=function(){var e=y.instance.playerBound;this.setVisiableContainerInPlayerView(this.cellContainer,e),this.setVisiableContainerInPlayerView(this.itemManager,e),this.setVisiableContainerInPlayerView(this.playerManager,e),this.setVisiableContainerInPlayerView(this.obstacleContainer,e),this.setVisiableContainerInPlayerView(this.meteorContainer,e),this.setVisiableContainerInPlayerView(this.itemSpecialManager,e),this.setVisiableContainerInPlayerView(this.trapManager,e)},o.reset=function(){this.removeAllPlayers(),this.removeAllItems(),this.removeAllCells(),this.removeAllObstacles(),this.removeAllMeteors(),this.removeAllSpecialItems(),this.removeAllTraps()},r(t,[{key:"bound",get:function(){return new m(this.node.position.x,this.node.position.y,g.instance.mapWidth,g.instance.mapHeight)}}]),t}(u)).prototype,"cellContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(U.prototype,"itemManager",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(U.prototype,"playerManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"obstacleContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(U.prototype,"meteorContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"itemSpecialManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(U.prototype,"trapManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=U))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,n,o,l,s,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.Sprite,a=e.Label,p=e.Component}],execute:function(){var c,u,f,b,h,y,g;o._RF.push({},"4e102X4SVVAMZn3gGGGj4cg","MapCell",void 0);var v=l.ccclass,d=l.property;e("MapCell",(c=v("MapCell"),u=d(s),f=d(a),c((y=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"sprite",y,n(t)),r(t,"positionLabel",g,n(t)),t}i(t,e);var o=t.prototype;return o.setSprite=function(e,t){this.sprite.spriteFrame=e},o.setPosition=function(e,t,i,r){void 0===r&&(r=!1),this.node.setPosition(e),r&&(this.positionLabel.node.active=!0,this.positionLabel.string=e.x+", "+e.y)},t}(p)).prototype,"sprite",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"positionLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Random.ts","./Define.ts","./GameDefine.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObstacleCell.ts"],(function(t){"use strict";var e,a,i,n,r,l,s,o,c,p,h,m,u,g,f,d,M,v,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,s=t.Prefab,o=t.SpriteFrame,c=t.Vec3,p=t.instantiate,h=t.Vec2,m=t.Component},function(t){u=t.Random},function(t){g=t.TileType},function(t){f=t.GameDefine},function(t){d=t.MagmaCell},function(t){M=t.Map},function(t){v=t.MapCell},function(t){b=t.ObstacleCell}],execute:function(){var D,T,C,w,H,y,W,F,L,P,z,S,R,k,B,O,G;r._RF.push({},"61d00j1azxKTbdcfzwpXVLk","MapManager",void 0);var x=l.ccclass,U=l.property;t("MapManager",(D=x("MapManager"),T=U(M),C=U(M),w=U(s),H=U(s),y=U(s),W=U(o),F=U(o),D((z=e((P=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"map",z,n(e)),i(e,"fakeMaps",S,n(e)),i(e,"mapCell",R,n(e)),i(e,"magmaCell",k,n(e)),i(e,"obstacleCell",B,n(e)),i(e,"tileSpriteFrames",O,n(e)),i(e,"obstacleSpriteFrames",G,n(e)),e.debug=!1,e.mapData=void 0,e.magmaMapData=void 0,e.obstacleMapData=void 0,e.random=void 0,e}a(e,t);var r=e.prototype;return r.getMapData=function(t){var e=t.dungeon;this.random=new u,this.mapData=this.random.getRandomMap(e.seed,e.tileWidth,e.tileHeight),this.magmaMapData=this.getMagmaMapData(),this.obstacleMapData=this.getObstacleMapData(),this.genBorderMap(),this.genMultiLandMapData()},r.initGameMaps=function(){var t=this;this.initMap(this.map,c.ZERO,this.debug),this.fakeMaps.forEach((function(e,a){t.initMap(e,t.getFakeMapPosition(a))}))},r.getFakeMapPosition=function(t){switch(t){case 0:return new c(-f.instance.mapWidth,f.instance.mapHeight,0);case 1:return new c(0,f.instance.mapHeight,0);case 2:return new c(f.instance.mapWidth,f.instance.mapHeight,0);case 3:return new c(-f.instance.mapWidth,0,0);case 4:return new c(f.instance.mapWidth,0,0);case 5:return new c(-f.instance.mapWidth,-f.instance.mapHeight,0);case 6:return new c(0,-f.instance.mapHeight,0);case 7:return new c(f.instance.mapWidth,-f.instance.mapHeight,0);default:return new c(0,0,0)}},r.getMapdata=function(t){for(var e=[],a=0;a<f.instance.cellHeight;a++){for(var i=[],n=0;n<f.instance.cellWidth;n++)i.push(t[a*f.instance.cellWidth+n]);e.push(i)}return e},r.getTile=function(t,e){var a=this.formartGetTile(t,e),i=a[0],n=a[1];return i<0||i>=f.instance.cellHeight||n<0||n>=f.instance.cellWidth?-1:this.mapData[i][n]},r.formartGetTile=function(t,e){return-1==t?t=f.instance.cellHeight-1:t==f.instance.cellHeight&&(t=0),-1==e?e=f.instance.cellWidth-1:e==f.instance.cellWidth&&(e=0),[t,e]},r.genBorderMap=function(){for(var t=0;t<f.instance.cellHeight;t++)for(var e=0;e<f.instance.cellWidth;e++)0==this.getTile(t,e)&&1==this.getTile(t,e-1)&&1==this.getTile(t,e+1)?this.mapData[t][e]=g.BothBoder:0==this.getTile(t,e)&&1==this.getTile(t,e-1)?this.mapData[t][e]=g.Left:0==this.getTile(t,e)&&1==this.getTile(t,e+1)&&(this.mapData[t][e]=g.Right)},r.getMagmaMapData=function(){for(var t=[],e=0;e<f.instance.cellHeight;e++){for(var a=[],i=0;i<f.instance.cellWidth;i++){var n=0;0==this.getTile(e,i)&&(1==this.getTile(e-1,i)?n=g.Magma:this.random.random().rangeFloat(0,1)<.3&&(n=g.Lava)),a.push(n)}t.push(a)}return t},r.getObstacleMapData=function(){for(var t=[],e=0;e<f.instance.cellHeight;e++)for(var a=0;a<f.instance.cellWidth;a++)1==this.getTile(e,a)&&this.random.random().rangeFloat(0,1)<=.2&&t.push(new c(e-this.random.random().rangeFloat(0,.5),a+this.random.random().rangeFloat(0,.5),this.random.random().rangeInt(0,3)));return t},r.genMultiLandMapData=function(){for(var t=0;t<f.instance.cellHeight;t++)for(var e=0;e<f.instance.cellWidth;e++)if(this.mapData[t][e]==g.Land){var a=this.random.random().rangeFloat(0,1);a<=.65?this.mapData[t][e]=g.Land:a<=.8?this.mapData[t][e]=g.Land2:a<=.95?this.mapData[t][e]=g.Land3:1==this.getTile(t+1,e)&&(this.mapData[t][e]=g.Land4)}},r.initMap=function(t,e,a){void 0===a&&(a=!1);for(var i=0;i<f.instance.cellHeight;i++)for(var n=0;n<f.instance.cellWidth;n++){var r=this.mapData[i][n];0!=r&&(r==g.BothBoder?(this.initMapCell(g.Left,t,i,n,a),this.initMapCell(g.Right,t,i,n,a)):this.initMapCell(r,t,i,n,a));var l=this.magmaMapData[i][n];if(0!=l)if(l==g.Lava){var s=p(this.magmaCell);s.active=!0,t.addCell(s),s.setPosition(this.converTileToPosition(i,n)),s.getComponent(d).startMagma(this.random.random().rangeFloat(2,6))}else this.initMapCell(l,t,i,n,a)}for(var o=this.obstacleMapData.length,c=0;c<o;c++){var h=this.obstacleMapData[c],m=p(this.obstacleCell);m.active=!0,t.addObstacle(m),m.setPosition(this.converTileToPosition(h.x,h.y)),m.getComponent(b).setSprite(this.obstacleSpriteFrames[h.z]),m.getComponent(b).setType(h.z)}t.setPosition(e)},r.initMapCell=function(t,e,a,i,n){var r=p(this.mapCell);r.active=!0,e.addCell(r);var l=r.getComponent(v);l.setPosition(this.converTileToPosition(a,i),a,i,n),l.setSprite(this.tileSpriteFrames[t-1])},r.converTileToPosition=function(t,e){return new c(e*f.instance.cellUnit,(f.instance.cellHeight-1-t)*f.instance.cellUnit,0)},r.converPositionToTile=function(t){var e=t.x%f.instance.mapWidth;e<0&&(e+=f.instance.mapWidth);var a=t.y%f.instance.mapHeight;return a<0&&(a+=f.instance.mapHeight),new h(f.instance.cellHeight-1-Math.floor(a/f.instance.cellUnit),Math.floor(e/f.instance.cellUnit))},e}(m)).prototype,"map",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(P.prototype,"fakeMaps",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(P.prototype,"mapCell",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(P.prototype,"magmaCell",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(P.prototype,"obstacleCell",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(P.prototype,"tileSpriteFrames",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(P.prototype,"obstacleSpriteFrames",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=P))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils.ts",["cc"],(function(n){"use strict";var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"1395cvNA4FPL5f/W7xqBUvt","MaxApiUtils",void 0),n("default",function(){function n(){}return n.registerScreenShot=function(n){window.MaxApi?window.MaxApi.listen("onScreenShot",(function(){n()})):n(null)},n.RegisterNoti=function(n){window.MaxApi?window.MaxApi.observer("DIS_RECEIVE_NOTI",(function(i){console.log("[DIS_RECEIVE_NOTI] "+i),n(i)})):n(null)},n.GetProfile=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getProfile((function(i){n(i)})):n()}))},n.UploadImage=function(n){return new Promise((function(i,o){var t={path:"base64-upload",files:n,options:{loading:!0}};window.MaxApi?window.MaxApi.uploadImage(t,(function(n){n.status;var o=n.response,t=o.url;t&&t.length>0&&t.indexOf("http")>=0?i(t):i(o)})):i(null)}))},n.GetDeviceInfo=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getDeviceInfo((function(i){n(i)})):n(null)}))},n.CheckHighPerformanceDevice=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.isHighPerformanceDevice((function(i){n(i)})):n(!0)}))},n.closeGame=function(){window.MaxApi&&window.MaxApi.dismiss()},n.copyToClipboard=function(n,i){window.MaxApi&&window.MaxApi.copyToClipboard(n,i)},n.openWeb=function(n){window.MaxApi.openWeb({url:n})},n.startFeatureCode=function(n,i,o){window.MaxApi?window.MaxApi.startFeatureCode(n,i,o):o(!0)},n.checkPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.checkPermission(n,(function(n){i(n)})):i("granted")}))},n.requestPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission(n,(function(n){i(n)})):i("granted")}))},n.getContacts=function(){return new Promise((function(n){if(window.MaxApi){window.MaxApi.getContacts({paramsContact:{allowNonMomo:!1,autoFocus:!0,isAllowMerchant:!1,showPopupNonMomo:!1,allowAgency:!1,allowMultipleSelection:!0},title:"MegaLuckyWheel"},(function(i){n(i)}))}else n([])}))},n.getAvatarEndPoint=function(){var n=this;return new Promise((function(i){window.MaxApi?(n.avatarEndpoint.length>0&&i(n.avatarEndpoint),window.MaxApi.getAvatarEndPoint((function(o){n.avatarEndpoint=o,i(o)}))):i("")}))},n.getContact=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.getContact({},(function(i){n(i)})):n([])}))},n.goBack=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.goBack((function(i){n(i)})):n("denied")}))},n.getScreenShot=function(n){window.MaxApi?window.MaxApi.getScreenShot(n):n("")},n.saveImage=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission("storage",(function(o){"granted"===o?window.MaxApi.saveImage(n,(function(n){n?(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh thnh cng"}),i(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh khng thnh cng"}),i(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh khng thnh cng"}),i(!1))})):i(!1)}))},n.shareFacebook=function(n,i){window.MaxApi?window.MaxApi.shareFacebook(n,i):i("")},n.facebookMsg=function(n){var i="fb-messenger://share/?link="+n;window.MaxApi&&window.MaxApi.openURL(i)},n.moreMenu=function(n,i,o,t){return new Promise((function(e){if(window.MaxApi){var a={title:n,message:o,url:t,subject:i};window.MaxApi.share(a,(function(n){e(n)}))}else e(!1)}))},n.copyLink=function(n){window.MaxApi&&window.MaxApi.copyToClipboard(n," sao chp")},n.trackEvent=function(n){window.MaxApi&&window.MaxApi.trackEvent("momo_jump",n)},n.showToast=function(n,i){void 0===i&&(i=3e3),window.MaxApi&&window.MaxApi.showToast({duration:i,title:n})},n.setItem=function(n,i){window.MaxApi&&window.MaxApi.setItem(n,i)},n.getItem=function(n,i){void 0===i&&(i=null),window.MaxApi?window.MaxApi.getItem(n,i):i(null)},n}()).avatarEndpoint="",i._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator},function(e){r=e.cclegacy,i=e.log}],execute:function(){var o;e("MaxApiName",void 0),r._RF.push({},"28774sywudKJaUfJ3kzaJm/","MaxApiUtils",void 0),function(e){e.getProfile="getProfile",e.getDeviceInfo="getDeviceInfo",e.shareFacebook="shareFacebook",e.showToast="showToast",e.sendCloudMessage="sendCloudMessage",e.getCloudMessage="getCloudMessage",e.startTraceScreenLoad="startTraceScreenLoad",e.startTraceScreenInteraction="startTraceScreenInteraction",e.stopTrace="stopTrace"}(o||(o=e("MaxApiName",{})));e("maxApiUtils",new(function(){function e(){this.observer={},i("[MaxApiutils] isBrowser: ",this.isBrowser)}var r=e.prototype;return r.request=function(){var e=n(regeneratorRuntime.mark((function e(t){var n,r,o,s=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=a[o];return i("[MaxApiUtils]","Call function: ",t),e.abrupt("return",new Promise((function(e,n){s.isBrowser&&e&&e(null);var i=window.MaxApi[t];r&&r.length>0?i.apply(void 0,r.concat([function(t){e&&e(t)}])):i((function(t){e&&e(t)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.saveImage=function(e){var t=this;return new Promise((function(n,r){t.isBrowser&&n&&n(null),window.MaxApi.requestPermission("storage",(function(t){"granted"===t?window.MaxApi.saveImage(e,(function(e){e?(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh thnh cng"}),n&&n(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh khng thnh cng"}),n&&n(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lu hnh nh khng thnh cng"}),n&&n(!1))}))}))},r.registerShaking=function(e){if(!this.isBrowser){var t=window.MaxApi.listen({event:"onShaker",updateInterval:100,type:"accelerometer"},(function(t){e(t)}));this.observer.shake=t}},r.unRegisterShaking=function(){var e;this.isBrowser||null==(e=this.observer.shake)||null==e.remove||e.remove()},r.registerMagnetometer=function(e,t){if(!this.isBrowser){var n=window.MaxApi.listen({event:"onShaker",type:"magnetometer",updateInterval:50},(function(t){e(t)}));this.observer.magnetometer=n}},r.unRegisterMagnetometer=function(e){var t;this.isBrowser||null==(t=this.observer.magnetometer)||null==t.remove||t.remove()},r.listen=function(e,t){this.isBrowser||window.MaxApi.listen(e,t)},t(e,[{key:"isBrowser",get:function(){return null==window.ReactNativeWebView}}]),e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./Screen.ts"],(function(t){"use strict";var e,n,i,a,r,o,s,c,l,h,u,p,g,f,y,d,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,c=t.UIOpacity,l=t.view,h=t.Input,u=t.tween,p=t.Vec3,g=t.math,f=t.sp},function(t){y=t.GameDefine},function(t){d=t.GameMgr},function(t){w=t.Screen}],execute:function(){var m,T,P,S,v,E,b,C,A,M,N,L,O,x;r._RF.push({},"dc114wyqqxHy6RHQnT1W8RS","Menu",void 0);var H,F=o.ccclass,G=o.property;!function(t){t[t.Farmer=0]="Farmer",t[t.Hunter=1]="Hunter"}(H||(H={}));t("Menu",(m=F("Menu"),T=G(s),P=G(s),S=G(s),v=G(c),E=G(s),m(((x=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"swipePart",A,a(e)),i(e,"characterList",M,a(e)),e.isCanSlide=!0,i(e,"mainPlayer",N,a(e)),i(e,"whiteScreen",L,a(e)),i(e,"gateButton",O,a(e)),e.gate=null,e.state=H.Farmer,e.tweenArray=[],e.startPosCharacters=[],e.stopTag=69,e.currentAngle=0,e.angleToNext=45,e.ratioX=l.getDesignResolutionSize().x/l.getViewportRect().width,e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this;e.instance=this,this.characterList.forEach((function(e){t.startPosCharacters.push(e.getPosition().clone())}))},r.update=function(t){var e=this;this.tweenArray.forEach((function(t,n){t||e.tweenArray.splice(n,1)}))},r.start=function(){this.gate=this.gateButton.children[0],this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gateButton.on(h.EventType.TOUCH_END,this.onClickButtonGate,this)},r.show=function(){t.prototype.show.call(this,!1),this.init(),this.whiteScreen.opacity=255,0!=this.whiteScreen.opacity&&u(this.whiteScreen).to(y.timeEndLoading,{opacity:0}).start()},r.init=function(){var t=this;this.characterList.forEach((function(e,n){e.setPosition(t.startPosCharacters[n]),e.setScale(p.ONE),t.floatingGhost(e,20)}))},r.floatingGhost=function(t,e){var n=this,i=g.randomRange(.5,2),a=g.random(),r=t.children[0],o=u(r).tag(this.stopTag).by(i,{position:new p(0,e)}).delay(a).by(i,{position:new p(0,-e)}).delay(a).call((function(){o=null})).start(),s=u(r).tag(this.stopTag).to(i,{scale:new p(-1,1,1)}).delay(a).to(i,{scale:p.ONE}).delay(a).call((function(){s=null,n.floatingGhost(t,e)})).start();this.tweenArray.push(o),this.tweenArray.push(s)},r.stopAllTween=function(){this.tweenArray.forEach((function(t){t.stop()}))},r.onTouchEnd=function(t){this.backToBegin()},r.onTouchMove=function(t){if(this.isCanSlide){var e=t.getLocation().x-t.getStartLocation().x,n=t.getDeltaX(),i=Math.sign(e);this.swipePart.angle-=.1*n*this.ratioX,console.log(this.swipePart.angle),this.checkAngleToChangeMode(i)&&(this.isCanSlide=!1,this.goToNext(i))}},r.checkAngleToChangeMode=function(t){return this.swipePart.angle>=this.currentAngle+this.angleToNext&&t<0||this.swipePart.angle<=this.currentAngle-t*this.angleToNext&&t>0},r.backToBegin=function(){var t=this;0!=this.isCanSlide&&u(this.swipePart).to(.5,{angle:this.currentAngle}).call((function(){t.isCanSlide=!0})).start()},r.goToNext=function(t){var e=this;u(this.swipePart).to(.5,{angle:this.currentAngle-180*t}).call((function(){e.isCanSlide=!0,e.currentAngle=e.swipePart.angle,e.nextState()})).start()},r.nextState=function(){this.state==H.Farmer?this.state=H.Hunter:this.state=H.Farmer,this.setStatusMainPlayer(),this.setStatusGroup()},r.setStatusMainPlayer=function(){var t=this.mainPlayer.children[0].getComponent(f.Skeleton);this.state==H.Farmer?t.setAnimation(0,"character_idle",!0):t.setAnimation(0,"enemy_idle",!0),u(this.mainPlayer.getComponent(c)).set({opacity:0}).to(.25,{opacity:255}).start()},r.setStatusGroup=function(){var t=this,e=this.state==H.Farmer?255:0;this.characterList.forEach((function(n){if(n!=t.mainPlayer){var i=n.getComponent(c);u(i).to(.25,{opacity:e}).start()}}))},r.onClickButtonGate=function(){var t=this;if(this.stopAllTween(),this.state==H.Farmer)this.characterList.forEach((function(e){var n=g.random();e.children[0].setScale(p.ONE),u(e).set({scale:p.ONE}).delay(n).to(.5,{scale:p.ZERO,worldPosition:t.gate.getWorldPosition().clone()}).start()})),setTimeout((function(){d.instance.startStandby(!1)}),1500);else if(this.state==H.Hunter){this.mainPlayer.children[0].setScale(new p(-1,1,1)),u(this.mainPlayer).set({scale:p.ONE}).to(.5,{scale:p.ZERO,worldPosition:this.gate.getWorldPosition().clone()}).call((function(){d.instance.startStandby(!0)})).start()}},e}(w)).instance=null,A=e((C=x).prototype,"swipePart",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"characterList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(C.prototype,"mainPlayer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(C.prototype,"whiteScreen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(C.prototype,"gateButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Meteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,l,c,u,h,p,m,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.sp,l=t.Node,c=t.Vec3,u=t.UITransform,h=t.math,p=t.tween,m=t.Component},function(t){f=t.Layer},function(t){d=t.utils}],execute:function(){var v,w,b,g,k,y,S,I,P;s._RF.push({},"8663bmNgIhOA77YDaVcT+p1","Meteor",void 0);var E=a.ccclass,D=a.property;t("Meteor",(v=E("Meteor"),w=D(r.Skeleton),b=D(r.Skeleton),g=D(l),v((S=e((y=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"animation",S,o(e)),n(e,"boom",I,o(e)),n(e,"sockwave",P,o(e)),e.startPos=null,e.endPos=null,e.startScale=null,e.endScale=null,e.isFalling=!1,e.isExplose=!1,e.isClone=!1,e.timeDrop=1.5,e.timeExplose=.4,e.sockwareUITransform=null,e}i(e,t);var s=e.prototype;return s.start=function(){},s.init=function(){this.animation.enabled=!0,this.boom.node.active=!1,this.node.active=!1,this.animation.setAnimation(0,"metror_fall",!0),this.sockwave.active=!1,this.sockwave.scale=c.ZERO,this.sockwareUITransform=this.sockwave.getComponent(u)},s.initInMenu=function(){this.init(),d.changeNodeLayer(this.node,f.UI_2D),this.startScale=c.ZERO,this.endScale=new c(c.ONE).multiplyScalar(h.randomRange(.5,1.5))},s.initInGameplay=function(){this.init(),d.changeNodeLayer(this.node,f.GamePlay),this.startScale=c.ONE,this.endScale=c.ONE},s.setRotation=function(){var t=this.endPos.clone().subtract(this.startPos).normalize(),e=180*c.angle(c.RIGHT,t)/Math.PI;this.node.setRotationFromEuler(0,0,-e)},s.setPositions=function(t,e){this.startPos=t,this.endPos=e},s.drop=function(t){var e=this;void 0===t&&(t=6),this.node.active=!0,p(this.node).set({position:this.startPos,scale:this.startScale}).to(this.timeDrop,{position:this.endPos,scale:this.endScale},{easing:"sineIn",onStart:function(){e.isFalling=!0},onUpdate:function(){e.isFalling=!0},onComplete:function(){e.isFalling=!1}}).call((function(){e.animation.enabled=!1,e.startSockwave(t)})).start(),setTimeout((function(){e.expolu()}),1e3*(this.timeDrop-1))},s.expolu=function(){var t=this;this.isExplose=!0,this.boom.node.active=!0,this.boom.setCompleteListener((function(){t.node.active=!1,t.boom.node.active=!1}))},s.startSockwave=function(t){var e=this,i=128*t,n=new c(i/this.sockwareUITransform.width,i/this.sockwareUITransform.height,1);this.sockwave.active=!0,p(this.sockwave).set({scale:c.ZERO}).to(this.timeExplose/1.5,{scale:n},{easing:"linear"}).call((function(){e.sockwave.active=!1})).start()},e}(m)).prototype,"animation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(y.prototype,"boom",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(y.prototype,"sockwave",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=y))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Meteor.ts","./GameDefine.ts","./GamePlay.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,l,u,f,m,g,p,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.NodePool,l=e.UITransform,u=e.Vec3,f=e.instantiate,m=e.Component},function(e){g=e.Meteor},function(e){p=e.GameDefine},function(e){M=e.GamePlay}],execute:function(){var d,h,y,P,v;i._RF.push({},"7641aW0Bk9Borma8CQikR+D","MeteorManager",void 0);var b=a.ccclass,D=a.property;e("MeteorManager",(d=b("MeteorManager"),h=D(s),d((v=t((P=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"meteorPrefab",v,r(t)),t.meteorPool=new c,t}n(t,e);var i=t.prototype;return i.initMeteor=function(e,t){var n=this.getMeteor();n.name=e.id.toString(),t.addMeteor(n);var o=n.getComponent(g);o.initInGameplay();var r=this.getPosition(e.x,e.y);o.setPositions(r[0],r[1]),o.drop(e.effectRadius)},i.netUpdate=function(e){var t=this,n=M.instance.map;e.dungeon.meteors.forEach((function(e){n.findMeteor(e.id.toString())||(console.log("init meteor "+JSON.stringify(e)),t.initMeteor(e,n),M.instance.fakeMaps.forEach((function(n){t.initMeteor(e,n)})))})),n.getMeteors().forEach((function(t){e.dungeon.meteors.find((function(e){return e.id.toString()==t.name}))||(M.instance.handleDestroyMeteor(t.name),n.removeMeteor(t))}))},i.getPosition=function(e,t){var n=this.node.getComponent(l).contentSize,o=null,r=null;return(o=(r=new u(e*p.instance.cellUnit,t*p.instance.cellUnit)).clone()).y=r.y+n.height,[o,r]},i.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():f(this.meteorPrefab)},t}(m)).prototype,"meteorPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts"],(function(e){"use strict";var n,t,i,o,a,r,s,c,u,l,h,p,b,d,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,c=e.Sprite,u=e.sp,l=e.Label,h=e.UIOpacity,p=e.Input,b=e.tween,d=e.Component},function(e){m=e.TimeMgr}],execute:function(){var g,f,y,v,T,O,w,C,M,B,D,_,x;a._RF.push({},"8728eBItjRHxbYOOFZ2tQdh","MoneyChange",void 0);var E=r.ccclass,F=r.property;e("MoneyChange",(g=E("MoneyChange"),f=F(s),y=F(c),v=F(u.Skeleton),T=F(l),O=F(h),g((M=n((C=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"container",M,o(n)),i(n,"spriteOnMoneyChange",B,o(n)),i(n,"bagOpen",D,o(n)),i(n,"countDown",_,o(n)),i(n,"descriptionBubble",x,o(n)),n.endFrame=0,n.endTime=0,n.maxRatio=.9,n.maxTime=0,n.tweenBubble=null,n}t(n,e);var a=n.prototype;return a.start=function(){this.node.active=!1,this.bagOpen.node.active=!1,this.container.active=!0,this.countDown.node.active=!1,this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_START,this.onShowDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_END,this.onHideDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_CANCEL,this.onHideDescription,this)},a.setEndTime=function(e){this.endFrame!=e&&(this.endFrame=e,this.endTime=m.instance.getFrameTime(e),this.maxTime=this.endTime-m.instance.currentGameTime,this.node.active=!0)},a.update=function(){if(m.instance.currentGameTime>=this.endTime)this.reset(),this.bagOpenEffect();else{var e=this.endTime-m.instance.currentGameTime;Math.round(e/1e3)<30&&(this.countDown.node.active=!0,this.countDown.string=Math.ceil(e/1e3).toString());var n=(this.maxTime-e)/this.maxTime;this.spriteOnMoneyChange.fillRange=this.maxRatio*n}},a.reset=function(){this.node.active=!1,this.spriteOnMoneyChange.fillRange=0,this.endFrame=0,this.bagOpen.node.active=!1,this.container.active=!0},a.bagOpenEffect=function(){var e=this;this.bagOpen.node.active=!0,this.container.active=!1,this.countDown.node.active=!1,this.bagOpen.setAnimation(0,"money_bag_open",!1),this.bagOpen.setCompleteListener((function(){e.bagOpen.node.active=!1,e.container.active=!0}))},a.onShowDescription=function(){this.tweenBubble&&this.tweenBubble.stop(),this.tweenBubble=null,this.descriptionBubble.node.active=!0,this.descriptionBubble.opacity=255},a.onHideDescription=function(){var e=this;this.tweenBubble=null,this.tweenBubble=b(this.descriptionBubble).to(1,{opacity:0}).call((function(){e.tweenBubble=null,e.descriptionBubble.node.active=!1})).start()},n}(d)).prototype,"container",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(C.prototype,"spriteOnMoneyChange",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(C.prototype,"bagOpen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(C.prototype,"countDown",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(C.prototype,"descriptionBubble",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/MyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,c,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.Vec3,r=t.tween,s=t.Component}],execute:function(){var u;n._RF.push({},"d753fKngEdFRoVogvjt/8Gz","MyButton",void 0);var i=o.ccclass;o.property,t("MyButton",i("MyButton")(u=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){var t=this;this.node.on("click",(function(){var e=t.node.getScale();t.node.setScale(new c(.5,.5,.5)),r(t.node).to(.5,{scale:e},{easing:"elasticOut"}).start()}))},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/MySprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts","./Utils.ts"],(function(t){"use strict";var e,i,r,n,s,o,c,a,u,p,h,f,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.asyncToGenerator},function(t){n=t.cclegacy,s=t._decorator,o=t.Sprite,c=t.UITransform,a=t.Size,u=t.Vec3,p=t.Component,h=t.SpriteFrame},function(t){f=t.default},function(t){l=t.utils}],execute:function(){var S;n._RF.push({},"ddc57ibFupLBZ0klhKhOMpt","MySprite",void 0);var d=s.ccclass;s.property,t("MySprite",d("MySprite")(S=function(t){function n(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).sprite=null,e.url="",e.size=void 0,e.isInit=!1,e}e(n,t);var s=n.prototype;return s.init=function(){if(!this.isInit){this.isInit=!0,this.sprite=this.getComponent(o);var t=this.sprite.getComponent(c);this.size=new a(t.width,t.height),this.sprite.sizeMode=o.SizeMode.RAW}},s.onLoad=function(){this.init()},s.setFixedSize=function(t){this.size=t.clone(),this.sprite.sizeMode=o.SizeMode.RAW},s.correctSpriteFrameSize=function(t){this.init(),this.setFixedSize(t),l.CorrectSpriteFrameSize(this.sprite,this.size)},s.Fetch=function(){var t=r(regeneratorRuntime.mark((function t(e){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),!e||this.url==e){t.next=6;break}return t.next=4,f.getRemoteTextureImage(e);case 4:(i=t.sent)&&((r=new h).texture=i,this.setSprite(r));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.FetchAvatar=function(){var t=r(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),!e||this.url==e){t.next=6;break}return t.next=4,f.requestAvatar(e);case 4:(i=t.sent)&&this.setSprite(i);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setSprite=function(t,e){void 0===e&&(e=!1),this.sprite.spriteFrame=t,e?this.node.scale=u.ONE:l.CorrectSpriteFrameSize(this.sprite,this.size)},i(n,[{key:"Sprite",get:function(){return this.sprite}}]),n}(p))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkBrigde.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./NetworkDefine.ts","./TimeMgr.ts"],(function(e){"use strict";var n,r,t,o,i,s,a,c,h,u;return{setters:[function(e){n=e.createClass,r=e.asyncToGenerator},function(e){t=e.cclegacy,o=e._decorator,i=e.math},function(e){s=e.profile},function(e){a=e.NetworkDefine,c=e.WSGameCmd,h=e.WSCmd},function(e){u=e.TimeMgr}],execute:function(){var l;t._RF.push({},"7977cTNaeRKkqxQx8E3V1id","NetworkBrigde",void 0);var d=o.ccclass;o.property,e("NetworkBrigde",d("NetworkBrigde")(l=function(){function e(){this.ws=null,this.payloadCounter=0,this.worker=null,this.servers=[],this.onOpen=null,this.onMessage=null,this.onError=null,this.onClose=null}var t=e.prototype;return t.connect=function(){null==this.ws&&(this.ws=new WebSocket(a.URL_DEV),this.ws.onopen=this.onopen.bind(this),this.ws.onmessage=this.onmessage.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onclose=this.onclose.bind(this))},t.disconnect=function(){this.ws.readyState==WebSocket.OPEN&&(this.ws.close(),this.ws=null)},t.onopen=function(e){this.onOpen&&this.onOpen(),console.log("[NetworkBrigde] ws is connected!")},t.onmessage=function(e){this.binaryHandler(e.data)},t.onerror=function(e){this.onError&&this.onError()},t.onclose=function(e){this.onClose&&(console.log("[NetworkBrigde] ws is closed!"),this.onClose())},t.send=function(e){this.ws.readyState==WebSocket.OPEN&&this.ws.send(e)},t.reconnect=function(){null!=this.ws&&this.ws.close(),this.connect()},t.binaryHandler=function(e){var n=this;e&&e.arrayBuffer().then((function(r){try{n.decodeMsgData(r)}catch(n){console.log("binaryHandler",n,e)}}))},t.decodeMsgData=function(){var e=r(regeneratorRuntime.mark((function e(n){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=phoenix.krun.internal.MessageWrapper.decode(new Uint8Array(n)),e.t0=r.msgClass,e.next=e.t0===h.ResVerify?4:e.t0===h.MsgPing?6:e.t0===h.ResWorker?7:11;break;case 4:return this.worker,e.abrupt("break",11);case 6:return e.abrupt("break",11);case 7:return t=phoenix.krun.internal.ResWorker.decode(r.msg),this.worker=t.worker,console.log("[NetworkBrigde] ResWorker: "+this.worker),e.abrupt("break",11);case 11:this.onMessage&&this.onMessage(r);case 12:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t.sendProto=function(e,n){var r=new phoenix.krun.internal.MessageWrapper;r.msg=n,r.msgClass=e,r.worker=this.worker;var t=phoenix.krun.internal.MessageWrapper.encode(r).finish();this.send(t)},t.sendAction=function(e,n){var r=u.instance.serverTime,t=new phoenix.krun.KrunMsg;t.timestamp=r,t.cmd=e,n&&(t.body=n);var o=phoenix.krun.KrunMsg.encode(t).finish();this.sendProto(c.KrunMsg,o)},t.getRoomName=function(){var e=a.SERVER_NAME;if(this.servers&&this.servers.length>0)e=this.servers[i.randomRangeInt(0,this.servers.length)],console.log(e);else if(!a.IS_DEV){i.randomRangeInt(0,3);e=a.SERVER_NAME}return e},t.authentication=function(e){var n=new phoenix.krun.internal.ReqVerify;n.jwt=e;var r=phoenix.krun.internal.ReqVerify.encode(n).finish();this.sendProto("ReqVerify",r)},t.reqWorker=function(){if(!this.worker){var e=new phoenix.krun.internal.ReqWorker;e.game=this.getRoomName();var n=phoenix.krun.internal.ReqWorker.encode(e).finish();this.sendProto(h.ReqWorker,n)}},t.reqDefines=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES,null)},t.quitGame=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME,null),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME),console.log("[NetworkBridge] quit game")},t.joinGame=function(e){var n=new phoenix.krun.KrunReqPlayerJoin;n.displayName=""==s.UserName?"Player":s.UserName,n.gameId="",n.isHunter=e,this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME,phoenix.krun.KrunReqPlayerJoin.encode(n).finish()),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME)},t.ping=function(){var e=new phoenix.krun.internal.MsgPing;e.id=this.payloadCounter++,e.createAt=Date.now();var n=phoenix.krun.internal.MsgPing.encode(e).finish();this.sendProto(h.MsgPing,n)},n(e,[{key:"isReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN}},{key:"isPingReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN&&""!=this.worker}},{key:"isHttps",get:function(){return-1!=window.location.href.indexOf("https://")}}]),e}())||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkDefine.ts",["cc","./Utils.ts"],(function(e){"use strict";var n,i;return{setters:[function(e){n=e.cclegacy},function(e){i=e.utils}],execute:function(){e({WSCmd:void 0,WSGameCmd:void 0}),n._RF.push({},"2af94HN97RHnL27I4ClZS71","NetworkDefine",void 0);var r,t,s=e("NetworkDefine",(function(){}));s.IS_DEV=!0,s.SERVER_NAME="krun1",s.DEBUG_TOKEN=i.uuid,s.lostConnectionTime=1e4,s.HOST=s.IS_DEV?"https://m.dev.mservice.io":"https://m.mservice.io",s.URL_DEV="wss://realtime.dev.mservice.io/phoenix-krun-connector/connector",s.Avatar="https://s3-ap-southeast-1.amazonaws.com/avatars.mservice.io/{0}.png",s.DEEP_LINK="deeplink-universal/v1/content-dynamic",function(e){e.MsgPing="MsgPing",e.ReqWorker="ReqWorker",e.ResWorker="ResWorker",e.ResVerify="ResVerify",e.ReqVerify="ReqVerify",e.KrunMsg="KrunMsg"}(r||(r=e("WSCmd",{}))),function(e){e.KrunMsg="KrunMsg"}(t||(t=e("WSGameCmd",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GlobalDefine.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,n,r,o,u,s;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy},function(e){r=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.globalDefine},function(e){s=e.NetworkDefine}],execute:function(){n._RF.push({},"b72b0V4dQJJTLMgBo4CZ95K","NetworkMgr",void 0);e("networkMgr",new(function(){function e(){}var n=e.prototype;return n.getRequest=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isBrowser){e.next=4;break}return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",s.HOST+t,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Authorization","Bearer "+u.profile.userToken),r.responseType="json",r.timeout=3e3,r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<400?e&&e(r.response):e&&e(null))},r.send()})));case 4:return e.abrupt("return",new Promise((function(e,n){r.request(o.getCloudMessage,{path:t}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.postRequest=function(){var e=t(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isBrowser){e.next=4;break}return e.abrupt("return",new Promise((function(e,r){var o=new XMLHttpRequest;o.open("POST",s.HOST+t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+u.profile.userToken),o.responseType="json",o.timeout=3e3,o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<400?e&&e(o.response):e&&e(null))},o.send(JSON.stringify(n))})));case 4:return e.abrupt("return",new Promise((function(e,u){r.request(o.sendCloudMessage,{path:t,body:n}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestHeader=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("HEAD",t,!0),r.onload=function(){var t=r.getResponseHeader("Content-Type");e(t)},r.onerror=function(t){e("image/png")},r.timeout=3e3,r.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObstacleCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,l,n,s,c,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Sprite,o=e.Component}],execute:function(){var a,p,u,f,y;n._RF.push({},"ef10aNmvmpCdqtZlVTWTkxm","ObstacleCell",void 0);var b=s.ccclass,h=s.property;e("ObstacleCell",(a=b("ObstacleCell"),p=h(c),a((y=t((f=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"sprite",y,l(t)),t.obstacleType=null,t}r(t,e);var n=t.prototype;return n.setSprite=function(e){this.sprite.spriteFrame=e},n.setType=function(e){this.obstacleType=e},t}(o)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/PerformanceTracking.ts",["cc","./GlobalDefine.ts","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var r,o,n,t;return{setters:[function(e){r=e.cclegacy},function(e){o=e.globalDefine},function(e){n=e.NetworkDefine},function(e){t=e.networkMgr}],execute:function(){r._RF.push({},"16ccfiMVyROF6MR8XwCKutx","PerformanceTracking",void 0);e("performanceTracking",new(function(){function e(){this.APPVARZ_FPS="/varz/v2/fps",this.APPVARZ_API_ERROR="/varz/v2/error"}var r=e.prototype;return r.appVazFps=function(e,r){var a=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"fps",serviceName:o.feature.featureID,value:r}];return console.log("[PerformanceTracking] FPS: ",a),t.postRequest(n.HOST+this.APPVARZ_FPS,a)},r.appVazError=function(e,r,a){var s=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"error",serviceName:o.feature.featureID,errorMessage:a,errorCode:r}];return console.log("[PerformanceTracking] Error: ",s),t.postRequest(n.HOST+this.APPVARZ_API_ERROR,s)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./GameEvent.ts","./Utils.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,l,h,c,u,p,m,d,y,f,v,M,g,P,w,b,H,x,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,l=t.Node,h=t.sp,c=t.Label,u=t.UITransform,p=t.Vec2,m=t.Sprite,d=t.tween,y=t.Vec3,f=t.Component},function(t){v=t.AudioMgr},function(t){M=t.default},function(t){g=t.utils},function(t){P=t.GamePlayEventName,w=t.SoundName},function(t){b=t.GameDefine},function(t){H=t.GameMgr},function(t){x=t.GamePlay},function(t){A=t.Input}],execute:function(){var F,C,z,B,D,I,k,_,W,L,U,S,T,G,O,R,E,N,J;s._RF.push({},"7e9b0vEoltFEYJDBXpgwgr6","Player",void 0);var q=r.ccclass,V=r.property;t("Player",(F=q("Player"),C=V(l),z=V(h.Skeleton),B=V(l),D=V(l),I=V(h.Skeleton),k=V(c),_=V(l),W=V(u),F((S=e((U=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"model",S,a(e)),n(e,"animation",T,a(e)),n(e,"characterFreeze",G,a(e)),n(e,"enemyFreeze",O,a(e)),n(e,"earnMoney",R,a(e)),n(e,"nameLabel",E,a(e)),n(e,"navigator",N,a(e)),n(e,"hpUITrans",J,a(e)),e.isHunter=!1,e.vec2Up=new p(0,1),e.timeChangeDirectionModel=.2,e.tweenChangeDirectionModel1=null,e.tweenChangeDirectionModel2=null,e._isMainPlayer=!1,e.direction=p.ZERO,e.isFreeze=!1,e.isAttacking=!1,e.endAttackFrame=0,e.hpPoint=0,e.hpPointTemp=0,e.hpBarOriginalWidth=116,e.hpBarMinWidth=5,e.tweenHpBar=null,e.isInit=!1,e.isJoinGame=!1,e.time=0,e.tweenMove=null,e.tempPosition=void 0,e}i(e,t);var s=e.prototype;return s.setHunter=function(t){this.isHunter=t,this.setHpColor()},s.setHpColor=function(){var t=this.hpUITrans.node.getComponent(m);this.isMainPlayer?t.color=b.BLU_COLOR:this.isHunter?t.color=b.RED_COLOR:this.isHunter==H.instance.IsHunter()?t.color=b.BLU_COLOR:t.color=b.RED_COLOR},s.onLoad=function(){this.tempPosition=this.node.position.clone(),this.isInit=!0},s.update=function(t){if(this.time+=t,this._isMainPlayer&&this.time>=b.instance.timePerFrameFakeForInput&&A.IsTouchMove){var e=g.getAngleFrom2Vec(this.vec2Up,A.Instance.delta),i=b.instance.convertRadToMoveCmd(e);H.instance.playerMove(i),this.time=0}},s.updateMoveAnimation=function(){this.changeDriectionModel(),this.playRunAnimation()},s.mainPlayerMove=function(t){this.checkBoundMap(t)||this.setPositionMainPlayer(t)},s.changeDriectionModel=function(){var t=this,e=this.direction.x;if(e>0){if(1==this.model.scale.x)return;if(this.tweenChangeDirectionModel1)return;this.tweenChangeDirectionModel1=d(this.model).to(this.timeChangeDirectionModel,{scale:new y(1,1,0)}).call((function(){t.tweenChangeDirectionModel1=null})).start()}else if(e<0){if(-1==this.model.scale.x)return;if(this.tweenChangeDirectionModel2)return;this.tweenChangeDirectionModel2=d(this.model).to(this.timeChangeDirectionModel,{scale:new y(-1,1,0)}).call((function(){t.tweenChangeDirectionModel2=null})).start()}},s.getAnimationName=function(t){var e=this.isHunter?"enemy_":"character_",i="";return this.direction.y>0&&(i="_up"),e+t+i},s.playIdleAnimaton=function(){this.playAnimation("idle")},s.playRunAnimation=function(){this.playAnimation("run")},s.playAnimation=function(t,e){void 0===e&&(e=!0),this.isAttacking||(t=this.getAnimationName(t),this.animation.animation!=t&&this.animation.setAnimation(0,t,e))},s.checkBoundMap=function(t){var e=t.clone(),i=this.node.position.clone();return e.y<b.instance.boundHeight.x?(e=new y(e.x,e.y+b.instance.mapHeight),i=new y(i.x,i.y+b.instance.mapHeight)):e.y>b.instance.boundHeight.y&&(e=new y(e.x,e.y-b.instance.mapHeight),i=new y(i.x,i.y-b.instance.mapHeight)),e.x<b.instance.boundWidth.x?(e=new y(e.x+b.instance.mapWidth,e.y),i=new y(i.x+b.instance.mapWidth,i.y)):e.x>b.instance.boundWidth.y&&(e=new y(e.x-b.instance.mapWidth,e.y),i=new y(i.x-b.instance.mapWidth,i.y)),!e.equals(t)&&(this.teleport(e,i),!0)},s.teleport=function(t,e){this.tempPosition=t;var i=this.node.position.clone();this.node.setPosition(e),this.isMainPlayer&&M.emit(P.UpdateCamera,i),this.setPositionMainPlayer(t)},s.setName=function(t){this.nameLabel.string=g.trimName(t,2)},s.setPositionFromServer=function(t,e){var i=this;if(this.isInit){var n=new y(t*b.instance.cellUnit,e*b.instance.cellUnit,0);if(0==this.isJoinGame)return this.isJoinGame=!0,this.node.setPosition(n),void(this.tempPosition=n.clone());if(this.node.position.equals(n))this.tempPosition=n;else if(!this.tempPosition.equals(n)){var a=n.x-this.tempPosition.x,o=n.y-this.tempPosition.y;if(Math.abs(a)>500||Math.abs(o)>500){var s=this.node.position.clone(),r=this.tempPosition.clone();Math.abs(a)>500&&(r.x<n.x?s.x+=b.instance.mapWidth:r.x>n.x&&(s.x-=b.instance.mapWidth)),Math.abs(o)>500&&(r.y<n.y?s.y+=b.instance.mapHeight:r.y>n.y&&(s.y-=b.instance.mapHeight));var l=n.clone().subtract(s);return this.direction=new p(l.x,l.y),this.updateMoveAnimation(),void this.teleport(n,s)}this.tempPosition=n.clone();var h=n.clone().subtract(this.node.position);this.direction=new p(h.x,h.y),this.updateMoveAnimation(),this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tweenMove=d(this.node).to(b.instance.timePerFrameServerSecondFake,{position:n}).call((function(){i.tweenMove=null,i.playIdleAnimaton()})).start()}}},s.setPositionMainPlayer=function(t){var e=this;this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tweenMove=d(this.node).to(b.instance.timePerFrameServerSecondFake,{position:t}).call((function(){e.tweenMove=null})).start()},s.setFrezze=function(t){this.isFreeze!=t&&this.isInit&&(this.isFreeze=t,t?(this.animation.enabled=!1,this.isHunter?this.enemyFreeze.active=!0:this.characterFreeze.active=!0):(this.animation.enabled=!0,this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.playIdleAnimaton()))},s.setHpBarWidth=function(t){var e;t<this.hpBarMinWidth&&0!=t&&(t=this.hpBarMinWidth),null==(e=this.hpUITrans)||e.setContentSize(t,this.hpUITrans.height)},s.setHp=function(t,e){var i=this;if(void 0===e&&(e=!1),this.hpPoint!=t&&this.hpPointTemp!=t&&this.isInit)if(e){this.hpPointTemp=t,this.hpPoint=t;var n=this.hpBarOriginalWidth*t/b.instance.getMaxHpPoint(this.isHunter);this.setHpBarWidth(n)}else this.isMainPlayer&&(this.hpPointTemp>t?v.instance.PlaySfx(w.Burning):v.instance.PlaySfx(w.CollectGold)),this.hpPointTemp=t,this.tweenHpBar&&(this.tweenHpBar.stop(),this.tweenHpBar=null),this.tweenHpBar=d({hp:this.hpPoint}).to(.1,{hp:t},{onUpdate:function(t,e){var n=i.hpBarOriginalWidth*t.hp/b.instance.getMaxHpPoint(i.isHunter);i.setHpBarWidth(n),t.hp<i.hpPoint&&i.isMainPlayer&&M.emit(P.LostHp)}}).call((function(){i.hpPoint=t,i.tweenHpBar=null})).start()},s.getHpPoint=function(){return this.hpPoint},s.earnMoneyEffect=function(){var t=this;this.earnMoney.node.active=!0,this.earnMoney.setAnimation(0,"character_run_earn_money",!1),this.earnMoney.setCompleteListener((function(){t.earnMoney.node.active=!1}))},s.playEnemyAttack=function(){var t=this;this.playAnimation("atk",!1),this.isAttacking=!0,this.animation.setCompleteListener((function(){t.isAttacking=!1}))},s.setAttack=function(t){this.endAttackFrame!=t&&this.isInit&&(this.endAttackFrame=t,this.playEnemyAttack(),this.isMainPlayer&&(x.instance.player.playEnemyAttack(),v.instance.PlaySfx(w.Bite)))},o(e,[{key:"isMainPlayer",get:function(){return this._isMainPlayer},set:function(t){this.navigator.active=t,this._isMainPlayer=t}}]),e}(f)).prototype,"model",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(U.prototype,"animation",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(U.prototype,"characterFreeze",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(U.prototype,"enemyFreeze",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(U.prototype,"earnMoney",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(U.prototype,"nameLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(U.prototype,"navigator",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(U.prototype,"hpUITrans",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=U))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,a,r,s,c,o,l,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Label,o=t.Sprite,l=t.Component},function(t){u=t.TimeMgr},function(t){m=t.utils}],execute:function(){var p,h,T,f,d,g,y;r._RF.push({},"7c578+IJnBFuayyZWz6dxep","PlayerAttack",void 0);var k=s.ccclass,A=s.property;t("PlayerAttack",(p=k("PlayerAttack"),h=A(c),T=A(o),p((g=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"countDown",g,a(e)),n(e,"spriteOnAttack",y,a(e)),e.endTime=0,e.isStopAtack=!1,e.maxRatio=.8,e.maxTime=0,e}i(e,t);var r=e.prototype;return r.start=function(){this.node.active=!1},r.stopAttack=function(t){this.isStopAtack||(this.isStopAtack=!0,this.node.active=!0,this.endTime=u.instance.getFrameTime(t),this.maxTime=this.endTime-u.instance.currentGameTime,console.log("currentTime: "+m.getTime(new Date(u.instance.currentGameTime))+" endTime: "+m.getTime(new Date(this.endTime))))},r.update=function(){if(this.isStopAtack)if(u.instance.currentGameTime>=this.endTime)this.reset();else{var t=this.endTime-u.instance.currentGameTime;this.countDown.string=Math.ceil(t/1e3).toString();var e=(this.maxTime-t)/this.maxTime;this.spriteOnAttack.fillRange=this.maxRatio*e}},r.reset=function(){this.isStopAtack=!1,this.node.active=!1,this.countDown.string="0",this.spriteOnAttack.fillRange=0},e}(l)).prototype,"countDown",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(d.prototype,"spriteOnAttack",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./AudioMgr.ts","./GameEvent.ts","./GlobalDefine.ts","./TimeMgr.ts","./Utils.ts","./Define.ts","./GameMgr.ts"],(function(e){"use strict";var t,i,n,s,a,r,o,c,u,l,h,f,m,p,g,d,y,D,S,v,E,k,A,T,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Label,c=e.Node,u=e.UITransform,l=e.Mask,h=e.input,f=e.Input,m=e.KeyCode,p=e.tween,g=e.Size,d=e.Component},function(e){y=e.maxApiUtils},function(e){D=e.AudioMgr},function(e){S=e.default},function(e){v=e.globalDefine},function(e){E=e.TimeMgr},function(e){k=e.utils},function(e){A=e.EventName,T=e.SoundName},function(e){z=e.GameMgr}],execute:function(){var I,b,P,w,N,F,M,K,L;a._RF.push({},"0082dpFjKVCAqeEH9MAKrTP","PlayerDead",void 0);var O,U=r.ccclass,V=r.property;!function(e){e[e.NONE=0]="NONE",e[e.DEAD=1]="DEAD",e[e.ALIVE=2]="ALIVE"}(O||(O={}));e("PlayerDead",(I=U("PlayerDead"),b=V(o),P=V(c),w=V(c),I((M=t((F=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"timeout",M,s(t)),n(t,"farmerFreeze",K,s(t)),n(t,"hunterFreeze",L,s(t)),t.maskTransform=null,t.mask=null,t.state=O.NONE,t.endTime=0,t.isInit=!1,t}i(t,e);var a=t.prototype;return a.init=function(){var e=this;this.isInit||(this.maskTransform=this.node.getComponent(u),this.mask=this.node.getComponent(l),h.on(f.EventType.KEY_DOWN,this.onKeyDown,this),S.on(A.onPlayerWakeUp,(function(){e.setState(O.ALIVE)}),this),this.isInit=!0)},a.onDead=function(e){this.state==O.NONE&&(D.instance.PlaySfx(T.Freeze),this.init(),this.node.active=!0,z.instance.IsHunter()?this.hunterFreeze.active=!0:this.farmerFreeze.active=!0,this.endTime=E.instance.getFrameTime(e),console.log("currentTime: "+k.getTime(new Date(E.instance.currentGameTime))+" endTime: "+k.getTime(new Date(this.endTime))),this.setState(O.DEAD))},a.onKeyDown=function(e){switch(e.keyCode){case m.KEY_J:this.setState(O.DEAD);break;case m.KEY_K:this.Shaking()}},a.setStatusPlayer=function(e){var t=this;this.isInit&&(!e&&z.instance.isPlaying&&D.instance.PlaySfx(T.Unfreeze),this.mask.inverted=!e,p(this.maskTransform).set({contentSize:new g(0,0)}).to(.3,{contentSize:new g(2500,2500)}).call((function(){t.node.active=e,e||t.setState(O.NONE)})).start())},a.OnReceiveShakeInfo=function(e){var t=e.x,i=e.y,n=e.z,s=Math.sqrt(t*t+i*i+n*n);(v.isIOS?s>=2:s>=20)&&1==this.node.active&&this.Shaking()},a.setState=function(e){if(this.state!=e)switch(this.state=e,this.state){case O.DEAD:console.log("DEAD"),this.setStatusPlayer(!0),y.registerShaking(this.OnReceiveShakeInfo.bind(this));break;case O.ALIVE:console.log("ALIVE"),this.setStatusPlayer(!1),y.unRegisterShaking()}},a.update=function(e){switch(this.state){case O.DEAD:var t=(this.endTime-E.instance.currentGameTime)/1e3;if((t=Math.ceil(t))<=0)return void this.setState(O.ALIVE);this.timeout.string=t.toString()+"s"}},a.Shaking=function(){z.instance.playerWakeUp()},a.reset=function(){this.setStatusPlayer(!1),this.timeout.string="0s",this.farmerFreeze.active=!1,this.hunterFreeze.active=!1},t}(d)).prototype,"timeout",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"farmerFreeze",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"hunterFreeze",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=F))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./GameDefine.ts","./GamePlay.ts","./Player.ts"],(function(e){"use strict";var n,t,a,i,r,l,o,s,c,y,u,p,P,f,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Prefab,s=e.NodePool,c=e.Vec3,y=e.instantiate,u=e.Component},function(e){p=e.profile},function(e){P=e.GameDefine},function(e){f=e.GamePlay},function(e){d=e.Player}],execute:function(){var m,g,b,h,v;r._RF.push({},"05c97T+GqtDTo8sqfbQVP7P","PlayerManager",void 0);var D=l.ccclass,G=l.property;e("PlayerManager",(m=D("PlayerManager"),g=G(o),m((v=n((h=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return n=e.call.apply(e,[this].concat(r))||this,a(n,"playerPrefab",v,i(n)),n.playerPool=new s,n}t(n,e);var r=n.prototype;return r.initPlayer=function(e,n){var t=this.getPlayer();n.addPlayer(t),t.setPosition(new c(e.x*P.instance.cellUnit,e.y*P.instance.cellUnit)),t.name=e.uid;var a=t.getComponent(d);a.isJoinGame=!0,e.uid==p.Uid?(f.instance.player=a,a.isMainPlayer=!0,t.setSiblingIndex(-1)):t.setSiblingIndex(0),a.setHunter(e.isHunter),a.setName(e.displayName),a.playIdleAnimaton()},r.initPlayerJoin=function(e,n){var t=this.getPlayer();n.addPlayer(t),t.setPosition(new c(1e4,1e4)),t.name=e.uid,t.active=!0;var a=t.getComponent(d);a.setName(e.displayName),a.setHunter(e.isHunter),a.playIdleAnimaton()},r.getPlayer=function(){return this.playerPool.size()>0?this.playerPool.get():y(this.playerPrefab)},n}(u)).prototype,"playerPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,s,c,l,a,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Button,l=t.Node,a=t.Vec3,u=t.tween,p=t.Component}],execute:function(){var h,f,d,v,b,y,C;r._RF.push({},"8f361kJtmhHtZkJqTzh3frO","Popup",void 0);var m=s.ccclass,g=s.property;t("Popup",(h=m("Popup"),f=g(c),d=g(l),h((y=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"btnClose",y,o(e)),i(e,"container",C,o(e)),e.onClose=null,e}n(e,t);var r=e.prototype;return r.start=function(){this.btnClose.node.on("click",this.OnCloseClick.bind(this))},r.OnCloseClick=function(){var t;null==(t=this.onClose)||t.call(this),this.hide()},r.show=function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,this.container.setScale(a.ZERO),u(this.container).to(.5,{scale:new a(1,1,1)},{easing:"bounceInOut"}).start(),t&&setTimeout((function(){e.hide()}),3e3)},r.hide=function(t){void 0===t&&(t=!0),this.node.active=!1,t&&(this.node.removeFromParent(),this.node.destroy())},e}(p)).prototype,"btnClose",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(b.prototype,"container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Popup.ts"],(function(e){"use strict";var n,o,t,r,i,a,c,s,u,p,f,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Prefab,s=e.instantiate,u=e.resources,p=e.Component},function(e){f=e.PopupName},function(e){l=e.Popup}],execute:function(){var h,d,g,P,b,v;i._RF.push({},"8203bcYBqBDwZg65M1oBkCP","PopupMgr",void 0);var m=a.ccclass,y=a.property;e("PopupMgr",(h=m("PopupMgr"),d=y(c),h(((v=function(e){function n(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,t(n,"prefabs",b,r(n)),n}o(n,e);var i=n.prototype;return i.onLoad=function(){n.instance=this},i.show=function(e,n){if(void 0===n&&(n=null),!this.node.getChildByName(e)){var o=this.getPrefab(e);if(o){var t=s(o).getComponent(l);return n&&(t.onClose=n),t.node.setParent(this.node),t.node.name=e,t.show(),t}}},i.hide=function(e){this.node.children.forEach((function(n){n.name==e&&n.getComponent(l).hide()}))},i.hideAll=function(){this.node.children.forEach((function(e){e.active&&e.getComponent(l).hide()}))},i.getPrefab=function(e){return this.prefabs.find((function(n){return n.data.name==e}))},i.load=function(){var e=this;Object.keys(f).forEach((function(n){e.getPrefab(n)||u.load("prefabs/popups/"+n,(function(o,t){t?(e.prefabs.push(t),console.log("Popup loaded: "+n)):console.error("Popup loade fail: "+n)}))}))},n}(p)).instance=null,b=n((P=v).prototype,"prefabs",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=P))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/Profile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,n,i,r,s,o,u;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator},function(e){i=e.cclegacy,r=e.log},function(e){s=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.NetworkDefine}],execute:function(){i._RF.push({},"a294f7m3ZhJL5sqSxj8VgN4","Profile",void 0);e("Profile",function(){function e(){this.devToken=u.DEBUG_TOKEN,this.userId=void 0,this.userToken=void 0,this.name=void 0,this.isOk=!1}return e.prototype.init=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n,i,u,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.request(o.getProfile);case 2:t=e.sent,i=(n=t||{}).userId,u=n.token,a=n.name,this.userId=i||this.devToken,this.userToken=u||this.devToken,this.name=a||"Dev Player",this.isOk=!0,r("[Profile] init: ",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t(e,[{key:"UserName",get:function(){return this.name}},{key:"Uid",get:function(){return this.userId},set:function(e){this.userId=e}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"316b6Tkd2lDBLR3fHnQPy6y","Random",void 0);n("Random",function(){function n(){this.seed=123456789,this.x=123456789,this.y=362436069,this.z=521288629,this.max_int=2147483647,this.int_to_float=1/2147483647}var t=n.prototype;return t.random=function(){var n=this,t={nextFloat:null,nextInt:null,rangeFloat:null,rangeInt:null},r=function(){n.x=n.x^n.x<<16,n.x=n.x^n.x>>5,n.x=n.x^n.x<<1;var t=n.x;return n.x=n.y,n.y=n.z,n.z=t^n.x^n.y,n.z};return t.nextFloat=function(){var t=(r()&n.max_int)*n.int_to_float;return t>0?t:-t},t.nextInt=function(){var n=r();return n>0?n:-n},t.rangeFloat=function(n,r){var e=r-n;return n+t.nextFloat()*e},t.rangeInt=function(n,r){var e=r-n;return n+t.nextInt()%e},t},t.getRandomMap=function(n,t,r){this.seed=n,this.x=this.seed;for(var e=this.random(),o=t*r,u=Math.round(.25*o),a=[],i=0;i<r;i++){for(var x=[],s=0;s<t;s++)x.push(1);a.push(x)}for(var f=function(n,t){return{x:n-1,y:t}},c=function(n,t){return{x:n+1,y:t}},h=function(n,t){return{x:n,y:t+1}},v=function(n,t){return{x:n,y:t-1}};u>0;)for(var l=[{x:e.nextInt()%t,y:e.nextInt()%r}];l.length>0&&u>0;){var y=l.shift(),d=y.x%t;d<0&&(d+=t);var p=y.y%r;if(p<0&&(p+=r),1==a[p][d]&&(a[p][d]=0,u-=1),e.nextInt()<536870912){var I=f(d,p);l.push(I)}if(e.nextInt()<536870912){var g=v(d,p);l.push(g)}if(e.nextInt()<536870912){var m=c(d,p);l.push(m)}if(e.nextInt()<536870912){var _=h(d,p);l.push(_)}}for(var F=0;F<r;F++){for(var R="|",z=0;z<t;z++)R+=a[F][z];R+="|",console.log(R)}return a},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RemoteImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts"],(function(e){"use strict";var t,o,r,i,n,a,c,m,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Enum,m=e.Sprite,p=e.log,l=e.Component},function(e){u=e.default}],execute:function(){var g,s,b,d,h,f,v,_,w,y,R,I,z,k;e("RemoteDefine",void 0),n._RF.push({},"cae799u15NAhb4aNJ7KkvYX","RemoteImage",void 0);var L,N,S=a.ccclass,B=a.property,D=a.executeInEditMode;!function(e){e.background="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/background.png",e.wheel_bottom="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_bottom_2.png",e.header_logo="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/header_logo_2.png",e.wheel="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel.png",e.wheel_border="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_border_2.png"}(L||(L=e("RemoteDefine",{}))),function(e){e[e.background=0]="background",e[e.wheel_bottom=1]="wheel_bottom",e[e.header_logo=2]="header_logo",e[e.wheel=3]="wheel",e[e.wheel_border=4]="wheel_border"}(N||(N={}));e("RemoteImage",(g=S("RemoteImage"),s=D(!0),b=B({type:c(N)}),d=B({group:{name:"9-Slicing"},type:Number}),h=B({group:{name:"9-Slicing"},type:Number}),f=B({group:{name:"9-Slicing"},type:Number}),v=B({group:{name:"9-Slicing"},type:Number}),g(_=s((y=t((w=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"image",y,i(t)),r(t,"borderTop",R,i(t)),r(t,"borderBottom",I,i(t)),r(t,"borderLeft",z,i(t)),r(t,"borderRight",k,i(t)),t}return o(t,e),t.prototype.start=function(){var e=this,t=this.getComponent(m),o=L[N[this.image]];u.request(o).then((function(o){o.insetTop=e.borderTop,o.insetBottom=e.borderBottom,o.insetLeft=e.borderLeft,o.insetRight=e.borderRight,t.spriteFrame=o})),p("[RemoteImage] "+this.node.name+" load "+o)},t}(l)).prototype,"image",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(w.prototype,"borderTop",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(w.prototype,"borderBottom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(w.prototype,"borderLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(w.prototype,"borderRight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=w))||_)||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./Screen.ts","./ScreenMgr.ts"],(function(e){"use strict";var n,t,o,r,i,c,a,l,s,u,f,y,p,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,a=e.Label,l=e.Color,s=e.Vec3,u=e.tween},function(e){f=e.ScreenName},function(e){y=e.GameMgr},function(e){p=e.Screen},function(e){h=e.ScreenMgr}],execute:function(){var m,M,b,d,g;i._RF.push({},"ecf9eYH8PJGXLvYIxUgZeYy","Result",void 0);var w=c.ccclass,L=c.property;e("Result",(m=w("Result"),M=L(a),m((g=n((d=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return n=e.call.apply(e,[this].concat(i))||this,o(n,"moneyLabel",g,r(n)),n.tweenMoneyEffect=null,n}t(n,e);var i=n.prototype;return i.start=function(){this.tweenMoney(y.instance.endInfo.money)},i.tweenMoney=function(e){var n=this;this.moneyLabel.color=l.RED,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new s(1.1,1.1)),this.tweenMoneyEffect=u({money:parseInt(this.moneyLabel.string)}).delay(.5).to(.3,{money:e},{onUpdate:function(e,t){var o=Math.round(e.money);parseInt(n.moneyLabel.string)!=o&&(n.moneyLabel.string=o.toString())}}).delay(.1).call((function(){n.tweenMoneyEffect=null,n.moneyLabel.color=l.WHITE,n.moneyLabel.node.parent.setScale(s.ONE),n.node.on("click",n.onClick,n)})).start()},i.onClick=function(){this.hide(),h.instance.show(f.Menu)},n}(p)).prototype,"moneyLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Screen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,i,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.UIOpacity,r=e.tween,c=e.Component}],execute:function(){var s;n._RF.push({},"ef121KIw5RCYp5xIXtW1PZ6","Screen",void 0);var a=o.ccclass;o.property,e("Screen",a("Screen")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).tweenTime=.3,t}t(n,e);var o=n.prototype;return o.show=function(e){void 0===e&&(e=!0),this.node.active=!0,this.node.setSiblingIndex(-1);var t=this.node.getComponent(i);t||(t=this.node.addComponent(i)),e&&r(t).set({opacity:0}).to(this.tweenTime,{opacity:255},{easing:"fade"}).start()},o.hide=function(){this.node.active=!1},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Screen.ts"],(function(n){"use strict";var e,t,r,i,o,c,s,a,u,f,l,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){o=n.cclegacy,c=n._decorator,s=n.Node,a=n.resources,u=n.instantiate,f=n.Component},function(n){l=n.ScreenName},function(n){h=n.Screen}],execute:function(){var p,d,v,g,m,S,b,y;o._RF.push({},"5bd31koSOhMa6X+466ujhHt","ScreenMgr",void 0);var C=c.ccclass,w=c.property;n("ScreenMgr",(p=C("ScreenMgr"),d=w(s),v=w(s),p(((y=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o))||this,r(e,"Container",S,i(e)),r(e,"scenes",b,i(e)),e}t(e,n);var o=e.prototype;return o.onLoad=function(){e.instance=this},o.start=function(){},o.isShow=function(n){var e=this.scenes.find((function(e){return e.name==n}));return e&&e.active},o.isLoaded=function(n){return this.scenes.find((function(e){return e.name==n}))},o.show=function(n){var e=this.scenes.find((function(e){return e.name==n}));return e&&!e.active&&e.getComponent(h).show(),e},o.hide=function(n){var e=this.scenes.find((function(e){return e.name==n}));e&&e.getComponent(h).hide()},o.hideAll=function(){this.scenes.forEach((function(n){n.active&&n.getComponent(h).hide()}))},o.isContain=function(n){var e=!1;return this.scenes.forEach((function(t){t.name!=n||(e=!0)})),e},o.load=function(){var n=this;Object.keys(l).forEach((function(e){n.isContain(e)||a.load("prefabs/screens/"+e,(function(t,r){if(r){var i=u(r);i.active=!1,i.name=e,i.setParent(n.Container),n.scenes.push(i),console.log("Screen loaded: "+e)}else console.error("Screen prefab notfound: "+e)}))}))},e}(f)).instance=null,S=e((m=y).prototype,"Container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(m.prototype,"scenes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,r,a,c,n,y,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,n=t.UIOpacity,y=t.tween,p=t.Component}],execute:function(){var s,l,u,f,h;a._RF.push({},"22685h12JdCy7h1bNVoLCHM","ShadowEffect",void 0);var b=c.ccclass,d=c.property;t("ShadowEffect",(s=b("ShadowEffect"),l=d(n),s((h=e((f=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"opacity",h,r(e)),e}return o(e,t),e.prototype.start=function(){y(this.opacity).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).delay(.4).by(.2,{opacity:30}).delay(.7).union().repeatForever().start()},e}(p)).prototype,"opacity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnMeteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Meteor.ts"],(function(e){"use strict";var t,o,n,r,i,a,s,c,l,p,u,m,h,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.Node,l=e.NodePool,p=e.math,u=e.instantiate,m=e.UITransform,h=e.Vec3,f=e.Component},function(e){g=e.Meteor}],execute:function(){var w,M,d,P,b,v,y;i._RF.push({},"5b2b8SohodBPbkzpittSyYk","SpawnMeteor",void 0);var C=a.ccclass,S=a.property;e("SpawnMeteor",(w=C("SpawnMeteor"),M=S(s),d=S(c),w((v=t((b=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"meteorPrefab",v,r(t)),n(t,"meteorContainer",y,r(t)),t.maxTime=3,t.spawnMeteorTime=0,t.meteorPool=new l,t}o(t,e);var i=t.prototype;return i.update=function(e){var t=this;this.spawnMeteorTime>0?this.spawnMeteorTime-=e:this.spawnMeteorTime<=0&&(this.spawnMeteorTime=p.randomRange(1,this.maxTime),this.spawnMeteor()),this.meteorContainer.children.forEach((function(e){var o=e.getComponent(g);o.isExplose&&(o.isExplose=!1,t.meteorPool.put(e))}))},i.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():u(this.meteorPrefab)},i.spawnMeteor=function(){var e=this.getMeteor();e.setParent(this.meteorContainer);var t=e.getComponent(g);t.initInMenu();var o=this.getPosition();t.setPositions(o[0],o[1]),t.drop()},i.getPosition=function(){var e=this.node.getComponent(m).contentSize,t=p.randomRange(-e.width/2,0),o=p.randomRange(0,e.height/2);return[new h(t,o),new h(-t,-o)]},i.cloneAllMeteor=function(e){this.node.getComponent(m).contentSize},i.clear=function(){this.meteorPool.clear()},t}(f)).prototype,"meteorPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(b.prototype,"meteorContainer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=b))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/SpineRemote.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,o,s,l,u,c,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,l=e._decorator,u=e.sp,c=e.assetManager,p=e.Texture2D,f=e.Component}],execute:function(){var m,g,h,d,k,b,y,v,x,S,w;s._RF.push({},"ff50e7YUK9LFa+1yRHA5AVJ","SpineRemote",void 0);var R=l.ccclass,D=l.property;e("SpineRemote",(m=R("SpineRemote"),g=D(String),h=D(String),d=D(String),k=D(String),m((v=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"images",v,a(t)),r(t,"ske",x,a(t)),r(t,"atlas",S,a(t)),r(t,"animDefault",w,a(t)),t.skeleton=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){this.skeleton=this.getComponent(u.Skeleton)||this.addComponent(u.Skeleton),this.load()},s.update=function(e){},s.load=function(){var e=i(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],r=o(this.images);case 3:if((a=r()).done){e.next=12;break}return i=a.value,e.next=7,this.loadImg(i);case 7:s=e.sent,t.push(s),n.push(i.split("/").pop());case 10:e.next=3;break;case 12:return e.abrupt("return",new Promise((function(e,r){c.loadAny([{url:l.atlas,ext:".txt"},{url:l.ske,ext:".txt"}],(function(r,a){var i=new u.SkeletonData;i.skeletonJson=a[1],i.atlasText=a[0],i.textures=t,i.textureNames=n,l.skeleton.skeletonData=i,l.skeleton.animation=l.animDefault,e(l.skeleton)}))})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadImg=function(e){return new Promise((function(t,n){c.loadRemote(e,(function(e,n){if(e)t(null);else{var r=new p;r.image=n,t(r)}}))}))},t}(f)).prototype,"images",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(y.prototype,"ske",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(y.prototype,"atlas",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"animDefault",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Standby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var e,n,i,s,o,c,r,a,l,u,h,p,f,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,r=t.Node,a=t.Button,l=t.UIOpacity,u=t.Vec3,h=t.tween},function(t){p=t.ScreenName},function(t){f=t.GameMgr},function(t){y=t.Screen},function(t){d=t.ScreenMgr}],execute:function(){var m,k,b,D,g,w,S,v,B;o._RF.push({},"2007cizEIRIvKDIBbRrLGSj","Standby",void 0);var C,R=c.ccclass,F=c.property;!function(t){t[t.Farmer=0]="Farmer",t[t.Hunter=1]="Hunter"}(C||(C={}));t("Standby",(m=R("Standby"),k=F(r),b=F(r),D=F(a),m((S=e((w=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).state=null,i(e,"farmerDisplay",S,s(e)),i(e,"hunterDisplay",v,s(e)),e.display=null,e.model=null,i(e,"okButton",B,s(e)),e.tweenDescs=[],e.buttonTimeout=null,e.countClick=0,e}n(e,t);var o=e.prototype;return o.show=function(){t.prototype.show.call(this),this.okButton.node.on("click",this.onClickStart,this),this.node.on("click",this.onClick,this),this.farmerDisplay.active=!1,this.hunterDisplay.active=!1,f.instance.IsHunter()?this.setState(C.Hunter):this.setState(C.Farmer),this.tweenDescs=[],this.displayRole(),this.countClick=0},o.setState=function(t){switch(this.state=t,this.state){case C.Farmer:this.display=this.farmerDisplay;break;case C.Hunter:this.display=this.hunterDisplay}},o.displayRole=function(){var t=this;this.display.active=!0,this.model=this.display.children[2].getComponent(l),this.model.opacity=255,this.okButton.node.setScale(u.ZERO),this.display.children[1].children.forEach((function(e,n){e.getComponent(l).opacity=0;var i=h(e.getComponent(l)).delay(1*(n+1)).to(2,{opacity:255}).call((function(){i=null})).start();t.tweenDescs.push(i);var s=1e3*(t.display.children[1].children.length+2);t.buttonTimeout=setTimeout((function(){t.showStartButton()}),s)}))},o.showStartButton=function(){var t=this;h(this.okButton.node).set({scale:u.ZERO}).to(1,{scale:u.ONE},{easing:"bounceOut"}).call((function(){t.okButton.interactable=!0})).start()},o.onClick=function(){var t=this.display.children[1].children;if(0!=this.tweenDescs.length){this.countClick++;for(var e=0;e<this.tweenDescs.length;e++)if(this.tweenDescs[e]&&(this.tweenDescs[e].stop(),this.tweenDescs[e]=null,t[e].getComponent(l).opacity=255,e==this.tweenDescs.length-1&&(this.node.off("click"),clearTimeout(this.buttonTimeout),this.showStartButton()),this.countClick<2))return}},o.onClickStart=function(t){this.okButton.interactable=!1,this.okButton.node.off("click"),console.log("click start"),h(this.model).to(2,{opacity:0}).call((function(){f.instance.startFindmatch()})).start()},o.backClick=function(){d.instance.hideAll(),d.instance.show(p.Menu)},e}(y)).prototype,"farmerDisplay",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"hunterDisplay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(w.prototype,"okButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/TimeMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GameEvent.ts","./Utils.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,i,n,s,r,a,m,o,c,u,T;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,r=e.Component},function(e){a=e.EventName},function(e){m=e.GameDefine},function(e){o=e.GameMgr},function(e){c=e.default},function(e){u=e.utils},function(e){T=e.NetworkDefine}],execute:function(){var l,h;n._RF.push({},"ca6dbPXO9hMhoisIAPnFaOx","TimeMgr",void 0);var S=s.ccclass;s.property,e("TimeMgr",S("TimeMgr")(((h=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).syncTimeDuration=1,t.syncPeriod=5,t.syncTimeBound=0,t.localTimeSyncDuration=0,t.serverTimeSyncDuration=0,t.lastSyncTime=0,t.lastServerTime=0,t.timeBeforeSync=0,t.elapsedTimeFromLastRequest=Number.MAX_VALUE,t.startupTime=Date.now(),t.gameStartTime=0,t._gameTime=0,t}t(n,e);var s=n.prototype;return s.onLoad=function(){n.instance=this},s.start=function(){c.on(a.onPing,this.synchronize,this),c.on(a.onMatchingInfo,this.setGameStarTime,this)},s.setGameStarTime=function(e){console.log("[TimeMgr] clientTime: "+u.getTime(new Date(this.serverTime))),console.log("[TimeMgr] serverTime: "+u.getTime(new Date(e.serverTime))),console.log("[TimeMgr] setGameStarTime: "+u.getTime(new Date(e.startTime))),this.gameStartTime=e.startTime},s.reset=function(){this.syncTimeBound=0,this.localTimeSyncDuration=0,this.serverTimeSyncDuration=0,this.lastSyncTime=0,this.realtimeSinceStartup(),this.lastServerTime=0,this.timeBeforeSync=0,this.elapsedTimeFromLastRequest=Number.MAX_VALUE},s.getFrameTime=function(e){return this.gameStartTime+e*m.instance.timePerFrameServerMilisecond},s.update=function(e){o.instance.isPingReady&&(this.elapsedTimeFromLastRequest>this.syncPeriod?(this.elapsedTimeFromLastRequest=0,this.timeBeforeSync=this.realtimeSinceStartup(),o.instance.requestServerTime()):this.elapsedTimeFromLastRequest+=e,0!=this.lastSyncTime&&this.realtimeSinceStartup()-this.lastSyncTime>T.lostConnectionTime&&console.log("[TimeMgr] Lost connection"))},s.synchronize=function(e,t){var i=this.realtimeSinceStartup();if(this.lastServerTime>0){var n=i-this.timeBeforeSync,s=this.serverTime,r=e+n/2;this.syncTimeBound=r>s?r+this.syncTimeDuration:s+this.syncTimeDuration,this.localTimeSyncDuration=this.syncTimeBound-s,this.serverTimeSyncDuration=this.syncTimeBound-r,this.lastServerTime=r}else this.lastServerTime=e;this.lastSyncTime=i},s.realtimeSinceStartup=function(){return Date.now()-this.startupTime},i(n,[{key:"serverTime",get:function(){var e=this.localTime;return e>=this.syncTimeBound?e:this.syncTimeBound-this.localTimeSyncDuration*((this.syncTimeBound-e)/this.serverTimeSyncDuration)}},{key:"localTime",get:function(){return this.lastServerTime+this.realtimeSinceStartup()-this.lastSyncTime}},{key:"gameTime",get:function(){return this._gameTime},set:function(e){this._gameTime=e}},{key:"currentGameTime",get:function(){return this.gameStartTime+this.gameTime}}]),n}(r)).instance=null,l=h))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Trap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,i,o,a,s,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Sprite,c=e.tween,l=e.Vec3,p=e.Component}],execute:function(){var u,f,d,h,m;o._RF.push({},"18609h5jBVBBJLokC/gg5G0","Trap",void 0);var y=a.ccclass,v=a.property;e("Trap",(u=y("Trap"),f=v(s),u((m=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"model",m,i(t)),t}r(t,e);var o=t.prototype;return o.setInfo=function(e){this.model.spriteFrame=e},o.cloneInfo=function(e){this.model.spriteFrame=e.model.spriteFrame},o.destroyTrap=function(e){var t=null;this.node.active&&(t=c(this.node).parallel(c(this.node).by(.5,{position:new l(0,150)}),c(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){t&&t.stop(),e()}),500)},t}(p)).prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/TrapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GamePlay.ts","./Trap.ts"],(function(t){"use strict";var e,r,n,a,i,o,p,c,s,u,l,f,g,T,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,p=t.Prefab,c=t.SpriteFrame,s=t.NodePool,u=t.Vec3,l=t.instantiate,f=t.Component},function(t){g=t.GameDefine},function(t){T=t.GamePlay},function(t){h=t.Trap}],execute:function(){var m,d,y,_,v,N,S;i._RF.push({},"204011gscpD/5htWvb9yvlZ","TrapManager",void 0);var b=o.ccclass,E=o.property;t("TrapManager",(m=b("TrapManager"),d=E(p),y=E(c),m((N=e((v=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"trapPrefab",N,a(e)),n(e,"trapSpriteFrames",S,a(e)),e.trapPool=new s,e}r(e,t);var i=e.prototype;return i.initTrap=function(t,e){var r=this.getTrap();r.active=!1,r.position=new u(t.x*g.instance.cellUnit,t.y*g.instance.cellUnit),r.name=t.id.toString(),e.addTrap(r),r.getComponent(h).setInfo(this.getTrapSpriteFrame(t.type)),r.active=!0},i.netUpdate=function(t){var e=this,r=T.instance.map;t.dungeon.traps.forEach((function(t){r.findTrap(t.id.toString())||(e.initTrap(t,r),T.instance.fakeMaps.forEach((function(r){e.initTrap(t,r)})))})),r.getTraps().forEach((function(e){t.dungeon.traps.find((function(t){return t.id.toString()==e.name}))||(T.instance.handleDestroyTrap(e.name),r.removeTrap(e))}))},i.getTrapSpriteFrame=function(t){return t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST_MONSTER?this.trapSpriteFrames[0]:t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_TREE_MONSTER?this.trapSpriteFrames[1]:void 0},i.getTrap=function(){return this.trapPool.size()>0?this.trapPool.get():l(this.trapPrefab)},e}(f)).prototype,"trapPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(v.prototype,"trapSpriteFrames",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=v))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/TrimBase64.ts",["cc"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy,a=t._decorator}],execute:function(){var n;e._RF.push({},"9ec58QKtIZA8IXWjqzQ4DKQ","TrimBase64",void 0);var r=a.ccclass;a.property,t("TrimBase64",r("TrimBase64")(n=function(){function t(){}return t.trimCanvas=function(t){var e,a,n,r=t.getContext("2d"),o=document.createElement("canvas").getContext("2d"),l=r.getImageData(0,0,t.width,t.height),i=l.data.length,c={top:null,left:null,right:null,bottom:null};for(e=0;e<i;e+=4)0!==l.data[e+3]&&(a=e/4%t.width,n=~~(e/4/t.width),null===c.top&&(c.top=n),(null===c.left||a<c.left)&&(c.left=a),(null===c.right||c.right<a)&&(c.right=a),(null===c.bottom||c.bottom<n)&&(c.bottom=n));var u=c.bottom-c.top+1,s=c.right-c.left+1,g=r.getImageData(c.left,c.top,s,u);return o.canvas.width=s,o.canvas.height=u,o.putImageData(g,0,0),o.canvas},t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,o,i,c,a,u,l,s;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,r=t.ParticleSystem,o=t.UITransform,i=t.Sprite,c=t.Vec3,a=t.Quat,u=t.math,l=t.resources,s=t.AudioClip}],execute:function(){n._RF.push({},"10e5ec48SRIkIMCKunjzFih","Utils",void 0);t("utils",new(function(){function t(){this.getAngleFrom2Vec=function(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return n<0&&(n=2*Math.PI+n),180*n/Math.PI},this.getDirectionFrom2Vec=function(t,e){return e.clone().subtract(t).normalize()}}var n=t.prototype;return n.PlayParticle=function(t){t.play(),t.getComponentsInChildren(r).forEach((function(t){t.play()}))},n.StopParticle=function(t){t.stop(),t.getComponentsInChildren(r).forEach((function(t){t.stop()}))},n.toLocalString=function(t){return(t=Math.round(t)).toLocaleString().replace(/","/g,".")},n.formatScore=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},n.cloneObject=function(t){for(var e=Object.keys(t),n=Object.create(null),r=0,o=e.length;r<o;r++)n[e[r]]=t[e[r]];return n},n.setSpriteFrame=function(t,e){var n=t.node.getComponent(o).contentSize;t.spriteFrame.texture=e,t.sizeMode=i.SizeMode.RAW,t.node.getComponent(o).setContentSize(n)},n.CorrectSpriteFrameSize=function(t,e){var n=this.getScale(t.spriteFrame,e);t.node.setScale(new c(n,n,n))},n.getScale=function(t,e){var n=t.rect,r=e.width/n.width,o=e.height/n.height,i=o;return r>o&&(i=r),i},n.getTime=function(t){var e=function(t){return t<10?"0"+t:t};return e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},n.getDateTimeVN=function(t){var e=function(t){return t<10?"0"+t:t};return""+[e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/")},n.destroyAllChild=function(t){t.children.forEach((function(t){t.destroy()})),t.removeAllChildren()},n.truncate=function(t,e){var n=t.split(" ");return n.length>e?n.splice(0,e).join(" ")+"...":t},n.rotationAroundNode=function(t,e,n,r){var o=new a,i=new c,l=new c,s=t.position,f=u.toRadian(r);return a.fromAxisAngle(o,n,f),c.subtract(i,s,e),c.transformQuat(l,i,o),t.position=c.add(l,e,l),a.rotateAround(o,t.rotation,n,f),o},n.changeNodeLayer=function(t,e){var n=this;t.layer=e,t.children.forEach((function(t){n.changeNodeLayer(t,e)}))},n.trimName=function(t,e){return t.split(" ").splice(-e).join(" ")},n.getAudioRes=function(t,e){l.load(t,s,(function(t,n){t?e&&e(null):e&&e(n)}))},e(t,[{key:"uuid",get:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}}]),t}()));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});