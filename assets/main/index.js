System.register("chunks:///_virtual/a-protobuf.ts",["cc","./index.mjs_cjs=&original=.js","./index.js"],(function(){"use strict";var t,n;return{setters:[function(n){t=n.cclegacy},null,function(t){n=t.default}],execute:function(){t._RF.push({},"55100wlTAVGGaIFArbn+z6n","a-protobuf",void 0),window.protobuf=n,t._RF.pop()}}}));

System.register("chunks:///_virtual/ApiMock.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"792a1PeVsBG5pMMZEpj/Viu","ApiMock",void 0);var r=e("ApiMock",(function(){}));r.deviceInfo={instanceID:"FTWJFBDPQMYDQFAJB5VOPB",totalStorage:107209,totalRam:5584,countryCode:"084",devicePerformance:"high-end",bundleId:"vn.momo.platform.test",isEmulator:"false",BSSID:"02:00:00:00:00:00",deviceMCC:"452",firebaseToken:"ftwjFbDPQMydqfAjB5vOpb:APA91bF_DVNBUdmVH9JXcp9aGlZZMF2eVmvqj_5ksm7KRenkvSsRYGbTJRvdWjOR_I35rcQvZuuCUhdDDq0xwG3Rks_5taONd_x5vZVw9D15ceeRT87gXEMxqk3aGpeRiEc2GwqyNFpN",googlePlayServicesAvailable:!0,deviceSecureId:"230c8f27a54b97de",buildVersion:31040,deviceModelName:"Z818L",isDev:"true",deviceName:"Z818L",deviceManufacturer:"Xiaomi",AAID:"461b635f-1f94-4dea-90a0-cd04e3f6f2c9",deviceHardwareVersion:"qcom",appVersion:"3.1.4-debug",IDFA:"",deviceSoftwareVersion:"30",deviceNetworkOperatorName:"Viettel",icc:"",deviceImei:"20aef116-ae34-41be-abf3-fcb58da6c12d",countryName:"Vietnam",freeStorage:63899,deviceModelID:"xiaomi m2101k7agqcomnull"},r.feature={feature:{featureID:"shaking-game",params:{}}},r.profile={response_info:{error_message:"success",error_code:0,event_tracking:"get_user_profiles"},result:{userId:"01662984381",username:"Phan Tấn Thịnh",namekyc:"Phan Tấn Thịnh",avartar:"https://cdn-test.momoapp.vn/avatars/avatar_test/7dfe/ae9fb7f9845679d911b6604e5d3b13fdf8ef07ea59abf7e6cdc1732d8ed2.png"}},a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts"],(function(o){"use strict";var i,u,t,n,e,s,a,c,l,r,d,h,p;return{setters:[function(o){i=o.applyDecoratedDescriptor,u=o.inheritsLoose,t=o.initializerDefineProperty,n=o.assertThisInitialized,e=o.createClass},function(o){s=o.cclegacy,a=o._decorator,c=o.AudioClip,l=o.AudioSource,r=o.assetManager,d=o.Component},function(o){h=o.SoundName},function(o){p=o.utils}],execute:function(){var S,f,g,m,M,y;s._RF.push({},"9dd765fsdpBTYPuaYbGlpDj","AudioMgr",void 0);var v=a.ccclass,b=a.property;o("AudioMgr",(S=v("AudioMgr"),f=b(c),S(((y=function(o){function i(){for(var i,u=arguments.length,e=new Array(u),s=0;s<u;s++)e[s]=arguments[s];return i=o.call.apply(o,[this].concat(e))||this,t(i,"audioClips",M,n(i)),i.bgVolume=.5,i.sfxVolume=.5,i.preBgVolume=.5,i.preSfxVolume=.5,i.audioSourceSFX=null,i.audioSourceMusic=null,i.IsEnable=!0,i.muteBg=!1,i.muteSfx=!1,i.cdnUrl="https://img.mservice.com.vn/app/img/Ne715/sounds/",i}u(i,o);var s=i.prototype;return s.onLoad=function(){i.instance=this,this.audioSourceSFX=this.addComponent(l),this.audioSourceSFX.loop=!1,this.audioSourceSFX.volume=this.sfxVolume,this.audioSourceMusic=this.addComponent(l),this.audioSourceMusic.play()},s.PlayOneShot=function(o,i){void 0===i&&(i=!1),o&&this.IsEnable&&(i?this.audioSourceSFX.playOneShot(o):(this.audioSourceSFX.clip=o,this.audioSourceSFX.play()))},s.PlayMusic=function(o,i){o&&this.IsEnable&&(this.audioSourceMusic.clip==o&&this.audioSourceMusic.playing||(this.Stop(),this.audioSourceMusic.clip=o,this.audioSourceMusic.loop=i,this.On(),this.audioSourceMusic.volume=this.bgVolume,this.audioSourceMusic.play()))},s.Stop=function(){this.audioSourceMusic.stop()},s.Start=function(){this.audioSourceMusic.play()},s.Load=function(o){var i=this;void 0===o&&(o=null);var u=Object.keys(h);u.forEach((function(t){var n=h[t];p.getAudioRes("bundle/sounds/"+n,(function(t){t?(t.name=n,i.audioClips.push(t),console.log("[AudioMgr] Sound load: "+n)):console.log("[AudioMgr] Sound not load: "+n),n==h.BackgroundMusic&&(console.log("PLAY BG MUSIC"),i.PlayMusicWithName(h.BackgroundMusic,!0)),i.audioClips.length==u.length&&o&&o()}))}))},s.loadRemote=function(o){var i=this;void 0===o&&(o=null);var u=Object.keys(h);u.forEach((function(t){var n=h[t];try{r.loadRemote(i.cdnUrl+n+".mp3",(function(t,e){e?(e.name=n,i.audioClips.push(e),console.log("[AudioMgr] Sound load: "+n)):console.log("[AudioMgr] Sound not load: "+n),n==h.BackgroundMusic&&(console.log("PLAY BG MUSIC"),i.PlayMusicWithName(h.BackgroundMusic,!0)),i.audioClips.length==u.length&&o&&o()}))}catch(o){console.log("[AudioMgr] Sound not error: "+o)}}))},s.PlaySfx=function(o,i){void 0===i&&(i=!1);var u=this.audioClips.find((function(i){return i.name==o}));u&&this.PlayOneShot(u,i)},s.StopSfx=function(o){var i=this;this.audioClips.forEach((function(u){u.name==o&&i.audioSourceSFX.clip==u&&i.audioSourceSFX.playing&&i.audioSourceSFX.stop()}))},s.PlayMusicWithName=function(o,i){var u=this;this.audioClips.forEach((function(t){t.name==o&&u.PlayMusic(t,i)}))},s.On=function(){this.IsEnable=!0,this.Start()},s.Off=function(){this.IsEnable=!1,this.Stop()},s.NextStatus=function(){this.IsEnable=!this.IsEnable,this.IsEnable?this.On():this.Off()},s.settingMusic=function(o){this.audioSourceMusic.volume=o,this.preBgVolume=this.bgVolume,this.bgVolume=o,this.muteBg=0==o},s.settingSFX=function(o){this.audioSourceSFX.volume=o,this.preSfxVolume=this.sfxVolume,this.sfxVolume=o,this.muteSfx=0==o},e(i,null,[{key:"Instance",get:function(){return this.instance}}]),i}(d)).instance=null,M=i((m=y).prototype,"audioClips",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts"],(function(e){"use strict";var t,i,o,n,a,r,s,l,c,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.Node,c=e.Vec3,p=e.Component},function(e){u=e.default},function(e){h=e.GamePlayEventName}],execute:function(){var f,y,d,m,v;r._RF.push({},"bce94NCBehMI7cF6jUKqB75","CameraFollow",void 0);var C=s.ccclass,P=s.property;e("CameraFollow",(f=C("CameraFollow"),y=P(l),f((v=t((m=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"map",v,n(t)),t.originPosition=null,t.player=null,t}i(t,e);var r=t.prototype;return r.start=function(){this.originPosition=this.node.position.clone(),u.on(h.UpdateCamera,this.updateCamera,this),this.updateCamera()},r.updateCamera=function(e){if(void 0===e&&(e=null),this.player)if(e){var t=e.subtract(this.node.position),i=this.player.position.clone();this.node.setPosition(i.subtract(t))}else{var o=this.player.position.clone();this.node.setPosition(o)}},r.update=function(e){if(this.player){var t=this.player.position.clone();c.lerp(t,this.node.position,t,5*e),this.node.setPosition(t)}},a(t,[{key:"Player",set:function(e){console.log("[CameraFollow] set Player"),this.player=e}}]),t}(p)).prototype,"map",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){e({EventName:void 0,GamePlayEventName:void 0,MaxAPIEvent:void 0,ObstacleType:void 0,PopupEvent:void 0,PopupName:void 0,ScreenName:void 0,SoundName:void 0,TileType:void 0,TouchState:void 0}),a._RF.push({},"5a564xrd41Lir3Sb4uzkBZI","Define",void 0);var n,o,t,i,p,r,d,u=e("Define",(function(){}));u.NUMBER_SLOT=8,u.MAX_SPEED=5,function(e){e.Loading="Loading",e.Menu="Menu",e.Standby="Standby",e.GamePlay="GamePlay",e.Result="Result"}(n||(n=e("ScreenName",{}))),function(e){e.PopupConfig="PopupConfig",e.Ranking="Ranking"}(o||(o=e("PopupName",{}))),function(e){e.BackgroundMusic="gnork-party",e.CollectGold="collectcoin",e.Freeze="rocks-2",e.Unfreeze="dropping-rocks-2",e.ExchangeMoney="gold-coin",e.Burning="fire-swoosh",e.Bite="monster-bite",e.Healing="health-pickup-2",e.MeteorFalling="falling-meteor",e.Button="Button-pressed",e.Endgame="game-over",e.Warning="warning-sound",e.Explosion="fire-explosion"}(t||(t=e("SoundName",{}))),function(e){e.CaptureScreenShoot="game-capture-screen-shoot",e.onGameDefine="onGameDefine",e.onMatchingInfo="onMatchingInfo",e.onPing="onPing",e.onMatchingFailed="onMatchingFailed",e.onPlayerWakeUp="onPlayerWakeUp",e.onResRanking="onReqRanking",e.onUpdateProfile="onUpdateProfile"}(i||(i=e("EventName",{}))),function(e){e.UpdateCamera="game-update-camera",e.UpdateGoldBalance="game-update-gold-balance",e.UpdateMoneyBalance="game-update-money-balance",e.UpdatePlayerFREEZE="game-update-player-freeze",e.UpdatePlayerStopAttack="game-update-player-stop-attack",e.UpdateMoneyChange="game-update-money-change",e.UpdateMeteorDrop="game-update-meteor-drop",e.OnNotify="game-on-notify",e.LostHp="game-lost-hp",e.CameraShaking="game-camera-shaking",e.PlayerTeleport="game-player-teleport"}(p||(p=e("GamePlayEventName",{}))),function(e){e.Load="popup-load",e.Show="popup-show",e.Hide="popup-hide",e.HideAll="popup-hide-all"}(r||(r=e("PopupEvent",{}))),function(e){e.request="maxapi-request"}(d||(d=e("MaxAPIEvent",{})));var c,l=e("GameDefine",(function(){}));l.timeEndLoading=1,l.timeAppearLoading=.5,l.instance=void 0,function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Press=2]="Press",e[e.Up=3]="Up"}(c||(c=e("TouchState",{})));var g,m,s=e("Layer",(function(){}));s.GamePlay=1,s.UI_2D=1<<25,function(e){e[e.Land=1]="Land",e[e.Land2=2]="Land2",e[e.Land3=3]="Land3",e[e.Land4=4]="Land4",e[e.Left=5]="Left",e[e.Right=6]="Right",e[e.Magma=7]="Magma",e[e.Lava=8]="Lava",e[e.BothBoder=9]="BothBoder"}(g||(g=e("TileType",{}))),function(e){e[e.Skull=0]="Skull",e[e.Tree=1]="Tree",e[e.Bush=2]="Bush"}(m||(m=e("ObstacleType",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/FakeCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i,o,a,r,s,c,h,l,u,p,m,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Enum,c=t.UITransform,h=t.sp,l=t.Vec2,u=t.Vec3,p=t.math,m=t.tween,d=t.Component}],execute:function(){var f,g,y,v,_;a._RF.push({},"ff110cpGIdMzbhhSRshJUUX","FakeCharacter",void 0);var S,z=r.ccclass,F=r.property;!function(t){t[t.Hunter=0]="Hunter",t[t.Farmer=1]="Farmer",t[t.Ranking=2]="Ranking"}(S||(S={})),s(S);t("FakeCharacter",(f=z("FakeCharacter"),g=F({type:S}),f((_=n((v=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"state",_,o(n)),n.size=void 0,n}e(n,t);var a=n.prototype;return a.start=function(){this.size=this.node.getComponent(c).contentSize,this.init(),this.setStatusGroup()},a.setStatusGroup=function(){var t=this;this.node.children.forEach((function(n,e){var i=n.children[0].getComponent(h.Skeleton);t.state==S.Farmer?i.setAnimation(0,"character_run",!0):t.state==S.Hunter?i.setAnimation(0,"enemy_run",!0):e<t.node.children.length/2?i.setAnimation(0,"character_run",!0):i.setAnimation(0,"enemy_run",!0)}))},a.init=function(){var t=this;this.node.children.forEach((function(n){var e=l.random(t.node.getPosition().clone());e.x*=t.size.width/2,e.y*=t.size.height/2,n.setPosition(e),n.setScale(u.ONE),t.floatingGhost(n),t.movingGhost(n)}))},a.floatingGhost=function(t){var n=this,e=p.randomRange(0,2),i=p.random(),o=t.children[0];m(o).by(e,{position:new u(0,20)}).delay(i).by(e,{position:new u(0,-20)}).delay(i).call((function(){n.floatingGhost(t)})).start()},a.movingGhost=function(t){var n=this,e=l.random(this.node.getPosition().clone()),i=this.node.getComponent(c).contentSize;e.x*=i.width/2,e.y*=i.height/2;var o=u.distance(e,t.getPosition().clone())/100,a=t.children[0];e.x>t.position.x?a.setScale(u.ONE):a.setScale(-1,1,1);var r=a.getComponent(h.Skeleton);e.y>t.position.y?r.animation.includes("_up")||r.setAnimation(0,r.animation+"_up",!0):r.animation.includes("_up")&&r.setAnimation(0,r.animation.replace("_up",""),!0);m(t).to(o,{position:e}).delay(1).call((function(){null,n.movingGhost(t)})).start()},n}(d)).prototype,"state",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.Farmer}}),y=v))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var r,t,n,u;return{setters:[function(e){r=e.asyncToGenerator},function(e){t=e.cclegacy},function(e){n=e.NetworkDefine},function(e){u=e.networkMgr}],execute:function(){t._RF.push({},"ec3e9CNQE1PPrbYHgLu6+Bx","GameApi",void 0);e("gameApi",new(function(){function e(){}var t=e.prototype;return t.genDeepLink=function(){var e=r(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){u.postRequest(n.DEEP_LINK,r)})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.getProfile=function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.getRequest(n.Profile));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameMgr.ts"],(function(e){"use strict";var n,_,t,O,i,N,r,M,E,V;return{setters:[function(e){n=e.inheritsLoose,_=e.createClass},function(e){t=e.cclegacy,O=e._decorator,i=e.Color,N=e.Vec2,r=e.Component},function(e){M=e.default},function(e){E=e.EventName},function(e){V=e.GameMgr}],execute:function(){var o,u;t._RF.push({},"22c1et0Qr9NCJByGDeWlHWX","GameDefine",void 0);var s=O.ccclass;O.property,e("GameDefine",s("GameDefine")(((u=function(e){function t(){for(var n,_=arguments.length,t=new Array(_),O=0;O<_;O++)t[O]=arguments[O];return(n=e.call.apply(e,[this].concat(t))||this)._gameDefine=null,n.anglePerCmnd=10,n._mapWith=0,n._mapHeight=0,n.MOVE_000=new N(1,0),n.MOVE_010=new N(.9848,.1736),n.MOVE_020=new N(.9396,.342),n.MOVE_030=new N(.866,.4999),n.MOVE_040=new N(.766,.6427),n.MOVE_050=new N(.6427,.766),n.MOVE_060=new N(.5,.866),n.MOVE_070=new N(.342,.9396),n.MOVE_080=new N(.1736,.9848),n.MOVE_090=new N(0,1),n.MOVE_100=new N(-.1736,.9848),n.MOVE_110=new N(-.342,.9396),n.MOVE_120=new N(-.4999,.866),n.MOVE_130=new N(-.6427,.766),n.MOVE_140=new N(-.766,.6427),n.MOVE_150=new N(-.866,.4999),n.MOVE_160=new N(-.9396,.342),n.MOVE_170=new N(-.9848,.1736),n.MOVE_180=new N(-1,0),n.MOVE_190=new N(-.9848,-.1736),n.MOVE_200=new N(-.9396,-.342),n.MOVE_210=new N(-.866,-.5),n.MOVE_220=new N(-.766,-.6427),n.MOVE_230=new N(-.6427,-.766),n.MOVE_240=new N(-.5,-.866),n.MOVE_250=new N(-.342,-.9396),n.MOVE_260=new N(-.1736,-.9848),n.MOVE_270=new N(0,-1),n.MOVE_280=new N(.1736,-.9848),n.MOVE_290=new N(.342,-.9396),n.MOVE_300=new N(.5,-.866),n.MOVE_310=new N(.6427,-.766),n.MOVE_320=new N(.766,-.6427),n.MOVE_330=new N(.866,-.5),n.MOVE_340=new N(.9396,-.342),n.MOVE_350=new N(.9848,-.1736),n.KEY_TO_MOVE=(new Map).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_000,n.MOVE_000).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_010,n.MOVE_010).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_020,n.MOVE_020).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_030,n.MOVE_030).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_040,n.MOVE_040).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_050,n.MOVE_050).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_060,n.MOVE_060).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_070,n.MOVE_070).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_080,n.MOVE_080).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_090,n.MOVE_090).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_100,n.MOVE_100).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_110,n.MOVE_110).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_120,n.MOVE_120).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_130,n.MOVE_130).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_140,n.MOVE_140).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_150,n.MOVE_150).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_160,n.MOVE_160).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_170,n.MOVE_170).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_180,n.MOVE_180).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_190,n.MOVE_190).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_200,n.MOVE_200).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_210,n.MOVE_210).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_220,n.MOVE_220).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_230,n.MOVE_230).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_240,n.MOVE_240).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_250,n.MOVE_250).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_260,n.MOVE_260).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_270,n.MOVE_270).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_280,n.MOVE_280).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_290,n.MOVE_290).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_300,n.MOVE_300).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_310,n.MOVE_310).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_320,n.MOVE_320).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_330,n.MOVE_330).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_340,n.MOVE_340).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_350,n.MOVE_350),n}n(t,e);var O=t.prototype;return O.getMaxHpPoint=function(e){return e?this.maxHpPointHunter:this.maxHpPointFarmer},O.start=function(){t.instance=this,M.on(E.onGameDefine,this.setGameDefine,this)},O.setGameDefine=function(e){console.log("[GameDefine] setGameDefine",e),this._gameDefine=e,this._mapWith=this.cellWidth*this.cellUnit,this._mapHeight=this.cellHeight*this.cellUnit},O.getDirectionFromCmd=function(e){return this.KEY_TO_MOVE.get(e)},O.convertRadToMoveCmd=function(e){var n=Math.round(e/this.anglePerCmnd)*this.anglePerCmnd,_="KRUN_CMD_PLAYER_MOVE_"+(0===n?"000":n<100?"0"+n:n);return phoenix.krun.KRUN_CMD[_]||phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_MOVE_000},_(t,[{key:"gameDefine",get:function(){return this._gameDefine}},{key:"timePerFrameServerMilisecond",get:function(){return this._gameDefine.timePerFrame}},{key:"timePerFrameServerMilisecondFake",get:function(){return this._gameDefine.timePerFrame+V.instance.ping/2}},{key:"timePerFrameServerSecondFake",get:function(){return.001*this.timePerFrameServerMilisecondFake}},{key:"cellHeight",get:function(){return this._gameDefine.dungeonHeight}},{key:"cellWidth",get:function(){return this._gameDefine.dungeonWidth}},{key:"cellUnit",get:function(){return this._gameDefine.pixelPerUnit}},{key:"mapWidth",get:function(){return this._mapWith}},{key:"mapHeight",get:function(){return this._mapHeight}},{key:"maxHpPointFarmer",get:function(){return this._gameDefine.farmerHealPointMax}},{key:"maxHpPointHunter",get:function(){return this._gameDefine.hunterHealPointMax}}],[{key:"boundCameraTile",get:function(){return new N(14,12)}}]),t}(r)).instance=null,u.RED_COLOR=new i(255,0,60),u.BLU_COLOR=new i(2,177,243),u.GREEN_COLOR=new i(73,203,43),u.GREEN_LIGHT_COLOR=new i(88,255,148),u.obstacleRate=.2,u.magmaRate=.3,u.distanceToTeleport=1e3,u.distanceToMoveMap=128,o=u))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy,c=e.EventTarget}],execute:function(){t._RF.push({},"cf67fV7rxVL5IrLlgHmZ3Xi","GameEvent",void 0);e("default",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./MaxApiUtils2.ts","./TrimBase64.ts","./PopupMgr.ts","./ScreenMgr.ts","./Define.ts","./GameEvent.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./GamePlay.ts","./AudioMgr.ts","./TextDefine.ts","./PopupConfig.ts"],(function(e){"use strict";var n,t,i,a,r,o,s,c,u,h,d,l,k,g,R,p,M,m,f,S,_,w,y,b,N,A,C;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy,a=e._decorator,r=e.director,o=e.Director,s=e.game,c=e.view,u=e.Component},function(e){h=e.globalDefine,d=e.profile},function(e){l=e.maxApiUtils,k=e.MaxApiName},function(e){g=e.TrimBase64},function(e){R=e.PopupMgr},function(e){p=e.ScreenMgr},function(e){M=e.EventName,m=e.ScreenName},function(e){f=e.default},function(e){S=e.NetworkBrigde},function(e){_=e.NetworkDefine,w=e.WSCmd},function(e){y=e.GamePlay},function(e){b=e.AudioMgr},function(e){N=e.LostConnectionPopupText,A=e.FindMatchFailPopupText},function(e){C=e.PopupConfig}],execute:function(){var U,D;i._RF.push({},"b7472axsNtOc6fjgxtXsqcK","GameMgr",void 0);var K,E=a.ccclass;a.property;!function(e){e[e.Load=0]="Load",e[e.Init=1]="Init",e[e.CheckToken=2]="CheckToken",e[e.Connecting=3]="Connecting",e[e.Authentication=4]="Authentication",e[e.ReqWorker=5]="ReqWorker",e[e.ReqDefines=6]="ReqDefines",e[e.Menu=7]="Menu",e[e.Standby=8]="Standby",e[e.Playing=9]="Playing",e[e.Result=10]="Result",e[e.NetworkError=11]="NetworkError",e[e.FindMatch=12]="FindMatch"}(K||(K={}));e("GameMgr",E("GameMgr")(((D=function(e){function i(){var n;return(n=e.call(this)||this).state=void 0,n.preState=void 0,n.isCapture=!1,n.captureCallBack=null,n.time=0,n.timeFindMatch=0,n.networkBrigde=new S,n.isHunter=!1,n.isStandby=!1,n.isMenu=!1,n.endInfo=null,n.cheatSkipStandby=!0,n.isOptimizeForPerformance=!1,n._ping=0,n}n(i,e);var a=i.prototype;return a.start=function(){i.instance=this,window.OnHideLoading&&(window.OnHideLoading(),console.log("HIDE LOADING"),l.request(k.stopTrace,window.traceScreenLoadId),l.request(k.stopTrace,window.traceScreenInterractionId)),r.on(o.EVENT_AFTER_DRAW,this.canvasAfterDraw,this),this.SetState(K.Load),f.on(M.CaptureScreenShoot,this.captureScreen,this),l.listen("onFocusApp",this.handleFocusMiniApp.bind(this)),l.listen("onBlurApp",this.handleBlurMiniApp.bind(this))},a.handleFocusMiniApp=function(){s.resume(),console.log("[GameMgr] handleFocusMiniApp")},a.handleBlurMiniApp=function(){s.pause(),console.log("[GameMgr] handleBlurMiniApp")},a.update=function(e){switch(this.state){case K.Init:break;case K.CheckToken:this.time+=e,h.profile.isOk?this.SetState(K.Connecting):this.time>=2&&(_.IS_DEV?this.SetState(K.Connecting):this.SetState(K.NetworkError));break;case K.Connecting:this.time+=e,this.time>_.lostConnectionTime/1e3?this.SetState(K.NetworkError):this.networkBrigde.isReady&&this.SetState(K.Authentication);break;case K.Menu:if(!this.isMenu)return;if(p.instance.isLoaded(m.Menu)){if(this.isOptimizeForPerformance&&!p.instance.isLoaded(m.GamePlay))return;p.instance.hide(m.Loading),this.isMenu=!1}break;case K.Standby:if(0==this.isStandby)return;p.instance.isLoaded(m.Standby)&&p.instance.isLoaded(m.GamePlay)&&(p.instance.hide(m.Menu),p.instance.show(m.GamePlay),this.cheatSkipStandby?this.networkBrigde.joinGame(this.isHunter):p.instance.show(m.Standby),this.isStandby=!1);case K.Playing:}},a.SetState=function(e){var n=this;switch(console.log("[GameMgr] state: "+K[this.state]+" => "+K[e]),this.preState=this.state,this.state=e,e){case K.Load:p.instance.load(),b.instance.loadRemote(),this.SetState(K.Init);break;case K.Init:this.initNetwork(),this.SetState(K.CheckToken);break;case K.CheckToken:case K.Connecting:this.time=0;break;case K.Authentication:this.networkBrigde.authentication(d.userToken);break;case K.ReqWorker:R.Instance.hideAll(),this.networkBrigde.reqWorker();break;case K.ReqDefines:this.networkBrigde.reqDefines();break;case K.FindMatch:this.timeFindMatch=0,this.networkBrigde.joinGame(this.isHunter);var t=setInterval((function(){if(n.timeFindMatch++,n.timeFindMatch>3){clearInterval(t);var e=new A,i=C.Show(e,null);null==i||i.SetTypeOk((function(){n.reconnect()}))}else n.state==K.FindMatch?n.networkBrigde.joinGame(n.isHunter):clearInterval(t)}),2e3);break;case K.Playing:l.request(k.stopTrace,window.traceScreenGoldId);break;case K.Result:setTimeout((function(){R.Instance.hideAll(),p.instance.hideAll(),y.instance.end(),p.instance.show(m.Result),n.networkBrigde.quitGame()}),2e3);break;case K.NetworkError:var i=new N,a=C.Show(i,null);null==a||a.SetTypeOk((function(){n.SetState(n.preState)}))}},a.initNetwork=function(){this.networkBrigde.connect(),this.networkBrigde.onMessage=this.onMessage.bind(this)},a.onMessage=function(e){switch(e.msgClass){case w.ResVerify:var n=phoenix.krun.internal.ResVerify.decode(e.msg);d.Uid=n.uid,this.SetState(K.ReqWorker),console.log("[GameMgr] ResVerify: ",n);break;case w.MsgPing:var t=phoenix.krun.internal.MsgPing.decode(e.msg),i=Date.now()-t.createAt;f.emit(M.onPing,t.workerAt+i/2,i),this.ping=i;break;case w.ResWorker:this.SetState(K.ReqDefines);break;case w.KrunMsg:this.onGameMsg(e.msg)}},a.onGameMsg=function(e){var n=phoenix.krun.KrunMsg.decode(e);if(n.error==phoenix.krun.KRUN_ERROR.KRUN_ERROR_NONE)switch(n.cmd){case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_MATCHING:var t=phoenix.krun.KrunGameMatching.decode(n.body);console.log("[GameMgr] matchingInfo: ",t),f.emit(M.onMatchingInfo,t),this.SetState(K.Playing);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES:var i=phoenix.krun.KrunGameDefines.decode(n.body);f.emit(M.onGameDefine,i),this.isMenu=!0,this.SetState(K.Menu);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_END:this.endInfo=phoenix.krun.KrunGameEnd.decode(n.body),console.log("[GameMgr] endgame: ",this.endInfo),y.instance.endPlayer(),this.SetState(K.Result);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_UPDATE:var a=phoenix.krun.KrunGameUpdate.decode(n.body);y.instance.netUpdate(a);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP:var r=phoenix.krun.KrunResPlayerWakeUp.decode(n.body);r.uid==d.Uid&&r.ok&&f.emit(M.onPlayerWakeUp);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_RANKING_BOARD:var o=phoenix.krun.KrunResRankingBoard.decode(n.body);f.emit(M.onResRanking,o);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME:var s=phoenix.krun.KrunPlayerJoin.decode(n.body);y.instance.handlePlayerJoin(s);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME:var c=phoenix.krun.KrunPlayerQuit.decode(n.body);y.instance.handlePlayerQuit(c);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_DEAD:var u=phoenix.krun.KrunPlayer.decode(n.body);y.instance.handlePlayerQuit(u)}else switch(console.log("[GameMgr] ongameMsg Error: ",n),n.error){case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_FAIL:console.log("Failed matching");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_TIMEOUT:console.log("Time out"),f.emit(M.onMatchingFailed);break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_INVALID:console.log("User invalid");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_DOUBLE:console.log("User double");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_DISABLE:console.log("Matching disable")}},a.requestServerTime=function(){this.networkBrigde.ping()},a.startStandby=function(e){void 0===e&&(e=!1),this.isHunter=e,this.isStandby=!0,this.SetState(K.Standby)},a.startFindmatch=function(){this.SetState(K.FindMatch)},a.backFromeGameToLobby=function(){p.instance.hide(m.GamePlay),p.instance.show(m.Menu),this.networkBrigde.quitGame(),this.SetState(K.ReqWorker)},a.playerMove=function(e){this.networkBrigde.sendAction(e,null)},a.playerWakeUp=function(){console.log("Send action player wake up");var e=new phoenix.krun.KrunReqPlayerWakeUp;this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP,phoenix.krun.KrunReqPlayerWakeUp.encode(e))},a.reqRankingBoard=function(){console.log("Send action req ranking board");var e=new phoenix.krun.KrunReqRankingBoard;e.begin=0,e.end=9,this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_RANKING_BOARD,phoenix.krun.KrunReqRankingBoard.encode(e))},a.IsHunter=function(){return this.isHunter},a.reconnect=function(){this.initNetwork(),R.Instance.hideAll(),p.instance.isShow(m.Menu)||(p.instance.hideAll(),p.instance.show(m.Menu)),this.state==K.FindMatch&&this.networkBrigde.quitGame(),this.state==K.Playing&&(y.instance.end(),this.networkBrigde.quitGame()),this.SetState(K.ReqWorker)},a.canvasAfterDraw=function(){if(this.isCapture){this.isCapture=!1;var e=document.getElementById("GameCanvas"),n=document.createElement("canvas"),t=n.getContext("2d"),i=c.getVisibleSize().width,a=c.getVisibleSize().height;n.width=i,n.height=a,t.drawImage(e,0,0,i,a,0,0,i,a);var r=g.trimCanvas(n).toDataURL("image/png");this.captureCallBack(r)}},a.captureScreen=function(e){this.captureCallBack=e,this.isCapture=!0},t(i,[{key:"ping",get:function(){return this._ping},set:function(e){this._ping=e}},{key:"isPlaying",get:function(){return this.state==K.Playing}},{key:"isPingReady",get:function(){return this.networkBrigde.isPingReady}}]),i}(u)).instance=null,U=D))||U);i._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Screen.ts","./GameEvent.ts","./Define.ts","./PlayerManager.ts","./ItemManager.ts","./GameMgr.ts","./GameUIManager.ts","./GameDefine.ts","./MapManager.ts","./CameraFollow.ts","./TimeMgr.ts","./ScreenMgr.ts","./MeteorManager.ts","./ItemSpecialManager.ts","./TrapManager.ts"],(function(e){"use strict";var t,a,n,i,r,o,l,s,p,c,u,g,h,m,y,f,M,d,b,P,G,v,w,S,T,I,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.Label,p=e.Vec2,c=e.Color},function(e){u=e.Screen},function(e){g=e.default},function(e){h=e.EventName,m=e.GamePlayEventName,y=e.ScreenName},function(e){f=e.PlayerManager},function(e){M=e.ItemManager},function(e){d=e.GameMgr},function(e){b=e.GameUIManager},function(e){P=e.GameDefine},function(e){G=e.MapManager},function(e){v=e.CameraFollow},function(e){w=e.TimeMgr},function(e){S=e.ScreenMgr},function(e){T=e.MeteorManager},function(e){I=e.ItemSpecialManager},function(e){z=e.TrapManager}],execute:function(){var E,U,C,_,x,D,L,X,Y,k,F,O,R,N,B,H,J,j,q,A,Q,V;o._RF.push({},"5ae0bNOoFtBfrUexD3IPSUb","GamePlay",void 0);var W,K=l.ccclass,Z=l.property;!function(e){e[e.Init=0]="Init",e[e.Playing=1]="Playing",e[e.End=2]="End"}(W||(W={}));e("GamePlay",(E=K("GamePlay"),U=Z(G),C=Z(f),_=Z(M),x=Z(T),D=Z(I),L=Z(z),X=Z(b),Y=Z(v),k=Z(s),E(((V=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"mapManager",R,i(t)),n(t,"playerManager",N,i(t)),n(t,"itemManager",B,i(t)),n(t,"meteorManager",H,i(t)),n(t,"itemSpecialManager",J,i(t)),n(t,"trapManager",j,i(t)),n(t,"uiManager",q,i(t)),n(t,"camera",A,i(t)),n(t,"ping",Q,i(t)),t._player=null,t.state=W.Init,t.preX=-1,t.preY=-1,t}a(t,e),t.getInstance=function(){return t.instance};var o=t.prototype;return o.show=function(){e.prototype.show.call(this),t.instance||(t.instance=this),this.setState(W.Init),g.on(h.onMatchingInfo,this.initGame,this),g.on(h.onPing,this.logPing,this),g.on(m.PlayerTeleport,this.handlePlayerTeleport,this)},o.update=function(e){switch(this.state){case W.Playing:if(-1==this.preX)this.preX=this.player.node.position.x,this.preY=this.player.node.position.y;else{var t=this.player.node.position.x-this.preX,a=this.player.node.position.y-this.preY;Math.abs(t)>P.distanceToMoveMap&&(this.mapManager.handleMoveMap(new p(Math.sign(t),0)),this.preX=this.player.node.position.x),Math.abs(a)>P.distanceToMoveMap&&(this.mapManager.handleMoveMap(new p(0,Math.sign(a))),this.preY=this.player.node.position.y)}}},o.handlePlayerTeleport=function(e,t,a){var n=e.x-t.x,i=e.y-t.y;this.mapManager.handleTeleport(n,i);var r=t.x-this.preX,o=t.y-this.preY;this.preX=a.x-r,this.preY=a.y-o},o.logPing=function(e,t){this.ping.color=t<=100?P.GREEN_COLOR:t<=250?c.YELLOW:P.RED_COLOR,this.ping.string="Ping: "+t},o.setState=function(e){switch(console.log("[GamePlay] state: "+W[this.state]+" => "+W[e]),this.state=e,e){case W.Playing:d.instance.requestServerTime(),S.instance.hide(y.Standby);break;case W.End:this.reset()}},o.initGame=function(e){console.log("[GamePlay] initGame"),this.mapManager.getMapData(e),this.mapManager.initGameMaps(),this.setState(W.Playing)},o.setCamera=function(e){this.camera.Player=e,g.emit(m.UpdateCamera)},o.netUpdate=function(e){this.state==W.Playing&&(w.instance.gameTime=e.gameTime,this.map.netUpdate(e),this.itemManager.netUpdate(e),this.itemSpecialManager.netUpdate(e),this.trapManager.netUpdate(e),this.meteorManager.netUpdate(e))},o.handlePlayerJoin=function(e){this.state==W.Playing&&this.playerManager.initPlayerJoin(e,this.map)},o.handlePlayerQuit=function(e){this.state==W.Playing&&this.map.removePlayer(e.uid)},o.end=function(){this.setState(W.End)},o.backClick=function(){d.instance.backFromeGameToLobby(),this.end()},o.reset=function(){console.log("[GamePlay] reset"),this.map.reset(),this._player=null,this.camera.Player=null,this.uiManager.reset(),this.mapManager.reset(),this.preX=-1,this.preY=-1},o.endPlayer=function(){var e=this;this.player.setHp(0),this.player.dead((function(){t.instance.playerManager.playerPool.put(e.player.node)}))},r(t,[{key:"player",get:function(){return this._player},set:function(e){this._player=e,this.setCamera(e.node)}},{key:"map",get:function(){return this.mapManager.map}}]),t}(u)).instance=null,R=t((O=V).prototype,"mapManager",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(O.prototype,"playerManager",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(O.prototype,"itemManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(O.prototype,"meteorManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(O.prototype,"itemSpecialManager",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(O.prototype,"trapManager",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(O.prototype,"uiManager",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(O.prototype,"camera",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(O.prototype,"ping",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=O))||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Shaking.ts","./GameEvent.ts","./GlobalDefine.ts","./MySprite.ts","./Utils.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./PlayerDead.ts","./MeteorDrop.ts","./MoneyChange.ts","./PlayerAttack.ts"],(function(e){"use strict";var t,n,o,i,a,l,r,c,u,s,b,y,h,d,f,p,g,m,M,G,w,E,v,D,B,L,C,S,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Label,c=e.Button,u=e.UIOpacity,s=e.Input,b=e.Vec3,y=e.tween,h=e.Color,d=e.Component},function(e){f=e.AudioMgr},function(e){p=e.Shaking},function(e){g=e.default},function(e){m=e.profile},function(e){M=e.MySprite},function(e){G=e.utils},function(e){w=e.GamePlayEventName,E=e.SoundName},function(e){v=e.GameDefine},function(e){D=e.GameMgr},function(e){B=e.GamePlay},function(e){L=e.PlayerDead},function(e){C=e.MeteorDrop},function(e){S=e.MoneyChange},function(e){N=e.PlayerAttack}],execute:function(){var T,U,k,O,z,A,H,P,_,R,I,F,x,j,W,V,Z,q,J,K,Q,X,Y,$,ee,te,ne,oe,ie,ae,le;a._RF.push({},"eb558Etau1CmpoyrjypGeO4","GameUIManager",void 0);var re=l.ccclass,ce=l.property;e("GameUIManager",(T=re("GameUIManager"),U=ce(M),k=ce(r),O=ce(r),z=ce(r),A=ce(L),H=ce(N),P=ce(S),_=ce(C),R=ce(r),I=ce(p),F=ce(c),x=ce(c),j=ce(u),W=ce(u),T((q=t((Z=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,o(t,"avatar",q,i(t)),o(t,"playerName",J,i(t)),o(t,"goldLabel",K,i(t)),o(t,"moneyLabel",Q,i(t)),o(t,"playerDead",X,i(t)),o(t,"playerAttack",Y,i(t)),o(t,"moneyChange",$,i(t)),o(t,"meteorDrop",ee,i(t)),o(t,"notificationLabel",te,i(t)),o(t,"cameraShaking",ne,i(t)),t.goldBalance=0,t.moneyBalance=0,t.currentGold=0,t.currentMoney=0,t.tweenGoldEffect=null,t.tweenMoneyEffect=null,t.tweenNotification=null,o(t,"buttonMoney",oe,i(t)),o(t,"buttonGold",ie,i(t)),o(t,"bubbleMoney",ae,i(t)),o(t,"bubbleGold",le,i(t)),t.tweenBubbleMoney=null,t.tweenBubbleGold=null,t}n(t,e);var a=t.prototype;return a.start=function(){this.avatar.FetchAvatar(m.avatar),this.playerName.string=G.trimName(m.UserName,2),g.on(w.UpdateGoldBalance,this.updateGoldBalance.bind(this)),g.on(w.UpdateMoneyBalance,this.updateMoneyBalance.bind(this)),g.on(w.UpdatePlayerFREEZE,this.playerFreeze.bind(this)),g.on(w.UpdatePlayerStopAttack,this.playerStopAtack.bind(this)),g.on(w.UpdateMoneyChange,this.updateMoneyChange.bind(this)),g.on(w.UpdateMeteorDrop,this.updateMeteorDrop.bind(this)),g.on(w.OnNotify,this.onNotification.bind(this)),g.on(w.CameraShaking,this.onCameraShaking.bind(this)),this.initButtonDesc()},a.onCameraShaking=function(){this.cameraShaking.startShaking()},a.initButtonDesc=function(){this.buttonGold.node.on(s.EventType.TOUCH_START,this.onShowGoldDesc,this),this.buttonGold.node.on(s.EventType.TOUCH_END,this.onHideGoldDesc,this),this.buttonGold.node.on(s.EventType.TOUCH_CANCEL,this.onHideGoldDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_START,this.onShowMoneyDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_END,this.onHideMoneyDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_CANCEL,this.onHideMoneyDesc,this)},a.playerFreeze=function(e){var t=this;setTimeout((function(){D.instance.isPlaying&&t.playerDead.onDead(e)}),300)},a.playerStopAtack=function(e){this.playerAttack.stopAttack(e)},a.updateMoneyChange=function(e){this.moneyChange.setEndTime(e)},a.updateMeteorDrop=function(){this.meteorDrop.setTime(3,1.9)},a.updateGoldBalance=function(e){var t=this;this.goldBalance!=e&&(this.goldBalance<e?(this.goldLabel.color=v.GREEN_COLOR,B.instance.player.earnMoneyEffect(),f.instance.PlaySfx(E.CollectGold)):this.goldLabel.color=v.RED_COLOR,this.goldBalance=e,this.tweenGoldEffect&&(this.tweenGoldEffect.stop(),this.tweenGoldEffect=null),this.goldLabel.node.parent.setScale(new b(1.1,1.1)),this.tweenGoldEffect=y({gold:this.currentGold}).delay(.5).to(.3,{gold:e},{onUpdate:function(e,n){var o=Math.round(e.gold);t.currentGold!=o&&(t.currentGold=o,t.goldLabel.string=t.currentGold.toString())}}).delay(.1).call((function(){t.tweenGoldEffect=null,t.goldLabel.color=h.WHITE,t.goldLabel.node.parent.setScale(b.ONE)})).start())},a.updateMoneyBalance=function(e){var t=this;this.moneyBalance!=e&&(this.moneyBalance<e?this.moneyLabel.color=v.GREEN_COLOR:this.moneyLabel.color=v.RED_COLOR,this.moneyBalance=e,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new b(1.1,1.1)),this.tweenMoneyEffect=y({money:this.currentMoney}).delay(.5).to(.3,{money:e},{onUpdate:function(e,n){var o=Math.round(e.money);t.currentMoney!=o&&(t.currentMoney=o,t.moneyLabel.string=G.formatScore(t.currentMoney),f.instance.PlaySfx(E.ExchangeMoney))}}).delay(.1).call((function(){t.tweenMoneyEffect=null,t.moneyLabel.color=h.WHITE,t.moneyLabel.node.parent.setScale(b.ONE)})).start())},a.onNotification=function(e,t){var n=this;void 0===t&&(t=3),this.notificationLabel.node.active=!0,this.notificationLabel.string=e,this.tweenNotification&&(this.tweenNotification.stop(),this.tweenNotification=null),this.tweenNotification=y({opacity:255}).to(t,{opacity:0},{onUpdate:function(e,t){var o=n.notificationLabel.color;n.notificationLabel.color=new h(o.r,o.g,o.b,e.opacity)},easing:"sineIn"}).call((function(){n.notificationLabel.node.active=!1,n.tweenNotification=null})).start()},a.reset=function(){this.goldLabel.string="0",this.moneyLabel.string="0",this.goldBalance=0,this.moneyBalance=0,this.currentGold=0,this.currentMoney=0,this.playerAttack.reset(),this.playerDead.reset(),this.moneyChange.reset()},a.onShowMoneyDesc=function(){this.tweenBubbleMoney&&this.tweenBubbleMoney.stop(),this.tweenBubbleMoney=null,this.bubbleMoney.node.active=!0,this.bubbleMoney.opacity=255,this.bubbleGold.node.active=!1},a.onHideMoneyDesc=function(){var e=this;this.tweenBubbleMoney=null,this.tweenBubbleMoney=y(this.bubbleMoney).to(2.5,{opacity:0}).call((function(){e.tweenBubbleMoney=null,e.bubbleMoney.node.active=!1})).start()},a.onShowGoldDesc=function(){this.tweenBubbleGold&&this.tweenBubbleGold.stop(),this.tweenBubbleGold=null,this.bubbleGold.node.active=!0,this.bubbleGold.opacity=255,this.bubbleMoney.node.active=!1},a.onHideGoldDesc=function(){var e=this;this.tweenBubbleGold=null,this.tweenBubbleGold=y(this.bubbleGold).to(2.5,{opacity:0}).call((function(){e.tweenBubbleGold=null,e.bubbleGold.node.active=!1})).start()},t}(d)).prototype,"avatar",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Z.prototype,"playerName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(Z.prototype,"goldLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(Z.prototype,"moneyLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(Z.prototype,"playerDead",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(Z.prototype,"playerAttack",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Z.prototype,"moneyChange",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Z.prototype,"meteorDrop",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Z.prototype,"notificationLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(Z.prototype,"cameraShaking",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(Z.prototype,"buttonMoney",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(Z.prototype,"buttonGold",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Z.prototype,"bubbleMoney",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Z.prototype,"bubbleGold",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=Z))||V));a._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Profile.ts","./MaxApiUtils2.ts"],(function(e){"use strict";var n,t,i,r,o,a,c;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator},function(e){i=e.cclegacy,r=e.log},function(e){o=e.Profile},function(e){a=e.maxApiUtils,c=e.MaxApiName}],execute:function(){var u;e("DevicePerformance",void 0),i._RF.push({},"bd878PhQoVBopiCOx304mmp","GlobalDefine",void 0),function(e){e.LowEnd="low-end",e.MideEnd="mid-end",e.HighEnd="high-end"}(u||(u=e("DevicePerformance",{})));var f=e("globalDefine",new(function(){function e(){this.deviceInfo=void 0,this.feature=void 0,this.profile=new o,this.init()}var i=e.prototype;return i.init=function(){var e=t(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.request(c.getDeviceInfo).then((function(e){n.deviceInfo=e,r("[globalDefine] getDeviceInfo: ",e)})),this.getGameParams().then((function(e){n.feature=e,r("[globalDefine] getGameParams: ",e)})),e.next=4,this.profile.init();case 4:r("[globalDefine] Init done.....");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getGameParams=function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var t=localStorage.getItem("feature"),i=JSON.parse(t);i&&i.feature?e(i.feature):e(null)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(e,[{key:"osPlatform",get:function(){return"apple"==this.deviceInfo.deviceManufacturer.toLocaleLowerCase()?"ios":"android"}},{key:"isIOS",get:function(){return"ios"==this.osPlatform}},{key:"env",get:function(){return this.deviceInfo.isDev?"dev":"prod"}},{key:"isLowEndDevice",get:function(){return!!this.deviceInfo&&this.deviceInfo.devicePerformance==u.LowEnd}},{key:"isHighEndDevice",get:function(){return!!this.deviceInfo&&this.deviceInfo.devicePerformance==u.HighEnd}}]),e}()));e("profile",f.profile);i._RF.pop()}}}));

System.register("chunks:///_virtual/ImageCache.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,u;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,r=e.SpriteFrame,a=e.sys,i=e.ImageAsset,u=e.Texture2D}],execute:function(){n._RF.push({},"36400DoKO9IurGOTW+nfKD5","ImageCache",void 0);e("default",new(function(){var e=n.prototype;function n(){this.canvas=void 0,this.context=void 0,this.images=new Map,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return e.get=function(e){return this.images.get(e)},e.request=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=0),t&&""!=t){e.next=3;break}return e.abrupt("return",null);case 3:if(t=t.replace("img.mservice.io","atc-edge03.mservice.com.vn"),i=this.images.get(t)){e.next=17;break}return u=null,s=t,a.isNative,e.next=11,this.getRemoteTextureImage(t);case 11:if(u=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:(i=new r).texture=u,this.images.set(s,i);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.requestAvatar=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.request(n,256));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.clear=function(){this.images.clear()},e.getRemoteTextureImage=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var t=new i(r),n=new u;n.image=t,e(n)},r.onerror=function(){e(null)},r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.resizeImage=function(e,t){var n=this;return void 0===t&&(t=128),new Promise((function(r,a){var i=new Image;i.crossOrigin="anonymous",i.onload=function(){var e=i.height/i.width;n.canvas.width=t*e,n.canvas.height=t,n.context.drawImage(i,0,0,n.canvas.width,n.canvas.height),r(n.canvas.toDataURL())},i.onerror=function(){r(e)},i.src=e}))},n}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/Input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts"],(function(t){"use strict";var n,o,e,s,i,c,a,h;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,s=t._decorator,i=t.Vec2,c=t.Node,a=t.Component},function(t){h=t.TouchState}],execute:function(){var u,r;e._RF.push({},"0e413Vz005IYIfIPMIFSklJ","Input",void 0);var p=s.ccclass;s.property,t("Input",p("Input")(((r=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this).state=h.None,n.isTouchDown=!1,n.downPosition=new i,n.position=new i,n.delta=new i,n}n(e,t);var s=e.prototype;return s.onLoad=function(){e.instance=this,this.node.on(c.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},s.lateUpdate=function(){this.state==h.Down?this.state=h.Press:this.state==h.Up&&(this.state=h.None,this.delta.set(0,0))},s.onTouchBegan=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.downPosition=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Down,this.StopPropagation(t)},s.onTouchEnded=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchCancelled=function(t){this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchMove=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Press,this.StopPropagation(t)},s.reset=function(){this.state=h.None,this.delta.set(0,0)},s.StopPropagation=function(t){},e.Reset=function(){e.instance.reset()},o(e,null,[{key:"Instance",get:function(){return e.instance}},{key:"State",get:function(){return e.instance.state}},{key:"IsTouchDown",get:function(){return e.instance.state==h.Down}},{key:"IsTouchUp",get:function(){return e.instance.state==h.Up}},{key:"IsTouchMove",get:function(){return e.instance.state==h.Press}},{key:"IsTouchNone",get:function(){return e.instance.state==h.None}}]),e}(a)).instance=null,u=r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,c,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Sprite,c=t.tween,l=t.Vec3,u=t.Component},function(t){p=t.GamePlay}],execute:function(){var d,m,h,y,f;r._RF.push({},"30205GJNRRJY64cYiDjQ65b","Item",void 0);var g=s.ccclass,v=s.property;t("Item",(d=g("Item"),m=v(a),d((f=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"model",f,o(e)),e.destroying=!1,e}i(e,t);var r=e.prototype;return r.setInfo=function(t,e){this.model.spriteFrame=t,this.destroying=!1},r.destroyItem=function(t){var e=this;if(void 0===t&&(t=!1),1!=this.destroying){this.destroying=!0;var i=null;t?(this.node.active&&(i=c(this.node).parallel(c(this.node).by(.5,{position:new l(0,150)}),c(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){i&&i.stop(),p.instance.itemManager.itemPool.put(e.node)}),500)):p.instance.itemManager.itemPool.put(this.node)}},e}(u)).prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts","./Item.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,m,c,u,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Prefab,m=e.SpriteFrame,c=e.NodePool,u=e.instantiate,l=e.Component},function(e){p=e.GamePlay},function(e){f=e.Item}],execute:function(){var d,g,P,h,I,b,v;a._RF.push({},"2b1b9aACPxPRLBtUFqGKDcS","ItemManager",void 0);var y=o.ccclass,F=o.property;e("ItemManager",(d=y("ItemManager"),g=F(s),P=F(m),d((b=t((I=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"itemPrefab",b,r(t)),n(t,"itemSpriteFrames",v,r(t)),t.itemPool=new c,t}i(t,e);var a=t.prototype;return a.onLoad=function(){for(var e=0;e<10;e++)this.itemPool.put(u(this.itemPrefab))},a.initItem=function(e,t,i,n){void 0===i&&(i=null);var r=this.getItem();r.active=!1,r.setPosition(i),r.name=e.id.toString(),t.addItem(r),r.getComponent(f).setInfo(this.getItemSpriteFrame(e.value),e.id),r.active=!0},a.netUpdate=function(e){e.dungeon.goldPieces.forEach((function(e){p.instance.mapManager.findAndAddItem(e)})),p.instance.mapManager.findAndRemoveItems(e.dungeon.goldPieces)},a.getItemSpriteFrame=function(e){return 1==e?this.itemSpriteFrames[0]:2==e?this.itemSpriteFrames[1]:this.itemSpriteFrames[2]},a.getItem=function(){return this.itemPool.size()>0?this.itemPool.get():u(this.itemPrefab)},t}(l)).prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(I.prototype,"itemSpriteFrames",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=I))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,c,l,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Sprite,c=e.tween,l=e.Vec3,p=e.Component},function(e){u=e.GamePlay}],execute:function(){var d,m,f,h,y;r._RF.push({},"c5c424fnnFOCKoLo1WxNSRB","ItemSpecial",void 0);var g=a.ccclass,v=a.property;e("ItemSpecial",(d=g("ItemSpecial"),m=v(s),d((y=t((h=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"model",y,o(t)),t.destroying=!1,t}i(t,e);var r=t.prototype;return r.setInfo=function(e){this.model.spriteFrame=e,this.destroying=!1},r.destroyItem=function(e){var t=this;if(void 0===e&&(e=!1),1!=this.destroying){this.destroying=!0;var i=null;e?(this.node.active&&(i=c(this.node).parallel(c(this.node).by(.5,{position:new l(0,150)}),c(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){i&&i.stop(),u.instance.itemSpecialManager.itemSpecialPool.put(t.node)}),500)):u.instance.itemSpecialManager.itemSpecialPool.put(this.node)}},t}(p)).prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts","./ItemSpecial.ts"],(function(e){"use strict";var t,i,a,n,r,o,c,p,l,m,s,u,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Prefab,p=e.SpriteFrame,l=e.NodePool,m=e.instantiate,s=e.Component},function(e){u=e.GamePlay},function(e){S=e.ItemSpecial}],execute:function(){var f,g,d,h,I,P,N;r._RF.push({},"eefe5Ij3/BJ4pgCUN07oo82","ItemSpecialManager",void 0);var _=o.ccclass,v=o.property;e("ItemSpecialManager",(f=_("ItemSpecialManager"),g=v(c),d=v(p),f((P=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"itemSpecialPrefab",P,n(t)),a(t,"itemSpecialSpriteFrames",N,n(t)),t.itemSpecialPool=new l,t}i(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<20;e++)this.itemSpecialPool.put(m(this.itemSpecialPrefab))},r.initItemSpecial=function(e,t,i,a){var n=this.getItemSpecial();n.active=!1,n.setPosition(i),n.name=e.id.toString(),t.addItemSpecial(n),n.getComponent(S).setInfo(this.getItemSpecialSpriteFrame(e.type)),n.active=!0},r.netUpdate=function(e){e.dungeon.items.forEach((function(e){u.instance.mapManager.findAndAndItemSpecial(e)})),u.instance.mapManager.findAndRemoveItemSpecials(e.dungeon.items)},r.getItemSpecialSpriteFrame=function(e){return e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST?this.itemSpecialSpriteFrames[0]:e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_HEAL_POTION?this.itemSpecialSpriteFrames[1]:void 0},r.getItemSpecial=function(){return this.itemSpecialPool.size()>0?this.itemSpecialPool.get():m(this.itemSpecialPrefab)},t}(s)).prototype,"itemSpecialPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(I.prototype,"itemSpecialSpriteFrames",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=I))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Input.ts"],(function(t){"use strict";var e,i,n,s,o,r,c,a,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Node,a=t.Vec3,p=t.UITransform,l=t.Component},function(t){u=t.Input}],execute:function(){var h,d,m,f,y;o._RF.push({},"5c332ws8gtKmLamvSRyIAJr","Joystick",void 0);var v=r.ccclass,I=r.property;t("Joystick",(h=v("Joystick"),d=I(c),h((y=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"middle",y,s(e)),e.radius=200,e.direction=new a,e.tempV3=new a,e}i(e,t);var o=e.prototype;return o.start=function(){this.radius=this.getComponent(p).contentSize.width/2},o.update=function(){if(u.IsTouchUp)this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset();else if(u.IsTouchMove){var t=Math.min(u.Instance.delta.length(),this.radius);this.tempV3.set(u.Instance.delta.x,u.Instance.delta.y,0),this.tempV3.normalize(),this.tempV3.multiplyScalar(t),this.middle.position=this.tempV3}},o.reset=function(){this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset()},e}(l)).prototype,"middle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./TextDefine.ts","./MaxApiUtils.ts","./PopupConfig.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var n,i,e,o,r,a,c,s,l,u,p,d,h,f,g,m,b,y,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,s=t.UIOpacity,l=t.Button,u=t.Vec3,p=t.tween,d=t.UITransform},function(t){h=t.GameDefine,f=t.ScreenName},function(t){g=t.LostConnectionPopupText},function(t){m=t.default},function(t){b=t.PopupConfig},function(t){y=t.Screen},function(t){w=t.ScreenMgr}],execute:function(){var L,z,v,S,E,T,D,C,A,x,O,P,j,k,B,F,M,N,R;r._RF.push({},"c940for3pBF+YmHZQPdRudK","Loading",void 0);var _=a.ccclass,G=a.property;t("Loading",(L=_("Loading"),z=G(c),v=G(c),S=G(c),E=G(c),T=G(c),D=G(c),C=G(s),A=G(l),L((P=n((O=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=t.call.apply(t,[this].concat(r))||this).timeLoading=0,n.isDone=!1,n.isLoadingFalse=!1,n.maxTimeLoading=50,e(n,"zoom",P,o(n)),e(n,"bgEffect",j,o(n)),e(n,"objectContainer",k,o(n)),e(n,"door",B,o(n)),e(n,"ghosts",F,o(n)),e(n,"lights",M,o(n)),e(n,"whiteScreen",N,o(n)),e(n,"backButton",R,o(n)),n}i(n,t);var r=n.prototype;return r.hide=function(){this.isDone=!0,this.onDone()},r.start=function(){this.init(),this.zoomToDoor()},r.update=function(t){if(!this.isDone&&!this.isLoadingFalse&&(this.timeLoading+=t,this.timeLoading>=this.maxTimeLoading)){this.isLoadingFalse=!0;var n=new g,i=b.Show(n);null==i||i.SetTypeOk((function(){m.closeGame()}))}},r.onDone=function(){this.openDoor()},r.init=function(){this.zoom.setPosition(u.ZERO),this.zoom.setScale(u.ONE),this.backButton.node.on("click",(function(){m.closeGame()}),this)},r.zoomToDoor=function(){var t=new u(2,2,2),n=new u(-50,800);p(this.zoom).delay(h.timeAppearLoading).to(h.timeEndLoading,{scale:t,position:n}).start(),p(this.bgEffect).delay(h.timeAppearLoading).to(h.timeEndLoading,{scale:new u(.5,.5),position:new u(25,-400)}).start(),this.moveObjectsToSide()},r.moveObjectsToSide=function(){var t=[];this.addChildrenToArray(this.objectContainer,t),t.sort((function(t,n){return n.position.y-t.position.y}));var n=this.node.getComponent(d).contentSize;t.forEach((function(t,i){var e=t.getComponent(d),o=n.width/2+50;t.position.x<0?(o*=-1,e.setAnchorPoint(1,.5)):e.setAnchorPoint(0,.5);var r=new u(o,t.position.y);p(t).delay(h.timeAppearLoading).to(.2*(i+1),{position:r}).start()}))},r.addChildrenToArray=function(t,n){var i=this;0==t.children.length?n.push(t):t.children.forEach((function(t){i.addChildrenToArray(t,n)}))},r.tweenObjectToSize=function(t,n){var i=this,e=t.getComponent(d).contentSize.width;t.position.x<0&&(e*=-1);var o=new u(t.position.x+e,t.position.y);0==t.children.length?p(t).to(h.timeAppearLoading*(n+1),{position:o}).start():t.children.forEach((function(t,n){i.tweenObjectToSize(t,n)}))},r.openDoor=function(){var n=this,i=this.door.children[0],e=this.door.children[1];p(i).to(h.timeEndLoading,{scale:new u(0,1,1)}).start(),p(e).to(h.timeEndLoading,{scale:new u(0,1,1)}).start(),this.lights.children.forEach((function(t){p(t).to(h.timeEndLoading,{scale:u.ONE}).start()})),p(this.whiteScreen).to(h.timeEndLoading,{opacity:255}).call((function(){w.instance.show(f.Menu),t.prototype.hide.call(n)})).start()},n}(y)).prototype,"zoom",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(O.prototype,"bgEffect",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(O.prototype,"objectContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(O.prototype,"door",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(O.prototype,"ghosts",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(O.prototype,"lights",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(O.prototype,"whiteScreen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(O.prototype,"backButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=O))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/LostHpEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameMgr.ts"],(function(t){"use strict";var e,i,n,o,c,a,r,s,f,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,r=t.UIOpacity,s=t.tween,f=t.Component},function(t){p=t.default},function(t){l=t.GamePlayEventName},function(t){u=t.GameMgr}],execute:function(){var y,h,E,v,d;c._RF.push({},"14da0iCYJRPBZhIbpbSJ0xX","LostHpEffect",void 0);var m=a.ccclass,w=a.property;t("LostHpEffect",(y=m("LostHpEffect"),h=w(r),y((d=e((v=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,n(e,"opacity",d,o(e)),e.tweenEffect=null,e}i(e,t);var c=e.prototype;return c.start=function(){this.node.active=!1,u.instance.isOptimizeForPerformance||p.on(l.LostHp,this.startEffect,this)},c.startEffect=function(){var t=this;this.node.active=!0,this.tweenEffect&&(this.tweenEffect.stop(),this.tweenEffect=null),this.tweenEffect=s(this.opacity).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).call((function(){t.tweenEffect=null,t.node.active=!1})).start()},e}(f)).prototype,"opacity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=v))||E));c._RF.pop()}}}));

System.register("chunks:///_virtual/MagmaCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,l,o,s,u,c,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.SpriteFrame,s=e.Animation,u=e.Vec3,c=e.Sprite,p=e.tween,m=e.Component}],execute:function(){var h,f,g,d,y,w,C;a._RF.push({},"149b21G4XtJAopzNOabkBf1","MagmaCell",void 0);var M=l.ccclass,b=l.property;e("MagmaCell",(h=M("MagmaCell"),f=b(o),g=b(s),h((w=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"defaultSpriteFrame",w,n(t)),i(t,"animController",C,n(t)),t.tweenMagma=null,t.isUsed=!1,t}r(t,e);var a=t.prototype;return a.reset=function(){this.isUsed&&(this.isUsed=!1,this.node.scale=new u(1,1,1),this.animController.stop(),this.tweenMagma&&(this.tweenMagma.stop(),this.tweenMagma=null),this.getComponent(c).spriteFrame=this.defaultSpriteFrame)},a.startMagma=function(e){var t=this;this.isUsed=!0,this.node.scale=new u(.5,.5,0),this.animController.play(),this.tweenMagma=p(this.node).delay(e).call((function(){t.animController.play()})).union().repeatForever().start()},t}(m)).prototype,"defaultSpriteFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"animController",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./MaxApiUtils2.ts","./AudioMgr.ts","./GameEvent.ts","./GlobalDefine.ts","./ImageCache.ts","./MyButton.ts","./MySprite.ts","./ApiMock.ts","./GameApi.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./NetworkMgr.ts","./PerformanceTracking.ts","./TimeMgr.ts","./Random.ts","./RemoteImage.ts","./SpineRemote.ts","./TrimBase64.ts","./Utils.ts","./Meteor.ts","./Shaking.ts","./SpawnMeteor.ts","./CameraFollow.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts","./Item.ts","./ItemSpecial.ts","./Joystick.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObjectInterface.ts","./ObstacleCell.ts","./Player.ts","./PlayerDead.ts","./Profile.ts","./TextDefine.ts","./Trap.ts","./LostHpEffect.ts","./ShadowEffect.ts","./ItemManager.ts","./ItemSpecialManager.ts","./MapManager.ts","./MeteorManager.ts","./PlayerManager.ts","./TrapManager.ts","./MeteorDrop.ts","./MoneyChange.ts","./PlayerAttack.ts","./GameUIManager.ts","./MaxApiUtils.ts","./a-protobuf.ts","./patchproto.mjs_cjs=&original=.js","./phoenix.mjs_cjs=&original=.js","./Popup.ts","./PopupConfig.ts","./PopupMgr.ts","./FakeCharacter.ts","./MainPlayer.ts","./SwipePart.ts","./Loading.ts","./Menu.ts","./RankCell.ts","./Ranking.ts","./Result.ts","./Screen.ts","./ScreenMgr.ts","./Standby.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Define.ts","./Menu.ts"],(function(t){"use strict";var i,e,n,o,a,l,s,r,u,c,h,d,f,v,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,s=t.Node,r=t.sp,u=t.UIOpacity,c=t.tween,h=t.Vec3,d=t.Component},function(t){f=t.AudioMgr},function(t){v=t.SoundName},function(t){m=t.State}],execute:function(){var p,y,g,w,M,D,A,P,C;a._RF.push({},"72a42P14qFJi5I6jgpBusDg","MainPlayer",void 0);var b=l.ccclass,I=l.property;t("MainPlayer",(p=b("MainPlayer"),y=I(s),g=I(r.Skeleton),w=I(u),p((A=i((D=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return i=t.call.apply(t,[this].concat(a))||this,n(i,"model",A,o(i)),n(i,"animation",P,o(i)),n(i,"uiOpacity",C,o(i)),i.tweenMove=null,i.timeChangeDirectionModel=.2,i.tweenChangeDirectionModel1=null,i.tweenChangeDirectionModel2=null,i.direction=1,i.state=m.Farmer,i.tweenDissovle=null,i.mat=void 0,i.originPosition=void 0,i}e(i,t);var a=i.prototype;return a.start=function(){var t=this;this.mat=this.animation.customMaterial,setTimeout((function(){t.originPosition=t.node.position.clone()}),500)},a.changeDriectionModel=function(){var t=this,i=this.direction;if(i>0){if(1==this.model.scale.x)return;if(this.tweenChangeDirectionModel1)return;this.tweenChangeDirectionModel1=c(this.model).to(this.timeChangeDirectionModel,{scale:new h(1,1,0)}).call((function(){t.tweenChangeDirectionModel1=null})).start()}else if(i<0){if(-1==this.model.scale.x)return;if(this.tweenChangeDirectionModel2)return;this.tweenChangeDirectionModel2=c(this.model).to(this.timeChangeDirectionModel,{scale:new h(-1,1,0)}).call((function(){t.tweenChangeDirectionModel2=null})).start()}},a.getAnimationName=function(t,i){var e="";return i&&(e="_up"),(this.state==m.Hunter?"enemy_":"character_")+t+e},a.playIdleAnimaton=function(t){void 0===t&&(t=!1),this.playAnimation("idle",t)},a.playRunAnimation=function(t){void 0===t&&(t=!1),this.playAnimation("run",t)},a.playAnimation=function(t,i){t=this.getAnimationName(t,i),this.animation.animation!=t&&this.animation.setAnimation(0,t,!0)},a.setPositionMainPlayer=function(t){var i=this;this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tweenMove=c(this.node).to(.1,{position:t}).call((function(){i.tweenMove=null})).start()},a.move=function(t){this.direction=t,this.playRunAnimation(),this.changeDriectionModel()},a.endMove=function(){this.playIdleAnimaton()},a.setState=function(t,i){void 0===i&&(i=null),this.playIdleAnimaton(),t!=m.Ranking&&this.state!=t?(this.state=t,this.changeStateEffect(i)):i&&i()},a.changeStateEffect=function(t){var i=this;void 0===t&&(t=null),this.dissovle((function(){i.playIdleAnimaton(),i.undissovle(t)}))},a.dissovle=function(t){var i=this;void 0===t&&(t=null),this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=c({value:0}).to(.25,{value:1},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,t&&t()})).start()},a.undissovle=function(t){var i=this;void 0===t&&(t=null),this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=c({value:1}).to(.25,{value:0},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,t&&t()})).start()},a.goToGate=function(t,i){void 0===i&&(i=null),this.playAnimation("run",!0);c(this.node).to(1,{scale:new h(.7,.7),worldPosition:t}).call((function(){i&&i()})).start(),setTimeout((function(){f.instance.PlaySfx(v.MeteorFalling)}),500),c(this.uiOpacity).delay(.5).to(.5,{opacity:0},{easing:"linear"}).start()},a.reset=function(){this.playIdleAnimaton(),this.uiOpacity.opacity=255,this.node.scale=h.ONE,this.originPosition&&(this.node.position=this.originPosition.clone())},i}(d)).prototype,"model",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(D.prototype,"animation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(D.prototype,"uiOpacity",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=D))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./GlobalDefine.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./Item.ts","./ItemSpecial.ts","./Player.ts","./Trap.ts"],(function(e){"use strict";var t,n,i,o,r,a,l,s,c,m,u,p,d,f,h,C,y,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.Vec3,c=e.Component},function(e){m=e.default},function(e){u=e.profile},function(e){p=e.GamePlayEventName},function(e){d=e.GameDefine},function(e){f=e.GamePlay},function(e){h=e.Item},function(e){C=e.ItemSpecial},function(e){y=e.Player},function(e){P=e.Trap}],execute:function(){var g,v,E,M,T,b,A,I,_,U,F,S,R,N,z,B,w,G,L;r._RF.push({},"da5a0M5cCNC6Jf2+fAilgOQ","Map",void 0);var Y=a.ccclass,K=a.property;e("Map",(g=Y("Map"),v=K(l),E=K(l),M=K(l),T=K(l),b=K(l),A=K(l),I=K(l),_=K(l),g((S=t((F=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"cellContainer",S,o(t)),i(t,"obstacleContainer",R,o(t)),i(t,"magmaContainer",N,o(t)),i(t,"itemContainer",z,o(t)),i(t,"playerContainer",B,o(t)),i(t,"meteorContainer",w,o(t)),i(t,"itemSpecialContainer",G,o(t)),i(t,"trapContainer",L,o(t)),t}n(t,e);var r=t.prototype;return r.setPosition=function(e){this.node.position=e,this.cellContainer.position=e,this.itemContainer.position=e,this.playerContainer.position=e,this.obstacleContainer.position=e,this.meteorContainer.position=e,this.itemSpecialContainer.position=e,this.trapContainer.position=e,this.magmaContainer.position=e},r.netUpdate=function(e){var t=this;e.players.forEach((function(e){var n=t.findPlayer(e.uid);if(n){var i=n.getComponent(y);if(e.uid==u.Uid)m.emit(p.UpdateGoldBalance,e.gold),m.emit(p.UpdateMoneyBalance,e.money),i.setPositionFromServer(e.x*d.instance.cellUnit,e.y*d.instance.cellUnit);else{var o=new s(e.x*d.instance.cellUnit,e.y*d.instance.cellUnit,0),r=f.instance.mapManager.convertPositionToPlayerViewPosition(o);r?i.setPositionFromServer(r.x,r.y):(i.isJoinMap=!1,i.node.active=!1)}i.setHp(e.healPoint);var a=e.effects,l=!1;a.length>0&&a.forEach((function(t){t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FREEZE&&(e.uid==u.Uid&&m.emit(p.UpdatePlayerFREEZE,t.end),l=!0,i.setFrezze(!0)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_STOP_ATTACK&&(e.uid==u.Uid&&m.emit(p.UpdatePlayerStopAttack,t.end),i.setAttack(t.end)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FARMER_MONEY_CHANGE&&e.uid==u.Uid&&m.emit(p.UpdateMoneyChange,t.end),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_HUNTER_MONEY_CHANGE&&e.uid==u.Uid&&m.emit(p.UpdateMoneyChange,t.end)})),l||i.setFrezze(!1)}}))},r.addCell=function(e){e.setParent(this.cellContainer)},r.removeAllCells=function(){this.putChildToPool(this.cellContainer.children,f.instance.mapManager.mapCellPool)},r.addMagma=function(e){e.setParent(this.magmaContainer)},r.removeAllMagmas=function(){this.putChildToPool(this.magmaContainer.children,f.instance.mapManager.magmaPool)},r.addObstacle=function(e){e.setParent(this.obstacleContainer)},r.removeAllObstacles=function(){this.putChildToPool(this.obstacleContainer.children,f.instance.mapManager.obstaclePool)},r.addPlayer=function(e){this.findPlayer(e.name)||e.setParent(this.playerContainer)},r.findPlayer=function(e){return this.playerContainer.getChildByName(e)},r.getPlayers=function(){return this.playerContainer.children.filter((function(e){return e.name!=u.Uid}))},r.removePlayer=function(e){var t=this.findPlayer(e);t&&t.getComponent(y).dead((function(){f.instance.playerManager.playerPool.put(t)}))},r.removeAllPlayers=function(){this.putChildToPool(this.playerContainer.children,f.instance.playerManager.playerPool)},r.addItem=function(e){this.findItem(e.name)||this.itemContainer.addChild(e)},r.findItem=function(e){return this.itemContainer.getChildByName(e)},r.removeItem=function(e,t){void 0===t&&(t=!1),e.getComponent(h).destroyItem(t)},r.removeItemById=function(e,t){void 0===t&&(t=!1);var n=this.findItem(e);n&&n.getComponent(h).destroyItem(t)},r.removeAllItems=function(){this.putChildToPool(this.itemContainer.children,f.instance.itemManager.itemPool)},r.addMeteor=function(e){this.findMeteor(e.name)||this.meteorContainer.addChild(e)},r.findMeteor=function(e){return this.meteorContainer.getChildByName(e)},r.getMeteors=function(){return this.meteorContainer.children},r.removeMeteor=function(e){f.instance.meteorManager.meteorPool.put(e)},r.removeMeteorById=function(e){var t=this.findMeteor(e);t&&f.instance.meteorManager.meteorPool.put(t)},r.removeAllMeteors=function(){this.putChildToPool(this.meteorContainer.children,f.instance.meteorManager.meteorPool)},r.addItemSpecial=function(e){this.findSpecialItem(e.name)||this.itemSpecialContainer.addChild(e)},r.getSpecialItems=function(){return this.itemSpecialContainer.children},r.findSpecialItem=function(e){return this.itemSpecialContainer.getChildByName(e)},r.removeSpecialItem=function(e,t){void 0===t&&(t=!1),e.getComponent(C).destroyItem(t)},r.removeSpecialItemById=function(e,t){void 0===t&&(t=!1);var n=this.findSpecialItem(e);n&&n.getComponent(C).destroyItem(t)},r.removeAllSpecialItems=function(){this.putChildToPool(this.itemSpecialContainer.children,f.instance.itemSpecialManager.itemSpecialPool)},r.addTrap=function(e){this.findTrap(e.name)||this.trapContainer.addChild(e)},r.getTraps=function(){return this.trapContainer.children},r.findTrap=function(e){return this.trapContainer.getChildByName(e)},r.removeTrap=function(e,t){void 0===t&&(t=!1),e.getComponent(P).destroyTrap(t)},r.removeTrapById=function(e,t){void 0===t&&(t=!1);var n=this.findTrap(e);n&&n.getComponent(P).destroyTrap(t)},r.removeAllTraps=function(){this.putChildToPool(this.trapContainer.children,f.instance.trapManager.trapPool)},r.reset=function(){this.removeAllPlayers(),this.removeAllItems(),this.removeAllCells(),this.removeAllMagmas(),this.removeAllObstacles(),this.removeAllMeteors(),this.removeAllSpecialItems(),this.removeAllTraps()},r.putChildToPool=function(e,t){if(0!=e.length)for(;e.length>0;)t.put(e[0])},t}(c)).prototype,"cellContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"obstacleContainer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(F.prototype,"magmaContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(F.prototype,"itemContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"playerContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(F.prototype,"meteorContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(F.prototype,"itemSpecialContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"trapContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=F))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/MapCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,s,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Sprite,a=e.Component}],execute:function(){var c,p,u,f,h;o._RF.push({},"4e102X4SVVAMZn3gGGGj4cg","MapCell",void 0);var y=s.ccclass,g=s.property;e("MapCell",(c=y("MapCell"),p=g(l),c((h=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"sprite",h,n(t)),t}r(t,e);var o=t.prototype;return o.setSprite=function(e){this.sprite.spriteFrame=e},o.setPosition=function(e,t,r,i){this.node.setPosition(e)},t}(a)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./Random.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObjectInterface.ts","./ObstacleCell.ts","./Player.ts"],(function(t){"use strict";var e,i,a,n,o,r,l,s,c,h,p,m,u,v,d,g,M,f,y,x,T,P,C,D,b,I,w,S,O,H,U,W,R,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Prefab,c=t.SpriteFrame,h=t.Vec3,p=t.NodePool,m=t.instantiate,u=t.Vec2,v=t.Component},function(t){d=t.profile},function(t){g=t.Random},function(t){M=t.TileType},function(t){f=t.GameDefine},function(t){y=t.GamePlay},function(t){x=t.MagmaCell},function(t){T=t.Map},function(t){P=t.MapCell},function(t){C=t.obstacle,D=t.itemObject,b=t.itemTile,I=t.itemSpecialObject,w=t.itemSpecialTile,S=t.trapObject,O=t.trapTile,H=t.playerObject,U=t.playerTile,W=t.ObjectType},function(t){R=t.ObstacleCell},function(t){L=t.Player}],execute:function(){var X,Y,E,F,j,k,V,z,B,A,G,_,Z,J,K;r._RF.push({},"61d00j1azxKTbdcfzwpXVLk","MapManager",void 0);var N=l.ccclass,q=l.property;t("MapManager",(X=N("MapManager"),Y=q(T),E=q(s),F=q(s),j=q(s),k=q(c),V=q(c),X((A=e((B=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"map",A,n(e)),a(e,"mapCell",G,n(e)),a(e,"magmaCell",_,n(e)),a(e,"obstacleCell",Z,n(e)),a(e,"tileSpriteFrames",J,n(e)),a(e,"obstacleSpriteFrames",K,n(e)),e.debug=!1,e.playerPosition=h.ZERO,e.mapData=void 0,e.magmaMapData=void 0,e.obstacleMapData=void 0,e.playerMapData=void 0,e.itemMapData=void 0,e.itemSpecialMapData=[],e.trapMapData=[],e.random=void 0,e.mapCellPool=new p,e.obstaclePool=new p,e.magmaPool=new p,e.xMin=0,e.yMin=0,e.xMax=0,e.yMax=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){for(var t=f.boundCameraTile.x*f.boundCameraTile.y,e=0;e<t;e++)this.mapCellPool.put(m(this.mapCell));for(var i=f.boundCameraTile.x*f.boundCameraTile.y*f.obstacleRate,a=0;a<i;a++)this.obstaclePool.put(m(this.obstacleCell));for(var n=f.boundCameraTile.x*f.boundCameraTile.y*f.magmaRate,o=0;o<n;o++)this.magmaPool.put(m(this.magmaCell))},r.getMapcell=function(){return this.mapCellPool.size()>0?this.mapCellPool.get():m(this.mapCell)},r.putMapCell=function(t){this.mapCellPool.put(t)},r.getObstacle=function(){return this.obstaclePool.size()>0?this.obstaclePool.get():m(this.obstacleCell)},r.putObstacle=function(t){this.obstaclePool.put(t)},r.getMagma=function(){if(this.magmaPool.size()>0){var t=this.magmaPool.get();return t.getComponent(x).reset(),t}return m(this.magmaCell)},r.putMagma=function(t){this.magmaPool.put(t)},r.getMapData=function(t){var e=t.dungeon;this.random=new g,this.mapData=this.random.getRandomMap(e.seed,f.instance.cellWidth,f.instance.cellHeight),this.magmaMapData=this.getMagmaMapData(),this.obstacleMapData=this.getObstacleMapData(),this.genBorderMap(),this.genMultiLandMapData(),this.fakeObjectsMapData(),this.getItemMapData(e.goldPieces),this.getItemSpecialMapData(e.items),this.getPlayerMapData(t.players)},r.initGameMaps=function(){var t=Date.now();this.initMap(this.map,h.ZERO),console.log("time init map: "+(Date.now()-t))},r.getFakeMapPosition=function(t){switch(t){case 0:return new h(-f.instance.mapWidth,f.instance.mapHeight,0);case 1:return new h(0,f.instance.mapHeight,0);case 2:return new h(f.instance.mapWidth,f.instance.mapHeight,0);case 3:return new h(-f.instance.mapWidth,0,0);case 4:return new h(f.instance.mapWidth,0,0);case 5:return new h(-f.instance.mapWidth,-f.instance.mapHeight,0);case 6:return new h(0,-f.instance.mapHeight,0);case 7:return new h(f.instance.mapWidth,-f.instance.mapHeight,0);default:return new h(0,0,0)}},r.getTile=function(t,e){var i=this.formartGetTile(t,e),a=i[0],n=i[1];return a<0||a>=f.instance.cellHeight||n<0||n>=f.instance.cellWidth?-1:this.mapData[a][n]},r.formartGetTile=function(t,e){return-1==t?t=f.instance.cellHeight-1:t==f.instance.cellHeight&&(t=0),-1==e?e=f.instance.cellWidth-1:e==f.instance.cellWidth&&(e=0),[t,e]},r.genBorderMap=function(){for(var t=0;t<f.instance.cellHeight;t++)for(var e=0;e<f.instance.cellWidth;e++)0==this.getTile(t,e)&&1==this.getTile(t,e-1)&&1==this.getTile(t,e+1)?this.mapData[t][e]=M.BothBoder:0==this.getTile(t,e)&&1==this.getTile(t,e-1)?this.mapData[t][e]=M.Left:0==this.getTile(t,e)&&1==this.getTile(t,e+1)&&(this.mapData[t][e]=M.Right)},r.genMultiLandMapData=function(){for(var t=0;t<f.instance.cellHeight;t++)for(var e=0;e<f.instance.cellWidth;e++)if(this.mapData[t][e]==M.Land){var i=this.random.random().rangeFloat(0,1);i<=.65?this.mapData[t][e]=M.Land:i<=.8?this.mapData[t][e]=M.Land2:i<=.95?this.mapData[t][e]=M.Land3:1==this.getTile(t-1,e)&&(this.mapData[t][e]=M.Land4)}},r.getMagmaMapData=function(){for(var t=[],e=0;e<f.instance.cellHeight;e++){for(var i=[],a=0;a<f.instance.cellWidth;a++){var n=0;0==this.getTile(e,a)&&(1==this.getTile(e-1,a)?n=M.Magma:this.random.random().rangeFloat(0,1)<f.magmaRate&&(n=M.Lava)),i.push(n)}t.push(i)}return t},r.getObstacleMapData=function(){for(var t=[],e=0;e<f.instance.cellHeight;e++){for(var i=[],a=0;a<f.instance.cellWidth;a++){var n=null;if(1==this.getTile(e,a)&&this.random.random().rangeFloat(0,1)<=f.obstacleRate){var o=e-this.random.random().rangeFloat(0,.5),r=a+this.random.random().rangeFloat(0,.5),l=this.random.random().rangeInt(0,3),s=this.convertTileToPosition(o,r);n=new C(s.x,s.y,l)}i.push(n)}t.push(i)}return t},r.fakeObjectsMapData=function(){this.itemMapData=[],this.itemSpecialMapData=[],this.trapMapData=[],this.playerMapData=[];for(var t=0;t<f.instance.cellHeight;t++){for(var e=[],i=[],a=[],n=[],o=0;o<f.instance.cellWidth;o++){e.push(null);i.push(null);a.push(null);n.push(null)}this.itemMapData.push(e),this.itemSpecialMapData.push(i),this.trapMapData.push(a),this.playerMapData.push(n)}},r.getItemMapData=function(t){var e=this;t.forEach((function(t){var i=t.x*f.instance.cellUnit,a=t.y*f.instance.cellUnit,n=new D(i,a,t.id,t.value),o=e.convertPositionToTile(new h(i,a,0)),r=e.getItemDataConvert(o.x,o.y);if(null!=r)r.addItem(n);else{var l=new b(i,a);l.addItem(n),e.setItemDataConvert(o.x,o.y,l)}}))},r.getItemSpecialMapData=function(t){var e=this;t.forEach((function(t){var i=t.x*f.instance.cellUnit,a=t.y*f.instance.cellUnit,n=new I(i,a,t.id,t.type),o=e.convertPositionToTile(new h(i,a,0)),r=e.getItemSpecialDataConvert(o.x,o.y);if(null!=r)r.addItem(n);else{var l=new w(i,a);l.addItem(n),e.setItemSpecialDataConvert(o.x,o.y,l)}}))},r.getTrapMapData=function(t){var e=this;t.forEach((function(t){var i=t.x*f.instance.cellUnit,a=t.y*f.instance.cellUnit,n=new S(i,a,t.id,t.type),o=e.convertPositionToTile(new h(i,a,0)),r=e.getTrapDataConvert(o.x,o.y);if(null!=r)r.addTrap(n);else{var l=new O(i,a);l.addTrap(n),e.setTrapDataConvert(o.x,o.y,l)}}))},r.getPlayerMapData=function(t){var e=this;t.forEach((function(t){var i=t.x*f.instance.cellUnit,a=t.y*f.instance.cellUnit,n=new H(i,a,t.uid,t),o=new h(i,a,0),r=e.convertPositionToTile(o),l=e.getPlayerDataConvert(r.x,r.y);if(t.uid==d.Uid&&(e.playerPosition=o.clone()),null!=l)l.addPlayer(n);else{var s=new U(i,a);s.addPlayer(n),e.setPlayerDataConvert(r.x,r.y,s)}}))},r.initMap=function(t,e){var i=this.convertPositionToTile(this.playerPosition);this.xMin=i.x-f.boundCameraTile.x/2,this.yMin=i.y-f.boundCameraTile.y/2,this.xMax=i.x+f.boundCameraTile.x/2+1,this.yMax=i.y+f.boundCameraTile.y/2+1;for(var a=this.xMin;a<this.xMax;a++)for(var n=this.yMin;n<this.yMax;n++){var o=this.getMapDataConvert(a,n);0!=o&&this.initMapCell(o,t,a,n);var r=this.getMagmaDataConvert(a,n);0!=r&&this.initMagma(r,t,a,n);var l=this.getObstacleDataConvert(a,n);null!=l&&this.initObstacle(l,t,a,n);var s=this.getItemDataConvert(a,n);null!=s&&this.initItemTile(s,t,a,n);var c=this.getItemSpecialDataConvert(a,n);null!=c&&this.initItemSpecialTile(c,t,a,n);var h=this.getTrapDataConvert(a,n);null!=h&&this.initTrapTile(h,t,a,n);var p=this.getPlayerDataConvert(a,n);null!=p&&this.initPlayerTile(p,t,a,n)}t.setPosition(e)},r.handleMoveMap=function(t){var e=Math.sign(t.x),i=Math.sign(t.y);e>0?this.moveMapRightX():e<0&&this.moveMapLeftX(),i>0?this.moveMapUpY():i<0&&this.moveMapDownY()},r.handleTeleport=function(t,e){var i=Math.sign(t),a=Math.sign(e);if(Math.abs(t)>f.distanceToTeleport){var n=i*f.instance.cellWidth;this.yMin+=n,this.yMax+=n,t=i*f.instance.mapWidth}else t=0;if(Math.abs(e)>f.distanceToTeleport){var o=a*f.instance.cellHeight;this.xMin-=o,this.xMax-=o,e=a*f.instance.mapHeight}else e=0;this.teleportMap(t,e)},r.moveMapRightX=function(){this.yMin++,this.yMax++,this.moveRightX(this.map.cellContainer.children,this.mapCellPool,W.MapCell),this.moveRightX(this.map.obstacleContainer.children,this.obstaclePool,W.Obstacle),this.moveRightX(this.map.magmaContainer.children,this.magmaPool,W.Magma),this.moveRightX(this.map.itemContainer.children,this.itemPool,W.Item),this.moveRightX(this.map.itemSpecialContainer.children,this.itemSpecialPool,W.ItemSpecial),this.moveRightX(this.map.trapContainer.children,this.trapPool,W.Trap)},r.moveMapLeftX=function(){this.yMin--,this.yMax--,this.moveLeftX(this.map.cellContainer.children,this.mapCellPool,W.MapCell),this.moveLeftX(this.map.obstacleContainer.children,this.obstaclePool,W.Obstacle),this.moveLeftX(this.map.magmaContainer.children,this.magmaPool,W.Magma),this.moveLeftX(this.map.itemContainer.children,this.itemPool,W.Item),this.moveLeftX(this.map.itemSpecialContainer.children,this.itemSpecialPool,W.ItemSpecial),this.moveLeftX(this.map.trapContainer.children,this.trapPool,W.Trap)},r.moveMapUpY=function(){this.xMin--,this.xMax--,this.moveUpY(this.map.cellContainer.children,this.mapCellPool,W.MapCell),this.moveUpY(this.map.obstacleContainer.children,this.obstaclePool,W.Obstacle),this.moveUpY(this.map.magmaContainer.children,this.magmaPool,W.Magma),this.moveUpY(this.map.itemContainer.children,this.itemPool,W.Item),this.moveUpY(this.map.itemSpecialContainer.children,this.itemSpecialPool,W.ItemSpecial),this.moveUpY(this.map.trapContainer.children,this.trapPool,W.Trap)},r.moveMapDownY=function(){this.xMin++,this.xMax++,this.moveDownY(this.map.cellContainer.children,this.mapCellPool,W.MapCell),this.moveDownY(this.map.obstacleContainer.children,this.obstaclePool,W.Obstacle),this.moveDownY(this.map.magmaContainer.children,this.magmaPool,W.Magma),this.moveDownY(this.map.itemContainer.children,this.itemPool,W.Item),this.moveDownY(this.map.itemSpecialContainer.children,this.itemSpecialPool,W.ItemSpecial),this.moveDownY(this.map.trapContainer.children,this.trapPool,W.Trap)},r.teleportMap=function(t,e){this.teleport(this.map.cellContainer.children,t,e,W.MapCell),this.teleport(this.map.obstacleContainer.children,t,e,W.Obstacle),this.teleport(this.map.magmaContainer.children,t,e,W.Magma),this.teleport(this.map.itemContainer.children,t,e,W.Item),this.teleport(this.map.itemSpecialContainer.children,t,e,W.ItemSpecial),this.teleport(this.map.trapContainer.children,t,e,W.Trap),this.teleport(this.map.playerContainer.children,t,e,W.Player),this.teleportMeteor(t,e)},r.moveRightX=function(t,e,i){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).y==this.yMin-1&&(e.put(t[a]),a--)}for(var n=this.xMin;n<this.xMax;n++)this.initObject(n,this.yMax-1,i)},r.moveLeftX=function(t,e,i){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).y==this.yMax&&(e.put(t[a]),a--)}for(var n=this.xMin;n<this.xMax;n++)this.initObject(n,this.yMin,i)},r.moveUpY=function(t,e,i){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).x==this.xMax&&(e.put(t[a]),a--)}for(var n=this.yMin;n<this.yMax;n++)this.initObject(this.xMin,n,i)},r.moveDownY=function(t,e,i){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).x==this.xMin-1&&(e.put(t[a]),a--)}for(var n=this.yMin;n<this.yMax;n++)this.initObject(this.xMax-1,n,i)},r.teleport=function(t,e,i,a){for(var n=0;n<t.length;n++){var o=t[n];if(a!=W.Player||o.name!=d.Uid){var r=o.position.clone(),l=new h(r.x+e,r.y+i);a==W.Player&&o.getComponent(L).stopMove(l),o.setPosition(l)}}},r.teleportMeteor=function(t,e){if(0!=y.instance.meteorManager.isJoinMap){var i=this.map.meteorContainer.position.clone(),a=new h(i.x+t,i.y+e);this.map.meteorContainer.setPosition(a)}},r.initMapCell=function(t,e,i,a){if(t==M.BothBoder)this.initMapCell(M.Left,e,i,a),this.initMapCell(M.Right,e,i,a);else{var n=this.getMapcell();n.active=!0,e.addCell(n);var o=n.getComponent(P);o.setPosition(this.convertTileToPosition(i,a),i,a,this.debug),o.setSprite(this.tileSpriteFrames[t-1])}},r.initMagma=function(t,e,i,a){var n=this.getMagma();n.active=!0,e.addMagma(n),n.setPosition(this.convertTileToPosition(i,a)),t==M.Lava&&n.getComponent(x).startMagma(this.random.random().rangeFloat(2,6))},r.initObstacle=function(t,e,i,a){var n=this.getObstacle();n.active=!0,e.addObstacle(n);var o=new h(t.x,t.y),r=this.convertPositionToPlayerViewPosition(o);r&&(n.setPosition(r),n.getComponent(R).setSprite(this.obstacleSpriteFrames[t.type]),n.getComponent(R).setType(t.type))},r.initItemTile=function(t,e,i,a){var n=this,o=t.getItems();o&&o.forEach((function(t){n.initItem(t,e,i,a)}))},r.initItem=function(t,e,i,a){var n=new h(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.itemManager.initItem(t,e,o,this.debug)},r.initItemSpecialTile=function(t,e,i,a){var n=this,o=t.getItems();o&&o.forEach((function(t){n.initItemSpecial(t,e,i,a)}))},r.initItemSpecial=function(t,e,i,a){var n=new h(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.itemSpecialManager.initItemSpecial(t,e,o,this.debug)},r.initTrapTile=function(t,e,i,a){var n=this,o=t.getTraps();o&&o.forEach((function(t){n.initTrap(t,e,i,a)}))},r.initTrap=function(t,e,i,a){var n=new h(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.trapManager.initTrap(t,e,o,this.debug)},r.initPlayerTile=function(t,e,i,a){var n=this,o=t.getPlayers();o&&o.forEach((function(t){n.initPlayer(t,e,i,a)}))},r.initPlayer=function(t,e,i,a){var n=new h(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.playerManager.initPlayer(t.data,e,o,this.debug)},r.initObject=function(t,e,i){switch(i){case W.MapCell:var a=this.getMapDataConvert(t,e);0!=a&&this.initMapCell(a,this.map,t,e);break;case W.Obstacle:var n=this.getObstacleDataConvert(t,e);null!=n&&this.initObstacle(n,this.map,t,e);break;case W.Magma:var o=this.getMagmaDataConvert(t,e);0!=o&&this.initMagma(o,this.map,t,e);break;case W.Item:var r=this.getItemDataConvert(t,e);null!=r&&this.initItemTile(r,this.map,t,e);break;case W.ItemSpecial:var l=this.getItemSpecialDataConvert(t,e);null!=l&&this.initItemSpecialTile(l,this.map,t,e);break;case W.Trap:var s=this.getTrapDataConvert(t,e);null!=s&&this.initTrapTile(s,this.map,t,e);break;case W.Player:var c=this.getPlayerDataConvert(t,e);null!=c&&this.initPlayerTile(c,this.map,t,e)}},r.convertTileToPosition=function(t,e){return new h(e*f.instance.cellUnit,(f.instance.cellHeight-1-t)*f.instance.cellUnit,0)},r.convertPositionToTile=function(t){return new u(f.instance.cellHeight-1-Math.floor(t.y/f.instance.cellUnit),Math.floor(t.x/f.instance.cellUnit))},r.convertMapIndex=function(t,e){return t<0&&(t+=f.instance.cellHeight),e<0&&(e+=f.instance.cellWidth),new u(t%f.instance.cellHeight,e%f.instance.cellWidth)},r.convertPostionToPlayerViewTile=function(t){var e=this.convertPositionToTile(t);return e.x<this.xMin?e.x+=f.instance.cellWidth:e.x>=this.xMax&&(e.x-=f.instance.cellWidth),e.y<this.yMin?e.y+=f.instance.cellHeight:e.y>=this.yMax&&(e.y-=f.instance.cellHeight),e.x>=this.xMin&&e.x<this.xMax&&e.y>=this.yMin&&e.y<this.yMax?e:null},r.convertPositionToPlayerViewPosition=function(t,e){void 0===e&&(e=!1);var i=t.clone(),a=this.convertPositionToTile(t);e&&console.log("tile: "+a.x+","+a.y);var n=!1;if(a.x<this.xMin?(i.y-=f.instance.mapWidth,n=!0):a.x>=this.xMax&&(i.y+=f.instance.mapWidth,n=!0),a.y<this.yMin?(i.x+=f.instance.mapHeight,n=!0):a.y>=this.yMax&&(i.x-=f.instance.mapHeight,n=!0),e&&(console.log("convertPositionToPlayerViewPosition: "+t.x+", "+t.y+" => "+i.x+", "+i.y),console.log("xMin: "+this.xMin+", yMin: "+this.yMin+", xMax: "+this.xMax+", yMax: "+this.yMax)),n){var o=this.convertPositionToTile(i);return o.x>=this.xMin&&o.x<this.xMax&&o.y>=this.yMin&&o.y<this.yMax?i:null}return i},r.getMapDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.mapData[a][n]},r.getMagmaDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.magmaMapData[a][n]},r.getObstacleDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.obstacleMapData[a][n]},r.getItemDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.itemMapData[a][n]},r.setItemDataConvert=function(t,e,i){var a=this.convertMapIndex(t,e),n=a.x,o=a.y;this.itemMapData[n][o]=i},r.getItemSpecialDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.itemSpecialMapData[a][n]},r.setItemSpecialDataConvert=function(t,e,i){var a=this.convertMapIndex(t,e),n=a.x,o=a.y;this.itemSpecialMapData[n][o]=i},r.getTrapDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.trapMapData[a][n]},r.setTrapDataConvert=function(t,e,i){var a=this.convertMapIndex(t,e),n=a.x,o=a.y;this.trapMapData[n][o]=i},r.getPlayerDataConvert=function(t,e){var i=this.convertMapIndex(t,e),a=i.x,n=i.y;return this.playerMapData[a][n]},r.setPlayerDataConvert=function(t,e,i){var a=this.convertMapIndex(t,e),n=a.x,o=a.y;this.playerMapData[n][o]=i},r.findAndAddItem=function(t){var e=t.x*f.instance.cellUnit,i=t.y*f.instance.cellUnit,a=new h(e,i,0),n=new D(e,i,t.id,t.value),o=this.convertPositionToTile(a),r=this.getItemDataConvert(o.x,o.y);if(null!=r){if(r.isExitItem(t.id))return;r.addItem(n)}else{var l=new b(e,i);l.addItem(n),this.setItemDataConvert(o.x,o.y,l)}this.initItem(n,this.map,o.x,o.y)},r.findAndRemoveItems=function(t){for(var e=this,i=0;i<f.instance.cellHeight;i++)for(var a=function(a){var n=e.itemMapData[i][a];if(null!=n){var o=n.getItems();o&&o.forEach((function(i){t.find((function(t){return t.id==i.id}))||(n.removeItem(i.id),null!=e.convertPostionToPlayerViewTile(new h(i.x,i.y))?e.map.removeItemById(i.id.toString(),!0):e.map.removeItemById(i.id.toString(),!1))}))}},n=0;n<f.instance.cellWidth;n++)a(n)},r.findAndAndItemSpecial=function(t){var e=t.x*f.instance.cellUnit,i=t.y*f.instance.cellUnit,a=new h(e,i,0),n=new I(e,i,t.id,t.type),o=this.convertPositionToTile(a),r=this.getItemSpecialDataConvert(o.x,o.y);if(null!=r){if(r.isExitItem(t.id))return;r.addItem(n)}else{var l=new w(e,i);l.addItem(n),this.setItemSpecialDataConvert(o.x,o.y,l)}this.initItemSpecial(n,this.map,o.x,o.y)},r.findAndRemoveItemSpecials=function(t){for(var e=this,i=0;i<f.instance.cellHeight;i++)for(var a=function(a){var n=e.itemSpecialMapData[i][a];if(null!=n){var o=n.getItems();o&&o.forEach((function(i){t.find((function(t){return t.id==i.id}))||(n.removeItem(i.id),null!=e.convertPostionToPlayerViewTile(new h(i.x,i.y))?e.map.removeSpecialItemById(i.id.toString(),!0):e.map.removeSpecialItemById(i.id.toString(),!1))}))}},n=0;n<f.instance.cellWidth;n++)a(n)},r.findAndAddTrap=function(t){var e=t.x*f.instance.cellUnit,i=t.y*f.instance.cellUnit,a=new h(e,i,0),n=new S(e,i,t.id,t.type),o=this.convertPositionToTile(a),r=this.getTrapDataConvert(o.x,o.y);if(null!=r){if(r.isExitTrap(t.id))return;r.addTrap(n)}else{var l=new O(e,i);l.addTrap(n),this.setTrapDataConvert(o.x,o.y,l)}this.initTrap(n,this.map,o.x,o.y)},r.findAndRemoveTraps=function(t){for(var e=this,i=0;i<f.instance.cellHeight;i++)for(var a=function(a){var n=e.trapMapData[i][a];if(null!=n){var o=n.getTraps();o&&o.forEach((function(i){t.find((function(t){return t.id==i.id}))||(n.removeTrap(i.id),null!=e.convertPostionToPlayerViewTile(new h(i.x,i.y))?e.map.removeTrapById(i.id.toString(),!0):e.map.removeTrapById(i.id.toString(),!1))}))}},n=0;n<f.instance.cellWidth;n++)a(n)},r.reset=function(){this.playerMapData=null,this.itemMapData=null,this.obstacleMapData=null,this.magmaMapData=null,this.mapData=null,this.itemSpecialMapData=null,this.trapMapData=null},o(e,[{key:"itemPool",get:function(){return y.instance.itemManager.itemPool}},{key:"itemSpecialPool",get:function(){return y.instance.itemSpecialManager.itemSpecialPool}},{key:"trapPool",get:function(){return y.instance.trapManager.trapPool}}]),e}(v)).prototype,"map",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(B.prototype,"mapCell",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(B.prototype,"magmaCell",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(B.prototype,"obstacleCell",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(B.prototype,"tileSpriteFrames",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(B.prototype,"obstacleSpriteFrames",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=B))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils.ts",["cc"],(function(n){"use strict";var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"1395cvNA4FPL5f/W7xqBUvt","MaxApiUtils",void 0),n("default",function(){function n(){}return n.registerScreenShot=function(n){window.MaxApi?window.MaxApi.listen("onScreenShot",(function(){n()})):n(null)},n.RegisterNoti=function(n){window.MaxApi?window.MaxApi.observer("DIS_RECEIVE_NOTI",(function(i){console.log("[DIS_RECEIVE_NOTI] "+i),n(i)})):n(null)},n.GetProfile=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getProfile((function(i){n(i)})):n()}))},n.UploadImage=function(n){return new Promise((function(i,o){var t={path:"base64-upload",files:n,options:{loading:!0}};window.MaxApi?window.MaxApi.uploadImage(t,(function(n){n.status;var o=n.response,t=o.url;t&&t.length>0&&t.indexOf("http")>=0?i(t):i(o)})):i(null)}))},n.GetDeviceInfo=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getDeviceInfo((function(i){n(i)})):n(null)}))},n.CheckHighPerformanceDevice=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.isHighPerformanceDevice((function(i){n(i)})):n(!0)}))},n.closeGame=function(){window.MaxApi&&window.MaxApi.dismiss()},n.copyToClipboard=function(n,i){window.MaxApi&&window.MaxApi.copyToClipboard(n,i)},n.openWeb=function(n){window.MaxApi.openWeb({url:n})},n.startFeatureCode=function(n,i,o){window.MaxApi?window.MaxApi.startFeatureCode(n,i,o):o(!0)},n.checkPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.checkPermission(n,(function(n){i(n)})):i("granted")}))},n.requestPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission(n,(function(n){i(n)})):i("granted")}))},n.getContacts=function(){return new Promise((function(n){if(window.MaxApi){window.MaxApi.getContacts({paramsContact:{allowNonMomo:!1,autoFocus:!0,isAllowMerchant:!1,showPopupNonMomo:!1,allowAgency:!1,allowMultipleSelection:!0},title:"MegaLuckyWheel"},(function(i){n(i)}))}else n([])}))},n.getAvatarEndPoint=function(){var n=this;return new Promise((function(i){window.MaxApi?(n.avatarEndpoint.length>0&&i(n.avatarEndpoint),window.MaxApi.getAvatarEndPoint((function(o){n.avatarEndpoint=o,i(o)}))):i("")}))},n.getContact=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.getContact({},(function(i){n(i)})):n([])}))},n.goBack=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.goBack((function(i){n(i)})):n("denied")}))},n.getScreenShot=function(n){window.MaxApi?window.MaxApi.getScreenShot(n):n("")},n.saveImage=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission("storage",(function(o){"granted"===o?window.MaxApi.saveImage(n,(function(n){n?(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh thành công"}),i(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):i(!1)}))},n.shareFacebook=function(n,i){window.MaxApi?window.MaxApi.shareFacebook(n,i):i("")},n.facebookMsg=function(n){var i="fb-messenger://share/?link="+n;window.MaxApi&&window.MaxApi.openURL(i)},n.moreMenu=function(n,i,o,t){return new Promise((function(e){if(window.MaxApi){var a={title:n,message:o,url:t,subject:i};window.MaxApi.share(a,(function(n){e(n)}))}else e(!1)}))},n.copyLink=function(n){window.MaxApi&&window.MaxApi.copyToClipboard(n,"Đã sao chép")},n.trackEvent=function(n){window.MaxApi&&window.MaxApi.trackEvent("momo_jump",n)},n.showToast=function(n,i){void 0===i&&(i=3e3),window.MaxApi&&window.MaxApi.showToast({duration:i,title:n})},n.setItem=function(n,i){window.MaxApi&&window.MaxApi.setItem(n,i)},n.getItem=function(n,i){void 0===i&&(i=null),window.MaxApi?window.MaxApi.getItem(n,i):i(null)},n}()).avatarEndpoint="",i._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator},function(e){r=e.cclegacy,i=e.log}],execute:function(){var o;e("MaxApiName",void 0),r._RF.push({},"28774sywudKJaUfJ3kzaJm/","MaxApiUtils",void 0),function(e){e.getProfile="getProfile",e.getDeviceInfo="getDeviceInfo",e.shareFacebook="shareFacebook",e.showToast="showToast",e.sendCloudMessage="sendCloudMessage",e.getCloudMessage="getCloudMessage",e.startTraceScreenLoad="startTraceScreenLoad",e.startTraceScreenInteraction="startTraceScreenInteraction",e.stopTrace="stopTrace"}(o||(o=e("MaxApiName",{})));e("maxApiUtils",new(function(){function e(){this.observer={},i("[MaxApiutils] isBrowser: ",this.isBrowser)}var r=e.prototype;return r.request=function(){var e=n(regeneratorRuntime.mark((function e(t){var n,r,o,s=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=a[o];return i("[MaxApiUtils]","Call function: ",t),e.abrupt("return",new Promise((function(e,n){s.isBrowser&&e&&e(null);var i=window.MaxApi[t];r&&r.length>0?i.apply(void 0,r.concat([function(t){e&&e(t)}])):i((function(t){e&&e(t)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.saveImage=function(e){var t=this;return new Promise((function(n,r){t.isBrowser&&n&&n(null),window.MaxApi.requestPermission("storage",(function(t){"granted"===t?window.MaxApi.saveImage(e,(function(e){e?(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh thành công"}),n&&n(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),n&&n(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),n&&n(!1))}))}))},r.registerShaking=function(e){if(!this.isBrowser){var t=window.MaxApi.listen({event:"onShaker",updateInterval:100,type:"accelerometer"},(function(t){e(t)}));this.observer.shake=t}},r.unRegisterShaking=function(){var e;this.isBrowser||null==(e=this.observer.shake)||null==e.remove||e.remove()},r.registerMagnetometer=function(e,t){if(!this.isBrowser){var n=window.MaxApi.listen({event:"onShaker",type:"magnetometer",updateInterval:50},(function(t){e(t)}));this.observer.magnetometer=n}},r.unRegisterMagnetometer=function(e){var t;this.isBrowser||null==(t=this.observer.magnetometer)||null==t.remove||t.remove()},r.listen=function(e,t){this.isBrowser||window.MaxApi.listen(e,t)},r.triggerEventVibration=function(){window.MaxApi&&window.MaxApi.triggerEventVibration()},t(e,[{key:"isBrowser",get:function(){return null==window.ReactNativeWebView}}]),e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameDefine.ts","./GameMgr.ts","./TextDefine.ts","./GameEvent.ts","./GlobalDefine.ts","./MaxApiUtils.ts","./MySprite.ts","./Utils.ts","./MainPlayer.ts","./SwipePart.ts","./PopupConfig.ts","./PopupMgr.ts","./Screen.ts"],(function(t){"use strict";var e,i,n,a,o,r,l,s,u,c,h,p,g,f,d,y,b,m,w,P,S,v,T,C,L,x,M,E,k,N,z,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Node,s=t.UIOpacity,u=t.Label,c=t.Button,h=t.view,p=t.Color,g=t.Input,f=t.tween},function(t){d=t.EventName,y=t.GameDefine},function(t){b=t.GameDefine},function(t){m=t.GameMgr},function(t){w=t.ExchangeLivePopupText,P=t.ExchangeLiveFailedPopupText,S=t.ExchangeLiveSuccessPopupText},function(t){v=t.default},function(t){T=t.globalDefine,C=t.profile},function(t){L=t.default},function(t){x=t.MySprite},function(t){M=t.utils},function(t){E=t.MainPlayer},function(t){k=t.SwipePart},function(t){N=t.PopupConfig},function(t){z=t.PopupMgr},function(t){D=t.Screen}],execute:function(){var B,O,A,R,G,H,_,U,F,I,V,W,X,q,Y,j,Q,J,K,Z,$,tt,et,it,nt,at,ot,rt;t("State",void 0),o._RF.push({},"dc114wyqqxHy6RHQnT1W8RS","Menu",void 0);var lt,st=r.ccclass,ut=r.property;!function(t){t[t.Hunter=0]="Hunter",t[t.Farmer=1]="Farmer",t[t.Ranking=2]="Ranking"}(lt||(lt=t("State",{})));t("Menu",(B=st("Menu"),O=ut(l),A=ut(s),R=ut(l),G=ut(x),H=ut(u),_=ut(u),U=ut(u),F=ut(u),I=ut(k),V=ut(E),W=ut(c),X=ut(l),B(((rt=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"swipePart",j,a(e)),e.isCanSlide=!0,n(e,"whiteScreen",Q,a(e)),n(e,"gateButton",J,a(e)),n(e,"avatar",K,a(e)),n(e,"playerName",Z,a(e)),n(e,"ticketLabel",$,a(e)),n(e,"moneyLabel",tt,a(e)),n(e,"ping",et,a(e)),n(e,"swipePartController",it,a(e)),n(e,"mainPlayer",nt,a(e)),e.gate=null,e.state=lt.Hunter,e.currentAngle=-60,e.angleToNext=15,e.angleToShake=5,e.ratioX=h.getDesignResolutionSize().x/h.getViewportRect().width,e.isSliding=!1,n(e,"exchangeLifeButton",at,a(e)),n(e,"smokes",ot,a(e)),e}i(e,t);var o=e.prototype;return o.onLoad=function(){e.instance=this,v.on(d.onUpdateProfile,this.updateProfile,this),v.on(d.onPing,this.logPing,this)},o.logPing=function(t,e){this.ping.color=e<=100?b.GREEN_COLOR:e<=250?p.YELLOW:b.RED_COLOR,this.ping.string="Ping: "+e},o.start=function(){var t=this;this.gate=this.gateButton.children[0],this.node.on(g.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(g.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.isCanSlide=!1,setTimeout((function(){t.swipePartController.updateSlideVisible(),t.goToNext(-1)}),200),m.instance.isOptimizeForPerformance=T.isLowEndDevice,m.instance.isOptimizeForPerformance||this.smokes.forEach((function(t){t.active=!0}))},o.updateProfile=function(){var t=this;this.avatar.FetchAvatar(C.avatar),this.playerName.string=M.trimName(C.UserName,2),this.moneyLabel.string=C.money.toString(),this.ticketLabel.string=C.ticket.toString(),this.exchangeLifeButton.node.on("click",(function(){var e=new w,i=N.Show(e,null);null==i||i.SetTypeYesNo(e.yesButtonLabel,e.noButtonLabel,(function(){t.exchangeMoney()}),(function(){}))}),this)},o.exchangeMoney=function(){var t=C.money;if(z.Instance.hideAll(),t<1e4){var e=new P;N.Show(e,null).SetTypeOk(null)}else{var i=new S;N.Show(i,null).SetTypeOk(null),this.updateProfile()}},o.show=function(){t.prototype.show.call(this,!1),this.isCanSlide=!0,this.whiteScreen.opacity=255,0!=this.whiteScreen.opacity&&f(this.whiteScreen).to(y.timeEndLoading,{opacity:0}).start(),this.gateButton.on(g.EventType.TOUCH_END,this.onClickButtonGate,this),this.updateProfile(),C.updateProfile(),this.mainPlayer.reset()},o.onTouchEnd=function(t){this.isSliding=!1,this.backToBegin()},o.onTouchMove=function(t){var e=t.getLocation().x-t.getStartLocation().x;if(!(Math.abs(e)<20)&&this.isCanSlide){this.isSliding=!0,this.swipePartController.updateSlideVisible();var i=t.getDeltaX(),n=Math.sign(e);this.swipePart.angle-=.067*i*this.ratioX,this.mainPlayer.move(-i),this.checkAngleToChangeMode(n)&&(this.isCanSlide=!1,this.goToNext(n))}},o.checkAngleToChangeMode=function(t){return this.swipePart.angle>=this.currentAngle-t*this.angleToNext&&t<0||this.swipePart.angle<=this.currentAngle-t*this.angleToNext&&t>0},o.backToBegin=function(){var t=this;if(0!=this.isCanSlide){this.isCanSlide=!1;var e=this.currentAngle-this.swipePart.angle;this.mainPlayer.move(Math.sign(e)),f(this.swipePart).to(.5,{angle:this.currentAngle}).call((function(){t.isCanSlide=!0,t.mainPlayer.endMove(),t.swipePartController.updateIdleVisible(),Math.abs(e)>t.angleToShake&&t.swipePartController.startShake()})).start()}},o.goToNext=function(t){var e=this;f(this.swipePart).to(.5,{angle:this.currentAngle-60*t}).call((function(){e.currentAngle=e.swipePart.angle,e.updateState(t),e.swipePartController.updateIndex(t),e.mainPlayer.setState(e.state,(function(){e.isCanSlide=!0})),e.swipePartController.startShake()})).start()},o.updateState=function(t){this.state+=-t,this.state=this.state,this.state<0?this.state+=3:this.state>=3&&(this.state-=3)},o.onClickButtonGate=function(){var t=this;this.state!=lt.Ranking&&1!=this.isSliding&&0!=this.isCanSlide&&(this.isCanSlide=!1,this.gateButton.off(g.EventType.TOUCH_END),this.mainPlayer.goToGate(this.gate.getWorldPosition(),(function(){m.instance.startStandby(t.state==lt.Hunter)})))},o.exitApp=function(){L.closeGame()},e}(D)).instance=null,j=e((Y=rt).prototype,"swipePart",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(Y.prototype,"whiteScreen",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Y.prototype,"gateButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Y.prototype,"avatar",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(Y.prototype,"playerName",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Y.prototype,"ticketLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Y.prototype,"moneyLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Y.prototype,"ping",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Y.prototype,"swipePartController",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Y.prototype,"mainPlayer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Y.prototype,"exchangeLifeButton",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Y.prototype,"smokes",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=Y))||q));o._RF.pop()}}}));

System.register("chunks:///_virtual/Meteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts","./SpawnMeteor.ts"],(function(i){"use strict";var e,t,n,a,r,o,s,l,c,u,h,p,d,g,w,m,f;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,s=i.sp,l=i.Node,c=i.UIOpacity,u=i.Graphics,h=i.tween,p=i.Vec3,d=i.math,g=i.Component},function(i){w=i.Layer},function(i){m=i.utils},function(i){f=i.SpawnMeteor}],execute:function(){var b,v,y,R,C,S,O,W,k,P,z,D,I,E,M,_,N,F,L,U,x;r._RF.push({},"8663bmNgIhOA77YDaVcT+p1","Meteor",void 0);var q=o.ccclass,A=o.property;i("Meteor",(b=q("Meteor"),v=A(s.Skeleton),y=A(s.Skeleton),R=A(l),C=A(l),S=A(l),O=A(l),W=A(l),k=A(c),P=A(u),b((I=e((D=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=i.call.apply(i,[this].concat(r))||this,n(e,"animation",I,a(e)),n(e,"boom",E,a(e)),n(e,"sockwave",M,a(e)),n(e,"main",_,a(e)),n(e,"warning",N,a(e)),n(e,"warningCircle",F,a(e)),n(e,"warningSignal",L,a(e)),n(e,"warningCircleOpacity",U,a(e)),n(e,"circleRadius",x,a(e)),e.startPos=null,e.endPos=null,e.startScale=null,e.endScale=null,e.timeDrop=1.5,e.timeExplose=.4,e.timeWarning=3,e.tweenWarningCircle=null,e.tweenWaningCircleOpacity=null,e.tweenWarningSignal=null,e.tweenCirlceRadius=null,e.radius=0,e.minRadius=200,e}t(e,i);var r=e.prototype;return r.start=function(){},r.setCircelRadius=function(i){var e=this,t=128*this.radius;t<this.minRadius||(this.circleRadius.node.active=!0,this.circleRadius.node.setPosition(i.clone().subtract(this.node.position)),this.tweenCirlceRadius=h({radius:this.minRadius}).to(this.timeWarning-1,{radius:t},{onUpdate:function(i,t){e.circleRadius.clear(),e.circleRadius.circle(0,0,i.radius),e.circleRadius.lineWidth=10,e.circleRadius.strokeColor.fromHEX("#ff0000"),e.circleRadius.close(),e.circleRadius.stroke()},easing:"linear"}).call((function(){e.circleRadius.clear(),e.circleRadius.node.active=!1})).start())},r.init=function(){this.animation.enabled=!0,this.boom.node.active=!1,this.main.active=!1,this.animation.setAnimation(0,"metror_fall",!0),this.sockwave.active=!1},r.initInMenu=function(i){this.init(),m.changeNodeLayer(this.node,w.UI_2D),this.startScale=p.ZERO,this.endScale=new p(p.ONE).multiplyScalar(d.randomRange(.5,1.5)),this.node.setRotationFromEuler(0,0,65)},r.initInGameplay=function(i){void 0===i&&(i=6),this.init(),m.changeNodeLayer(this.node,w.GamePlay),this.startScale=p.ONE,this.endScale=p.ONE,this.radius=i},r.setPositions=function(i,e){this.node.position=i,this.startPos=i,this.endPos=e},r.drop=function(){var i=this;this.main.active=!0,h(this.node).set({position:this.startPos,scale:this.startScale}).to(this.timeDrop,{position:this.endPos,scale:this.endScale},{easing:"sineIn"}).call((function(){i.animation.enabled=!1,i.node.layer==w.UI_2D?f.instance.putMeteorToPool(i.node):i.startSockwave()})).start(),this.node.layer!=w.UI_2D&&setTimeout((function(){i.expolu()}),1e3*(this.timeDrop-1))},r.expolu=function(){var i=this;this.boom.node.active=!0,this.boom.setAnimation(0,"metror_boom",!1),this.boom.setCompleteListener((function(){i.main.active=!1,i.boom.node.active=!1}))},r.startSockwave=function(){var i=this,e=128*this.radius/250;this.sockwave.active=!0,h(this.sockwave).set({scale:p.ZERO}).to(this.timeExplose,{scale:new p(e,e,1)},{easing:"linear"}).call((function(){i.sockwave.active=!1})).start()},r.setWarning=function(i,e){void 0===e&&(e=null),this.warning.active=i,null!=e&&(this.warning.position=e.clone().subtract(this.node.position)),i?(this.setCircelRadius(e),this.tweenWarningCircle=h(this.warningCircle).to(.3,{scale:new p(2,2)},{easing:"quadOut"}).to(.3,{scale:new p(1.5,1.5)},{easing:"quadIn"}).union().repeatForever().start(),this.tweenWaningCircleOpacity=h(this.warningCircleOpacity).to(.3,{opacity:127.5},{easing:"quadOut"}).to(.3,{opacity:255},{easing:"quadIn"}).union().repeatForever().start(),this.tweenWarningSignal=h(this.warningSignal).to(.3,{angle:10}).to(.3,{angle:-10}).union().repeatForever().start()):(null!=this.tweenWarningCircle&&this.tweenWarningCircle.stop(),null!=this.tweenWarningSignal&&this.tweenWarningSignal.stop(),null!=this.tweenWaningCircleOpacity&&this.tweenWaningCircleOpacity.stop(),null!=this.tweenCirlceRadius&&this.tweenCirlceRadius.stop())},e}(g)).prototype,"animation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(D.prototype,"boom",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"sockwave",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(D.prototype,"main",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(D.prototype,"warning",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"warningCircle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(D.prototype,"warningSignal",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(D.prototype,"warningCircleOpacity",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"circleRadius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorDrop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./GameEvent.ts","./Define.ts","./GameDefine.ts"],(function(i){"use strict";var t,e,n,r,o,s,a,c,p,l,u,h,f,g,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,a=i.Label,c=i.Sprite,p=i.Color,l=i.Component},function(i){u=i.AudioMgr},function(i){h=i.default},function(i){f=i.SoundName,g=i.GamePlayEventName},function(i){m=i.GameDefine}],execute:function(){var D,d,v,w,R,M,T;o._RF.push({},"5534cwVQ8tD9K1pt/jVFb3h","MeteorDrop",void 0);var y=s.ccclass,b=s.property;i("MeteorDrop",(D=y("MeteorDrop"),d=b(a),v=b(c),D((M=t((R=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return t=i.call.apply(i,[this].concat(o))||this,n(t,"countDown",M,r(t)),n(t,"spriteOnMeteorDrop",T,r(t)),t.warningTime=0,t.dropTime=0,t.isRunning=!1,t.maxRatio=1,t.time=0,t.isWanring=!1,t.isDrop=!1,t.isRed=!1,t.dropInterval=null,t}e(t,i);var o=t.prototype;return o.start=function(){this.node.active=!1},o.setTime=function(i,t){this.isRunning||(this.isRunning=!0,this.node.active=!0,this.warningTime=i,this.dropTime=t,this.isWanring=!0,this.isDrop=!1,this.countDown.node.active=!0,u.instance.PlaySfx(f.Warning))},o.update=function(i){if(this.isWanring){this.time+=i,this.time>=this.warningTime&&(this.isWanring=!1,this.isDrop=!0);var t=this.warningTime-this.time;this.countDown.string=Math.ceil(t).toString();var e=(this.warningTime-t)/this.warningTime;this.spriteOnMeteorDrop.fillRange=this.maxRatio*e,this.isDrop&&this.startDrop()}},o.startDrop=function(){var i=this;u.instance.PlaySfx(f.MeteorFalling),this.countDown.node.active=!1,this.dropInterval=setInterval((function(){i.isRed?(i.spriteOnMeteorDrop.color=m.RED_COLOR,i.isRed=!1):(i.spriteOnMeteorDrop.color=p.WHITE,i.isRed=!0)}),200),setTimeout((function(){clearInterval(i.dropInterval),h.emit(g.CameraShaking),u.instance.PlaySfx(f.Explosion),i.reset()}),1e3*this.dropTime)},o.reset=function(){this.isRunning=!1,this.node.active=!1,this.countDown.string="0",this.spriteOnMeteorDrop.fillRange=0,this.warningTime=0,this.dropTime=0,this.isWanring=!1,this.isDrop=!1,this.time=0,this.spriteOnMeteorDrop.color=p.WHITE,this.isRed=!1},t}(l)).prototype,"countDown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(R.prototype,"spriteOnMeteorDrop",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Meteor.ts","./GameEvent.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./TextDefine.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,c,u,f,m,p,l,M,P,h,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.NodePool,u=e.Vec3,f=e.instantiate,m=e.UITransform,p=e.Component},function(e){l=e.Meteor},function(e){M=e.default},function(e){P=e.GamePlayEventName},function(e){h=e.GameDefine},function(e){g=e.GamePlay},function(e){d=e.NotificationText}],execute:function(){var v,y,b,D,C;r._RF.push({},"7641aW0Bk9Borma8CQikR+D","MeteorManager",void 0);var G=a.ccclass,I=a.property;e("MeteorManager",(v=G("MeteorManager"),y=I(s),v((C=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"meteorPrefab",C,o(t)),t.meteorPool=new c,t.timeNotification=3,t.isJoinMap=!1,t.isMeteorInMap=!1,t.currentPostion=u.ZERO,t}n(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<1;e++)this.meteorPool.put(f(this.meteorPrefab))},r.initMeteor=function(e,t,n){void 0===n&&(n=!1);var i=this.getMeteor();i.name=e.id.toString(),t.addMeteor(i);var o=i.getComponent(l);o.initInGameplay(e.effectRadius);var r=this.getPosition(e.x,e.y);o.setPositions(r[0],r[1]),o.setWarning(!0,r[1]),this.isMeteorInMap=!0,n&&(M.emit(P.OnNotify,d.meteor_fall,this.timeNotification),M.emit(P.UpdateMeteorDrop)),setTimeout((function(){o.setWarning(!1),o.drop()}),3e3)},r.netUpdate=function(e){var t=this,n=g.instance.map;e.dungeon.meteors.forEach((function(e){n.findMeteor(e.id.toString())||t.initMeteor(e,n,!0)})),n.getMeteors().forEach((function(i){e.dungeon.meteors.find((function(e){return e.id.toString()==i.name}))||(n.removeMeteor(i),t.isMeteorInMap=!1,t.isJoinMap=!1,g.instance.map.meteorContainer.setPosition(u.ZERO))}))},r.getPosition=function(e,t){var n=this.node.getComponent(m).contentSize,i=new u(e*h.instance.cellUnit,t*h.instance.cellUnit),o=g.instance.mapManager.convertPositionToPlayerViewPosition(i);o?(this.isJoinMap=!0,i=o):(this.isJoinMap=!1,this.currentPostion=i.clone());var r=i.clone();return r.y=i.y+n.height,[r,i]},r.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():f(this.meteorPrefab)},r.update=function(e){if(0==this.isJoinMap&&1==this.isMeteorInMap){var t=g.instance.mapManager.convertPositionToPlayerViewPosition(this.currentPostion);if(t){this.isJoinMap=!0;var n=t.subtract(this.currentPostion),i=g.instance.map.meteorContainer.getPosition().add(n);g.instance.map.meteorContainer.setPosition(i)}}},t}(p)).prototype,"meteorPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,c,l,u,h,p,b,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,c=e.Sprite,l=e.sp,u=e.Label,h=e.UIOpacity,p=e.Input,b=e.tween,d=e.Component},function(e){g=e.TimeMgr}],execute:function(){var m,f,v,y,w,T,O,B,C,D,M,x,F,L,S;r._RF.push({},"8728eBItjRHxbYOOFZ2tQdh","MoneyChange",void 0);var _=a.ccclass,z=a.property;e("MoneyChange",(m=_("MoneyChange"),f=z(s),v=z(c),y=z(l.Skeleton),w=z(u),T=z(h),O=z(u),m((D=t((C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"container",D,o(t)),i(t,"spriteOnMoneyChange",M,o(t)),i(t,"bagOpen",x,o(t)),i(t,"countDown",F,o(t)),i(t,"descriptionBubble",L,o(t)),i(t,"descriptionLabel",S,o(t)),t.endFrame=0,t.endTime=0,t.maxRatio=.9,t.maxTime=0,t.tweenBubble=null,t.descriptionText="Sau {0}s số vàng thu thập được sẽ tự động chuyển thành giá trị tiền ",t}n(t,e);var r=t.prototype;return r.start=function(){this.node.active=!1,this.bagOpen.node.active=!1,this.container.active=!0,this.countDown.node.active=!1,this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_START,this.onShowDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_END,this.onHideDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_CANCEL,this.onHideDescription,this)},r.setEndTime=function(e){this.endFrame!=e&&(this.endFrame=e,this.endTime=g.instance.getFrameTime(e),this.maxTime=this.endTime-g.instance.currentGameTime,this.node.active=!0)},r.update=function(){if(0!=this.endFrame)if(g.instance.currentGameTime>=this.endTime)this.bagOpenEffect();else{var e=this.endTime-g.instance.currentGameTime,t=.001*e;Math.round(t)<30&&(this.countDown.node.active=!0,this.countDown.string=Math.ceil(t).toString());var n=(this.maxTime-e)/this.maxTime;this.spriteOnMoneyChange.fillRange=this.maxRatio*n,this.descriptionLabel.string=this.descriptionText.replace("{0}",Math.ceil(t).toString())}},r.reset=function(){this.node.active=!1,this.spriteOnMoneyChange.fillRange=0,this.endFrame=0,this.bagOpen.node.active=!1,this.container.active=!0,this.tweenBubble&&(this.tweenBubble.stop(),this.tweenBubble=null),this.descriptionBubble.node.active=!1,this.descriptionLabel.string=this.descriptionText.replace("{0}","0"),this.countDown.string="0",this.countDown.node.active=!1},r.bagOpenEffect=function(){var e=this;this.bagOpen.node.active=!0,this.container.active=!1,this.countDown.node.active=!1,this.tweenBubble&&(this.tweenBubble.stop(),this.tweenBubble=null),this.bagOpen.setAnimation(0,"money_bag_open",!1),this.bagOpen.setCompleteListener((function(){e.bagOpen.node.active=!1,e.container.active=!0}))},r.onShowDescription=function(){this.tweenBubble&&this.tweenBubble.stop(),this.tweenBubble=null,this.descriptionBubble.node.active=!0,this.descriptionBubble.opacity=255},r.onHideDescription=function(){var e=this;this.tweenBubble=null,this.tweenBubble=b(this.descriptionBubble).to(2.5,{opacity:0}).call((function(){e.tweenBubble=null,e.descriptionBubble.node.active=!1})).start()},t}(d)).prototype,"container",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(C.prototype,"spriteOnMoneyChange",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"bagOpen",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(C.prototype,"countDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(C.prototype,"descriptionBubble",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(C.prototype,"descriptionLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=C))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/MyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Define.ts"],(function(t){"use strict";var n,o,u,e,c,i;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,u=t._decorator,e=t.Component},function(t){c=t.AudioMgr},function(t){i=t.SoundName}],execute:function(){var r;o._RF.push({},"d753fKngEdFRoVogvjt/8Gz","MyButton",void 0);var s=u.ccclass;u.property,t("MyButton",s("MyButton")(r=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){this.node.on("click",(function(){c.instance.PlaySfx(i.Button)}))},o}(e))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/MySprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts","./Utils.ts"],(function(t){"use strict";var e,i,r,n,s,o,a,c,u,p,h,f,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.asyncToGenerator},function(t){n=t.cclegacy,s=t._decorator,o=t.Sprite,a=t.UITransform,c=t.Size,u=t.Vec3,p=t.Component,h=t.SpriteFrame},function(t){f=t.default},function(t){l=t.utils}],execute:function(){var S;n._RF.push({},"ddc57ibFupLBZ0klhKhOMpt","MySprite",void 0);var d=s.ccclass;s.property,t("MySprite",d("MySprite")(S=function(t){function n(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).sprite=null,e.url="",e.size=void 0,e.isInit=!1,e}e(n,t);var s=n.prototype;return s.init=function(){if(!this.isInit){this.isInit=!0,this.sprite=this.getComponent(o);var t=this.sprite.getComponent(a);this.size=new c(t.width,t.height),this.sprite.sizeMode=o.SizeMode.RAW}},s.onLoad=function(){this.init()},s.setFixedSize=function(t){this.size=t.clone(),this.sprite.sizeMode=o.SizeMode.RAW},s.correctSpriteFrameSize=function(t){this.init(),this.setFixedSize(t),l.CorrectSpriteFrameSize(this.sprite,this.size)},s.Fetch=function(){var t=r(regeneratorRuntime.mark((function t(e){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),!e||this.url==e){t.next=6;break}return t.next=4,f.getRemoteTextureImage(e);case 4:(i=t.sent)&&((r=new h).texture=i,this.setSprite(r));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.FetchAvatar=function(){var t=r(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&""!=e){t.next=2;break}return t.abrupt("return");case 2:if(this.init(),!e||this.url==e){t.next=8;break}return t.next=6,f.requestAvatar(e);case 6:(i=t.sent)&&this.setSprite(i);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setSprite=function(t,e){void 0===e&&(e=!1),this.sprite.spriteFrame=t,e?this.node.scale=u.ONE:l.CorrectSpriteFrameSize(this.sprite,this.size)},i(n,[{key:"Sprite",get:function(){return this.sprite}}]),n}(p))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkBrigde.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./NetworkDefine.ts","./TimeMgr.ts"],(function(e){"use strict";var n,r,t,o,i,s,a,c,h,u;return{setters:[function(e){n=e.createClass,r=e.asyncToGenerator},function(e){t=e.cclegacy,o=e._decorator,i=e.math},function(e){s=e.profile},function(e){a=e.NetworkDefine,c=e.WSGameCmd,h=e.WSCmd},function(e){u=e.TimeMgr}],execute:function(){var l;t._RF.push({},"7977cTNaeRKkqxQx8E3V1id","NetworkBrigde",void 0);var d=o.ccclass;o.property,e("NetworkBrigde",d("NetworkBrigde")(l=function(){function e(){this.ws=null,this.payloadCounter=0,this.worker=null,this.servers=[],this.onOpen=null,this.onMessage=null,this.onError=null,this.onClose=null}var t=e.prototype;return t.connect=function(){null==this.ws&&(this.ws=new WebSocket(a.HOST_SOCKET),this.ws.onopen=this.onopen.bind(this),this.ws.onmessage=this.onmessage.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onclose=this.onclose.bind(this))},t.disconnect=function(){this.ws.readyState==WebSocket.OPEN&&(this.ws.close(),this.ws=null)},t.onopen=function(e){this.onOpen&&this.onOpen(),console.log("[NetworkBrigde] ws is connected!")},t.onmessage=function(e){this.binaryHandler(e.data)},t.onerror=function(e){this.onError&&this.onError()},t.onclose=function(e){this.onClose&&(console.log("[NetworkBrigde] ws is closed!"),this.onClose())},t.send=function(e){this.ws.readyState==WebSocket.OPEN&&this.ws.send(e)},t.reconnect=function(){null!=this.ws&&this.ws.close(),this.connect()},t.binaryHandler=function(e){var n=this;e&&e.arrayBuffer().then((function(r){try{n.decodeMsgData(r)}catch(n){console.log("binaryHandler",n,e)}}))},t.decodeMsgData=function(){var e=r(regeneratorRuntime.mark((function e(n){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=phoenix.krun.internal.MessageWrapper.decode(new Uint8Array(n)),e.t0=r.msgClass,e.next=e.t0===h.ResVerify?4:e.t0===h.MsgPing?6:e.t0===h.ResWorker?7:11;break;case 4:return this.worker,e.abrupt("break",11);case 6:return e.abrupt("break",11);case 7:return t=phoenix.krun.internal.ResWorker.decode(r.msg),this.worker=t.worker,console.log("[NetworkBrigde] ResWorker: "+this.worker),e.abrupt("break",11);case 11:this.onMessage&&this.onMessage(r);case 12:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t.sendProto=function(e,n){var r=new phoenix.krun.internal.MessageWrapper;r.msg=n,r.msgClass=e,r.worker=this.worker;var t=phoenix.krun.internal.MessageWrapper.encode(r).finish();this.send(t)},t.sendAction=function(e,n){var r=u.instance.serverTime,t=new phoenix.krun.KrunMsg;t.timestamp=r,t.cmd=e,n&&(t.body=n);var o=phoenix.krun.KrunMsg.encode(t).finish();this.sendProto(c.KrunMsg,o)},t.getRoomName=function(){var e=a.SERVER_NAME;if(this.servers&&this.servers.length>0)e=this.servers[i.randomRangeInt(0,this.servers.length)],console.log(e);else if(!a.IS_DEV){i.randomRangeInt(0,3);e=a.SERVER_NAME}return e},t.authentication=function(e){var n=new phoenix.krun.internal.ReqVerify;n.jwt=e;var r=phoenix.krun.internal.ReqVerify.encode(n).finish();this.sendProto("ReqVerify",r)},t.reqWorker=function(){if(!this.worker){var e=new phoenix.krun.internal.ReqWorker;e.game=this.getRoomName();var n=phoenix.krun.internal.ReqWorker.encode(e).finish();this.sendProto(h.ReqWorker,n)}},t.reqDefines=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES,null)},t.quitGame=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME,null),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME),console.log("[NetworkBridge] quit game")},t.joinGame=function(e){var n=new phoenix.krun.KrunReqPlayerJoin;n.displayName=""==s.UserName?"Player":s.UserName,n.gameId="",n.isHunter=e,this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME,phoenix.krun.KrunReqPlayerJoin.encode(n).finish()),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME)},t.ping=function(){var e=new phoenix.krun.internal.MsgPing;e.id=this.payloadCounter++,e.createAt=Date.now();var n=phoenix.krun.internal.MsgPing.encode(e).finish();this.sendProto(h.MsgPing,n)},n(e,[{key:"isReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN}},{key:"isPingReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN&&""!=this.worker}},{key:"isHttps",get:function(){return-1!=window.location.href.indexOf("https://")}}]),e}())||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkDefine.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){e({WSCmd:void 0,WSGameCmd:void 0}),r._RF.push({},"2af94HN97RHnL27I4ClZS71","NetworkDefine",void 0);var n,i,o=e("NetworkDefine",(function(){}));o.IS_DEV=!1,o.SERVER_NAME="krun",o.DEBUG_TOKEN="0937839557",o.lostConnectionTime=3e4,o.HOST=o.IS_DEV?"https://m.dev.mservice.io":"https://m.mservice.io",o.URL_STAGING="wss://realtime.mservice.io/phoenix-krun-connector",o.URL_DEV="wss://realtime.dev.mservice.io/phoenix-krun-connector/connector",o.HOST_SOCKET=o.IS_DEV?o.URL_DEV:o.URL_STAGING,o.Avatar="https://s3-ap-southeast-1.amazonaws.com/avatars.mservice.io/{0}.png",o.DEEP_LINK="deeplink-universal/v1/content-dynamic",o.Profile="/phoenix-profile/v1/profile",function(e){e.MsgPing="MsgPing",e.ReqWorker="ReqWorker",e.ResWorker="ResWorker",e.ResVerify="ResVerify",e.ReqVerify="ReqVerify",e.KrunMsg="KrunMsg"}(n||(n=e("WSCmd",{}))),function(e){e.KrunMsg="KrunMsg"}(i||(i=e("WSGameCmd",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GlobalDefine.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,n,r,o,u,s;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy},function(e){r=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.globalDefine},function(e){s=e.NetworkDefine}],execute:function(){n._RF.push({},"b72b0V4dQJJTLMgBo4CZ95K","NetworkMgr",void 0);e("networkMgr",new(function(){function e(){}var n=e.prototype;return n.getRequest=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",s.HOST+t,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Authorization","Bearer "+u.profile.userToken),r.responseType="json",r.timeout=3e3,r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<400?e&&e(r.response):e&&e(null))},r.send()})));case 4:return e.abrupt("return",new Promise((function(e,n){r.request(o.getCloudMessage,{path:t}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.postRequest=function(){var e=t(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isBrowser){e.next=4;break}return e.abrupt("return",new Promise((function(e,r){var o=new XMLHttpRequest;o.open("POST",s.HOST+t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+u.profile.userToken),o.responseType="json",o.timeout=3e3,o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<400?e&&e(o.response):e&&e(null))},o.send(JSON.stringify(n))})));case 4:return e.abrupt("return",new Promise((function(e,u){r.request(o.sendCloudMessage,{path:t,body:n}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestHeader=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("HEAD",t,!0),r.onload=function(){var t=r.getResponseHeader("Content-Type");e(t)},r.onerror=function(t){e("image/png")},r.timeout=3e3,r.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectInterface.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy}],execute:function(){var l;t("ObjectType",void 0),e._RF.push({},"eae2bXg6/lOmpFQekiWwAng","ObjectInterface",void 0),function(t){t[t.MapCell=0]="MapCell",t[t.Magma=1]="Magma",t[t.Obstacle=2]="Obstacle",t[t.Item=3]="Item",t[t.Player=4]="Player",t[t.ItemSpecial=5]="ItemSpecial",t[t.Trap=6]="Trap"}(l||(l=t("ObjectType",{})));var n=function(t,i){this.x=0,this.y=0,this.x=t,this.y=i};t("obstacle",function(t){function e(i,e,l){var n;return(n=t.call(this,i,e)||this).type=void 0,n.type=l,n}return i(e,t),e}(n)),t("itemTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listItem=null,l}i(e,t);var l=e.prototype;return l.getItems=function(){return this.listItem},l.addItem=function(t){null==this.listItem&&(this.listItem=[]),this.listItem.push(t)},l.isExitItem=function(t){if(null==this.listItem)return!1;for(var i=0;i<this.listItem.length;i++)if(this.listItem[i].id==t)return!0},l.removeItem=function(t){this.listItem.splice(this.listItem.findIndex((function(i){return i.id==t})),1),0==this.listItem.length&&(this.listItem=null)},e}(n)),t("itemObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.value=void 0,r.id=l,r.value=n,r}return i(e,t),e}(n)),t("playerTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listPlayer=null,l}i(e,t);var l=e.prototype;return l.getPlayers=function(){return this.listPlayer},l.addPlayer=function(t){null==this.listPlayer&&(this.listPlayer=[]),this.listPlayer.push(t)},l.isExitPlayer=function(t){if(null==this.listPlayer)return!1;for(var i=0;i<this.listPlayer.length;i++)if(this.listPlayer[i].uid==t)return!0},l.removePlayer=function(t){this.listPlayer.splice(this.listPlayer.findIndex((function(i){return i.uid==t})),1),0==this.listPlayer.length&&(this.listPlayer=null)},e}(n)),t("playerObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).uid=void 0,r.data=void 0,r.uid=l,r.data=n,r}return i(e,t),e}(n)),t("itemSpecialObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.type=void 0,r.id=l,r.type=n,r}return i(e,t),e}(n)),t("itemSpecialTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listItemSpecial=null,l}i(e,t);var l=e.prototype;return l.getItems=function(){return this.listItemSpecial},l.addItem=function(t){null==this.listItemSpecial&&(this.listItemSpecial=[]),this.listItemSpecial.push(t)},l.isExitItem=function(t){if(null==this.listItemSpecial)return!1;for(var i=0;i<this.listItemSpecial.length;i++)if(this.listItemSpecial[i].id==t)return!0},l.removeItem=function(t){this.listItemSpecial.splice(this.listItemSpecial.findIndex((function(i){return i.id==t})),1),0==this.listItemSpecial.length&&(this.listItemSpecial=null)},e}(n)),t("trapObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.type=void 0,r.id=l,r.type=n,r}return i(e,t),e}(n)),t("trapTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listTrap=null,l}i(e,t);var l=e.prototype;return l.getTraps=function(){return this.listTrap},l.addTrap=function(t){null==this.listTrap&&(this.listTrap=[]),this.listTrap.push(t)},l.isExitTrap=function(t){if(null==this.listTrap)return!1;for(var i=0;i<this.listTrap.length;i++)if(this.listTrap[i].id==t)return!0},l.removeTrap=function(t){this.listTrap.splice(this.listTrap.findIndex((function(i){return i.id==t})),1),0==this.listTrap.length&&(this.listTrap=null)},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/ObstacleCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,l,n,s,c,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Sprite,o=e.Component}],execute:function(){var a,p,u,f,y;n._RF.push({},"ef10aNmvmpCdqtZlVTWTkxm","ObstacleCell",void 0);var b=s.ccclass,h=s.property;e("ObstacleCell",(a=b("ObstacleCell"),p=h(c),a((y=t((f=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"sprite",y,l(t)),t.obstacleType=null,t}r(t,e);var n=t.prototype;return n.setSprite=function(e){this.sprite.spriteFrame=e},n.setType=function(e){this.obstacleType=e},t}(o)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/PerformanceTracking.ts",["cc","./GlobalDefine.ts","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var r,o,n,t;return{setters:[function(e){r=e.cclegacy},function(e){o=e.globalDefine},function(e){n=e.NetworkDefine},function(e){t=e.networkMgr}],execute:function(){r._RF.push({},"16ccfiMVyROF6MR8XwCKutx","PerformanceTracking",void 0);e("performanceTracking",new(function(){function e(){this.APPVARZ_FPS="/varz/v2/fps",this.APPVARZ_API_ERROR="/varz/v2/error"}var r=e.prototype;return r.appVazFps=function(e,r){var a=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"fps",serviceName:o.feature.featureID,value:r}];return console.log("[PerformanceTracking] FPS: ",a),t.postRequest(n.HOST+this.APPVARZ_FPS,a)},r.appVazError=function(e,r,a){var s=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"error",serviceName:o.feature.featureID,errorMessage:a,errorCode:r}];return console.log("[PerformanceTracking] Error: ",s),t.postRequest(n.HOST+this.APPVARZ_API_ERROR,s)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./GameEvent.ts","./Utils.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,h,l,c,p,u,f,m,d,y,v,g,M,P,b,w,C,T,z,H,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,h=t.Node,l=t.sp,c=t.Label,p=t.Layout,u=t.UITransform,f=t.Vec2,m=t.Sprite,d=t.Material,y=t.Vec3,v=t.tween,g=t.Component},function(t){M=t.AudioMgr},function(t){P=t.default},function(t){b=t.utils},function(t){w=t.GamePlayEventName,C=t.SoundName},function(t){T=t.GameDefine},function(t){z=t.GameMgr},function(t){H=t.GamePlay},function(t){L=t.Input}],execute:function(){var E,I,A,F,U,B,D,x,O,_,S,k,R,W,G,N,J,V,q,j,X,Y,Z,K,Q,$,tt,et,it,nt,at;s._RF.push({},"7e9b0vEoltFEYJDBXpgwgr6","Player",void 0);var ot=r.ccclass,st=r.property;t("Player",(E=ot("Player"),I=st(h),A=st(l.Skeleton),F=st(h),U=st(h),B=st(l.Skeleton),D=st(c),x=st(h),O=st(p),_=st(u),S=st(u),k=st(u),R=st(h),W=st(c),G=st(h),E((V=e((J=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"model",V,a(e)),n(e,"animation",q,a(e)),n(e,"characterFreeze",j,a(e)),n(e,"enemyFreeze",X,a(e)),n(e,"earnMoney",Y,a(e)),n(e,"nameLabel",Z,a(e)),n(e,"navigator",K,a(e)),n(e,"hpLayout",Q,a(e)),n(e,"hpBarUITrans",$,a(e)),n(e,"hpUITrans",tt,a(e)),n(e,"shieldUITrans",et,a(e)),n(e,"hpEffect",it,a(e)),n(e,"hpEffectLabel",nt,a(e)),n(e,"hpEffectShield",at,a(e)),e.isHunter=!1,e.vec2Up=new f(0,1),e.timeChangeDirectionModel=.2,e.tweenChangeDirectionModel1=null,e.tweenChangeDirectionModel2=null,e._isMainPlayer=!1,e.direction=f.ZERO,e.isFreeze=!1,e.isAttacking=!1,e.endAttackFrame=0,e.hpPoint=0,e.hpPointTemp=0,e.hpBarOriginalWidth=116,e.hpBarMinWidth=5,e.tweenHpBar=null,e.tweenHpChange=null,e.hpChangeOriginPosition=null,e.isInit=!1,e.isJoinMap=!1,e.tweenMove=null,e.tempPosition=void 0,e.mat=void 0,e}i(e,t);var s=e.prototype;return s.setName=function(t){this.nameLabel.string=b.trimName(t,2)},s.setHunter=function(t){this.isHunter=t,this.setHpColor()},s.setHpColor=function(){var t=this.hpUITrans.node.getComponent(m);this.isMainPlayer?t.color=T.BLU_COLOR:this.isHunter?t.color=T.RED_COLOR:this.isHunter==z.instance.IsHunter()?t.color=T.BLU_COLOR:t.color=T.RED_COLOR},s.onLoad=function(){this.init()},s.init=function(){this.tempPosition=this.node.position.clone(),this.hpChangeOriginPosition=this.hpEffect.position.clone(),this.animation.enabled=!0,this.mat=new d,this.mat.copy(this.animation.customMaterial),this.animation.customMaterial=this.mat,this.isInit=!0},s.update=function(t){if(this._isMainPlayer&&L.IsTouchMove){var e=b.getAngleFrom2Vec(this.vec2Up,L.Instance.delta),i=T.instance.convertRadToMoveCmd(e);z.instance.playerMove(i)}this.hpLayout.node.position=new y(-this.hpBarUITrans.width/2,this.hpLayout.node.position.y)},s.updateMoveAnimation=function(){this.animation.enabled=!0,this.changeDriectionModel(),this.playRunAnimation()},s.changeDriectionModel=function(){var t=this,e=this.direction.x;if(e>0){if(1==this.model.scale.x)return;if(this.tweenChangeDirectionModel1)return;this.tweenChangeDirectionModel1=v(this.model).to(this.timeChangeDirectionModel,{scale:new y(1,1,0)}).call((function(){t.tweenChangeDirectionModel1=null})).start()}else if(e<0){if(-1==this.model.scale.x)return;if(this.tweenChangeDirectionModel2)return;this.tweenChangeDirectionModel2=v(this.model).to(this.timeChangeDirectionModel,{scale:new y(-1,1,0)}).call((function(){t.tweenChangeDirectionModel2=null})).start()}},s.getAnimationName=function(t){var e=this.isHunter?"enemy_":"character_",i="";return this.direction.y>0&&(i="_up"),e+t+i},s.playIdleAnimaton=function(){this.playAnimation("idle")},s.playRunAnimation=function(){this.playAnimation("run")},s.playAnimation=function(t,e){void 0===e&&(e=!0),this.isAttacking||(t=this.getAnimationName(t),this.animation.animation!=t&&this.animation.setAnimation(0,t,e))},s.teleport=function(t,e){this.tempPosition=t;var i=this.node.position.clone();this.node.setPosition(e),this.isMainPlayer&&(P.emit(w.PlayerTeleport,t,i,e.clone()),P.emit(w.UpdateCamera,i)),0==this.node.active?this.stopMove(t):this.setPositionMainPlayer(t)},s.setPositionFromServer=function(t,e){if(this.isInit){var i=new y(t,e,0);if(0==this.isJoinMap)return this.node.active=!0,this.isJoinMap=!0,this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.node.setPosition(i),void(this.tempPosition=i.clone());if(this.node.position.equals(i))this.tempPosition=i;else if(!this.tempPosition.equals(i)){var n=i.x-this.tempPosition.x,a=i.y-this.tempPosition.y;if(Math.abs(n)>T.distanceToTeleport||Math.abs(a)>T.distanceToTeleport){var o=this.node.position.clone(),s=this.tempPosition.clone();Math.abs(n)>T.distanceToTeleport&&(s.x<i.x?o.x+=T.instance.mapWidth:s.x>i.x&&(o.x-=T.instance.mapWidth)),Math.abs(a)>T.distanceToTeleport&&(s.y<i.y?o.y+=T.instance.mapHeight:s.y>i.y&&(o.y-=T.instance.mapHeight));var r=i.clone().subtract(o);return this.direction=new f(r.x,r.y),void this.teleport(i,o)}this.tempPosition=i.clone();var h=i.clone().subtract(this.node.position);this.direction=new f(h.x,h.y),this.updateMoveAnimation(),this.setPositionMainPlayer(i)}}},s.stopMove=function(t){this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null,this.tempPosition=t.clone())},s.setPositionMainPlayer=function(t){var e=this;this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.updateMoveAnimation(),0!=this.node.active?this.tweenMove=v(this.node).to(T.instance.timePerFrameServerSecondFake,{position:t}).call((function(){e.tweenMove=null,e.playIdleAnimaton()})).start():this.node.setPosition(t)},s.setHpBarWidth=function(t){var e;t<this.hpBarMinWidth&&0!=t&&(t=this.hpBarMinWidth),t>this.hpBarOriginalWidth?(this.hpLayout.enabled=!0,this.shieldUITrans.node.active=!0,this.shieldUITrans.setContentSize(t-this.hpBarOriginalWidth,this.shieldUITrans.height)):(this.shieldUITrans.setContentSize(0,this.shieldUITrans.height),this.shieldUITrans.node.active=!1,this.hpLayout.enabled=!1),null==(e=this.hpUITrans)||e.setContentSize(t,this.hpUITrans.height)},s.setHp=function(t){var e=this;if(this.hpPoint!=t&&this.hpPointTemp!=t&&this.isInit){var i=t-this.hpPointTemp;0!=this.hpPointTemp&&(this.isMainPlayer&&(i<0?M.instance.PlaySfx(C.Burning):M.instance.PlaySfx(C.Healing)),this.hpChangeEffect(i,this.hpPointTemp>=this.getMaxHpPoint()&&t>=this.getMaxHpPoint())),this.hpPointTemp=t,this.tweenHpBar&&(this.tweenHpBar.stop(),this.tweenHpBar=null),this.tweenHpBar=v({hp:this.hpPoint}).to(.1,{hp:t},{onUpdate:function(t,i){var n=e.hpBarOriginalWidth*t.hp/e.getMaxHpPoint();e.setHpBarWidth(n),t.hp<e.hpPoint&&e.isMainPlayer&&P.emit(w.LostHp)}}).call((function(){e.hpPoint=t,e.tweenHpBar=null})).start()}},s.hpChangeEffect=function(t,e){var i=this;void 0===e&&(e=!1),this.tweenHpChange&&(this.tweenHpChange.stop(),this.tweenHpChange=null),this.hpEffect.active=!0,t<0?(this.hpEffectLabel.color=T.RED_COLOR,this.hpEffectLabel.string=t.toString()):(this.hpEffectLabel.color=T.BLU_COLOR,this.hpEffectLabel.string="+"+t.toString()),e?(t>0&&(this.hpEffectLabel.color=T.GREEN_LIGHT_COLOR),this.hpEffectShield.active=!0):this.hpEffectShield.active=!1,this.tweenHpChange=v(this.hpEffect).by(.5,{position:new y(0,30)}).call((function(){i.hpEffect.active=!1,i.hpEffect.setPosition(i.hpChangeOriginPosition)})).start()},s.getHpPoint=function(){return this.hpPoint},s.getMaxHpPoint=function(){return T.instance.getMaxHpPoint(this.isHunter)},s.setFrezze=function(t){this.isFreeze!=t&&this.isInit&&(this.isFreeze=t,t?(this.animation.enabled=!1,this.isHunter?this.enemyFreeze.active=!0:this.characterFreeze.active=!0):(this.animation.enabled=!0,this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.playIdleAnimaton()))},s.dead=function(t){var e=this;void 0===t&&(t=null),this.enemyFreeze.active=!1,this.characterFreeze.active=!1,v({value:0}).to(.5,{value:1},{onUpdate:function(t,i){e.mat.setProperty("dissolveThreshold",t.value),e.animation.customMaterial=e.mat}}).call((function(){t&&t()})).start()},s.earnMoneyEffect=function(){var t=this;this.earnMoney.node.active=!0,this.earnMoney.setAnimation(0,"character_run_earn_money",!1),this.earnMoney.setCompleteListener((function(){t.earnMoney.node.active=!1}))},s.playEnemyAttack=function(){var t=this;this.playAnimation("atk",!1),this.isAttacking=!0,this.animation.setCompleteListener((function(){t.isAttacking=!1}))},s.setAttack=function(t){this.endAttackFrame!=t&&this.isInit&&(this.endAttackFrame=t,this.playEnemyAttack(),this.isMainPlayer&&(H.instance.player.playEnemyAttack(),M.instance.PlaySfx(C.Bite)))},s.reset=function(){this.isInit||this.init(),this.animation.enabled=!0,this.mat.setProperty("dissolveThreshold",0),this.animation.customMaterial=this.mat,this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.isFreeze=!1,this.hpPoint=0,this.hpPointTemp=0},o(e,[{key:"isMainPlayer",get:function(){return this._isMainPlayer},set:function(t){this.navigator.active=t,this._isMainPlayer=t}}]),e}(g)).prototype,"model",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(J.prototype,"animation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(J.prototype,"characterFreeze",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(J.prototype,"enemyFreeze",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(J.prototype,"earnMoney",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(J.prototype,"nameLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(J.prototype,"navigator",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(J.prototype,"hpLayout",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(J.prototype,"hpBarUITrans",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(J.prototype,"hpUITrans",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(J.prototype,"shieldUITrans",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(J.prototype,"hpEffect",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(J.prototype,"hpEffectLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(J.prototype,"hpEffectShield",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=J))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,a,r,s,c,o,l,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Label,o=t.Sprite,l=t.Component},function(t){u=t.TimeMgr},function(t){m=t.utils}],execute:function(){var p,h,T,f,d,g,y;r._RF.push({},"7c578+IJnBFuayyZWz6dxep","PlayerAttack",void 0);var k=s.ccclass,A=s.property;t("PlayerAttack",(p=k("PlayerAttack"),h=A(c),T=A(o),p((g=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"countDown",g,a(e)),n(e,"spriteOnAttack",y,a(e)),e.endTime=0,e.isStopAtack=!1,e.maxRatio=.8,e.maxTime=0,e}i(e,t);var r=e.prototype;return r.start=function(){this.node.active=!1},r.stopAttack=function(t){this.isStopAtack||(this.isStopAtack=!0,this.node.active=!0,this.endTime=u.instance.getFrameTime(t),this.maxTime=this.endTime-u.instance.currentGameTime,console.log("currentTime: "+m.getTime(new Date(u.instance.currentGameTime))+" endTime: "+m.getTime(new Date(this.endTime))))},r.update=function(){if(this.isStopAtack)if(u.instance.currentGameTime>=this.endTime)this.reset();else{var t=this.endTime-u.instance.currentGameTime;this.countDown.string=Math.ceil(t/1e3).toString();var e=(this.maxTime-t)/this.maxTime;this.spriteOnAttack.fillRange=this.maxRatio*e}},r.reset=function(){this.isStopAtack=!1,this.node.active=!1,this.countDown.string="0",this.spriteOnAttack.fillRange=0},e}(l)).prototype,"countDown",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(d.prototype,"spriteOnAttack",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./AudioMgr.ts","./GameEvent.ts","./GlobalDefine.ts","./TimeMgr.ts","./Define.ts","./GameMgr.ts"],(function(e){"use strict";var t,i,n,s,a,r,o,c,u,h,l,f,m,p,d,y,g,D,S,v,E,k,z,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Label,c=e.Node,u=e.UITransform,h=e.Mask,l=e.input,f=e.Input,m=e.KeyCode,p=e.tween,d=e.Size,y=e.Component},function(e){g=e.maxApiUtils},function(e){D=e.AudioMgr},function(e){S=e.default},function(e){v=e.globalDefine},function(e){E=e.TimeMgr},function(e){k=e.EventName,z=e.SoundName},function(e){A=e.GameMgr}],execute:function(){var b,I,P,N,T,F,w,M,K;a._RF.push({},"0082dpFjKVCAqeEH9MAKrTP","PlayerDead",void 0);var O,L=r.ccclass,_=r.property;!function(e){e[e.NONE=0]="NONE",e[e.DEAD=1]="DEAD",e[e.ALIVE=2]="ALIVE"}(O||(O={}));e("PlayerDead",(b=L("PlayerDead"),I=_(o),P=_(c),N=_(c),b((w=t((F=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"timeout",w,s(t)),n(t,"farmerFreeze",M,s(t)),n(t,"hunterFreeze",K,s(t)),t.maskTransform=null,t.mask=null,t.state=O.NONE,t.endTime=0,t.isInit=!1,t}i(t,e);var a=t.prototype;return a.init=function(){var e=this;this.isInit||(this.maskTransform=this.node.getComponent(u),this.mask=this.node.getComponent(h),l.on(f.EventType.KEY_DOWN,this.onKeyDown,this),S.on(k.onPlayerWakeUp,(function(){e.setState(O.ALIVE)}),this),this.isInit=!0)},a.onDead=function(e){this.state==O.NONE&&(D.instance.PlaySfx(z.Freeze),this.init(),this.node.active=!0,A.instance.IsHunter()?this.hunterFreeze.active=!0:this.farmerFreeze.active=!0,this.endTime=E.instance.getFrameTime(e),this.setState(O.DEAD))},a.onKeyDown=function(e){switch(e.keyCode){case m.KEY_J:this.setState(O.DEAD);break;case m.KEY_K:this.Shaking()}},a.setStatusPlayer=function(e){var t=this;this.isInit&&(!e&&A.instance.isPlaying&&D.instance.PlaySfx(z.Unfreeze),this.mask.inverted=!e,p(this.maskTransform).set({contentSize:new d(0,0)}).to(.3,{contentSize:new d(2500,2500)}).call((function(){t.node.active=e,e||t.setState(O.NONE)})).start())},a.OnReceiveShakeInfo=function(e){var t=e.x,i=e.y,n=e.z,s=Math.sqrt(t*t+i*i+n*n);(v.isIOS?s>=2:s>=20)&&1==this.node.active&&this.Shaking()},a.setState=function(e){if(this.state!=e)switch(this.state=e,this.state){case O.DEAD:this.setStatusPlayer(!0),g.registerShaking(this.OnReceiveShakeInfo.bind(this));break;case O.ALIVE:this.setStatusPlayer(!1),g.unRegisterShaking()}},a.update=function(e){switch(this.state){case O.DEAD:var t=(this.endTime-E.instance.currentGameTime)/1e3;if((t=Math.ceil(t))<=0)return void this.setState(O.ALIVE);this.timeout.string=t.toString()+"s"}},a.Shaking=function(){A.instance.playerWakeUp()},a.reset=function(){this.setStatusPlayer(!1),this.timeout.string="0s",this.farmerFreeze.active=!1,this.hunterFreeze.active=!1},t}(y)).prototype,"timeout",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(F.prototype,"farmerFreeze",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"hunterFreeze",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=F))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./GamePlay.ts","./Player.ts"],(function(e){"use strict";var t,a,n,i,r,o,l,s,y,u,c,p,P,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Prefab,s=e.NodePool,y=e.instantiate,u=e.Vec3,c=e.Component},function(e){p=e.profile},function(e){P=e.GamePlay},function(e){f=e.Player}],execute:function(){var d,g,m,b,h;r._RF.push({},"05c97T+GqtDTo8sqfbQVP7P","PlayerManager",void 0);var v=o.ccclass,M=o.property;e("PlayerManager",(d=v("PlayerManager"),g=M(l),d((h=t((b=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"playerPrefab",h,i(t)),t.playerPool=new s,t}a(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<5;e++)this.playerPool.put(y(this.playerPrefab))},r.initPlayer=function(e,t,a,n){void 0===a&&(a=null),console.log("initPlayer",e);var i=this.getPlayer();i.setPosition(a),i.name=e.uid,t.addPlayer(i);var r=i.getComponent(f);r.isJoinMap=!1,e.uid==p.Uid?(P.instance.player=r,r.isMainPlayer=!0,i.setSiblingIndex(-1)):(r.isMainPlayer=!1,i.setSiblingIndex(0)),r.setHunter(e.isHunter),r.setName(e.displayName),r.playIdleAnimaton(),r.reset()},r.initPlayerJoin=function(e,t){if(e.uid!=p.Uid){var a=this.getPlayer();a.name=e.uid,a.active=!0,t.addPlayer(a),a.setPosition(new u(1e4,1e4)),a.setSiblingIndex(0);var n=a.getComponent(f);n.isJoinMap=!1,n.setName(e.displayName),n.setHunter(e.isHunter),n.playIdleAnimaton(),n.reset()}},r.getPlayer=function(){return this.playerPool.size()>0?(console.log("getPlayer from pool"),this.playerPool.get()):y(this.playerPrefab)},t}(c)).prototype,"playerPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,s,c,l,a,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Button,l=t.Node,a=t.Vec3,u=t.tween,p=t.Component}],execute:function(){var h,f,d,v,b,y,C;r._RF.push({},"8f361kJtmhHtZkJqTzh3frO","Popup",void 0);var m=s.ccclass,g=s.property;t("Popup",(h=m("Popup"),f=g(c),d=g(l),h((y=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"btnClose",y,o(e)),i(e,"container",C,o(e)),e.onClose=null,e}n(e,t);var r=e.prototype;return r.start=function(){this.btnClose.node.on("click",this.OnCloseClick.bind(this))},r.OnCloseClick=function(){var t;null==(t=this.onClose)||t.call(this),this.hide()},r.show=function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,this.container.setScale(a.ZERO),u(this.container).to(.5,{scale:new a(1,1,1)},{easing:"bounceInOut"}).start(),t&&setTimeout((function(){e.hide()}),3e3)},r.hide=function(t){void 0===t&&(t=!0),this.node.active=!1,t&&(this.node.removeFromParent(),this.node.destroy())},e}(p)).prototype,"btnClose",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(b.prototype,"container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Popup.ts","./PopupMgr.ts"],(function(t){"use strict";var n,e,i,o,l,r,a,u,c,s,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,a=t.Label,u=t.Button},function(t){c=t.PopupName},function(t){s=t.Popup},function(t){p=t.PopupMgr}],execute:function(){var b,f,h,k,y,d,g,C,B,v,L,w,O,P,z,m,S,N,Y,T,I;l._RF.push({},"d5dd5wf3z1PYJgXtTokFCvv","PopupConfig",void 0);var D,_=r.ccclass,F=r.property;!function(t){t[t.Ok=0]="Ok",t[t.YesNo=1]="YesNo"}(D||(D={}));t("PopupConfig",(b=_("PopupConfig"),f=F(a),h=F(a),k=F(u),y=F(u),d=F(u),g=F(a),C=F(a),B=F(a),v=F(a),b((O=n((w=function(t){function n(){for(var n,e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];return n=t.call.apply(t,[this].concat(l))||this,i(n,"title",O,o(n)),i(n,"description",P,o(n)),i(n,"yesBtn",z,o(n)),i(n,"noBtn",m,o(n)),i(n,"okBtn",S,o(n)),n.okCallback=null,n.yesCallback=null,n.noCallback=null,i(n,"headerLabel",N,o(n)),i(n,"buttonLabel",Y,o(n)),i(n,"yesButtonLabel",T,o(n)),i(n,"noButtonLabel",I,o(n)),n}e(n,t);var l=n.prototype;return l.start=function(){t.prototype.start.call(this),this.yesBtn.node.on("click",this.OnYesClick.bind(this)),this.noBtn.node.on("click",this.OnNoClick.bind(this)),this.okBtn.node.on("click",this.OnOkClick.bind(this))},l.OnOkClick=function(){this.okCallback&&this.okCallback(),this.hide()},l.OnYesClick=function(){this.yesCallback&&this.yesCallback(),this.hide()},l.OnNoClick=function(){this.noCallback&&this.noCallback(),this.hide()},l.SetInfo=function(t){this.description.string=t.descriptionLabel,this.title.string=t.titleLabel},l.SetTypeOk=function(t){this.okCallback=t,this.SetType(D.Ok)},l.SetTypeYesNo=function(t,n,e,i){this.yesCallback=e,this.noCallback=i,this.yesButtonLabel.string=t,this.noButtonLabel.string=n,this.SetType(D.YesNo)},l.SetType=function(t){switch(this.noBtn.node.active=!1,this.yesBtn.node.active=!1,this.okBtn.node.active=!1,t){case D.Ok:this.okBtn.node.active=!0;break;case D.YesNo:this.noBtn.node.active=!0,this.yesBtn.node.active=!0}},n.Show=function(t,n){if(void 0===n&&(n=null),p.Instance){var e=p.Instance.Show(c.PopupConfig,n);return null==e||e.SetInfo(t),e}},n}(s)).prototype,"title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(w.prototype,"description",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(w.prototype,"yesBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(w.prototype,"noBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(w.prototype,"okBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(w.prototype,"headerLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(w.prototype,"buttonLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(w.prototype,"yesButtonLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(w.prototype,"noButtonLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=w))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts","./Popup.ts"],(function(n){"use strict";var e,t,o,i,r,a,s,c,u,p,f,l,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,r=n.createClass},function(n){a=n.cclegacy,s=n._decorator,c=n.Prefab,u=n.instantiate,p=n.Component},function(n){f=n.PopupName},function(n){l=n.utils},function(n){h=n.Popup}],execute:function(){var d,g,v,P,b,m;a._RF.push({},"8203bcYBqBDwZg65M1oBkCP","PopupMgr",void 0);var y=s.ccclass,C=s.property;n("PopupMgr",(d=y("PopupMgr"),g=C(c),d(((m=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,o(e,"prefabs",b,i(e)),e}t(e,n);var a=e.prototype;return a.start=function(){e.instance=this,this.Load()},a.Show=function(n,e){if(void 0===e&&(e=null),!this.node.getChildByName(n)){var t=this.prefabs.find((function(e){return e.data.name==n}));if(t){var o=u(t).getComponent(h);return e&&(o.onClose=e),o.node.setParent(this.node),o.node.name=n,o.show(),o}}},a.Hide=function(n){this.node.children.forEach((function(e){e.name==n&&e.getComponent(h).hide()}))},a.hideAll=function(){this.node.children.forEach((function(n){n.active&&n.getComponent(h).hide()}))},a.IsContain=function(n){var e=!1;return this.prefabs.forEach((function(t){t.data.name!=n||(e=!0)})),e},a.IsShow=function(n){var e=this.node.children.find((function(e){return e.name==n}));return e&&e.active},a.Load=function(){var n=this;Object.keys(f).forEach((function(e){n.IsContain(e)||l.getPrefabRes("prefabs/popups/"+e,(function(t){t?(n.prefabs.push(t),console.log("Popup loaded: "+e)):console.error("Popup loaded fail: "+e)}))}))},r(e,null,[{key:"Instance",get:function(){return e.instance}}]),e}(p)).instance=null,b=e((P=m).prototype,"prefabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=P))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Profile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GameEvent.ts","./GameApi.ts","./NetworkDefine.ts","./Define.ts"],(function(e){"use strict";var t,n,r,i,s,o,u,a,c,f;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator},function(e){r=e.cclegacy,i=e.log},function(e){s=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.default},function(e){a=e.gameApi},function(e){c=e.NetworkDefine},function(e){f=e.EventName}],execute:function(){r._RF.push({},"a294f7m3ZhJL5sqSxj8VgN4","Profile",void 0);e("Profile",function(){function e(){this.devToken=c.DEBUG_TOKEN,this.userId=void 0,this.userToken=void 0,this.name=void 0,this.isOk=!1,this.avatar="",this.money=0,this.ticket=0}var r=e.prototype;return r.init=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n,r,u,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.request(o.getProfile);case 2:t=e.sent,r=(n=t||{}).userId,u=n.token,a=n.name,this.userId=r||this.devToken,this.userToken=u||this.devToken,this.name=a||"Dev Player",i("[Profile] init: ",t),this.isOk=!0,this.updateProfile();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.updateProfile=function(){var e=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getProfile();case 2:(t=e.sent)&&(console.log("[Profile] get from server: ",JSON.stringify(t.result)),this.avatar=t.result.avartar,this.money=7777,this.ticket=7,u.emit(f.onUpdateProfile));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t(e,[{key:"UserName",get:function(){return this.name}},{key:"Uid",get:function(){return this.userId},set:function(e){this.userId=e}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"316b6Tkd2lDBLR3fHnQPy6y","Random",void 0);t("Random",function(){function t(){this.seed=123456789,this.x=123456789,this.y=362436069,this.z=521288629,this.max_int=2147483647,this.int_to_float=1/2147483647}var n=t.prototype;return n.random=function(){var t=this,n={nextFloat:null,nextInt:null,rangeFloat:null,rangeInt:null},r=function(){t.x=t.x^t.x<<16,t.x=t.x^t.x>>5,t.x=t.x^t.x<<1;var n=t.x;return t.x=t.y,t.y=t.z,t.z=n^t.x^t.y,t.z};return n.nextFloat=function(){var n=(r()&t.max_int)*t.int_to_float;return n>0?n:-n},n.nextInt=function(){var t=r();return t>0?t:-t},n.rangeFloat=function(t,r){var e=r-t;return t+n.nextFloat()*e},n.rangeInt=function(t,r){var e=r-t;return t+n.nextInt()%e},n},n.getRandomMap=function(t,n,r){this.seed=t,this.x=this.seed;for(var e=this.random(),u=n*r,a=Math.round(.25*u),i=[],o=0;o<r;o++){for(var x=[],s=0;s<n;s++)x.push(1);i.push(x)}for(var f=function(t,n){return{x:t-1,y:n}},c=function(t,n){return{x:t+1,y:n}},h=function(t,n){return{x:t,y:n+1}},v=function(t,n){return{x:t,y:n-1}};a>0;)for(var l=[{x:e.nextInt()%n,y:e.nextInt()%r}];l.length>0&&a>0;){var y=l.shift(),d=y.x%n;d<0&&(d+=n);var p=y.y%r;if(p<0&&(p+=r),1==i[p][d]&&(i[p][d]=0,a-=1),e.nextInt()<536870912){var I=f(d,p);l.push(I)}if(e.nextInt()<536870912){var m=v(d,p);l.push(m)}if(e.nextInt()<536870912){var _=c(d,p);l.push(_)}if(e.nextInt()<536870912){var g=h(d,p);l.push(g)}}return i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RankCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,t,r,i,l,o,a,u;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){l=n.cclegacy,o=n._decorator,a=n.Label,u=n.Component}],execute:function(){var c,p,s,f,g,y,b,h,k;l._RF.push({},"51832GlV1pM+bVknPSvbTYc","RankCell",void 0);var m=o.ccclass,v=o.property;n("RankCell",(c=m("RankCell"),p=v(a),s=v(a),f=v(a),c((b=e((y=function(n){function e(){for(var e,t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];return e=n.call.apply(n,[this].concat(l))||this,r(e,"phone",b,i(e)),r(e,"money",h,i(e)),r(e,"ranking",k,i(e)),e}return t(e,n),e.prototype.updateCell=function(n,e,t){void 0===t&&(t=null),this.phone.string=n,this.money.string=e.toString(),t>3&&(this.ranking.string=t.toString())},e}(u)).prototype,"phone",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(y.prototype,"money",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(y.prototype,"ranking",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/Ranking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./GameEvent.ts","./Popup.ts","./RankCell.ts"],(function(n){"use strict";var t,e,i,a,r,o,c,l,u,s,f,p,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){r=n.cclegacy,o=n._decorator,c=n.Node,l=n.instantiate},function(n){u=n.EventName},function(n){s=n.GameMgr},function(n){f=n.default},function(n){p=n.Popup},function(n){h=n.RankCell}],execute:function(){var g,k,d,b,v,R,y,m,P;r._RF.push({},"d4a66qhvfBKzJ7siEwT8vAr","Ranking",void 0);var w=o.ccclass,C=o.property;n("Ranking",(g=w("Ranking"),k=C(c),d=C(c),b=C(c),g((y=t((R=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r))||this,i(t,"content",y,a(t)),i(t,"rankCellPrefab",m,a(t)),i(t,"blackBg",P,a(t)),t}e(t,n);var r=t.prototype;return r.start=function(){var n=this;this.blackBg.on("click",(function(){n.node.active=!1})),this.initRanking(),f.on(u.onResRanking,this.loadRanking,this)},r.initRanking=function(){this.content.children.length<10&&(l(this.rankCellPrefab).setParent(this.content),this.initRanking())},r.show=function(){n.prototype.show.call(this),s.instance.reqRankingBoard()},r.loadRanking=function(n){var t=n.uid,e=n.money;this.content.children.forEach((function(n){n.active=!1})),this.content.children.forEach((function(n,i){n.active=!0,n.getComponent(h).updateCell(t[i],e[i],i+1)}))},t}(p)).prototype,"content",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(R.prototype,"rankCellPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(R.prototype,"blackBg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=R))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/RemoteImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts"],(function(e){"use strict";var t,o,r,i,n,a,c,m,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Enum,m=e.Sprite,p=e.log,l=e.Component},function(e){u=e.default}],execute:function(){var g,s,b,d,h,f,v,_,w,y,R,I,z,k;e("RemoteDefine",void 0),n._RF.push({},"cae799u15NAhb4aNJ7KkvYX","RemoteImage",void 0);var L,N,S=a.ccclass,B=a.property,D=a.executeInEditMode;!function(e){e.background="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/background.png",e.wheel_bottom="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_bottom_2.png",e.header_logo="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/header_logo_2.png",e.wheel="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel.png",e.wheel_border="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_border_2.png"}(L||(L=e("RemoteDefine",{}))),function(e){e[e.background=0]="background",e[e.wheel_bottom=1]="wheel_bottom",e[e.header_logo=2]="header_logo",e[e.wheel=3]="wheel",e[e.wheel_border=4]="wheel_border"}(N||(N={}));e("RemoteImage",(g=S("RemoteImage"),s=D(!0),b=B({type:c(N)}),d=B({group:{name:"9-Slicing"},type:Number}),h=B({group:{name:"9-Slicing"},type:Number}),f=B({group:{name:"9-Slicing"},type:Number}),v=B({group:{name:"9-Slicing"},type:Number}),g(_=s((y=t((w=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"image",y,i(t)),r(t,"borderTop",R,i(t)),r(t,"borderBottom",I,i(t)),r(t,"borderLeft",z,i(t)),r(t,"borderRight",k,i(t)),t}return o(t,e),t.prototype.start=function(){var e=this,t=this.getComponent(m),o=L[N[this.image]];u.request(o).then((function(o){o.insetTop=e.borderTop,o.insetBottom=e.borderBottom,o.insetLeft=e.borderLeft,o.insetRight=e.borderRight,t.spriteFrame=o})),p("[RemoteImage] "+this.node.name+" load "+o)},t}(l)).prototype,"image",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(w.prototype,"borderTop",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(w.prototype,"borderBottom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(w.prototype,"borderLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(w.prototype,"borderRight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=w))||_)||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./Define.ts","./GameMgr.ts","./Screen.ts","./ScreenMgr.ts"],(function(e){"use strict";var t,n,o,i,r,c,a,l,s,u,y,f,p,h,m,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.Label,l=e.UIOpacity,s=e.Color,u=e.Vec3,y=e.tween},function(e){f=e.AudioMgr},function(e){p=e.SoundName,h=e.ScreenName},function(e){m=e.GameMgr},function(e){d=e.Screen},function(e){g=e.ScreenMgr}],execute:function(){var b,M,w,L,S,v,E;r._RF.push({},"ecf9eYH8PJGXLvYIxUgZeYy","Result",void 0);var k=c.ccclass,G=c.property;e("Result",(b=k("Result"),M=G(a),w=G(l),b((v=t((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,o(t,"moneyLabel",v,i(t)),t.tweenMoneyEffect=null,o(t,"touchToGoBack",E,i(t)),t}n(t,e);var r=t.prototype;return r.show=function(){e.prototype.show.call(this),this.tweenMoney(m.instance.endInfo.money),f.instance.Stop(),f.instance.PlaySfx(p.Endgame),this.touchToGoBack.opacity=0},r.hide=function(){e.prototype.hide.call(this),f.instance.Start()},r.tweenMoney=function(e){var t=this;this.moneyLabel.string="99999",this.moneyLabel.color=s.RED,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new u(1.1,1.1)),this.tweenMoneyEffect=y({money:parseInt(this.moneyLabel.string)}).delay(.5).to(.3,{money:e},{onUpdate:function(e,n){var o=Math.round(e.money);parseInt(t.moneyLabel.string)!=o&&(t.moneyLabel.string=o.toString())}}).delay(.1).call((function(){t.tweenMoneyEffect=null,t.moneyLabel.color=s.WHITE,t.moneyLabel.node.parent.setScale(u.ONE),t.node.on("click",t.onClick,t),y(t.touchToGoBack).to(1,{opacity:255}).to(1,{opacity:0}).union().repeatForever().start()})).start()},r.onClick=function(){this.hide(),g.instance.show(h.Menu)},t}(d)).prototype,"moneyLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"touchToGoBack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/Screen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,i,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.UIOpacity,r=e.tween,c=e.Component}],execute:function(){var s;n._RF.push({},"ef121KIw5RCYp5xIXtW1PZ6","Screen",void 0);var a=o.ccclass;o.property,e("Screen",a("Screen")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).tweenTime=.3,t}t(n,e);var o=n.prototype;return o.show=function(e){void 0===e&&(e=!0),this.node.active=!0,this.node.setSiblingIndex(-1);var t=this.node.getComponent(i);t||(t=this.node.addComponent(i)),e&&r(t).set({opacity:0}).to(this.tweenTime,{opacity:255},{easing:"fade"}).start()},o.hide=function(){this.node.active=!1},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Screen.ts"],(function(n){"use strict";var e,t,r,i,o,c,s,a,u,f,l,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){o=n.cclegacy,c=n._decorator,s=n.Node,a=n.resources,u=n.instantiate,f=n.Component},function(n){l=n.ScreenName},function(n){h=n.Screen}],execute:function(){var p,d,v,g,m,S,b,y;o._RF.push({},"5bd31koSOhMa6X+466ujhHt","ScreenMgr",void 0);var C=c.ccclass,w=c.property;n("ScreenMgr",(p=C("ScreenMgr"),d=w(s),v=w(s),p(((y=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o))||this,r(e,"Container",S,i(e)),r(e,"scenes",b,i(e)),e}t(e,n);var o=e.prototype;return o.onLoad=function(){e.instance=this},o.start=function(){},o.isShow=function(n){var e=this.scenes.find((function(e){return e.name==n}));return e&&e.active},o.isLoaded=function(n){return this.scenes.find((function(e){return e.name==n}))},o.show=function(n){var e=this.scenes.find((function(e){return e.name==n}));return e&&!e.active&&e.getComponent(h).show(),e},o.hide=function(n){var e=this.scenes.find((function(e){return e.name==n}));e&&e.getComponent(h).hide()},o.hideAll=function(){this.scenes.forEach((function(n){n.active&&n.getComponent(h).hide()}))},o.isContain=function(n){var e=!1;return this.scenes.forEach((function(t){t.name!=n||(e=!0)})),e},o.load=function(){var n=this;Object.keys(l).forEach((function(e){n.isContain(e)||a.load("prefabs/screens/"+e,(function(t,r){if(r){var i=u(r);i.active=!1,i.name=e,i.setParent(n.Container),n.scenes.push(i),console.log("Screen loaded: "+e)}else console.error("Screen prefab notfound: "+e)}))}))},e}(f)).instance=null,S=e((m=y).prototype,"Container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(m.prototype,"scenes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts"],(function(t){"use strict";var e,i,o,r,a,c,n,p,y,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,n=t.UIOpacity,p=t.tween,y=t.Component},function(t){s=t.GameMgr}],execute:function(){var u,l,f,h,b;a._RF.push({},"22685h12JdCy7h1bNVoLCHM","ShadowEffect",void 0);var d=c.ccclass,v=c.property;t("ShadowEffect",(u=d("ShadowEffect"),l=v(n),u((b=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,o(e,"opacity",b,r(e)),e}return i(e,t),e.prototype.start=function(){s.instance.isOptimizeForPerformance?this.node.active=!1:p(this.opacity).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).delay(.4).by(.2,{opacity:30}).delay(.7).union().repeatForever().start()},e}(y)).prototype,"opacity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/Shaking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts"],(function(i){"use strict";var t,e,n,s,a,o,r,h,u,c,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,r=i.view,h=i.Vec3,u=i.Vec2,c=i.Component},function(i){l=i.maxApiUtils}],execute:function(){var p,g,k;a._RF.push({},"6329b4awCVE1IxSR4MH00TW","Shaking",void 0);var f=o.ccclass,m=o.property;i("Shaking",f("Shaking")((k=t((g=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=i.call.apply(i,[this].concat(a))||this).shaking=!1,t.shakeTimeOut=null,t.size=null,n(t,"shakeAmount",k,s(t)),t}e(t,i);var a=t.prototype;return a.start=function(){this.size=r.getViewportRect().size},a.update=function(i){if(this.shaking){var t=this.node.position.clone(),e=new h(0);u.random(e),e.x*=this.shakeAmount,e.x+=t.x,e.y*=this.size.height/this.size.width*this.shakeAmount,e.y+=t.y,this.node.setPosition(e)}},a.startShaking=function(i){var t=this;void 0===i&&(i=500),this.shaking||(this.shaking=!0,l.triggerEventVibration(),clearTimeout(this.shakeTimeOut),this.shakeTimeOut=setTimeout((function(){t.shaking=!1}),i))},t}(c)).prototype,"shakeAmount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=g))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnMeteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts","./Meteor.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,u,m,p,l,h,f,M,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.Node,u=e.NodePool,m=e.math,p=e.instantiate,l=e.UITransform,h=e.Vec3,f=e.Component},function(e){M=e.GameMgr},function(e){w=e.Meteor}],execute:function(){var P,g,d,b,v,T,y,z;i._RF.push({},"5b2b8SohodBPbkzpittSyYk","SpawnMeteor",void 0);var S=a.ccclass,x=a.property;e("SpawnMeteor",(P=S("SpawnMeteor"),g=x(s),d=x(c),P(((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"meteorPrefab",T,r(t)),o(t,"meteorContainer",y,r(t)),t.maxTime=5,t.spawnMeteorTime=0,t.maxMeteor=2,t.meteorPool=new u,t}n(t,e);var i=t.prototype;return i.onLoad=function(){t.instance=this},i.update=function(e){if(!M.instance.isOptimizeForPerformance)if(this.spawnMeteorTime>0)this.spawnMeteorTime-=e;else if(this.spawnMeteorTime<=0){this.spawnMeteorTime=m.randomRange(1,this.maxTime);for(var t=0;t<this.maxMeteor;t++)this.spawnMeteor()}},i.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():p(this.meteorPrefab)},i.spawnMeteor=function(){var e=this.getMeteor();e.setParent(this.meteorContainer),e.active=!0;var t=e.getComponent(w);t.initInMenu();var n=this.getPosition();t.setPositions(n[0],n[1]),setTimeout((function(){t.drop()}),1e3*m.randomRange(0,this.maxTime))},i.getPosition=function(){var e,t=this.node.getComponent(l).contentSize,n=-t.width/2,o=m.randomRange(0,t.height/2);e=new h(n,o);var r=(t.width+100)/Math.sin(65*Math.PI/180),i=t.width/Math.tan(65*Math.PI/180);return[e,new h(n+r,o-i)]},i.putMeteorToPool=function(e){this.meteorPool.put(e)},t}(f)).instance=null,T=t((v=z).prototype,"meteorPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(v.prototype,"meteorContainer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/SpineRemote.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,o,s,l,u,c,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,l=e._decorator,u=e.sp,c=e.assetManager,p=e.Texture2D,f=e.Component}],execute:function(){var m,g,h,d,k,b,y,v,x,S,w;s._RF.push({},"ff50e7YUK9LFa+1yRHA5AVJ","SpineRemote",void 0);var R=l.ccclass,D=l.property;e("SpineRemote",(m=R("SpineRemote"),g=D(String),h=D(String),d=D(String),k=D(String),m((v=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"images",v,a(t)),r(t,"ske",x,a(t)),r(t,"atlas",S,a(t)),r(t,"animDefault",w,a(t)),t.skeleton=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){this.skeleton=this.getComponent(u.Skeleton)||this.addComponent(u.Skeleton),this.load()},s.update=function(e){},s.load=function(){var e=i(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],r=o(this.images);case 3:if((a=r()).done){e.next=12;break}return i=a.value,e.next=7,this.loadImg(i);case 7:s=e.sent,t.push(s),n.push(i.split("/").pop());case 10:e.next=3;break;case 12:return e.abrupt("return",new Promise((function(e,r){c.loadAny([{url:l.atlas,ext:".txt"},{url:l.ske,ext:".txt"}],(function(r,a){var i=new u.SkeletonData;i.skeletonJson=a[1],i.atlasText=a[0],i.textures=t,i.textureNames=n,l.skeleton.skeletonData=i,l.skeleton.animation=l.animDefault,e(l.skeleton)}))})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadImg=function(e){return new Promise((function(t,n){c.loadRemote(e,(function(e,n){if(e)t(null);else{var r=new p;r.image=n,t(r)}}))}))},t}(f)).prototype,"images",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(y.prototype,"ske",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(y.prototype,"atlas",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"animDefault",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Standby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var n,e,i,r,o,a,c,s,l,u,h,p,f,y,d,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.UIOpacity,s=t.Node,l=t.Button,u=t.tween,h=t.Vec3},function(t){p=t.GameDefine,f=t.ScreenName},function(t){y=t.GameMgr},function(t){d=t.Screen},function(t){w=t.ScreenMgr}],execute:function(){var b,m,g,v,k,D,S,B,A,E,z,O,L,F,R;o._RF.push({},"2007cizEIRIvKDIBbRrLGSj","Standby",void 0);var H,I=a.ccclass,M=a.property;!function(t){t[t.Farmer=0]="Farmer",t[t.Hunter=1]="Hunter"}(H||(H={}));t("Standby",(b=I("Standby"),m=M(c),g=M(s),v=M(s),k=M(l),D=M(l),S=M(s),b((E=n((A=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).state=null,i(n,"whiteScreen",E,r(n)),i(n,"farmerDisplay",z,r(n)),i(n,"hunterDisplay",O,r(n)),n.display=null,i(n,"okButton",L,r(n)),i(n,"backButton",F,r(n)),i(n,"connectingLabel",R,r(n)),n.tweenArray=[],n}e(n,t);var o=n.prototype;return o.update=function(t){var n=this;this.tweenArray.forEach((function(t,e){t||n.tweenArray.splice(e,1)}))},o.show=function(){var n=this;t.prototype.show.call(this),y.instance.IsHunter()?this.setState(H.Hunter):this.setState(H.Farmer),this.initDisplay(),this.initEvent(),this.whiteScreen.opacity=255,0!=this.whiteScreen.opacity&&u(this.whiteScreen).to(p.timeEndLoading,{opacity:0}).call((function(){n.showDescriptions()})).start()},o.setState=function(t){switch(this.farmerDisplay.active=!1,this.hunterDisplay.active=!1,this.state=t,this.state){case H.Hunter:this.display=this.hunterDisplay;break;case H.Farmer:this.display=this.farmerDisplay}},o.initDisplay=function(){this.display&&(this.display.children[1].children.forEach((function(t){t.getComponent(c).opacity=0})),this.display.children[2].getComponent(c).opacity=255,this.okButton.node.setScale(h.ZERO),this.backButton.node.active=!0,this.connectingLabel.setScale(h.ZERO),this.tweenArray=[],this.display.active=!0)},o.showDescriptions=function(){var t=this.display.children[1];this.tweenDescriptions(0,t.children)},o.tweenDescriptions=function(t,n){var e=this;if(t>=n.length)this.showOkButton();else{var i=n[t].getComponent(c),r=u(i).to(.5,{opacity:255}).call((function(){r=null,e.tweenDescriptions(t+1,n)})).start();this.tweenArray.push(r)}},o.showOkButton=function(){var t=u(this.okButton.node).to(.5,{scale:h.ONE}).call((function(){t=null})).start();this.tweenArray.push(t)},o.initEvent=function(){var t=this;this.okButton.node.on("click",(function(){t.stopAllTween(),t.okButton.node.off("click"),t.node.off("click"),t.backButton.node.active=!1;var n=u(t.okButton.node).to(.5,{scale:h.ZERO}).call((function(){n=null})).start();t.tweenArray.push(n);var e=u(t.connectingLabel).to(.5,{scale:h.ONE}).call((function(){e=null})).start();t.tweenArray.push(e);var i=t.display.children[2],r=u(i.getComponent(c)).to(1,{opacity:0}).call((function(){r=null,y.instance.startFindmatch()})).start();t.tweenArray.push(r)}),this),this.backButton.node.on("click",(function(){t.stopAllTween(),t.hide(),w.instance.show(f.Menu)}),this),this.node.on("click",(function(){t.node.off("click"),t.stopAllTween(),t.display.children[1].children.forEach((function(t){t.getComponent(c).opacity=255})),t.showOkButton()}),this)},o.stopAllTween=function(){this.tweenArray.forEach((function(t){t.stop(),t=null})),this.tweenArray=[]},n}(d)).prototype,"whiteScreen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(A.prototype,"farmerDisplay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(A.prototype,"hunterDisplay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(A.prototype,"okButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(A.prototype,"backButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(A.prototype,"connectingLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=A))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/SwipePart.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,a,s,r,h,l,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.Node,l=t.tween,o=t.Vec3,c=t.Component}],execute:function(){var d,u,p,m,g,f,G;s._RF.push({},"ab2c1kKulxMi5X9m/6L8JhZ","SwipePart",void 0);var b=r.ccclass,v=r.property;t("SwipePart",(d=b("SwipePart"),u=v(h),p=v(h),d((f=e((g=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"mainParts",f,a(e)),i(e,"mainDecors",G,a(e)),e.gates=[],e.lanterns=[],e.mainGates=[],e.lanternAngleRoll=15,e.lanternTimeRoll=.1,e.mainGateShakeX=15,e.mainGateTimeShake=.1,e.gateAngle=0,e.speedGate=5,e.currentIndex=0,e}n(e,t);var s=e.prototype;return s.updateIdleVisible=function(){for(var t=0;t<this.mainParts.length;t++)t==this.currentIndex?(this.mainParts[t].active=!0,this.mainDecors[t].active=!0):(this.mainParts[t].active=!1,this.mainDecors[t].active=!1)},s.updateSlideVisible=function(){for(var t=0;t<this.mainParts.length;t++)t==this.currentIndex||t==(this.currentIndex==this.mainParts.length-1?0:this.currentIndex+1)||t==(0==this.currentIndex?this.mainParts.length-1:this.currentIndex-1)?(this.mainParts[t].active=!0,this.mainDecors[t].active=!0):(this.mainParts[t].active=!1,this.mainDecors[t].active=!1)},s.updateIndex=function(t){this.currentIndex=1==t?0==this.currentIndex?this.mainParts.length-1:this.currentIndex-1:this.currentIndex==this.mainParts.length-1?0:this.currentIndex+1,this.updateIdleVisible()},s.start=function(){var t=this;this.updateIdleVisible(),this.findLantern(this.node),this.finMainGate(this.node),this.findGate(this.node),l({angle:0}).by(.1,{angle:-this.speedGate},{onUpdate:function(e,n){t.gateAngle=e.angle,t.gates.forEach((function(e){e.angle=t.gateAngle}))}}).repeatForever().start()},s.findGate=function(t){var e=this;t.children.forEach((function(t){"gate"===t.name?e.gates.push(t):e.findGate(t)}))},s.findLantern=function(t){var e=this;t.children.forEach((function(t){"lantern"==t.name?e.lanterns.push(t):e.findLantern(t)}))},s.finMainGate=function(t){var e=this;t.children.forEach((function(t){"Gate"==t.name?e.mainGates.push(t):e.finMainGate(t)}))},s.startShake=function(){this.shakeLatern(),this.shakeMainGate()},s.shakeMainGate=function(){l({x:0}).to(this.mainGateTimeShake,{x:this.mainGateShakeX},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:-this.mainGateShakeX},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:this.mainGateShakeX-10},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:-(this.mainGateShakeX-10)},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:0},{onUpdate:this.updateMainGatesX.bind(this)}).start()},s.shakeLatern=function(){l({angle:0}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-this.lanternAngleRoll},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll-5},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-(this.lanternAngleRoll-5)},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll-10},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-(this.lanternAngleRoll-10)},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:0},{onUpdate:this.updateLanternsAngle.bind(this)}).start()},s.updateLanternsAngle=function(t,e){this.lanterns.forEach((function(e){e.angle=t.angle}))},s.updateMainGatesX=function(t,e){this.mainGates.forEach((function(e){e.setPosition(new o(t.x,e.position.y,0))}))},e}(c)).prototype,"mainParts",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(g.prototype,"mainDecors",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=g))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/TextDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,i;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"167945E/2BDCJoy/b364mJ5","TextDefine",void 0);var e=t("PopupConfigText",function(t){function i(){var n;return(n=t.call(this)||this).titleLabel=void 0,n.descriptionLabel=void 0,n.yesButtonLabel=void 0,n.noButtonLabel=void 0,n.yesButtonLabel="Có",n.noButtonLabel="Không",n}return n(i,t),i}((function(){this.headerLabel=void 0,this.buttonLabel=void 0,this.buttonLabel="OK"})));t("LostConnectionPopupText",function(t){function i(){var n;return(n=t.call(this)||this).titleLabel="LỖI KẾT NỐI",n.descriptionLabel='Không ổn rồi đại vương ơi, mất "mạng" mất tiêu rồi.',n}return n(i,t),i}(e)),t("FindMatchFailPopupText",function(t){function i(){var n;return(n=t.call(this)||this).descriptionLabel="Không ổn rồi đại vương ơi, không tìm thấy trận để vào.",n.titleLabel="Không tìm thấy trận",n}return n(i,t),i}(e));t("NotificationText",(function(){})).meteor_fall="Ơ động đất à, không phải, đó là thiên thạch đang rơi!!!";t("ExchangeLivePopupText",function(t){function i(){var n;return(n=t.call(this)||this).titleLabel="Đổi linh hồn",n.descriptionLabel="Chuyển 10K tiền thành 1 mạng?",n}return n(i,t),i}(e)),t("ExchangeLiveFailedPopupText",function(t){function i(){var n;return(n=t.call(this)||this).titleLabel="Tiền không đủ",n.descriptionLabel="Không đủ tiền mất rồi, nạp thêm nha!",n}return n(i,t),i}(e)),t("ExchangeLiveSuccessPopupText",function(t){function i(){var n;return(n=t.call(this)||this).titleLabel="Đổi thành công",n.descriptionLabel="Chúc mừng bạn có thêm 1 vé vào địa ngục.",n}return n(i,t),i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/TimeMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameDefine.ts","./GameMgr.ts","./TextDefine.ts","./GameEvent.ts","./PopupConfig.ts","./PopupMgr.ts","./Utils.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,i,n,s,r,o,a,c,m,u,T,l,h,p;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,r=e.Component},function(e){o=e.EventName},function(e){a=e.GameDefine},function(e){c=e.GameMgr},function(e){m=e.LostConnectionPopupText},function(e){u=e.default},function(e){T=e.PopupConfig},function(e){l=e.PopupMgr},function(e){h=e.utils},function(e){p=e.NetworkDefine}],execute:function(){var S,f;n._RF.push({},"ca6dbPXO9hMhoisIAPnFaOx","TimeMgr",void 0);var y=s.ccclass;s.property,e("TimeMgr",y("TimeMgr")(((f=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).syncTimeDuration=1,t.syncPeriod=3,t.syncTimeBound=0,t.localTimeSyncDuration=0,t.serverTimeSyncDuration=0,t.lastSyncTime=0,t.lastServerTime=0,t.timeBeforeSync=0,t.elapsedTimeFromLastRequest=Number.MAX_VALUE,t.startupTime=Date.now(),t.gameStartTime=0,t._gameTime=0,t.popupLostConnection=null,t}t(n,e);var s=n.prototype;return s.onLoad=function(){n.instance=this},s.start=function(){u.on(o.onPing,this.synchronize,this),u.on(o.onMatchingInfo,this.setGameStarTime,this)},s.setGameStarTime=function(e){console.log("[TimeMgr] clientTime: "+h.getTime(new Date(this.serverTime))),console.log("[TimeMgr] serverTime: "+h.getTime(new Date(e.serverTime))),console.log("[TimeMgr] setGameStarTime: "+h.getTime(new Date(e.startTime))),this.gameStartTime=e.startTime},s.reset=function(){this.syncTimeBound=0,this.localTimeSyncDuration=0,this.serverTimeSyncDuration=0,this.lastSyncTime=0,this.realtimeSinceStartup(),this.lastServerTime=0,this.timeBeforeSync=0,this.elapsedTimeFromLastRequest=Number.MAX_VALUE},s.getFrameTime=function(e){return this.gameStartTime+e*a.instance.timePerFrameServerMilisecond},s.update=function(e){var t=this;if(c.instance.isPingReady&&(this.elapsedTimeFromLastRequest>this.syncPeriod?(this.elapsedTimeFromLastRequest=0,this.timeBeforeSync=this.realtimeSinceStartup(),c.instance.requestServerTime()):this.elapsedTimeFromLastRequest+=e,null==this.popupLostConnection&&0!=this.lastSyncTime&&this.realtimeSinceStartup()-this.lastSyncTime>p.lostConnectionTime)){console.log("[TimeMgr] Lost connection"),l.Instance.hideAll();var i=new m;this.popupLostConnection=T.Show(i,null),this.popupLostConnection.SetTypeOk((function(){t.popupLostConnection=null,t.lastSyncTime=t.realtimeSinceStartup(),c.instance.reconnect()}))}},s.synchronize=function(e,t){var i=this.realtimeSinceStartup();if(this.lastServerTime>0){var n=i-this.timeBeforeSync,s=this.serverTime,r=e+n/2;this.syncTimeBound=r>s?r+this.syncTimeDuration:s+this.syncTimeDuration,this.localTimeSyncDuration=this.syncTimeBound-s,this.serverTimeSyncDuration=this.syncTimeBound-r,this.lastServerTime=r}else this.lastServerTime=e;this.lastSyncTime=i},s.realtimeSinceStartup=function(){return Date.now()-this.startupTime},i(n,[{key:"serverTime",get:function(){var e=this.localTime;return e>=this.syncTimeBound?e:this.syncTimeBound-this.localTimeSyncDuration*((this.syncTimeBound-e)/this.serverTimeSyncDuration)}},{key:"localTime",get:function(){return this.lastServerTime+this.realtimeSinceStartup()-this.lastSyncTime}},{key:"gameTime",get:function(){return this._gameTime},set:function(e){this._gameTime=e}},{key:"currentGameTime",get:function(){return this.gameStartTime+this.gameTime}}]),n}(r)).instance=null,S=f))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/Trap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Sprite,c=t.Animation,l=t.Component},function(t){p=t.GamePlay}],execute:function(){var u,f,d,h,m,y,g;r._RF.push({},"18609h5jBVBBJLokC/gg5G0","Trap",void 0);var v=a.ccclass,b=a.property;t("Trap",(u=v("Trap"),f=b(s),d=b(c),u((y=e((m=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"model",y,o(e)),n(e,"animationEffect",g,o(e)),e.destroying=!1,e}i(e,t);var r=e.prototype;return r.setInfo=function(t){this.model.spriteFrame=t,this.model.node.active=!0,this.animationEffect.node.active=!1,this.destroying=!1},r.destroyTrap=function(t){var e=this;void 0===t&&(t=!1),1!=this.destroying&&(this.destroying=!0,t?(this.node.active&&(this.model.node.active=!1,this.animationEffect.node.active=!0,this.animationEffect.play()),setTimeout((function(){p.instance.trapManager.trapPool.put(e.node)}),1500)):p.instance.trapManager.trapPool.put(this.node))},e}(l)).prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(m.prototype,"animationEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/TrapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts","./Trap.ts"],(function(t){"use strict";var r,e,a,n,i,o,p,s,c,u,l,f,g;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,p=t.Prefab,s=t.SpriteFrame,c=t.NodePool,u=t.instantiate,l=t.Component},function(t){f=t.GamePlay},function(t){g=t.Trap}],execute:function(){var d,h,T,m,_,v,N;i._RF.push({},"204011gscpD/5htWvb9yvlZ","TrapManager",void 0);var P=o.ccclass,y=o.property;t("TrapManager",(d=P("TrapManager"),h=y(p),T=y(s),d((v=r((_=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i))||this,a(r,"trapPrefab",v,n(r)),a(r,"trapSpriteFrames",N,n(r)),r.trapPool=new c,r}e(r,t);var i=r.prototype;return i.onLoad=function(){for(var t=0;t<10;t++)this.trapPool.put(u(this.trapPrefab))},i.initTrap=function(t,r,e,a){var n=this.getTrap();n.active=!1,n.setPosition(e),n.name=t.id.toString(),r.addTrap(n),n.getComponent(g).setInfo(this.getTrapSpriteFrame(t.type)),n.active=!0},i.netUpdate=function(t){t.dungeon.traps.forEach((function(t){f.instance.mapManager.findAndAddTrap(t)})),f.instance.mapManager.findAndRemoveTraps(t.dungeon.traps)},i.getTrapSpriteFrame=function(t){return t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST_MONSTER?this.trapSpriteFrames[0]:t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_TREE_MONSTER?this.trapSpriteFrames[1]:void 0},i.getTrap=function(){return this.trapPool.size()>0?this.trapPool.get():u(this.trapPrefab)},r}(l)).prototype,"trapPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=r(_.prototype,"trapSpriteFrames",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=_))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TrimBase64.ts",["cc"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy,a=t._decorator}],execute:function(){var n;e._RF.push({},"9ec58QKtIZA8IXWjqzQ4DKQ","TrimBase64",void 0);var r=a.ccclass;a.property,t("TrimBase64",r("TrimBase64")(n=function(){function t(){}return t.trimCanvas=function(t){var e,a,n,r=t.getContext("2d"),o=document.createElement("canvas").getContext("2d"),l=r.getImageData(0,0,t.width,t.height),i=l.data.length,c={top:null,left:null,right:null,bottom:null};for(e=0;e<i;e+=4)0!==l.data[e+3]&&(a=e/4%t.width,n=~~(e/4/t.width),null===c.top&&(c.top=n),(null===c.left||a<c.left)&&(c.left=a),(null===c.right||c.right<a)&&(c.right=a),(null===c.bottom||c.bottom<n)&&(c.bottom=n));var u=c.bottom-c.top+1,s=c.right-c.left+1,g=r.getImageData(c.left,c.top,s,u);return o.canvas.width=s,o.canvas.height=u,o.putImageData(g,0,0),o.canvas},t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,o,i,c,a,u,l,s,f;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,r=t.ParticleSystem,o=t.UITransform,i=t.Sprite,c=t.Vec3,a=t.Quat,u=t.math,l=t.resources,s=t.AudioClip,f=t.Prefab}],execute:function(){n._RF.push({},"10e5ec48SRIkIMCKunjzFih","Utils",void 0);t("utils",new(function(){function t(){this.getAngleFrom2Vec=function(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return n<0&&(n=2*Math.PI+n),180*n/Math.PI},this.getDirectionFrom2Vec=function(t,e){return e.clone().subtract(t).normalize()}}var n=t.prototype;return n.PlayParticle=function(t){t.play(),t.getComponentsInChildren(r).forEach((function(t){t.play()}))},n.StopParticle=function(t){t.stop(),t.getComponentsInChildren(r).forEach((function(t){t.stop()}))},n.toLocalString=function(t){return(t=Math.round(t)).toLocaleString().replace(/","/g,".")},n.formatScore=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},n.cloneObject=function(t){for(var e=Object.keys(t),n=Object.create(null),r=0,o=e.length;r<o;r++)n[e[r]]=t[e[r]];return n},n.setSpriteFrame=function(t,e){var n=t.node.getComponent(o).contentSize;t.spriteFrame.texture=e,t.sizeMode=i.SizeMode.RAW,t.node.getComponent(o).setContentSize(n)},n.CorrectSpriteFrameSize=function(t,e){var n=this.getScale(t.spriteFrame,e);t.node.setScale(new c(n,n,n))},n.getScale=function(t,e){var n=t.rect,r=e.width/n.width,o=e.height/n.height,i=o;return r>o&&(i=r),i},n.getTime=function(t){var e=function(t){return t<10?"0"+t:t};return e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},n.getDateTimeVN=function(t){var e=function(t){return t<10?"0"+t:t};return""+[e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/")},n.destroyAllChild=function(t){t.children.forEach((function(t){t.destroy()})),t.removeAllChildren()},n.truncate=function(t,e){var n=t.split(" ");return n.length>e?n.splice(0,e).join(" ")+"...":t},n.rotationAroundNode=function(t,e,n,r){var o=new a,i=new c,l=new c,s=t.position,f=u.toRadian(r);return a.fromAxisAngle(o,n,f),c.subtract(i,s,e),c.transformQuat(l,i,o),t.position=c.add(l,e,l),a.rotateAround(o,t.rotation,n,f),o},n.changeNodeLayer=function(t,e){var n=this;t.layer=e,t.children.forEach((function(t){n.changeNodeLayer(t,e)}))},n.trimName=function(t,e){return t.split(" ").splice(-e).join(" ")},n.getAudioRes=function(t,e){l.load(t,s,(function(t,n){t?e&&e(null):e&&e(n)}))},n.getPrefabRes=function(t,e){l.load(t,f,(function(t,n){t?e&&e(null):e&&e(n)}))},e(t,[{key:"uuid",get:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}}]),t}()));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});