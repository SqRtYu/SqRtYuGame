System.register("chunks:///_virtual/a-protobuf.ts",["cc","./index.mjs_cjs=&original=.js","./index.js"],(function(){"use strict";var t,n;return{setters:[function(n){t=n.cclegacy},null,function(t){n=t.default}],execute:function(){t._RF.push({},"55100wlTAVGGaIFArbn+z6n","a-protobuf",void 0),window.protobuf=n,t._RF.pop()}}}));

System.register("chunks:///_virtual/ApiMock.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"792a1PeVsBG5pMMZEpj/Viu","ApiMock",void 0);var n=e("ApiMock",(function(){}));n.deviceInfo={instanceID:"FTWJFBDPQMYDQFAJB5VOPB",totalStorage:107209,totalRam:5584,countryCode:"084",devicePerformance:"high-end",bundleId:"vn.momo.platform.test",isEmulator:"false",BSSID:"02:00:00:00:00:00",deviceMCC:"452",firebaseToken:"ftwjFbDPQMydqfAjB5vOpb:APA91bF_DVNBUdmVH9JXcp9aGlZZMF2eVmvqj_5ksm7KRenkvSsRYGbTJRvdWjOR_I35rcQvZuuCUhdDDq0xwG3Rks_5taONd_x5vZVw9D15ceeRT87gXEMxqk3aGpeRiEc2GwqyNFpN",googlePlayServicesAvailable:!0,deviceSecureId:"230c8f27a54b97de",buildVersion:31040,deviceModelName:"Z818L",isDev:"true",deviceName:"Z818L",deviceManufacturer:"Xiaomi",AAID:"461b635f-1f94-4dea-90a0-cd04e3f6f2c9",deviceHardwareVersion:"qcom",appVersion:"3.1.4-debug",IDFA:"",deviceSoftwareVersion:"30",deviceNetworkOperatorName:"Viettel",icc:"",deviceImei:"20aef116-ae34-41be-abf3-fcb58da6c12d",countryName:"Vietnam",freeStorage:63899,deviceModelID:"xiaomi m2101k7agqcomnull"},n.feature={feature:{featureID:"shaking-game",params:{}}},n.profile={response_info:{error_message:"success",error_code:0,event_tracking:"get_user_profiles"},result:{userId:"01662984381",username:"PHAN TAN THINH",namekyc:"PHAN TAN THINH",avartar:"https://cdn-test.momoapp.vn/avatars/avatar_test/7dfe/ae9fb7f9845679d911b6604e5d3b13fdf8ef07ea59abf7e6cdc1732d8ed2.png",turn:2,balanceMoney:0,totalMoneyTopup:0,totalMoneyArward:0}},n.buyTurnRes={response_info:{error_message:"success",error_code:0,event_tracking:"buy_turn"},result:!1},n.subtractTurnRes={response_info:{error_message:"success",error_code:0,event_tracking:"subtract_user_turn"},result:{requestId:"a14dbfe4-d97c-4833-958a-b9b0d5227b94",userId:"0362984381",error:"BALANCE_REQUEST_SUCCESS",prevBalance:2,postBalance:1,responseTime:1660049749726}},n.TextConfig={PopupConfigText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:null,descriptionLabel:null},CanNotSubtractTurnPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"Lỗi rồi",descriptionLabel:"Không ổn rồi đại vương ơi, lượt không bị trừ. Thử lại sau nhé."},SubtractTurnNotEnoughPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"Lỗi rồi",descriptionLabel:"Không đủ lượt chơi đại vương ơi. Thử lại sau nhé."},GetProfileFailPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"LỖI PROFILE",descriptionLabel:"Không ổn rồi đại vương ơi, lấy profile thất bại rồi, thử lại nha."},FindMatchFailPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"Không tìm thấy trận",descriptionLabel:"Địa ngục bận rồi đại vương ơi, không tìm thấy trận để vào."},LostConnectionPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"LỖI KẾT NỐI",descriptionLabel:'Không ổn rồi đại vương ơi, mất "mạng" mất tiêu rồi.'},SystemErrorPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"LỖI HỆ THÔNG",descriptionLabel:"Không ổn rồi đại vương ơi, hệ thống xảy ra lỗi, hãy đăng nhập lại."},NotificationText:{meteor_fall:"Ơ động đất à, không phải, đó là thiên thạch đang rơi!!!",notEnoughTicket:"Đủ lượt đâu mà đòi chơi!",openChest:"Người chơi {0} đã nhặt được rương tiền {1}"},StandbyText:{farmerRoleDescriptions:["- Thu thập vàng bằng cách nhặt vàng trên map.","- Có số máu cao và tốc độ di chuyển chậm."],hunterRoleDescriptions:["- Thu thập vàng bằng cách tấn công người chơi khác","- Có số máu thấp và tốc độ di chuyển nhanh."],startLabel:">>Chạm bất kỳ đâu để bắt đầu<<",connectingLabel:"...Sẵn sàng đi thôi"},AddMoneyPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"Hướng dẫn nạp tiền",descriptionLabel:"Chuyển tiền tới số điện thoại 0912400482 để nạp tiền vào game."},ExitGamePlayPopupText:{buttonLabel:"OK",yesButtonLabel:"Có",noButtonLabel:"Không",titleLabel:"Thoát game",descriptionLabel:"Đại vương đừng vội thoát, kiếm thêm tiền có thể trang trải cho kiếp sau!"},GameplayText:{descriptionMoney:"Tổng tiền người chơi nhận được khi hết trận.",descriptionGold:"Tổng số vàng người chơi thu thập được.",descriptionChangeGoldToMoney:"Sau mỗi 30s số vàng thu thập được sẽ tự động chuyển thành giá trị tiền."},PlayerDeadText:{mainLabel:"Bạn đã bị hoá đá.",subLabel:">>Lắc điện thoại để rã đồ<<"},ResultText:{mainLabel:"BẠN ĐÃ SIÊU THOÁT",subLabel:"Lộ phí cho kiếp sau:",description:">>Nhấn bất kỳ đâu để thoát<<"},ExchangeTicketText:{headerLabel:"BẢNG ĐỔI VÉ",notEnoughMoneyDescription:"Gì đại vương đỗ nghèo khỉ vậy???",enoughMoneyDescription:"Mỗi vé là 1 lượt chơi.",processingDescription:"Đợi tí đại vương ơi, giao dịch đang được xử lý...",successDescription:"Đổi thành công, chúc mừng đại vương có thêm 1 vé tham quan địa ngục.",failDescription:"Wifi dưới này yếu quá! Giao dịch thất bại rồi đại vương ơi."}},t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameEvent.ts"],(function(i){"use strict";var o,t,u,e,n,s,a,c,r,l,h,d,S,p;return{setters:[function(i){o=i.applyDecoratedDescriptor,t=i.inheritsLoose,u=i.initializerDefineProperty,e=i.assertThisInitialized,n=i.createClass},function(i){s=i.cclegacy,a=i._decorator,c=i.AudioClip,r=i.AudioSource,l=i.assetManager,h=i.Component},function(i){d=i.EventName,S=i.SoundName},function(i){p=i.default}],execute:function(){var f,m,g,M,y,v;s._RF.push({},"9dd765fsdpBTYPuaYbGlpDj","AudioMgr",void 0);var b=a.ccclass,x=a.property;i("AudioMgr",(f=b("AudioMgr"),m=x(c),f(((v=function(i){function o(){for(var o,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return o=i.call.apply(i,[this].concat(n))||this,u(o,"audioClips",y,e(o)),o.bgVolume=.5,o.sfxVolume=.5,o.preBgVolume=.5,o.preSfxVolume=.5,o.audioSourceSFX=null,o.audioSourceMusic=null,o.IsEnable=!0,o.muteBg=!1,o.muteSfx=!1,o.cdnUrl="https://img.mservice.com.vn/app/img/Ne715/sounds/",o}t(o,i);var s=o.prototype;return s.onLoad=function(){o.instance=this,this.audioSourceSFX=this.addComponent(r),this.audioSourceSFX.loop=!1,this.audioSourceSFX.volume=this.sfxVolume,this.audioSourceMusic=this.addComponent(r),this.audioSourceMusic.play(),p.on(d.PlaySfx,this.PlaySfx,this),p.on(d.StopMusic,this.Stop,this),p.on(d.StartMuSic,this.Start,this)},s.PlayOneShot=function(i,o){void 0===o&&(o=!1),i&&this.IsEnable&&(o?this.audioSourceSFX.playOneShot(i):(this.audioSourceSFX.clip=i,this.audioSourceSFX.play()))},s.PlayMusic=function(i,o){i&&this.IsEnable&&(this.audioSourceMusic.clip==i&&this.audioSourceMusic.playing||(this.Stop(),this.audioSourceMusic.clip=i,this.audioSourceMusic.loop=o,this.On(),this.audioSourceMusic.volume=this.bgVolume,this.audioSourceMusic.play()))},s.Stop=function(){this.audioSourceMusic.stop()},s.Start=function(){this.audioSourceMusic.play()},s.loadRemote=function(i){var o=this;void 0===i&&(i=null);var t=Object.keys(S);t.forEach((function(u){var e=S[u];try{l.loadRemote(o.cdnUrl+e+".mp3",(function(u,n){n?(n.name=e,o.audioClips.push(n),console.log("[AudioMgr] Sound load: "+e)):console.log("[AudioMgr] Sound not load: "+e),e==S.BackgroundMusic&&o.PlayMusicWithName(S.BackgroundMusic,!0),o.audioClips.length==t.length&&i&&i()}))}catch(i){console.log("[AudioMgr] Sound not error: "+i)}}))},s.PlaySfx=function(i,o){void 0===o&&(o=!1);var t=this.audioClips.find((function(o){return o.name==i}));t&&this.PlayOneShot(t,o)},s.StopSfx=function(i){var o=this;this.audioClips.forEach((function(t){t.name==i&&o.audioSourceSFX.clip==t&&o.audioSourceSFX.playing&&o.audioSourceSFX.stop()}))},s.PlayMusicWithName=function(i,o){var t=this;this.audioClips.forEach((function(u){u.name==i&&t.PlayMusic(u,o)}))},s.On=function(){this.IsEnable=!0,this.Start()},s.Off=function(){this.IsEnable=!1,this.Stop()},s.NextStatus=function(){this.IsEnable=!this.IsEnable,this.IsEnable?this.On():this.Off()},s.settingMusic=function(i){this.audioSourceMusic.volume=i,this.preBgVolume=this.bgVolume,this.bgVolume=i,this.muteBg=0==i},s.settingSFX=function(i){this.audioSourceSFX.volume=i,this.preSfxVolume=this.sfxVolume,this.sfxVolume=i,this.muteSfx=0==i},n(o,null,[{key:"Instance",get:function(){return this.instance}}]),o}(h)).instance=null,y=o((M=v).prototype,"audioClips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=M))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts"],(function(e){"use strict";var t,o,i,n,a,r,l,s,c,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Vec3,p=e.Component},function(e){u=e.default},function(e){h=e.GamePlayEventName}],execute:function(){var f,y,d,m,v;r._RF.push({},"bce94NCBehMI7cF6jUKqB75","CameraFollow",void 0);var C=l.ccclass,P=l.property;e("CameraFollow",(f=C("CameraFollow"),y=P(s),f((v=t((m=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"map",v,n(t)),t.originPosition=null,t.player=null,t}o(t,e);var r=t.prototype;return r.start=function(){this.originPosition=this.node.position.clone(),u.on(h.UpdateCamera,this.updateCamera,this),this.updateCamera()},r.updateCamera=function(e){if(void 0===e&&(e=null),this.player)if(e){var t=e.subtract(this.node.position),o=this.player.position.clone();this.node.setPosition(o.subtract(t))}else{var i=this.player.position.clone();this.node.setPosition(i)}},r.update=function(e){if(this.player){var t=this.player.position.clone();c.lerp(t,this.node.position,t,5*e),this.node.setPosition(t)}},a(t,[{key:"Player",set:function(e){null!=e?console.log("[CameraFollow] set Player"):console.log("[CameraFollow] set Player with null"),this.player=e}}]),t}(p)).prototype,"map",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/ConvertPhoneNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.extends},function(e){t=e.cclegacy}],execute:function(){e({convertPhoneNumerWithMode:function(e){var n=e.phone;if("string"!=typeof n)return n;var t=s(n);if(10===t.length){var i=t.substring(0,3);u[i]&&(t=""+u[i]+t.substring(3,t.length))}else if(11===t.length){var l=t.substring(0,4);r[l]&&(t=""+r[l]+t.substring(4,t.length))}return t},formatPhoneNumberVN:s,isValidPrefix10Phone:function(e,n){var t;void 0===e&&(e="");var r=n||l;return(null==r||null==r.test?void 0:r.test(e))&&/^\d+$/.test(e)&&10===(null==(t=e)?void 0:t.length)},isValidPrefix11Phone:function(e,n){var t;void 0===e&&(e="");var r=n||i;return(null==r||null==r.test?void 0:r.test(e))&&/^\d+$/.test(e)&&11===(null==(t=e)?void 0:t.length)},validatePhoneVN:function(e){if(e&&e.length>7&&e.length<17)return!0;return!1}}),t._RF.push({},"7110baY1yFHt5wuQ0XdgDQ8","ConvertPhoneNumber",void 0);var r={"0162":"032","0163":"033","0164":"034","0165":"035","0166":"036","0167":"037","0168":"038","0169":"039","0120":"070","0121":"079","0122":"077","0126":"076","0128":"078","0123":"083","0124":"084","0125":"085","0127":"081","0129":"082","0186":"056","0188":"058","0199":"059"},u=Object.keys(r).reduce((function(e,t){var u;return n({},e,((u={})[r[t]]=t,u))}),{}),i=new RegExp("^098|^097|^0162|^0163|^0164|^0165|^0166|^0167|^0168|^0169|^0120|^0121|^0122|^0123|^0124|^0125|^0126|^0127|^0128|^0129|^0186|^0189|^0188|^0199|^090|^091|^092|^093|^094|^095|^096|^097|^098|^0129|^099"),l=new RegExp("^098|^097|^032|^033|^034|^035|^036|^037|^038|^039|^070|^079|^076|^078|^083|^084|^085|^081|^082|^056|^058|^0188|^0199|^077|^059|^090|^091|^092|^093|^094|^095|^096|^097|^098|^088|^087|^086|^089|^099");function s(e,n){if(void 0===n&&(n="0"),e){var t="+"+e.replace(/\D/g,"");return 0==(t=(t=(t=(t=(t=t.replace("+84","0")).replace("(+84)","0")).replace("(084)","0")).replace("(0)","")).replace(/\D/g,"")).indexOf("00")&&(t=t.substr(1)),0==t.indexOf("84")&&t.length>3&&(t=t.substr(2)),0!=t.indexOf("0")&&(t="0"+t),0==t.indexOf(n)?t:t=n+t.substr(1)}return e}t._RF.pop()}}}));

System.register("chunks:///_virtual/Define.ts",["cc"],(function(e){"use strict";var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){e({EventName:void 0,GamePlayEventName:void 0,GhostStatusPopup:void 0,MaxAPIEvent:void 0,ObstacleType:void 0,PopupEvent:void 0,PopupName:void 0,ScreenName:void 0,SoundName:void 0,TileType:void 0,TouchState:void 0}),a._RF.push({},"5a564xrd41Lir3Sb4uzkBZI","Define",void 0);var n,o,t,i,p,r,c,u=e("Define",(function(){}));u.NUMBER_SLOT=8,u.MAX_SPEED=5,function(e){e.Loading="Loading",e.Menu="Menu",e.Standby="Standby",e.GamePlay="GamePlay",e.Result="Result"}(n||(n=e("ScreenName",{}))),function(e){e.PopupConfig="PopupConfig",e.Ranking="Ranking",e.ExchangeTicket="ExchangeTicket"}(o||(o=e("PopupName",{}))),function(e){e.BackgroundMusic="gnork-party",e.CollectGold="collectcoin",e.Freeze="rocks-2",e.Unfreeze="dropping-rocks-2",e.ExchangeMoney="gold-coin",e.Burning="fire-swoosh",e.Bite="monster-bite",e.Healing="health-pickup-2",e.MeteorFalling="falling-meteor",e.Button="Button-pressed",e.Endgame="game-over",e.Warning="warning-sound",e.Explosion="fire-explosion",e.Shockwave="shockwave1"}(t||(t=e("SoundName",{}))),function(e){e.CaptureScreenShoot="game-capture-screen-shoot",e.onGameDefine="onGameDefine",e.onMatchingInfo="onMatchingInfo",e.onPing="onPing",e.onMatchingFailed="onMatchingFailed",e.onPlayerWakeUp="onPlayerWakeUp",e.onResRanking="onReqRanking",e.onUpdateProfile="onUpdateProfile",e.PlaySfx="PlaySfx",e.StartMuSic="StartMuSic",e.StopMusic="StopMusic"}(i||(i=e("EventName",{}))),function(e){e.UpdateCamera="game-update-camera",e.UpdateGoldBalance="game-update-gold-balance",e.UpdateMoneyBalance="game-update-money-balance",e.UpdatePlayerFREEZE="game-update-player-freeze",e.UpdatePlayerStopAttack="game-update-player-stop-attack",e.UpdateMoneyChange="game-update-money-change",e.UpdateMeteorDrop="game-update-meteor-drop",e.OnNotify="game-on-notify",e.LostHp="game-lost-hp",e.CameraShaking="game-camera-shaking",e.PlayerTeleport="game-player-teleport",e.UpdatePlayerRole="game-update-player-role",e.StartGame="game-start-game",e.UpdateExploAction="game-update-explo-action"}(p||(p=e("GamePlayEventName",{}))),function(e){e.Load="popup-load",e.Show="popup-show",e.Hide="popup-hide",e.HideAll="popup-hide-all"}(r||(r=e("PopupEvent",{}))),function(e){e.request="maxapi-request"}(c||(c=e("MaxAPIEvent",{})));var d,l=e("GameDefine",(function(){}));l.timeEndLoading=1,l.timeAppearLoading=.5,l.instance=void 0,l.minTicketPrice=100,function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Press=2]="Press",e[e.Up=3]="Up"}(d||(d=e("TouchState",{})));var g,m,s,f=e("Layer",(function(){}));f.GamePlay=1,f.UI_2D=1<<25,function(e){e[e.Land=1]="Land",e[e.Land2=2]="Land2",e[e.Land3=3]="Land3",e[e.Land4=4]="Land4",e[e.Left=5]="Left",e[e.Right=6]="Right",e[e.Magma=7]="Magma",e[e.Lava=8]="Lava",e[e.BothBoder=9]="BothBoder"}(g||(g=e("TileType",{}))),function(e){e[e.Skull=0]="Skull",e[e.Tree=1]="Tree",e[e.Bush=2]="Bush"}(m||(m=e("ObstacleType",{}))),function(e){e[e.Normal=0]="Normal",e[e.Error=1]="Error",e[e.Disconnect=2]="Disconnect"}(s||(s=e("GhostStatusPopup",{}))),a._RF.pop()}}}));

System.register("chunks:///_virtual/ExchangeTicket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./TextDefine.ts","./GlobalDefine.ts","./GameApi.ts","./Popup.ts","./ProcessContent.ts"],(function(t){"use strict";var e,n,i,o,r,s,u,c,l,a,h,p,f,k,b,g,m,T,d,y,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.asyncToGenerator},function(t){s=t.cclegacy,u=t._decorator,c=t.Label,l=t.Slider,a=t.Button,h=t.Node,p=t.ProgressBar,f=t.Color,k=t.tween,b=t.Vec3},function(t){g=t.GameDefine},function(t){m=t.TextDefine},function(t){T=t.profile},function(t){d=t.gameApi},function(t){y=t.Popup},function(t){x=t.ProcessContent}],execute:function(){var B,P,w,A,S,M,v,C,D,E,z,O,R,L,F,N,G,_,H,j,I,Z,q,J,V;s._RF.push({},"5dbf6Nsh8FHdqjBYm5OfZwF","ExchangeTicket",void 0);var W=u.ccclass,Y=u.property;t("ExchangeTicket",(B=W("ExchangeTicket"),P=Y(c),w=Y(l),A=Y(c),S=Y(a),M=Y(a),v=Y(a),C=Y(a),D=Y(c),E=Y(h),z=Y(x),O=Y(c),B((F=e((L=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).ticketPrice=null,e.balanceMoney=null,e.ticketAmount=null,i(e,"currentTicketLabel",F,o(e)),i(e,"turnSlider",N,o(e)),i(e,"maxTurn",G,o(e)),i(e,"minusTicketButton",_,o(e)),i(e,"plusTicketButton",H,o(e)),i(e,"yesButton",j,o(e)),i(e,"noButton",I,o(e)),i(e,"totalCostLabel",Z,o(e)),i(e,"buyContent",q,o(e)),i(e,"processContent",J,o(e)),i(e,"description",V,o(e)),e.tweenDes=null,e.timeoutBuyRes=null,e}n(e,t);var s=e.prototype;return s.start=function(){var t=this;this.minusTicketButton.node.on("click",this.onMinusTicket,this),this.plusTicketButton.node.on("click",this.onPlusTicket,this),this.noButton.node.on("click",(function(){t.hide()}),this),this.turnSlider.node.on("slide",this.onSlide,this)},s.show=function(){t.prototype.show.call(this),this.ticketPrice=g.instance.ticketPrice,this.balanceMoney=T.BalanceMoney,this.init()},s.onSlide=function(t){var e=this.calcProgressOnTicketAmount(1);this.ticketAmount=t.progress/e,this.ticketAmount=Math.round(this.ticketAmount),this.ticketAmount<1&&(this.ticketAmount=1);var n=this.calcMaxTurnPossible();this.ticketAmount>n&&(this.ticketAmount=n),t.progress=this.calcProgressOnTicketAmount(this.ticketAmount),this.currentTicketLabel.string=this.ticketAmount.toString(),t.getComponent(p).progress=t.progress,this.totalCostLabel.string=this.calcCostOnTicket().toString()},s.onMinusTicket=function(){1!=this.ticketAmount&&(this.turnSlider.progress-=this.calcProgressOnTicketAmount(1),this.onSlide(this.turnSlider))},s.onPlusTicket=function(){this.ticketAmount!=this.calcMaxTurnPossible()&&(this.turnSlider.progress+=this.calcProgressOnTicketAmount(1),this.onSlide(this.turnSlider))},s.init=function(){this.ticketAmount=1,this.balanceMoney<this.ticketPrice?(this.updateMaxTurn(1),this.setStatusButton(!1),this.totalCostLabel.color=new f(f.RED),this.yesButton.node.on("click",this.onNotEnoughMoney,this),this.description.string=m.textConfig.ExchangeTicketText.notEnoughMoneyDescription):(this.updateMaxTurn(this.calcMaxTurnPossible()),this.setStatusButton(!0),this.totalCostLabel.color=new f(f.WHITE),this.yesButton.node.on("click",this.onBuyTicket,this),this.description.string=m.textConfig.ExchangeTicketText.enoughMoneyDescription),this.setProgress(this.calcProgressOnTicketAmount(1))},s.calcMaxTurnPossible=function(){var t=this.balanceMoney/this.ticketPrice;t=Math.max(1,t);var e=Math.trunc(t);return e>=99&&(e=99),e},s.updateMaxTurn=function(t){this.maxTurn.string=t.toString()},s.calcProgressOnTicketAmount=function(t){void 0===t&&(t=null);var e=t||this.ticketAmount,n=this.calcMaxTurnPossible();return parseFloat((e/n).toFixed(2))},s.setProgress=function(t){this.turnSlider.progress=0,this.turnSlider.progress+=t,this.onSlide(this.turnSlider)},s.setStatusButton=function(t){this.minusTicketButton.interactable=t,this.plusTicketButton.interactable=t},s.calcCostOnTicket=function(){return this.ticketPrice*this.ticketAmount},s.onBuyTicket=function(){var t=r(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.buyContent.active=!1,this.processContent.node.active=!0,t.next=4,d.buyTurn(this.ticketAmount);case 4:e=t.sent,clearTimeout(this.timeoutBuyRes),this.timeoutBuyRes=setTimeout((function(){i.processContent.setResult(!1)}),1e4),e&&(clearTimeout(this.timeoutBuyRes),console.log("[ExchangeTicket] get from server: ",JSON.stringify(e)),n=e.result,this.processContent.setResult(n));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onNotEnoughMoney=function(){var t=this;this.tweenDes&&(this.tweenDes.stop(),this.tweenDes=null),this.tweenDes=k(this.description.node).set({scale:b.ZERO}).to(.5,{scale:b.ONE}).call((function(){t.tweenDes=null})).start()},e}(y)).prototype,"currentTicketLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"turnSlider",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(L.prototype,"maxTurn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(L.prototype,"minusTicketButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(L.prototype,"plusTicketButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(L.prototype,"yesButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(L.prototype,"noButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(L.prototype,"totalCostLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(L.prototype,"buyContent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(L.prototype,"processContent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(L.prototype,"description",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/ExploButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,l,c,u,p,h,f,y,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Sprite,l=e.Label,c=e.Button,u=e.Color,p=e.Component},function(e){h=e.default},function(e){f=e.GamePlayEventName},function(e){y=e.GameDefine},function(e){D=e.GameMgr}],execute:function(){var m,g,d,b,v,P,w,x,E;a._RF.push({},"36202BXaYFEY6+34oTZMHR+","ExploButton",void 0);var G=o.ccclass,B=o.property;e("ExploButton",(m=G("ExploButton"),g=B(s),d=B(s),b=B(l),m((w=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"hunterDisplay",w,r(t)),n(t,"famrerDisplay",x,r(t)),n(t,"switchRolePriceLabel",E,r(t)),t.isHunter=!1,t.isPending=!1,t}i(t,e);var a=t.prototype;return a.start=function(){this.switchRolePriceLabel.string=y.instance.playerExploPrice.toString(),h.on(f.StartGame,this.loadInfo,this),h.on(f.UpdateExploAction,this.explo,this)},a.loadInfo=function(){this.isPending=!1,this.setInfo(D.instance.IsHunter()),this.setDisable()},a.setEnable=function(){this.node.getComponent(c).interactable=!0,this.hunterDisplay.grayscale=!1,this.famrerDisplay.grayscale=!1,this.hunterDisplay.color=new u(255,255,255,255),this.famrerDisplay.color=new u(255,255,255,255)},a.setDisable=function(){this.node.getComponent(c).interactable=!1,this.hunterDisplay.grayscale=!0,this.hunterDisplay.color=new u(255,255,255,136),this.famrerDisplay.grayscale=!0,this.famrerDisplay.color=new u(255,255,255,136)},a.setInfo=function(e){this.isHunter=e,e?(this.hunterDisplay.node.active=!1,this.famrerDisplay.node.active=!0):(this.hunterDisplay.node.active=!0,this.famrerDisplay.node.active=!1)},a.explo=function(){this.isPending=!1},a.exploClick=function(){this.isPending||(this.isPending=!0,D.instance.playerGoldExplo())},t}(p)).prototype,"hunterDisplay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(P.prototype,"famrerDisplay",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"switchRolePriceLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=P))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/FakeCharacter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,i,o,a,r,s,c,h,l,u,p,m,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Enum,c=t.UITransform,h=t.sp,l=t.Vec2,u=t.Vec3,p=t.math,m=t.tween,d=t.Component}],execute:function(){var f,g,y,v,_;a._RF.push({},"ff110cpGIdMzbhhSRshJUUX","FakeCharacter",void 0);var S,z=r.ccclass,F=r.property;!function(t){t[t.Hunter=0]="Hunter",t[t.Farmer=1]="Farmer",t[t.Ranking=2]="Ranking"}(S||(S={})),s(S);t("FakeCharacter",(f=z("FakeCharacter"),g=F({type:S}),f((_=n((v=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"state",_,o(n)),n.size=void 0,n}e(n,t);var a=n.prototype;return a.start=function(){this.size=this.node.getComponent(c).contentSize,this.init(),this.setStatusGroup()},a.setStatusGroup=function(){var t=this;this.node.children.forEach((function(n,e){var i=n.children[0].getComponent(h.Skeleton);t.state==S.Farmer?i.setAnimation(0,"character_run",!0):t.state==S.Hunter?i.setAnimation(0,"enemy_run",!0):e<t.node.children.length/2?i.setAnimation(0,"character_run",!0):i.setAnimation(0,"enemy_run",!0)}))},a.init=function(){var t=this;this.node.children.forEach((function(n){var e=l.random(t.node.getPosition().clone());e.x*=t.size.width/2,e.y*=t.size.height/2,n.setPosition(e),n.setScale(u.ONE),t.floatingGhost(n),t.movingGhost(n)}))},a.floatingGhost=function(t){var n=this,e=p.randomRange(0,2),i=p.random(),o=t.children[0];m(o).by(e,{position:new u(0,20)}).delay(i).by(e,{position:new u(0,-20)}).delay(i).call((function(){n.floatingGhost(t)})).start()},a.movingGhost=function(t){var n=this,e=l.random(this.node.getPosition().clone()),i=this.node.getComponent(c).contentSize;e.x*=i.width/2,e.y*=i.height/2;var o=u.distance(e,t.getPosition().clone())/100,a=t.children[0];e.x>t.position.x?a.setScale(u.ONE):a.setScale(-1,1,1);var r=a.getComponent(h.Skeleton);e.y>t.position.y?r.animation.includes("_up")||r.setAnimation(0,r.animation+"_up",!0):r.animation.includes("_up")&&r.setAnimation(0,r.animation.replace("_up",""),!0);m(t).to(o,{position:e}).delay(1).call((function(){null,n.movingGhost(t)})).start()},n}(d)).prototype,"state",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.Farmer}}),y=v))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var r,t,n,u;return{setters:[function(e){r=e.asyncToGenerator},function(e){t=e.cclegacy},function(e){n=e.NetworkDefine},function(e){u=e.networkMgr}],execute:function(){t._RF.push({},"ec3e9CNQE1PPrbYHgLu6+Bx","GameApi",void 0);e("gameApi",new(function(){function e(){}var t=e.prototype;return t.genDeepLink=function(){var e=r(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){u.postRequest(n.DEEP_LINK,r)})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.getProfile=function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.getRequest(n.Profile));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.buyTurn=function(){var e=r(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={amount:r},e.abrupt("return",u.postRequest(n.BuyTurn,t));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.subtractTurn=function(){var e=r(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.postRequest(n.SubtractTurn,r));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameMgr.ts"],(function(e){"use strict";var n,_,t,i,r,O,N,a,o,M,u;return{setters:[function(e){n=e.inheritsLoose,_=e.createClass},function(e){t=e.cclegacy,i=e._decorator,r=e.Color,O=e.Vec2,N=e.view,a=e.Component},function(e){o=e.default},function(e){M=e.EventName},function(e){u=e.GameMgr}],execute:function(){var E,s;t._RF.push({},"22c1et0Qr9NCJByGDeWlHWX","GameDefine",void 0);var V=i.ccclass;i.property,e("GameDefine",V("GameDefine")(((s=function(e){function t(){for(var n,_=arguments.length,t=new Array(_),i=0;i<_;i++)t[i]=arguments[i];return(n=e.call.apply(e,[this].concat(t))||this)._gameDefine=null,n.anglePerCmnd=10,n._boundCameraTile=null,n._mapWith=0,n._mapHeight=0,n.MOVE_000=new O(1,0),n.MOVE_010=new O(.9848,.1736),n.MOVE_020=new O(.9396,.342),n.MOVE_030=new O(.866,.4999),n.MOVE_040=new O(.766,.6427),n.MOVE_050=new O(.6427,.766),n.MOVE_060=new O(.5,.866),n.MOVE_070=new O(.342,.9396),n.MOVE_080=new O(.1736,.9848),n.MOVE_090=new O(0,1),n.MOVE_100=new O(-.1736,.9848),n.MOVE_110=new O(-.342,.9396),n.MOVE_120=new O(-.4999,.866),n.MOVE_130=new O(-.6427,.766),n.MOVE_140=new O(-.766,.6427),n.MOVE_150=new O(-.866,.4999),n.MOVE_160=new O(-.9396,.342),n.MOVE_170=new O(-.9848,.1736),n.MOVE_180=new O(-1,0),n.MOVE_190=new O(-.9848,-.1736),n.MOVE_200=new O(-.9396,-.342),n.MOVE_210=new O(-.866,-.5),n.MOVE_220=new O(-.766,-.6427),n.MOVE_230=new O(-.6427,-.766),n.MOVE_240=new O(-.5,-.866),n.MOVE_250=new O(-.342,-.9396),n.MOVE_260=new O(-.1736,-.9848),n.MOVE_270=new O(0,-1),n.MOVE_280=new O(.1736,-.9848),n.MOVE_290=new O(.342,-.9396),n.MOVE_300=new O(.5,-.866),n.MOVE_310=new O(.6427,-.766),n.MOVE_320=new O(.766,-.6427),n.MOVE_330=new O(.866,-.5),n.MOVE_340=new O(.9396,-.342),n.MOVE_350=new O(.9848,-.1736),n.KEY_TO_MOVE=(new Map).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_000,n.MOVE_000).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_010,n.MOVE_010).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_020,n.MOVE_020).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_030,n.MOVE_030).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_040,n.MOVE_040).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_050,n.MOVE_050).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_060,n.MOVE_060).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_070,n.MOVE_070).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_080,n.MOVE_080).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_090,n.MOVE_090).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_100,n.MOVE_100).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_110,n.MOVE_110).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_120,n.MOVE_120).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_130,n.MOVE_130).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_140,n.MOVE_140).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_150,n.MOVE_150).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_160,n.MOVE_160).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_170,n.MOVE_170).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_180,n.MOVE_180).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_190,n.MOVE_190).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_200,n.MOVE_200).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_210,n.MOVE_210).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_220,n.MOVE_220).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_230,n.MOVE_230).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_240,n.MOVE_240).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_250,n.MOVE_250).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_260,n.MOVE_260).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_270,n.MOVE_270).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_280,n.MOVE_280).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_290,n.MOVE_290).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_300,n.MOVE_300).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_310,n.MOVE_310).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_320,n.MOVE_320).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_330,n.MOVE_330).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_340,n.MOVE_340).set(phoenix.krun.KRUN_ACTION.KRUN_ACTION_MOVE_350,n.MOVE_350),n}n(t,e);var i=t.prototype;return i.getMaxHpPoint=function(e){return e?this.maxHpPointHunter:this.maxHpPointFarmer},i.start=function(){t.instance=this,o.on(M.onGameDefine,this.setGameDefine,this)},i.setGameDefine=function(e){console.log("[GameDefine] setGameDefine",e),this._gameDefine=e,this._mapWith=this.cellWidth*this.cellUnit,this._mapHeight=this.cellHeight*this.cellUnit;var n=N.getVisibleSize(),_=Math.ceil(n.width/this.cellUnit);_%2!=0&&(_+=1);var t=Math.ceil(n.height/this.cellUnit);t%2!=0&&(t+=1),this._boundCameraTile=new O(t+2,_+2),0==this.playerJoinPrice&&(u.instance.cheatBypassSubtractTurn=!0)},i.getDirectionFromCmd=function(e){return this.KEY_TO_MOVE.get(e)},i.convertRadToMoveCmd=function(e){var n=Math.round(e/this.anglePerCmnd)*this.anglePerCmnd,_="KRUN_CMD_PLAYER_MOVE_"+(0===n?"000":n<100?"0"+n:n);return phoenix.krun.KRUN_CMD[_]||phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_MOVE_000},_(t,[{key:"gameDefine",get:function(){return this._gameDefine}},{key:"timePerFrameServerMilisecond",get:function(){return this._gameDefine.timePerFrame}},{key:"timePerFrameServerMilisecondFake",get:function(){return this._gameDefine.timePerFrame+30}},{key:"timePerFrameServerSecondFake",get:function(){return.001*this.timePerFrameServerMilisecondFake}},{key:"cellHeight",get:function(){return this._gameDefine.dungeonHeight}},{key:"cellWidth",get:function(){return this._gameDefine.dungeonWidth}},{key:"cellUnit",get:function(){return this._gameDefine.pixelPerUnit}},{key:"mapWidth",get:function(){return this._mapWith}},{key:"mapHeight",get:function(){return this._mapHeight}},{key:"boundCameraTile",get:function(){return this._boundCameraTile}},{key:"maxHpPointFarmer",get:function(){return this._gameDefine.farmerHealPointMax}},{key:"maxHpPointHunter",get:function(){return this._gameDefine.hunterHealPointMax}},{key:"ticketPrice",get:function(){return this._gameDefine.bankerTicketPrice}},{key:"playerSwitchPrice",get:function(){return this._gameDefine.playerSwitchPrice}},{key:"playerExploPrice",get:function(){return this._gameDefine.playerGoldExplodePrice}},{key:"playerGoldExploRadius",get:function(){return this._gameDefine.playerGoldExplodeRadius}},{key:"goldPriceValueMin",get:function(){return this._gameDefine.goldPieceValueMin}},{key:"goldPriceValueMax",get:function(){return this._gameDefine.goldPieceValueMax}},{key:"goldPricePartValue",get:function(){return Math.floor((this.goldPriceValueMax-this.goldPriceValueMin)/3)}},{key:"playerJoinPrice",get:function(){return this._gameDefine.playerJoinPrice}},{key:"playerGoldDisplayer",get:function(){return this._gameDefine.playerGoldDisplay}},{key:"playerGoldDisplayerMin",get:function(){return.1*this._gameDefine.playerGoldDisplay}}]),t}(a)).instance=null,s.RED_COLOR=new r(255,0,60),s.BLU_COLOR=new r(2,177,243),s.GREEN_COLOR=new r(73,203,43),s.GREEN_LIGHT_COLOR=new r(88,255,148),s.obstacleRate=.2,s.magmaRate=.3,s.distanceToTeleport=1e3,s.distanceToMoveMap=128,s.playerGoldAreaMin=.9,s.playerGoldAreaMax=1.4,E=s))||E);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy,c=e.EventTarget}],execute:function(){t._RF.push({},"cf67fV7rxVL5IrLlgHmZ3Xi","GameEvent",void 0);e("default",new c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./TrimBase64.ts","./PopupMgr.ts","./ScreenMgr.ts","./Define.ts","./GameEvent.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./GamePlay.ts","./AudioMgr.ts","./TextDefine.ts","./PopupConfig.ts","./GameApi.ts","./Utils.ts","./GlobalDefine.ts"],(function(e){"use strict";var n,t,i,r,o,a,s,c,u,h,l,d,R,p,k,g,_,M,f,S,m,y,E,N,b,U,w,x,K,P,C;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,i=e.asyncToGenerator},function(e){r=e.cclegacy,o=e._decorator,a=e.director,s=e.Director,c=e.game,u=e.view,h=e.Component},function(e){l=e.maxApiUtils,d=e.MaxApiName},function(e){R=e.TrimBase64},function(e){p=e.PopupMgr},function(e){k=e.ScreenMgr},function(e){g=e.EventName,_=e.GamePlayEventName,M=e.GhostStatusPopup,f=e.ScreenName},function(e){S=e.default},function(e){m=e.NetworkBrigde},function(e){y=e.NetworkDefine,E=e.WSCmd},function(e){N=e.GamePlay},function(e){b=e.AudioMgr},function(e){U=e.TextDefine},function(e){w=e.PopupConfig},function(e){x=e.gameApi},function(e){K=e.utils},function(e){P=e.globalDefine,C=e.profile}],execute:function(){var D,A;r._RF.push({},"b7472axsNtOc6fjgxtXsqcK","GameMgr",void 0);var G,O=o.ccclass;o.property;!function(e){e[e.Load=0]="Load",e[e.Init=1]="Init",e[e.CheckToken=2]="CheckToken",e[e.Connecting=3]="Connecting",e[e.Authentication=4]="Authentication",e[e.ReqWorker=5]="ReqWorker",e[e.ReqDefines=6]="ReqDefines",e[e.Menu=7]="Menu",e[e.Standby=8]="Standby",e[e.Playing=9]="Playing",e[e.Result=10]="Result",e[e.NetworkError=11]="NetworkError",e[e.FindMatch=12]="FindMatch",e[e.SubtractTurn=13]="SubtractTurn"}(G||(G={}));e("GameMgr",O("GameMgr")(((A=function(e){function r(){var n;return(n=e.call(this)||this).state=void 0,n.preState=void 0,n.isCapture=!1,n.captureCallBack=null,n.time=0,n.timeFindMatch=0,n.networkBrigde=new m,n.isHunter=!1,n.isStandby=!1,n.isMenu=!1,n.endInfo=null,n.cheatSkipStandby=!1,n.isOptimizeForPerformance=!1,n.cheatBypassSubtractTurn=!1,n._ping=0,n}n(r,e);var o=r.prototype;return o.onLoad=function(){r.instance=this,window.OnHideLoading&&(window.OnHideLoading(),console.log("HIDE LOADING"),l.request(d.stopTrace,window.traceScreenLoadId),l.request(d.stopTrace,window.traceScreenInterractionId)),a.on(s.EVENT_AFTER_DRAW,this.canvasAfterDraw,this),this.SetState(G.Load),S.on(g.CaptureScreenShoot,this.captureScreen,this),S.on(_.UpdatePlayerRole,this.switchRole,this),l.listen("onFocusApp",this.handleFocusMiniApp.bind(this)),l.listen("onBlurApp",this.handleBlurMiniApp.bind(this))},o.handleFocusMiniApp=function(){c.resume(),console.log("[GameMgr] handleFocusMiniApp")},o.handleBlurMiniApp=function(){c.pause(),console.log("[GameMgr] handleBlurMiniApp")},o.update=function(e){var n=this;switch(this.state){case G.Init:break;case G.CheckToken:this.time+=e,P.profile.isOk?(this.SetState(G.Connecting),l.isBrowser&&(this.cheatBypassSubtractTurn=!0)):this.time>=2&&(y.IS_DEV?this.SetState(G.Connecting):this.SetState(G.NetworkError));break;case G.Connecting:this.time+=e,this.time>y.lostConnectionTime/1e3?this.SetState(G.NetworkError):this.networkBrigde.isReady&&this.SetState(G.Authentication);break;case G.Menu:if(!this.isMenu)return;if(k.instance.isLoaded(f.Menu)&&U.isLoaded){if(this.isOptimizeForPerformance&&!k.instance.isLoaded(f.GamePlay))return;k.instance.hide(f.Loading),this.isMenu=!1}break;case G.Standby:if(0==this.isStandby)return;k.instance.isLoaded(f.Standby)&&k.instance.isLoaded(f.GamePlay)&&(k.instance.hide(f.Menu),k.instance.show(f.GamePlay),this.cheatSkipStandby?this.networkBrigde.joinGame(this.isHunter):k.instance.show(f.Standby),this.isStandby=!1);case G.FindMatch:if(this.timeFindMatch+=e,this.timeFindMatch>6){console.log("[GameMgr] FindMatch timeout");var t=U.textConfig.FindMatchFailPopupText,i=w.Show(t,null,M.Error);null==i||i.SetTypeOk((function(){n.reconnect()}))}}},o.SetState=function(e){var n=this;switch(console.log("[GameMgr] state: "+G[this.state]+" => "+G[e]),this.preState=this.state,this.state=e,e){case G.Load:k.instance.load(),b.instance.loadRemote(),U.loadTextConfig(),this.SetState(G.Init);break;case G.Init:this.initNetwork(),this.SetState(G.CheckToken);break;case G.CheckToken:case G.Connecting:this.time=0;break;case G.Authentication:this.networkBrigde.authentication(P.profile.userToken);break;case G.ReqWorker:p.Instance.hideAll(),this.networkBrigde.reqWorker();break;case G.ReqDefines:this.networkBrigde.reqDefines();break;case G.Playing:this.timeFindMatch=0;break;case G.Result:setTimeout((function(){p.Instance.hideAll(),k.instance.hideAll(),N.instance.end(),k.instance.show(f.Result),n.networkBrigde.quitGame()}),2e3);break;case G.NetworkError:var t=U.textConfig.LostConnectionPopupText,i=w.Show(t,null,M.Disconnect);null==i||i.SetTypeOk((function(){n.SetState(n.preState)}))}},o.initNetwork=function(){this.networkBrigde.connect(),this.networkBrigde.onMessage=this.onMessage.bind(this)},o.onMessage=function(e){switch(e.msgClass){case E.ResVerify:var n=phoenix.krun.internal.ResVerify.decode(e.msg);P.profile.Uid=n.uid,this.SetState(G.ReqWorker),console.log("[GameMgr] ResVerify: ",n);break;case E.MsgPing:var t=phoenix.krun.internal.MsgPing.decode(e.msg),i=Date.now()-t.createAt;S.emit(g.onPing,t.workerAt+i/2,i),this.ping=i;break;case E.ResWorker:this.SetState(G.ReqDefines);break;case E.KrunMsg:this.onGameMsg(e.msg)}},o.onGameMsg=function(e){var n=phoenix.krun.KrunMsg.decode(e);if(n.error==phoenix.krun.KRUN_ERROR.KRUN_ERROR_NONE)switch(n.cmd){case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_MATCHING:if(this.state==G.Playing)return;this.SetState(G.Playing);var t=phoenix.krun.KrunGameMatching.decode(n.body);console.log("[GameMgr] matchingInfo: ",t),S.emit(g.onMatchingInfo,t);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES:var i=phoenix.krun.KrunGameDefines.decode(n.body);S.emit(g.onGameDefine,i),this.isMenu=!0,this.SetState(G.Menu);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_END:this.endInfo=phoenix.krun.KrunGameEnd.decode(n.body),console.log("[GameMgr] endgame: ",this.endInfo),N.instance.endPlayer(),this.SetState(G.Result);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_UPDATE:var r=phoenix.krun.KrunGameUpdate.decode(n.body);N.instance.netUpdate(r);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP:var o=phoenix.krun.KrunResPlayerWakeUp.decode(n.body);o.uid==P.profile.Uid&&o.ok&&S.emit(g.onPlayerWakeUp);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_RANKING_BOARD:var a=phoenix.krun.KrunResRankingBoard.decode(n.body);S.emit(g.onResRanking,a);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME:var s=phoenix.krun.KrunPlayerJoin.decode(n.body);N.instance.handlePlayerJoin(s);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME:var c=phoenix.krun.KrunPlayerQuit.decode(n.body);N.instance.handlePlayerQuit(c);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_DEAD:var u=phoenix.krun.KrunPlayer.decode(n.body);N.instance.handlePlayerQuit(u);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_SWITCH_ROLE:var h=phoenix.krun.KrunResPlayerSwitchRole.decode(n.body);N.instance.handlePlayerSwitchRole(h);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_NOTIFY:var l=phoenix.krun.KrunGameNotify.decode(n.body);N.instance.handleGameNotify(l);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_PLAYER:var d=phoenix.krun.KrunResGamePlayer.decode(n.body);N.instance.handleGamePlayer(d);break;case phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_GOLD_EXPLODE:var R=phoenix.krun.KrunResPlayerGoldExplode.decode(n.body);N.instance.handlePlayerGoldExplode(R)}else switch(console.log("[GameMgr] ongameMsg Error: ",n),n.error){case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_FAIL:console.log("Failed matching");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_TIMEOUT:console.log("Time out"),S.emit(g.onMatchingFailed);break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_INVALID:console.log("User invalid");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_USER_DOUBLE:console.log("User double");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_MATCHING_DISABLE:console.log("Matching disable");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_PLAYER_SWITCH_ROLE_NOT_ENOUGH_GOLD:S.emit(_.UpdatePlayerRole,!1,this),console.log("Switch role not enough gold");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_PLAYER_SWITCH_ROLE_DOUBLE:S.emit(_.UpdatePlayerRole,!1,this),console.log("Switch role double");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_PLAYER_EXPLODE_DOUBLE:S.emit(_.UpdateExploAction,!1,this),console.log("Explo double");break;case phoenix.krun.KRUN_ERROR.KRUN_ERROR_PLAYER_EXPLODE_NOT_ENOUGH_GOLD:S.emit(_.UpdateExploAction,!1,this),console.log("Explo not enough gold")}},o.requestServerTime=function(){this.networkBrigde.ping()},o.startStandby=function(e){void 0===e&&(e=!1),this.isHunter=e,this.isStandby=!0,this.SetState(G.Standby)},o.switchRole=function(e){e&&(this.isHunter=!this.isHunter)},o.subtractTurn=function(){var e=i(regeneratorRuntime.mark((function e(){var n,t,i,r,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cheatBypassSubtractTurn){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x.subtractTurn({turn:1,requestId:K.uuid});case 4:(n=e.sent)?(console.log("[Subtracturn] success"),-1==n.result.postBalance&&(console.log("[Subtracturn] success but turn not enough"),this.networkBrigde.quitGame(),t=U.textConfig.SubtractTurnNotEnoughPopupText,null==(i=w.Show(t,null,M.Error))||i.SetTypeOk((function(){a.reconnect()})))):(console.log("[Subtracturn] get from server failed"),this.networkBrigde.quitGame(),r=U.textConfig.CanNotSubtractTurnPopupText,null==(o=w.Show(r,null,M.Error))||o.SetTypeOk((function(){a.reconnect()})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.startFindmatch=function(){this.state!=G.FindMatch&&this.state!=G.Playing?(this.timeFindMatch=0,this.SetState(G.FindMatch),this.networkBrigde.joinGame(this.isHunter)):r.instance.reqPlayer("")},o.backFromeGameToLobby=function(){k.instance.hide(f.GamePlay),k.instance.show(f.Menu),this.networkBrigde.quitGame(),this.SetState(G.ReqWorker)},o.playerMove=function(e){this.networkBrigde.sendAction(e,null)},o.playerWakeUp=function(){var e=new phoenix.krun.KrunReqPlayerWakeUp;this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_WAKE_UP,phoenix.krun.KrunReqPlayerWakeUp.encode(e))},o.reqRankingBoard=function(e,n){var t=new phoenix.krun.KrunReqRankingBoard;t.begin=e,t.end=n,this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_RANKING_BOARD,phoenix.krun.KrunReqRankingBoard.encode(t))},o.playerSwitchRole=function(){console.log("Send action player switch role");var e=new phoenix.krun.KrunReqPlayerSwitchRole;this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_SWITCH_ROLE,phoenix.krun.KrunReqPlayerSwitchRole.encode(e))},o.playerGoldExplo=function(){console.log("Send action player gold explo");var e=new phoenix.krun.KrunReqPlayerGoldExplode;this.networkBrigde.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_GOLD_EXPLODE,phoenix.krun.KrunReqPlayerGoldExplode.encode(e))},o.reqPlayer=function(e){this.networkBrigde.reqPlayer(e,C.Uid)},o.IsHunter=function(){return this.isHunter},o.reconnect=function(){this.initNetwork(),p.Instance.hideAll(),k.instance.isShow(f.Menu)||(k.instance.hideAll(),k.instance.show(f.Menu)),this.state==G.Playing&&(N.instance.end(),this.networkBrigde.quitGame()),this.SetState(G.ReqWorker)},o.canvasAfterDraw=function(){if(this.isCapture){this.isCapture=!1;var e=document.getElementById("GameCanvas"),n=document.createElement("canvas"),t=n.getContext("2d"),i=u.getVisibleSize().width,r=u.getVisibleSize().height;n.width=i,n.height=r,t.drawImage(e,0,0,i,r,0,0,i,r);var o=R.trimCanvas(n).toDataURL("image/png");this.captureCallBack(o)}},o.captureScreen=function(e){this.captureCallBack=e,this.isCapture=!0},t(r,[{key:"ping",get:function(){return this._ping},set:function(e){this._ping=e}},{key:"isPlaying",get:function(){return this.state==G.Playing}},{key:"isPingReady",get:function(){return this.networkBrigde.isPingReady}}]),r}(h)).instance=null,D=A))||D);r._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Screen.ts","./Player.ts","./GameEvent.ts","./Define.ts","./PlayerManager.ts","./ItemManager.ts","./GameMgr.ts","./GameUIManager.ts","./GameDefine.ts","./MapManager.ts","./CameraFollow.ts","./TimeMgr.ts","./ScreenMgr.ts","./MeteorManager.ts","./ItemSpecialManager.ts","./TrapManager.ts","./GlobalDefine.ts","./TextDefine.ts","./PopupConfig.ts"],(function(e){"use strict";var t,n,a,i,r,o,l,s,p,c,u,h,m,f,g,y,d,M,P,b,G,v,S,T,w,E,x,U,C,N,D,I,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.Label,p=e.Vec2,c=e.Color},function(e){u=e.Screen},function(e){h=e.Player},function(e){m=e.default},function(e){f=e.EventName,g=e.GamePlayEventName,y=e.ScreenName,d=e.GhostStatusPopup,M=e.SoundName},function(e){P=e.PlayerManager},function(e){b=e.ItemManager},function(e){G=e.GameMgr},function(e){v=e.GameUIManager},function(e){S=e.GameDefine},function(e){T=e.MapManager},function(e){w=e.CameraFollow},function(e){E=e.TimeMgr},function(e){x=e.ScreenMgr},function(e){U=e.MeteorManager},function(e){C=e.ItemSpecialManager},function(e){N=e.TrapManager},function(e){D=e.profile},function(e){I=e.TextDefine},function(e){R=e.PopupConfig}],execute:function(){var _,k,O,z,L,X,Y,F,H,B,J,q,A,K,j,Q,V,W,Z,$,ee,te;o._RF.push({},"5ae0bNOoFtBfrUexD3IPSUb","GamePlay",void 0);var ne,ae=l.ccclass,ie=l.property;!function(e){e[e.Init=0]="Init",e[e.Playing=1]="Playing",e[e.End=2]="End"}(ne||(ne={}));e("GamePlay",(_=ae("GamePlay"),k=ie(T),O=ie(P),z=ie(b),L=ie(U),X=ie(C),Y=ie(N),F=ie(v),H=ie(w),B=ie(s),_(((te=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"mapManager",A,i(t)),a(t,"playerManager",K,i(t)),a(t,"itemManager",j,i(t)),a(t,"meteorManager",Q,i(t)),a(t,"itemSpecialManager",V,i(t)),a(t,"trapManager",W,i(t)),a(t,"uiManager",Z,i(t)),a(t,"camera",$,i(t)),a(t,"ping",ee,i(t)),t._player=null,t.state=ne.Init,t.preX=-1,t.preY=-1,t}n(t,e),t.getInstance=function(){return t.instance};var o=t.prototype;return o.show=function(){e.prototype.show.call(this),t.instance||(t.instance=this),this.setState(ne.Init),m.on(f.onMatchingInfo,this.initGame,this),m.on(f.onPing,this.logPing,this),m.on(g.PlayerTeleport,this.handlePlayerTeleport,this)},o.update=function(e){switch(this.state){case ne.Playing:if(-1==this.preX)this.preX=this.player.node.position.x,this.preY=this.player.node.position.y;else{var t=this.player.node.position.x-this.preX,n=this.player.node.position.y-this.preY;Math.abs(t)>=S.distanceToMoveMap&&(this.mapManager.handleMoveMap(new p(Math.sign(t),0)),this.preX=this.player.node.position.x),Math.abs(n)>=S.distanceToMoveMap&&(this.mapManager.handleMoveMap(new p(0,Math.sign(n))),this.preY=this.player.node.position.y)}}},o.handlePlayerTeleport=function(e,t,n){var a=e.x-t.x,i=e.y-t.y;this.mapManager.handleTeleport(a,i);var r=t.x-this.preX,o=t.y-this.preY;this.preX=n.x-r,this.preY=n.y-o},o.logPing=function(e,t){this.ping.color=t<=100?S.GREEN_COLOR:t<=250?c.YELLOW:S.RED_COLOR,this.ping.string="Ping: "+t},o.setState=function(e){switch(console.log("[GamePlay] state: "+ne[this.state]+" => "+ne[e]),this.state=e,e){case ne.Playing:G.instance.requestServerTime(),x.instance.hide(y.Standby),m.emit(g.StartGame),G.instance.subtractTurn();break;case ne.End:this.reset()}},o.initGame=function(e){var t=this;if(console.log("[GamePlay] initGame"),this.mapManager.getMapData(e))this.mapManager.initGameMaps(),this.setState(ne.Playing);else{console.log("[GamePlay] initGame failed"),G.instance.reqPlayer(e.gameId);var n=I.textConfig.SystemErrorPopupText,a=R.Show(n,null,d.Disconnect);null==a||a.SetTypeOk((function(){t.end(),G.instance.backFromeGameToLobby()}))}},o.setCamera=function(e){this.camera.Player=e,m.emit(g.UpdateCamera)},o.netUpdate=function(e){this.state==ne.Playing&&(E.instance.gameTime=e.gameTime,this.map.netUpdate(e),this.itemManager.netUpdate(e),this.itemSpecialManager.netUpdate(e),this.trapManager.netUpdate(e),this.meteorManager.netUpdate(e))},o.handlePlayerJoin=function(e){this.state==ne.Playing&&this.playerManager.initPlayerJoin(e,this.map)},o.handlePlayerQuit=function(e){this.state==ne.Playing&&this.map.removePlayer(e.uid)},o.handleGamePlayer=function(e){console.log(e)},o.handlePlayerSwitchRole=function(e){if(this.state==ne.Playing){var t=e.currentType==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_HUNTER;if(D.Uid==e.uid){if(t==this.player.isHunter)return void m.emit(g.UpdatePlayerRole,!1,this);m.emit(g.UpdatePlayerRole,!0,this),this.player.switchRole(t),this.map.getPlayers().forEach((function(e){e.getComponent(h).setHpColor()}))}else{var n=this.map.findPlayer(e.uid);n&&n.getComponent(h).switchRole(t)}}},o.handlePlayerGoldExplode=function(e){var t=this;if(this.state==ne.Playing){D.Uid==e.uid&&(console.log("EXPLO"),m.emit(g.UpdateExploAction,!0,this),m.emit(f.PlaySfx,M.Shockwave));var n=this.map.findPlayer(e.uid);n&&n.getComponent(h).setExploShockwave(!0,S.instance.playerGoldExploRadius),e.victim.forEach((function(e){var n=t.map.findPlayer(e);n&&(n.getComponent(h).setBeHitEffect(),e==D.Uid&&m.emit(f.PlaySfx,M.Shockwave))}))}},o.handleGameNotify=function(e){e.content.forEach((function(e,t){setTimeout((function(){m.emit(g.OnNotify,e,2)}),2*t*1e3)}))},o.end=function(){this.setState(ne.End)},o.backClick=function(){var e=this,t=I.textConfig.ExitGamePlayPopupText,n=R.Show(t,null,d.Normal);null==n||n.SetTypeYesNo("Chơi tiếp","Thoát game",(function(){}),(function(){e.end(),G.instance.backFromeGameToLobby()}))},o.reset=function(){console.log("[GamePlay] reset"),this.map.reset(),this._player=null,this.camera.Player=null,this.uiManager.reset(),this.mapManager.reset(),this.preX=-1,this.preY=-1},o.endPlayer=function(){var e=this;this.player.setHp(0),this.player.dead((function(){t.instance.playerManager.playerPool.put(e.player.node)}))},r(t,[{key:"player",get:function(){return this._player},set:function(e){this._player=e,this.setCamera(e.node)}},{key:"map",get:function(){return this.mapManager.map}}]),t}(u)).instance=null,A=t((q=te).prototype,"mapManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(q.prototype,"playerManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(q.prototype,"itemManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(q.prototype,"meteorManager",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(q.prototype,"itemSpecialManager",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(q.prototype,"trapManager",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(q.prototype,"uiManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(q.prototype,"camera",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(q.prototype,"ping",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=q))||J));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Shaking.ts","./GameEvent.ts","./GlobalDefine.ts","./MySprite.ts","./Utils.ts","./Define.ts","./ExploButton.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./PlayerDead.ts","./MeteorDrop.ts","./MoneyChange.ts","./PlayerAttack.ts","./SwitchRoleButton.ts","./TextDefine.ts"],(function(e){"use strict";var t,n,o,i,a,l,r,c,u,s,b,h,y,p,f,d,m,g,w,M,G,E,B,v,D,C,S,L,T,N,x,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Label,c=e.Button,u=e.UIOpacity,s=e.Input,b=e.Vec3,h=e.tween,y=e.Color,p=e.Component},function(e){f=e.Shaking},function(e){d=e.default},function(e){m=e.profile},function(e){g=e.MySprite},function(e){w=e.utils},function(e){M=e.GamePlayEventName,G=e.EventName,E=e.SoundName},function(e){B=e.ExploButton},function(e){v=e.GameDefine},function(e){D=e.GameMgr},function(e){C=e.GamePlay},function(e){S=e.PlayerDead},function(e){L=e.MeteorDrop},function(e){T=e.MoneyChange},function(e){N=e.PlayerAttack},function(e){x=e.SwitchRoleButton},function(e){P=e.TextDefine}],execute:function(){var U,O,R,k,z,A,_,H,I,F,j,W,V,Z,q,J,K,Q,X,Y,$,ee,te,ne,oe,ie,ae,le,re,ce,ue,se,be,he,ye;a._RF.push({},"eb558Etau1CmpoyrjypGeO4","GameUIManager",void 0);var pe=l.ccclass,fe=l.property;e("GameUIManager",(U=pe("GameUIManager"),O=fe(g),R=fe(r),k=fe(r),z=fe(r),A=fe(S),_=fe(N),H=fe(T),I=fe(L),F=fe(r),j=fe(f),W=fe(x),V=fe(B),Z=fe(c),q=fe(c),J=fe(u),K=fe(u),U((Y=t((X=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,o(t,"avatar",Y,i(t)),o(t,"playerName",$,i(t)),o(t,"goldLabel",ee,i(t)),o(t,"moneyLabel",te,i(t)),o(t,"playerDead",ne,i(t)),o(t,"playerAttack",oe,i(t)),o(t,"moneyChange",ie,i(t)),o(t,"meteorDrop",ae,i(t)),o(t,"notificationLabel",le,i(t)),o(t,"cameraShaking",re,i(t)),o(t,"swithRoleButton",ce,i(t)),o(t,"exploButtion",ue,i(t)),t.goldBalance=0,t.moneyBalance=0,t.currentGold=0,t.currentMoney=0,t.tweenGoldEffect=null,t.tweenMoneyEffect=null,t.tweenNotification=null,o(t,"buttonMoney",se,i(t)),o(t,"buttonGold",be,i(t)),o(t,"bubbleMoney",he,i(t)),o(t,"bubbleGold",ye,i(t)),t.tweenBubbleMoney=null,t.tweenBubbleGold=null,t}n(t,e);var a=t.prototype;return a.start=function(){this.avatar.FetchAvatar(m.avatar),this.playerName.string=w.trimName(m.UserName,2),d.on(M.UpdateGoldBalance,this.updateGoldBalance.bind(this)),d.on(M.UpdateMoneyBalance,this.updateMoneyBalance.bind(this)),d.on(M.UpdatePlayerFREEZE,this.playerFreeze.bind(this)),d.on(M.UpdatePlayerStopAttack,this.playerStopAtack.bind(this)),d.on(M.UpdateMoneyChange,this.updateMoneyChange.bind(this)),d.on(M.UpdateMeteorDrop,this.updateMeteorDrop.bind(this)),d.on(M.OnNotify,this.onNotification.bind(this)),d.on(M.CameraShaking,this.onCameraShaking.bind(this)),this.initButtonDesc(),-1==v.instance.playerExploPrice&&(this.exploButtion.node.active=!1),-1==v.instance.playerSwitchPrice&&(this.swithRoleButton.node.active=!1)},a.onCameraShaking=function(){this.cameraShaking.startShaking()},a.initButtonDesc=function(){this.buttonGold.node.on(s.EventType.TOUCH_START,this.onShowGoldDesc,this),this.buttonGold.node.on(s.EventType.TOUCH_END,this.onHideGoldDesc,this),this.buttonGold.node.on(s.EventType.TOUCH_CANCEL,this.onHideGoldDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_START,this.onShowMoneyDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_END,this.onHideMoneyDesc,this),this.buttonMoney.node.on(s.EventType.TOUCH_CANCEL,this.onHideMoneyDesc,this)},a.playerFreeze=function(e){var t=this;setTimeout((function(){D.instance.isPlaying&&t.playerDead.onDead(e)}),300)},a.playerStopAtack=function(e){this.playerAttack.stopAttack(e)},a.updateMoneyChange=function(e){this.moneyChange.setEndTime(e)},a.updateMeteorDrop=function(){this.meteorDrop.setTime(3,1.9)},a.updateGoldBalance=function(e){var t=this;this.updateActionButton(this.goldBalance),this.goldBalance!=e&&(this.goldBalance<e?(this.goldLabel.color=v.GREEN_COLOR,C.instance.player.earnMoneyEffect(),d.emit(G.PlaySfx,E.CollectGold)):this.goldLabel.color=v.RED_COLOR,this.goldBalance=e,this.tweenGoldEffect&&(this.tweenGoldEffect.stop(),this.tweenGoldEffect=null),this.goldLabel.node.parent.setScale(new b(1.1,1.1)),this.tweenGoldEffect=h({gold:this.currentGold}).delay(.5).to(.3,{gold:e},{onUpdate:function(e,n){var o=Math.round(e.gold);t.currentGold!=o&&(t.currentGold=o,t.goldLabel.string=t.currentGold.toString())}}).delay(.1).call((function(){t.tweenGoldEffect=null,t.goldLabel.color=y.WHITE,t.goldLabel.node.parent.setScale(b.ONE)})).start())},a.updateMoneyBalance=function(e){var t=this;this.moneyBalance!=e&&(this.moneyBalance<e?this.moneyLabel.color=v.GREEN_COLOR:this.moneyLabel.color=v.RED_COLOR,this.moneyBalance=e,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new b(1.1,1.1)),this.tweenMoneyEffect=h({money:this.currentMoney}).delay(.5).to(.3,{money:e},{onUpdate:function(e,n){var o=Math.round(e.money);t.currentMoney!=o&&(t.currentMoney=o,t.moneyLabel.string=w.formatScore(t.currentMoney),d.emit(G.PlaySfx,E.ExchangeMoney))}}).delay(.1).call((function(){t.tweenMoneyEffect=null,t.moneyLabel.color=y.WHITE,t.moneyLabel.node.parent.setScale(b.ONE)})).start())},a.onNotification=function(e,t){var n=this;void 0===t&&(t=2),this.notificationLabel.node.active=!0,this.notificationLabel.string=this.handlerNotifycationText(e),this.tweenNotification&&(this.tweenNotification.stop(),this.tweenNotification=null),this.tweenNotification=h({opacity:255}).to(t,{opacity:0},{onUpdate:function(e,t){var o=n.notificationLabel.color;n.notificationLabel.color=new y(o.r,o.g,o.b,e.opacity)},easing:"sineIn"}).call((function(){n.notificationLabel.node.active=!1,n.tweenNotification=null})).start()},a.handlerNotifycationText=function(e){var t=e.split("|")[0];if("METEOR_SPAM"==t)return P.textConfig.NotificationText.meteor_fall;if("OPEN_CHEST"==t){var n=e.split("|")[1],o=e.split("|")[2],i=P.textConfig.NotificationText.openChest;return i=(i=i.replace("{0}",w.formatPlayerPhoneNumber(n))).replace("{1}",w.formatScore(parseInt(o)))}return e},a.reset=function(){this.goldLabel.string="0",this.moneyLabel.string="0",this.goldBalance=0,this.moneyBalance=0,this.currentGold=0,this.currentMoney=0,this.playerAttack.reset(),this.playerDead.reset(),this.moneyChange.reset()},a.onShowMoneyDesc=function(){this.tweenBubbleMoney&&this.tweenBubbleMoney.stop(),this.tweenBubbleMoney=null,this.bubbleMoney.node.active=!0,this.bubbleMoney.opacity=255,this.bubbleGold.node.active=!1,this.bubbleMoney.node.children[0].children[0].getComponent(r).string=P.textConfig.GameplayText.descriptionMoney},a.onHideMoneyDesc=function(){var e=this;this.tweenBubbleMoney=null,this.tweenBubbleMoney=h(this.bubbleMoney).to(2.5,{opacity:0}).call((function(){e.tweenBubbleMoney=null,e.bubbleMoney.node.active=!1})).start()},a.onShowGoldDesc=function(){this.tweenBubbleGold&&this.tweenBubbleGold.stop(),this.tweenBubbleGold=null,this.bubbleGold.node.active=!0,this.bubbleGold.opacity=255,this.bubbleMoney.node.active=!1,this.bubbleGold.node.children[0].children[0].getComponent(r).string=P.textConfig.GameplayText.descriptionGold},a.onHideGoldDesc=function(){var e=this;this.tweenBubbleGold=null,this.tweenBubbleGold=h(this.bubbleGold).to(2.5,{opacity:0}).call((function(){e.tweenBubbleGold=null,e.bubbleGold.node.active=!1})).start()},a.updateActionButton=function(e){e>=v.instance.playerSwitchPrice?this.swithRoleButton.setEnable():this.swithRoleButton.setDisable(),e>=v.instance.playerExploPrice?this.exploButtion.setEnable():this.exploButtion.setDisable()},t}(p)).prototype,"avatar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(X.prototype,"playerName",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(X.prototype,"goldLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(X.prototype,"moneyLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(X.prototype,"playerDead",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(X.prototype,"playerAttack",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(X.prototype,"moneyChange",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(X.prototype,"meteorDrop",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(X.prototype,"notificationLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(X.prototype,"cameraShaking",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(X.prototype,"swithRoleButton",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(X.prototype,"exploButtion",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(X.prototype,"buttonMoney",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(X.prototype,"buttonGold",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(X.prototype,"bubbleMoney",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(X.prototype,"bubbleGold",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=X))||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalDefine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Profile.ts","./MaxApiUtils2.ts"],(function(e){"use strict";var n,t,i,r,o,a,c;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator},function(e){i=e.cclegacy,r=e.log},function(e){o=e.Profile},function(e){a=e.maxApiUtils,c=e.MaxApiName}],execute:function(){var u;e("DevicePerformance",void 0),i._RF.push({},"bd878PhQoVBopiCOx304mmp","GlobalDefine",void 0),function(e){e.LowEnd="low-end",e.MideEnd="mid-end",e.HighEnd="high-end"}(u||(u=e("DevicePerformance",{})));var f=e("globalDefine",new(function(){function e(){this.deviceInfo=void 0,this.feature=void 0,this.profile=new o,this.init()}var i=e.prototype;return i.init=function(){var e=t(regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.request(c.getDeviceInfo).then((function(e){n.deviceInfo=e,r("[globalDefine] getDeviceInfo: ",e)})),this.getGameParams().then((function(e){n.feature=e,r("[globalDefine] getGameParams: ",e)})),e.next=4,this.profile.init();case 4:r("[globalDefine] Init done.....");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getGameParams=function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var t=localStorage.getItem("feature"),i=JSON.parse(t);i&&i.feature?e(i.feature):e(null)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n(e,[{key:"osPlatform",get:function(){return"apple"==this.deviceInfo.deviceManufacturer.toLocaleLowerCase()?"ios":"android"}},{key:"isIOS",get:function(){return"ios"==this.osPlatform}},{key:"env",get:function(){return this.deviceInfo.isDev?"dev":"prod"}},{key:"isLowEndDevice",get:function(){return!!this.deviceInfo&&this.deviceInfo.devicePerformance==u.LowEnd}},{key:"isHighEndDevice",get:function(){return!!this.deviceInfo&&this.deviceInfo.devicePerformance==u.HighEnd}}]),e}()));e("profile",f.profile);i._RF.pop()}}}));

System.register("chunks:///_virtual/ImageCache.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,u;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,r=e.SpriteFrame,a=e.sys,i=e.ImageAsset,u=e.Texture2D}],execute:function(){n._RF.push({},"36400DoKO9IurGOTW+nfKD5","ImageCache",void 0);e("default",new(function(){var e=n.prototype;function n(){this.canvas=void 0,this.context=void 0,this.images=new Map,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return e.get=function(e){return this.images.get(e)},e.request=function(){var e=t(regeneratorRuntime.mark((function e(t,n){var i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=0),t&&""!=t){e.next=3;break}return e.abrupt("return",null);case 3:if(t=t.replace("img.mservice.io","atc-edge03.mservice.com.vn"),i=this.images.get(t)){e.next=17;break}return u=null,s=t,a.isNative,e.next=11,this.getRemoteTextureImage(t);case 11:if(u=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:(i=new r).texture=u,this.images.set(s,i);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.requestAvatar=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.request(n,256));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.clear=function(){this.images.clear()},e.getRemoteTextureImage=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var t=new i(r),n=new u;n.image=t,e(n)},r.onerror=function(){e(null)},r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.resizeImage=function(e,t){var n=this;return void 0===t&&(t=128),new Promise((function(r,a){var i=new Image;i.crossOrigin="anonymous",i.onload=function(){var e=i.height/i.width;n.canvas.width=t*e,n.canvas.height=t,n.context.drawImage(i,0,0,n.canvas.width,n.canvas.height),r(n.canvas.toDataURL())},i.onerror=function(){r(e)},i.src=e}))},n}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/Input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts"],(function(t){"use strict";var n,o,e,s,i,c,a,h;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,s=t._decorator,i=t.Vec2,c=t.Node,a=t.Component},function(t){h=t.TouchState}],execute:function(){var u,r;e._RF.push({},"0e413Vz005IYIfIPMIFSklJ","Input",void 0);var p=s.ccclass;s.property,t("Input",p("Input")(((r=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this).state=h.None,n.isTouchDown=!1,n.downPosition=new i,n.position=new i,n.delta=new i,n}n(e,t);var s=e.prototype;return s.onLoad=function(){e.instance=this,this.node.on(c.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},s.lateUpdate=function(){this.state==h.Down?this.state=h.Press:this.state==h.Up&&(this.state=h.None,this.delta.set(0,0))},s.onTouchBegan=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.downPosition=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Down,this.StopPropagation(t)},s.onTouchEnded=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchCancelled=function(t){this.isTouchDown=!1,this.state=h.Up,this.StopPropagation(t)},s.onTouchMove=function(t){var n=t.getTouches();this.position=n[0].getUILocation(),i.subtract(this.delta,this.position,this.downPosition),this.isTouchDown=!0,this.state=h.Press,this.StopPropagation(t)},s.reset=function(){this.state=h.None,this.delta.set(0,0)},s.StopPropagation=function(t){},e.Reset=function(){e.instance.reset()},o(e,null,[{key:"Instance",get:function(){return e.instance}},{key:"State",get:function(){return e.instance.state}},{key:"IsTouchDown",get:function(){return e.instance.state==h.Down}},{key:"IsTouchUp",get:function(){return e.instance.state==h.Up}},{key:"IsTouchMove",get:function(){return e.instance.state==h.Press}},{key:"IsTouchNone",get:function(){return e.instance.state==h.None}}]),e}(a)).instance=null,u=r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(t){"use strict";var e,i,n,o,r,s,a,c,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Sprite,c=t.tween,l=t.Vec3,u=t.Component},function(t){p=t.GamePlay}],execute:function(){var d,m,h,y,f;r._RF.push({},"30205GJNRRJY64cYiDjQ65b","Item",void 0);var g=s.ccclass,v=s.property;t("Item",(d=g("Item"),m=v(a),d((f=e((y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"model",f,o(e)),e.destroying=!1,e}i(e,t);var r=e.prototype;return r.setInfo=function(t,e){this.model.spriteFrame=t,this.destroying=!1},r.destroyItem=function(t){var e=this;if(void 0===t&&(t=!1),1!=this.destroying){this.destroying=!0;var i=null;t?(this.node.active&&(i=c(this.node).parallel(c(this.node).by(.5,{position:new l(0,150)}),c(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){i&&i.stop(),p.instance.itemManager.itemPool.put(e.node)}),500)):p.instance.itemManager.itemPool.put(this.node)}},e}(u)).prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GamePlay.ts","./Item.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,c,m,l,u,f,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Prefab,c=e.SpriteFrame,m=e.NodePool,l=e.instantiate,u=e.Component},function(e){f=e.GameDefine},function(e){p=e.GamePlay},function(e){d=e.Item}],execute:function(){var g,P,h,I,b,v,y;a._RF.push({},"2b1b9aACPxPRLBtUFqGKDcS","ItemManager",void 0);var F=o.ccclass,S=o.property;e("ItemManager",(g=F("ItemManager"),P=S(s),h=S(c),g((v=t((b=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"itemPrefab",v,r(t)),n(t,"itemSpriteFrames",y,r(t)),t.itemPool=new m,t}i(t,e);var a=t.prototype;return a.onLoad=function(){for(var e=0;e<10;e++)this.itemPool.put(l(this.itemPrefab))},a.initItem=function(e,t,i,n){void 0===i&&(i=null);var r=this.getItem();r.active=!1,r.setPosition(i),r.name=e.id.toString(),t.addItem(r),r.getComponent(d).setInfo(this.getItemSpriteFrame(e.value),e.id),r.active=!0},a.netUpdate=function(e){e.dungeon.goldPieces.forEach((function(e){p.instance.mapManager.findAndAddItem(e)})),p.instance.mapManager.findAndRemoveItems(e.dungeon.goldPieces)},a.getItemSpriteFrame=function(e){return e<=f.instance.goldPriceValueMin+f.instance.goldPricePartValue?this.itemSpriteFrames[0]:f.instance.goldPriceValueMin+2*f.instance.goldPricePartValue?this.itemSpriteFrames[1]:this.itemSpriteFrames[2]},a.getItem=function(){return this.itemPool.size()>0?this.itemPool.get():l(this.itemPrefab)},t}(u)).prototype,"itemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(b.prototype,"itemSpriteFrames",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=b))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,c,l,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Sprite,c=e.tween,l=e.Vec3,p=e.Component},function(e){u=e.GamePlay}],execute:function(){var d,m,f,h,y;r._RF.push({},"c5c424fnnFOCKoLo1WxNSRB","ItemSpecial",void 0);var g=a.ccclass,v=a.property;e("ItemSpecial",(d=g("ItemSpecial"),m=v(s),d((y=t((h=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"model",y,o(t)),t.destroying=!1,t}i(t,e);var r=t.prototype;return r.setInfo=function(e){this.model.spriteFrame=e,this.destroying=!1},r.destroyItem=function(e){var t=this;if(void 0===e&&(e=!1),1!=this.destroying){this.destroying=!0;var i=null;e?(this.node.active&&(i=c(this.node).parallel(c(this.node).by(.5,{position:new l(0,150)}),c(this.node).to(.5,{scale:l.ONE},{easing:"elasticOut"})).start()),setTimeout((function(){i&&i.stop(),u.instance.itemSpecialManager.itemSpecialPool.put(t.node)}),500)):u.instance.itemSpecialManager.itemSpecialPool.put(this.node)}},t}(p)).prototype,"model",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSpecialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts","./ItemSpecial.ts"],(function(e){"use strict";var t,i,a,n,r,o,c,p,l,m,s,u,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Prefab,p=e.SpriteFrame,l=e.NodePool,m=e.instantiate,s=e.Component},function(e){u=e.GamePlay},function(e){S=e.ItemSpecial}],execute:function(){var f,g,d,h,I,P,N;r._RF.push({},"eefe5Ij3/BJ4pgCUN07oo82","ItemSpecialManager",void 0);var _=o.ccclass,v=o.property;e("ItemSpecialManager",(f=_("ItemSpecialManager"),g=v(c),d=v(p),f((P=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"itemSpecialPrefab",P,n(t)),a(t,"itemSpecialSpriteFrames",N,n(t)),t.itemSpecialPool=new l,t}i(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<20;e++)this.itemSpecialPool.put(m(this.itemSpecialPrefab))},r.initItemSpecial=function(e,t,i,a){var n=this.getItemSpecial();n.active=!1,n.setPosition(i),n.name=e.id.toString(),t.addItemSpecial(n),n.getComponent(S).setInfo(this.getItemSpecialSpriteFrame(e.type)),n.active=!0},r.netUpdate=function(e){e.dungeon.items.forEach((function(e){u.instance.mapManager.findAndAndItemSpecial(e)})),u.instance.mapManager.findAndRemoveItemSpecials(e.dungeon.items)},r.getItemSpecialSpriteFrame=function(e){return e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST?this.itemSpecialSpriteFrames[0]:e==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_HEAL_POTION?this.itemSpecialSpriteFrames[1]:void 0},r.getItemSpecial=function(){return this.itemSpecialPool.size()>0?this.itemSpecialPool.get():m(this.itemSpecialPrefab)},t}(s)).prototype,"itemSpecialPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(I.prototype,"itemSpecialSpriteFrames",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=I))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Input.ts"],(function(t){"use strict";var e,i,n,s,o,r,c,a,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.Node,a=t.Vec3,p=t.UITransform,l=t.Component},function(t){u=t.Input}],execute:function(){var h,d,m,f,y;o._RF.push({},"5c332ws8gtKmLamvSRyIAJr","Joystick",void 0);var v=r.ccclass,I=r.property;t("Joystick",(h=v("Joystick"),d=I(c),h((y=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"middle",y,s(e)),e.radius=200,e.direction=new a,e.tempV3=new a,e}i(e,t);var o=e.prototype;return o.start=function(){this.radius=this.getComponent(p).contentSize.width/2},o.update=function(){if(u.IsTouchUp)this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset();else if(u.IsTouchMove){var t=Math.min(u.Instance.delta.length(),this.radius);this.tempV3.set(u.Instance.delta.x,u.Instance.delta.y,0),this.tempV3.normalize(),this.tempV3.multiplyScalar(t),this.middle.position=this.tempV3}},o.reset=function(){this.tempV3.set(a.ZERO),this.middle.position=this.tempV3,u.Reset()},e}(l)).prototype,"middle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./TextDefine.ts","./MaxApiUtils.ts","./PopupConfig.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var n,i,e,o,r,a,c,s,l,u,p,d,f,h,g,m,b,y,w,L;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,s=t.UIOpacity,l=t.Button,u=t.Vec3,p=t.tween,d=t.UITransform},function(t){f=t.GhostStatusPopup,h=t.GameDefine,g=t.ScreenName},function(t){m=t.TextDefine},function(t){b=t.default},function(t){y=t.PopupConfig},function(t){w=t.Screen},function(t){L=t.ScreenMgr}],execute:function(){var z,v,S,D,T,E,C,x,A,P,O,j,k,B,F,M,G,N,R;r._RF.push({},"c940for3pBF+YmHZQPdRudK","Loading",void 0);var _=a.ccclass,I=a.property;t("Loading",(z=_("Loading"),v=I(c),S=I(c),D=I(c),T=I(c),E=I(c),C=I(c),x=I(s),A=I(l),z((j=n((O=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(n=t.call.apply(t,[this].concat(r))||this).timeLoading=0,n.isDone=!1,n.isLoadingFalse=!1,n.maxTimeLoading=120,e(n,"zoom",j,o(n)),e(n,"bgEffect",k,o(n)),e(n,"objectContainer",B,o(n)),e(n,"door",F,o(n)),e(n,"ghosts",M,o(n)),e(n,"lights",G,o(n)),e(n,"whiteScreen",N,o(n)),e(n,"backButton",R,o(n)),n}i(n,t);var r=n.prototype;return r.hide=function(){this.isDone=!0,this.onDone()},r.start=function(){this.init(),this.zoomToDoor()},r.update=function(t){if(!this.isDone&&!this.isLoadingFalse&&(this.timeLoading+=t,this.timeLoading>=this.maxTimeLoading)){this.isLoadingFalse=!0;var n=m.textConfig.LostConnectionPopupText,i=y.Show(n,f.Disconnect);null==i||i.SetTypeOk((function(){b.closeGame()}))}},r.onDone=function(){this.openDoor()},r.init=function(){this.zoom.setPosition(u.ZERO),this.zoom.setScale(u.ONE),this.backButton.node.on("click",(function(){b.closeGame()}),this)},r.zoomToDoor=function(){var t=new u(2,2,2),n=new u(-50,800);p(this.zoom).delay(h.timeAppearLoading).to(h.timeEndLoading,{scale:t,position:n}).start(),p(this.bgEffect).delay(h.timeAppearLoading).to(h.timeEndLoading,{scale:new u(.5,.5),position:new u(25,-400)}).start(),this.moveObjectsToSide()},r.moveObjectsToSide=function(){var t=[];this.addChildrenToArray(this.objectContainer,t),t.sort((function(t,n){return n.position.y-t.position.y}));var n=this.node.getComponent(d).contentSize;t.forEach((function(t,i){var e=t.getComponent(d),o=n.width/2+50;t.position.x<0?(o*=-1,e.setAnchorPoint(1,.5)):e.setAnchorPoint(0,.5);var r=new u(o,t.position.y);p(t).delay(h.timeAppearLoading).to(.2*(i+1),{position:r}).start()}))},r.addChildrenToArray=function(t,n){var i=this;0==t.children.length?n.push(t):t.children.forEach((function(t){i.addChildrenToArray(t,n)}))},r.tweenObjectToSize=function(t,n){var i=this,e=t.getComponent(d).contentSize.width;t.position.x<0&&(e*=-1);var o=new u(t.position.x+e,t.position.y);0==t.children.length?p(t).to(h.timeAppearLoading*(n+1),{position:o}).start():t.children.forEach((function(t,n){i.tweenObjectToSize(t,n)}))},r.openDoor=function(){var n=this,i=this.door.children[0],e=this.door.children[1];p(i).to(h.timeEndLoading,{scale:new u(0,1,1)}).start(),p(e).to(h.timeEndLoading,{scale:new u(0,1,1)}).start(),this.lights.children.forEach((function(t){p(t).to(h.timeEndLoading,{scale:u.ONE}).start()})),p(this.whiteScreen).to(h.timeEndLoading,{opacity:255}).call((function(){L.instance.show(g.Menu),t.prototype.hide.call(n)})).start()},n}(w)).prototype,"zoom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(O.prototype,"bgEffect",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(O.prototype,"objectContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(O.prototype,"door",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(O.prototype,"ghosts",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(O.prototype,"lights",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(O.prototype,"whiteScreen",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(O.prototype,"backButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=O))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/LostHpEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameMgr.ts"],(function(t){"use strict";var e,i,n,o,c,a,r,s,f,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,r=t.UIOpacity,s=t.tween,f=t.Component},function(t){p=t.default},function(t){l=t.GamePlayEventName},function(t){u=t.GameMgr}],execute:function(){var y,h,E,v,d;c._RF.push({},"14da0iCYJRPBZhIbpbSJ0xX","LostHpEffect",void 0);var m=a.ccclass,w=a.property;t("LostHpEffect",(y=m("LostHpEffect"),h=w(r),y((d=e((v=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,n(e,"opacity",d,o(e)),e.tweenEffect=null,e}i(e,t);var c=e.prototype;return c.start=function(){this.node.active=!1,u.instance.isOptimizeForPerformance||p.on(l.LostHp,this.startEffect,this)},c.startEffect=function(){var t=this;this.node.active=!0,this.tweenEffect&&(this.tweenEffect.stop(),this.tweenEffect=null),this.tweenEffect=s(this.opacity).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).to(.35,{opacity:255}).to(.35,{opacity:0}).call((function(){t.tweenEffect=null,t.node.active=!1})).start()},e}(f)).prototype,"opacity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=v))||E));c._RF.pop()}}}));

System.register("chunks:///_virtual/MagmaCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,l,o,s,u,c,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.SpriteFrame,s=e.Animation,u=e.Vec3,c=e.Sprite,p=e.tween,m=e.Component}],execute:function(){var h,f,g,d,y,w,C;a._RF.push({},"149b21G4XtJAopzNOabkBf1","MagmaCell",void 0);var M=l.ccclass,b=l.property;e("MagmaCell",(h=M("MagmaCell"),f=b(o),g=b(s),h((w=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"defaultSpriteFrame",w,n(t)),i(t,"animController",C,n(t)),t.tweenMagma=null,t.isUsed=!1,t}r(t,e);var a=t.prototype;return a.reset=function(){this.isUsed&&(this.isUsed=!1,this.node.scale=new u(1,1,1),this.animController.stop(),this.tweenMagma&&(this.tweenMagma.stop(),this.tweenMagma=null),this.getComponent(c).spriteFrame=this.defaultSpriteFrame)},a.startMagma=function(e){var t=this;this.isUsed=!0,this.node.scale=new u(.5,.5,0),this.animController.play(),this.tweenMagma=p(this.node).delay(e).call((function(){t.animController.play()})).union().repeatForever().start()},t}(m)).prototype,"defaultSpriteFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"animController",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./MaxApiUtils2.ts","./AudioMgr.ts","./ConvertPhoneNumber.ts","./GameEvent.ts","./GlobalDefine.ts","./ImageCache.ts","./MyButton.ts","./MySprite.ts","./ApiMock.ts","./GameApi.ts","./NetworkBrigde.ts","./NetworkDefine.ts","./NetworkMgr.ts","./PerformanceTracking.ts","./TimeMgr.ts","./Random.ts","./RemoteImage.ts","./Rotation.ts","./SpineRemote.ts","./TrimBase64.ts","./Utils.ts","./Meteor.ts","./Shaking.ts","./SpawnMeteor.ts","./CameraFollow.ts","./Define.ts","./ExploButton.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts","./Item.ts","./ItemSpecial.ts","./Joystick.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObjectInterface.ts","./ObstacleCell.ts","./Player.ts","./PlayerDead.ts","./Profile.ts","./SwitchRoleButton.ts","./TextDefine.ts","./Trap.ts","./LostHpEffect.ts","./ShadowEffect.ts","./ItemManager.ts","./ItemSpecialManager.ts","./MapManager.ts","./MeteorManager.ts","./PlayerManager.ts","./TrapManager.ts","./MeteorDrop.ts","./MoneyChange.ts","./PlayerAttack.ts","./GameUIManager.ts","./MaxApiUtils.ts","./a-protobuf.ts","./patchproto.mjs_cjs=&original=.js","./phoenix.mjs_cjs=&original=.js","./ExchangeTicket.ts","./Popup.ts","./PopupConfig.ts","./PopupMgr.ts","./ProcessContent.ts","./FakeCharacter.ts","./MainPlayer.ts","./SwipePart.ts","./Top3Ranking.ts","./Loading.ts","./Menu.ts","./RankCell.ts","./Ranking.ts","./Result.ts","./Screen.ts","./ScreenMgr.ts","./Standby.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameEvent.ts","./Menu.ts"],(function(t){"use strict";var i,e,n,o,a,l,s,r,u,c,h,d,f,m,v,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,s=t.Node,r=t.sp,u=t.UIOpacity,c=t.tween,h=t.Vec3,d=t.Component},function(t){f=t.EventName,m=t.SoundName},function(t){v=t.default},function(t){p=t.State}],execute:function(){var y,g,w,M,D,P,A,C,b;a._RF.push({},"72a42P14qFJi5I6jgpBusDg","MainPlayer",void 0);var I=l.ccclass,S=l.property;t("MainPlayer",(y=I("MainPlayer"),g=S(s),w=S(r.Skeleton),M=S(u),y((A=i((P=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return i=t.call.apply(t,[this].concat(a))||this,n(i,"model",A,o(i)),n(i,"animation",C,o(i)),n(i,"uiOpacity",b,o(i)),i.tweenMove=null,i.timeChangeDirectionModel=.2,i.tweenChangeDirectionModel1=null,i.tweenChangeDirectionModel2=null,i.direction=1,i.state=p.Farmer,i.tweenDissovle=null,i.mat=void 0,i.originPosition=void 0,i}e(i,t);var a=i.prototype;return a.start=function(){var t=this;this.mat=this.animation.customMaterial,setTimeout((function(){t.originPosition=t.node.position.clone()}),500)},a.changeDriectionModel=function(){var t=this,i=this.direction;if(i>0){if(1==this.model.scale.x)return;if(this.tweenChangeDirectionModel1)return;this.tweenChangeDirectionModel1=c(this.model).to(this.timeChangeDirectionModel,{scale:new h(1,1,0)}).call((function(){t.tweenChangeDirectionModel1=null})).start()}else if(i<0){if(-1==this.model.scale.x)return;if(this.tweenChangeDirectionModel2)return;this.tweenChangeDirectionModel2=c(this.model).to(this.timeChangeDirectionModel,{scale:new h(-1,1,0)}).call((function(){t.tweenChangeDirectionModel2=null})).start()}},a.getAnimationName=function(t,i){var e="";return i&&(e="_up"),(this.state==p.Hunter?"enemy_":"character_")+t+e},a.playIdleAnimaton=function(t){void 0===t&&(t=!1),this.playAnimation("idle",t)},a.playRunAnimation=function(t){void 0===t&&(t=!1),this.playAnimation("run",t)},a.playAnimation=function(t,i){t=this.getAnimationName(t,i),this.animation.animation!=t&&this.animation.setAnimation(0,t,!0)},a.setPositionMainPlayer=function(t){var i=this;this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tweenMove=c(this.node).to(.1,{position:t}).call((function(){i.tweenMove=null})).start()},a.move=function(t){this.direction=t,this.playRunAnimation(),this.changeDriectionModel()},a.endMove=function(){this.playIdleAnimaton()},a.setState=function(t,i){void 0===i&&(i=null),this.playIdleAnimaton(),t!=p.Ranking&&this.state!=t?(this.state=t,this.changeStateEffect(i)):i&&i()},a.changeStateEffect=function(t){var i=this;void 0===t&&(t=null),this.dissovle((function(){i.playIdleAnimaton(),i.undissovle(t)}))},a.dissovle=function(t){var i=this;void 0===t&&(t=null),this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=c({value:0}).to(.25,{value:1},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,t&&t()})).start()},a.undissovle=function(t){var i=this;void 0===t&&(t=null),this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=c({value:1}).to(.25,{value:0},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,t&&t()})).start()},a.goToGate=function(t,i){void 0===i&&(i=null),this.playAnimation("run",!0);c(this.node).to(1,{scale:new h(.7,.7),worldPosition:t}).call((function(){i&&i()})).start(),setTimeout((function(){v.emit(f.PlaySfx,m.MeteorFalling)}),500),c(this.uiOpacity).delay(.5).to(.5,{opacity:0},{easing:"linear"}).start()},a.reset=function(){this.playIdleAnimaton(),this.uiOpacity.opacity=255,this.node.scale=h.ONE,this.originPosition&&(this.node.position=this.originPosition.clone())},i}(d)).prototype,"model",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(P.prototype,"animation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(P.prototype,"uiOpacity",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=P))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./GlobalDefine.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./Item.ts","./ItemSpecial.ts","./Player.ts","./Trap.ts"],(function(e){"use strict";var t,n,i,o,a,r,l,s,c,m,u,p,d,f,h,C,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.Vec3,c=e.Component},function(e){m=e.default},function(e){u=e.profile},function(e){p=e.GamePlayEventName},function(e){d=e.GameDefine},function(e){f=e.GamePlay},function(e){h=e.Item},function(e){C=e.ItemSpecial},function(e){y=e.Player},function(e){g=e.Trap}],execute:function(){var P,v,E,M,T,b,A,I,_,U,F,S,R,N,z,B,w,G,L;a._RF.push({},"da5a0M5cCNC6Jf2+fAilgOQ","Map",void 0);var Y=r.ccclass,K=r.property;e("Map",(P=Y("Map"),v=K(l),E=K(l),M=K(l),T=K(l),b=K(l),A=K(l),I=K(l),_=K(l),P((S=t((F=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"cellContainer",S,o(t)),i(t,"obstacleContainer",R,o(t)),i(t,"magmaContainer",N,o(t)),i(t,"itemContainer",z,o(t)),i(t,"playerContainer",B,o(t)),i(t,"meteorContainer",w,o(t)),i(t,"itemSpecialContainer",G,o(t)),i(t,"trapContainer",L,o(t)),t}n(t,e);var a=t.prototype;return a.setPosition=function(e){this.node.position=e,this.cellContainer.position=e,this.itemContainer.position=e,this.playerContainer.position=e,this.obstacleContainer.position=e,this.meteorContainer.position=e,this.itemSpecialContainer.position=e,this.trapContainer.position=e,this.magmaContainer.position=e},a.netUpdate=function(e){var t=this;e.players.forEach((function(e){var n=t.findPlayer(e.uid);if(n){var i=n.getComponent(y);if(e.uid==u.Uid)m.emit(p.UpdateGoldBalance,e.gold),m.emit(p.UpdateMoneyBalance,e.money),i.setPositionFromServer(e.x*d.instance.cellUnit,e.y*d.instance.cellUnit);else{var o=new s(e.x*d.instance.cellUnit,e.y*d.instance.cellUnit,0),a=f.instance.mapManager.convertPositionToPlayerViewPosition(o);a?i.setPositionFromServer(a.x,a.y):(i.isJoinMap=!1,i.node.active=!1)}i.setHp(e.healPoint),i.setGoldArea(e.gold);var r=e.effects,l=!1,c=!0;r.length>0&&r.forEach((function(t){t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FREEZE&&(e.uid==u.Uid&&m.emit(p.UpdatePlayerFREEZE,t.end),l=!0,i.setFrezze(!0)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_STOP_ATTACK&&(e.uid==u.Uid&&m.emit(p.UpdatePlayerStopAttack,t.end),c=!1,i.setAttack(t.end)),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_FARMER_MONEY_CHANGE&&e.uid==u.Uid&&m.emit(p.UpdateMoneyChange,t.end),t.effect==phoenix.krun.KRUN_PLAYER_EFFECT.KRUN_PLAYER_EFFECT_HUNTER_MONEY_CHANGE&&e.uid==u.Uid&&m.emit(p.UpdateMoneyChange,t.end)})),l||i.setFrezze(!1),i.setCanAttack(c)}}))},a.addCell=function(e){e.setParent(this.cellContainer)},a.removeAllCells=function(){this.putChildToPool(this.cellContainer.children,f.instance.mapManager.mapCellPool)},a.addMagma=function(e){e.setParent(this.magmaContainer)},a.removeAllMagmas=function(){this.putChildToPool(this.magmaContainer.children,f.instance.mapManager.magmaPool)},a.addObstacle=function(e){e.setParent(this.obstacleContainer)},a.removeAllObstacles=function(){this.putChildToPool(this.obstacleContainer.children,f.instance.mapManager.obstaclePool)},a.addPlayer=function(e){this.findPlayer(e.name)||e.setParent(this.playerContainer)},a.findPlayer=function(e){return this.playerContainer.getChildByName(e)},a.getPlayers=function(){return this.playerContainer.children.filter((function(e){return e.name!=u.Uid}))},a.removePlayer=function(e){var t=this.findPlayer(e);t&&t.getComponent(y).dead((function(){f.instance.playerManager.playerPool.put(t)}))},a.removeAllPlayers=function(){this.putChildToPool(this.playerContainer.children,f.instance.playerManager.playerPool)},a.addItem=function(e){this.findItem(e.name)||this.itemContainer.addChild(e)},a.findItem=function(e){return this.itemContainer.getChildByName(e)},a.removeItem=function(e,t){void 0===t&&(t=!1),e.getComponent(h).destroyItem(t)},a.removeItemById=function(e,t){void 0===t&&(t=!1);var n=this.findItem(e);n&&n.getComponent(h).destroyItem(t)},a.removeAllItems=function(){this.putChildToPool(this.itemContainer.children,f.instance.itemManager.itemPool)},a.addMeteor=function(e){this.findMeteor(e.name)||this.meteorContainer.addChild(e)},a.findMeteor=function(e){return this.meteorContainer.getChildByName(e)},a.getMeteors=function(){return this.meteorContainer.children},a.removeMeteor=function(e){f.instance.meteorManager.meteorPool.put(e)},a.removeMeteorById=function(e){var t=this.findMeteor(e);t&&f.instance.meteorManager.meteorPool.put(t)},a.removeAllMeteors=function(){this.putChildToPool(this.meteorContainer.children,f.instance.meteorManager.meteorPool)},a.addItemSpecial=function(e){this.findSpecialItem(e.name)||this.itemSpecialContainer.addChild(e)},a.getSpecialItems=function(){return this.itemSpecialContainer.children},a.findSpecialItem=function(e){return this.itemSpecialContainer.getChildByName(e)},a.removeSpecialItem=function(e,t){void 0===t&&(t=!1),e.getComponent(C).destroyItem(t)},a.removeSpecialItemById=function(e,t){void 0===t&&(t=!1);var n=this.findSpecialItem(e);n&&n.getComponent(C).destroyItem(t)},a.removeAllSpecialItems=function(){this.putChildToPool(this.itemSpecialContainer.children,f.instance.itemSpecialManager.itemSpecialPool)},a.addTrap=function(e){this.findTrap(e.name)||this.trapContainer.addChild(e)},a.getTraps=function(){return this.trapContainer.children},a.findTrap=function(e){return this.trapContainer.getChildByName(e)},a.removeTrap=function(e,t){void 0===t&&(t=!1),e.getComponent(g).destroyTrap(t)},a.removeTrapById=function(e,t){void 0===t&&(t=!1);var n=this.findTrap(e);n&&n.getComponent(g).destroyTrap(t)},a.removeAllTraps=function(){this.putChildToPool(this.trapContainer.children,f.instance.trapManager.trapPool)},a.reset=function(){this.removeAllPlayers(),this.removeAllItems(),this.removeAllCells(),this.removeAllMagmas(),this.removeAllObstacles(),this.removeAllMeteors(),this.removeAllSpecialItems(),this.removeAllTraps()},a.putChildToPool=function(e,t){if(0!=e.length)for(;e.length>0;)t.put(e[0])},t}(c)).prototype,"cellContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"obstacleContainer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(F.prototype,"magmaContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(F.prototype,"itemContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"playerContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(F.prototype,"meteorContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(F.prototype,"itemSpecialContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"trapContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=F))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,s,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Sprite,a=e.Component}],execute:function(){var c,p,u,f,h;o._RF.push({},"4e102X4SVVAMZn3gGGGj4cg","MapCell",void 0);var y=s.ccclass,g=s.property;e("MapCell",(c=y("MapCell"),p=g(l),c((h=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"sprite",h,n(t)),t}r(t,e);var o=t.prototype;return o.setSprite=function(e){this.sprite.spriteFrame=e},o.setPosition=function(e,t,r,i){this.node.setPosition(e)},t}(a)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./Random.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts","./MagmaCell.ts","./Map.ts","./MapCell.ts","./ObjectInterface.ts","./ObstacleCell.ts","./Player.ts"],(function(t){"use strict";var i,e,a,n,o,l,s,r,c,h,p,m,v,u,f,d,M,g,y,x,T,P,C,D,b,I,w,S,O,U,L,R,X,H;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,s=t._decorator,r=t.Prefab,c=t.SpriteFrame,h=t.NodePool,p=t.instantiate,m=t.Vec3,v=t.Vec2,u=t.Component},function(t){f=t.profile},function(t){d=t.Random},function(t){M=t.TileType},function(t){g=t.GameDefine},function(t){y=t.GamePlay},function(t){x=t.MagmaCell},function(t){T=t.Map},function(t){P=t.MapCell},function(t){C=t.obstacle,D=t.itemObject,b=t.itemTile,I=t.itemSpecialObject,w=t.itemSpecialTile,S=t.trapObject,O=t.trapTile,U=t.playerObject,L=t.playerTile,R=t.ObjectType},function(t){X=t.ObstacleCell},function(t){H=t.Player}],execute:function(){var Y,W,j,E,F,V,k,z,B,A,G,_,J,K,N;l._RF.push({},"61d00j1azxKTbdcfzwpXVLk","MapManager",void 0);var Z=s.ccclass,q=s.property;t("MapManager",(Y=Z("MapManager"),W=q(T),j=q(r),E=q(r),F=q(r),V=q(c),k=q(c),Y((A=i((B=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,a(i,"map",A,n(i)),a(i,"mapCell",G,n(i)),a(i,"magmaCell",_,n(i)),a(i,"obstacleCell",J,n(i)),a(i,"tileSpriteFrames",K,n(i)),a(i,"obstacleSpriteFrames",N,n(i)),i.debug=!1,i.playerPosition=null,i.mapData=void 0,i.magmaMapData=void 0,i.obstacleMapData=void 0,i.playerMapData=void 0,i.itemMapData=void 0,i.itemSpecialMapData=[],i.trapMapData=[],i.random=void 0,i.mapCellPool=new h,i.obstaclePool=new h,i.magmaPool=new h,i.xMin=0,i.yMin=0,i.xMax=0,i.yMax=0,i.diffTileX=0,i.diffTileY=0,i}e(i,t);var l=i.prototype;return l.onLoad=function(){for(var t=g.instance.boundCameraTile.x*g.instance.boundCameraTile.y,i=0;i<t;i++)this.mapCellPool.put(p(this.mapCell));for(var e=g.instance.boundCameraTile.x*g.instance.boundCameraTile.y*g.obstacleRate,a=0;a<e;a++)this.obstaclePool.put(p(this.obstacleCell));for(var n=g.instance.boundCameraTile.x*g.instance.boundCameraTile.y*g.magmaRate,o=0;o<n;o++)this.magmaPool.put(p(this.magmaCell))},l.getMapcell=function(){return this.mapCellPool.size()>0?this.mapCellPool.get():p(this.mapCell)},l.putMapCell=function(t){this.mapCellPool.put(t)},l.getObstacle=function(){return this.obstaclePool.size()>0?this.obstaclePool.get():p(this.obstacleCell)},l.putObstacle=function(t){this.obstaclePool.put(t)},l.getMagma=function(){if(this.magmaPool.size()>0){var t=this.magmaPool.get();return t.getComponent(x).reset(),t}return p(this.magmaCell)},l.putMagma=function(t){this.magmaPool.put(t)},l.getMapData=function(t){var i=t.dungeon;return this.random=new d,this.mapData=this.random.getRandomMap(i.seed,g.instance.cellWidth,g.instance.cellHeight),this.magmaMapData=this.getMagmaMapData(),this.obstacleMapData=this.getObstacleMapData(),this.genBorderMap(),this.genMultiLandMapData(),this.fakeObjectsMapData(),this.getItemMapData(i.goldPieces),this.getItemSpecialMapData(i.items),this.getTrapMapData(i.traps),this.getPlayerMapData(t.players)},l.initGameMaps=function(){var t=Date.now();this.initMap(this.map,m.ZERO),console.log("time init map: "+(Date.now()-t))},l.getTile=function(t,i){var e=this.formartGetTile(t,i),a=e[0],n=e[1];return a<0||a>=g.instance.cellHeight||n<0||n>=g.instance.cellWidth?-1:this.mapData[a][n]},l.formartGetTile=function(t,i){return-1==t?t=g.instance.cellHeight-1:t==g.instance.cellHeight&&(t=0),-1==i?i=g.instance.cellWidth-1:i==g.instance.cellWidth&&(i=0),[t,i]},l.genBorderMap=function(){for(var t=0;t<g.instance.cellHeight;t++)for(var i=0;i<g.instance.cellWidth;i++)0==this.getTile(t,i)&&1==this.getTile(t,i-1)&&1==this.getTile(t,i+1)?this.mapData[t][i]=M.BothBoder:0==this.getTile(t,i)&&1==this.getTile(t,i-1)?this.mapData[t][i]=M.Left:0==this.getTile(t,i)&&1==this.getTile(t,i+1)&&(this.mapData[t][i]=M.Right)},l.genMultiLandMapData=function(){for(var t=0;t<g.instance.cellHeight;t++)for(var i=0;i<g.instance.cellWidth;i++)if(this.mapData[t][i]==M.Land){var e=this.random.random().rangeFloat(0,1);e<=.65?this.mapData[t][i]=M.Land:e<=.8?this.mapData[t][i]=M.Land2:e<=.95?this.mapData[t][i]=M.Land3:1==this.getTile(t-1,i)&&(this.mapData[t][i]=M.Land4)}},l.getMagmaMapData=function(){for(var t=[],i=0;i<g.instance.cellHeight;i++){for(var e=[],a=0;a<g.instance.cellWidth;a++){var n=0;0==this.getTile(i,a)&&(1==this.getTile(i-1,a)?n=M.Magma:this.random.random().rangeFloat(0,1)<g.magmaRate&&(n=M.Lava)),e.push(n)}t.push(e)}return t},l.getObstacleMapData=function(){for(var t=[],i=0;i<g.instance.cellHeight;i++){for(var e=[],a=0;a<g.instance.cellWidth;a++){var n=null;if(1==this.getTile(i,a)&&this.random.random().rangeFloat(0,1)<=g.obstacleRate){var o=i-this.random.random().rangeFloat(0,.5),l=a+this.random.random().rangeFloat(0,.5),s=this.random.random().rangeInt(0,3),r=this.convertTileToPosition(o,l);n=new C(r.x,r.y,s)}e.push(n)}t.push(e)}return t},l.fakeObjectsMapData=function(){this.itemMapData=[],this.itemSpecialMapData=[],this.trapMapData=[],this.playerMapData=[];for(var t=0;t<g.instance.cellHeight;t++){for(var i=[],e=[],a=[],n=[],o=0;o<g.instance.cellWidth;o++){i.push(null);e.push(null);a.push(null);n.push(null)}this.itemMapData.push(i),this.itemSpecialMapData.push(e),this.trapMapData.push(a),this.playerMapData.push(n)}},l.getItemMapData=function(t){var i=this;t.forEach((function(t){var e=t.x*g.instance.cellUnit,a=t.y*g.instance.cellUnit,n=new D(e,a,t.id,t.value),o=i.convertPositionToTile(new m(e,a,0)),l=i.getItemDataConvert(o.x,o.y);if(null!=l)l.addItem(n);else{var s=new b(e,a);s.addItem(n),i.setItemDataConvert(o.x,o.y,s)}}))},l.getItemSpecialMapData=function(t){var i=this;t.forEach((function(t){var e=t.x*g.instance.cellUnit,a=t.y*g.instance.cellUnit,n=new I(e,a,t.id,t.type),o=i.convertPositionToTile(new m(e,a,0)),l=i.getItemSpecialDataConvert(o.x,o.y);if(null!=l)l.addItem(n);else{var s=new w(e,a);s.addItem(n),i.setItemSpecialDataConvert(o.x,o.y,s)}}))},l.getTrapMapData=function(t){var i=this;t.forEach((function(t){var e=t.x*g.instance.cellUnit,a=t.y*g.instance.cellUnit,n=new S(e,a,t.id,t.type),o=i.convertPositionToTile(new m(e,a,0)),l=i.getTrapDataConvert(o.x,o.y);if(null!=l)l.addTrap(n);else{var s=new O(e,a);s.addTrap(n),i.setTrapDataConvert(o.x,o.y,s)}}))},l.getPlayerMapData=function(t){var i=this,e=!1;return t.forEach((function(t){var a=t.x*g.instance.cellUnit,n=t.y*g.instance.cellUnit,o=new U(a,n,t.uid,t),l=new m(a,n,0),s=i.convertPositionToTile(l),r=i.getPlayerDataConvert(s.x,s.y);if(t.uid==f.Uid&&(i.playerPosition=l.clone(),e=!0),null!=r)r.addPlayer(o);else{var c=new L(a,n);c.addPlayer(o),i.setPlayerDataConvert(s.x,s.y,c)}})),e},l.initMap=function(t,i){var e=this.convertPositionToTile(this.playerPosition);this.xMin=e.x-g.instance.boundCameraTile.x/2,this.yMin=e.y-g.instance.boundCameraTile.y/2,this.xMax=e.x+g.instance.boundCameraTile.x/2+1,this.yMax=e.y+g.instance.boundCameraTile.y/2+1,this.diffTileX=e.x-this.xMin,this.diffTileY=e.y-this.yMin;for(var a=this.xMin;a<this.xMax;a++)for(var n=this.yMin;n<this.yMax;n++){var o=this.getMapDataConvert(a,n);0!=o&&this.initMapCell(o,t,a,n);var l=this.getMagmaDataConvert(a,n);0!=l&&this.initMagma(l,t,a,n);var s=this.getObstacleDataConvert(a,n);null!=s&&this.initObstacle(s,t,a,n);var r=this.getItemDataConvert(a,n);null!=r&&this.initItemTile(r,t,a,n);var c=this.getItemSpecialDataConvert(a,n);null!=c&&this.initItemSpecialTile(c,t,a,n);var h=this.getTrapDataConvert(a,n);null!=h&&this.initTrapTile(h,t,a,n)}for(var p=0;p<g.instance.cellHeight;p++)for(var m=0;m<g.instance.cellWidth;m++){var v=this.getPlayerDataConvert(p,m);null!=v&&this.initPlayerTile(v,t,p,m)}t.setPosition(i)},l.handleMoveMap=function(t){var i=Math.sign(t.x),e=Math.sign(t.y);i>0?this.moveMapRightX():i<0&&this.moveMapLeftX(),e>0?this.moveMapUpY():e<0&&this.moveMapDownY(),this.adjustMap()},l.handleTeleport=function(t,i){var e=Math.sign(t),a=Math.sign(i);if(Math.abs(t)>g.distanceToTeleport){var n=e*g.instance.cellWidth;this.yMin+=n,this.yMax+=n,t=e*g.instance.mapWidth}else t=0;if(Math.abs(i)>g.distanceToTeleport){var o=a*g.instance.cellHeight;this.xMin-=o,this.xMax-=o,i=a*g.instance.mapHeight}else i=0;this.teleportMap(t,i)},l.moveMapRightX=function(){this.yMin++,this.yMax++,this.moveRightX(this.map.cellContainer.children,this.mapCellPool,R.MapCell),this.moveRightX(this.map.obstacleContainer.children,this.obstaclePool,R.Obstacle),this.moveRightX(this.map.magmaContainer.children,this.magmaPool,R.Magma),this.moveRightX(this.map.itemContainer.children,this.itemPool,R.Item),this.moveRightX(this.map.itemSpecialContainer.children,this.itemSpecialPool,R.ItemSpecial),this.moveRightX(this.map.trapContainer.children,this.trapPool,R.Trap)},l.moveMapLeftX=function(){this.yMin--,this.yMax--,this.moveLeftX(this.map.cellContainer.children,this.mapCellPool,R.MapCell),this.moveLeftX(this.map.obstacleContainer.children,this.obstaclePool,R.Obstacle),this.moveLeftX(this.map.magmaContainer.children,this.magmaPool,R.Magma),this.moveLeftX(this.map.itemContainer.children,this.itemPool,R.Item),this.moveLeftX(this.map.itemSpecialContainer.children,this.itemSpecialPool,R.ItemSpecial),this.moveLeftX(this.map.trapContainer.children,this.trapPool,R.Trap)},l.moveMapUpY=function(){this.xMin--,this.xMax--,this.moveUpY(this.map.cellContainer.children,this.mapCellPool,R.MapCell),this.moveUpY(this.map.obstacleContainer.children,this.obstaclePool,R.Obstacle),this.moveUpY(this.map.magmaContainer.children,this.magmaPool,R.Magma),this.moveUpY(this.map.itemContainer.children,this.itemPool,R.Item),this.moveUpY(this.map.itemSpecialContainer.children,this.itemSpecialPool,R.ItemSpecial),this.moveUpY(this.map.trapContainer.children,this.trapPool,R.Trap)},l.moveMapDownY=function(){this.xMin++,this.xMax++,this.moveDownY(this.map.cellContainer.children,this.mapCellPool,R.MapCell),this.moveDownY(this.map.obstacleContainer.children,this.obstaclePool,R.Obstacle),this.moveDownY(this.map.magmaContainer.children,this.magmaPool,R.Magma),this.moveDownY(this.map.itemContainer.children,this.itemPool,R.Item),this.moveDownY(this.map.itemSpecialContainer.children,this.itemSpecialPool,R.ItemSpecial),this.moveDownY(this.map.trapContainer.children,this.trapPool,R.Trap)},l.teleportMap=function(t,i){this.teleport(this.map.cellContainer.children,t,i,R.MapCell),this.teleport(this.map.obstacleContainer.children,t,i,R.Obstacle),this.teleport(this.map.magmaContainer.children,t,i,R.Magma),this.teleport(this.map.itemContainer.children,t,i,R.Item),this.teleport(this.map.itemSpecialContainer.children,t,i,R.ItemSpecial),this.teleport(this.map.trapContainer.children,t,i,R.Trap),this.teleport(this.map.playerContainer.children,t,i,R.Player),this.teleportMeteor(t,i)},l.moveRightX=function(t,i,e){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).y==this.yMin-1&&(i.put(t[a]),a--)}for(var n=this.xMin;n<this.xMax;n++)this.initObject(n,this.yMax-1,e)},l.moveLeftX=function(t,i,e){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).y==this.yMax&&(i.put(t[a]),a--)}for(var n=this.xMin;n<this.xMax;n++)this.initObject(n,this.yMin,e)},l.moveUpY=function(t,i,e){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).x==this.xMax&&(i.put(t[a]),a--)}for(var n=this.yMin;n<this.yMax;n++)this.initObject(this.xMin,n,e)},l.moveDownY=function(t,i,e){for(var a=0;a<t.length;a++){this.convertPositionToTile(t[a].position).x==this.xMin-1&&(i.put(t[a]),a--)}for(var n=this.yMin;n<this.yMax;n++)this.initObject(this.xMax-1,n,e)},l.teleport=function(t,i,e,a){for(var n=0;n<t.length;n++){var o=t[n];if(a!=R.Player||o.name!=f.Uid){var l=o.position.clone(),s=new m(l.x+i,l.y+e);a==R.Player?o.getComponent(H).stopMoveAndSetPosition(s):o.setPosition(s)}}},l.teleportMeteor=function(t,i){if(0!=y.instance.meteorManager.isJoinMap){var e=this.map.meteorContainer.position.clone(),a=new m(e.x+t,e.y+i);this.map.meteorContainer.setPosition(a)}},l.initMapCell=function(t,i,e,a){if(t==M.BothBoder)this.initMapCell(M.Left,i,e,a),this.initMapCell(M.Right,i,e,a);else{var n=this.getMapcell();n.active=!0,i.addCell(n);var o=n.getComponent(P);o.setPosition(this.convertTileToPosition(e,a),e,a,this.debug),o.setSprite(this.tileSpriteFrames[t-1])}},l.initMagma=function(t,i,e,a){var n=this.getMagma();n.active=!0,i.addMagma(n),n.setPosition(this.convertTileToPosition(e,a)),t==M.Lava&&n.getComponent(x).startMagma(this.random.random().rangeFloat(2,6))},l.initObstacle=function(t,i,e,a){var n=this.getObstacle();n.active=!0,i.addObstacle(n);var o=new m(t.x,t.y),l=this.convertPositionToPlayerViewPosition(o);l&&(n.setPosition(l),n.getComponent(X).setSprite(this.obstacleSpriteFrames[t.type]),n.getComponent(X).setType(t.type))},l.initItemTile=function(t,i,e,a){var n=this,o=t.getItems();o&&o.forEach((function(t){n.initItem(t,i,e,a)}))},l.initItem=function(t,i,e,a){var n=new m(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.itemManager.initItem(t,i,o,this.debug)},l.initItemSpecialTile=function(t,i,e,a){var n=this,o=t.getItems();o&&o.forEach((function(t){n.initItemSpecial(t,i,e,a)}))},l.initItemSpecial=function(t,i,e,a){var n=new m(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.itemSpecialManager.initItemSpecial(t,i,o,this.debug)},l.initTrapTile=function(t,i,e,a){var n=this,o=t.getTraps();o&&o.forEach((function(t){n.initTrap(t,i,e,a)}))},l.initTrap=function(t,i,e,a){var n=new m(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);o&&y.instance.trapManager.initTrap(t,i,o,this.debug)},l.initPlayerTile=function(t,i,e,a){var n=this,o=t.getPlayers();o&&o.forEach((function(t){n.initPlayer(t,i,e,a)}))},l.initPlayer=function(t,i,e,a){var n=new m(t.x,t.y),o=this.convertPositionToPlayerViewPosition(n);y.instance.playerManager.initPlayer(t.data,i,o,this.debug)},l.initObject=function(t,i,e){switch(e){case R.MapCell:var a=this.getMapDataConvert(t,i);0!=a&&this.initMapCell(a,this.map,t,i);break;case R.Obstacle:var n=this.getObstacleDataConvert(t,i);null!=n&&this.initObstacle(n,this.map,t,i);break;case R.Magma:var o=this.getMagmaDataConvert(t,i);0!=o&&this.initMagma(o,this.map,t,i);break;case R.Item:var l=this.getItemDataConvert(t,i);null!=l&&this.initItemTile(l,this.map,t,i);break;case R.ItemSpecial:var s=this.getItemSpecialDataConvert(t,i);null!=s&&this.initItemSpecialTile(s,this.map,t,i);break;case R.Trap:var r=this.getTrapDataConvert(t,i);null!=r&&this.initTrapTile(r,this.map,t,i);break;case R.Player:var c=this.getPlayerDataConvert(t,i);null!=c&&this.initPlayerTile(c,this.map,t,i)}},l.convertTileToPosition=function(t,i){return new m(i*g.instance.cellUnit,(g.instance.cellHeight-1-t)*g.instance.cellUnit,0)},l.convertPositionToTile=function(t){return new v(g.instance.cellHeight-1-Math.floor(t.y/g.instance.cellUnit),Math.floor(t.x/g.instance.cellUnit))},l.convertMapIndex=function(t,i){return t<0&&(t+=g.instance.cellHeight),i<0&&(i+=g.instance.cellWidth),new v(t%g.instance.cellHeight,i%g.instance.cellWidth)},l.convertPostionToPlayerViewTile=function(t){var i=this.convertPositionToTile(t);return i.x<this.xMin?i.x+=g.instance.cellWidth:i.x>=this.xMax&&(i.x-=g.instance.cellWidth),i.y<this.yMin?i.y+=g.instance.cellHeight:i.y>=this.yMax&&(i.y-=g.instance.cellHeight),i.x>=this.xMin&&i.x<this.xMax&&i.y>=this.yMin&&i.y<this.yMax?i:null},l.convertPositionToPlayerViewPosition=function(t,i){void 0===i&&(i=!1);var e=t.clone(),a=this.convertPositionToTile(t);i&&console.log("tile: "+a.x+","+a.y);var n=!1;if(a.x<this.xMin?(e.y-=g.instance.mapWidth,n=!0):a.x>=this.xMax&&(e.y+=g.instance.mapWidth,n=!0),a.y<this.yMin?(e.x+=g.instance.mapHeight,n=!0):a.y>=this.yMax&&(e.x-=g.instance.mapHeight,n=!0),i&&(console.log("convertPositionToPlayerViewPosition: "+t.x+", "+t.y+" => "+e.x+", "+e.y),console.log("xMin: "+this.xMin+", yMin: "+this.yMin+", xMax: "+this.xMax+", yMax: "+this.yMax)),n){var o=this.convertPositionToTile(e);return o.x>=this.xMin&&o.x<this.xMax&&o.y>=this.yMin&&o.y<this.yMax?e:null}return e},l.getMapDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.mapData[a][n]},l.getMagmaDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.magmaMapData[a][n]},l.getObstacleDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.obstacleMapData[a][n]},l.getItemDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.itemMapData[a][n]},l.setItemDataConvert=function(t,i,e){var a=this.convertMapIndex(t,i),n=a.x,o=a.y;this.itemMapData[n][o]=e},l.getItemSpecialDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.itemSpecialMapData[a][n]},l.setItemSpecialDataConvert=function(t,i,e){var a=this.convertMapIndex(t,i),n=a.x,o=a.y;this.itemSpecialMapData[n][o]=e},l.getTrapDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.trapMapData[a][n]},l.setTrapDataConvert=function(t,i,e){var a=this.convertMapIndex(t,i),n=a.x,o=a.y;this.trapMapData[n][o]=e},l.getPlayerDataConvert=function(t,i){var e=this.convertMapIndex(t,i),a=e.x,n=e.y;return this.playerMapData[a][n]},l.setPlayerDataConvert=function(t,i,e){var a=this.convertMapIndex(t,i),n=a.x,o=a.y;this.playerMapData[n][o]=e},l.findAndAddItem=function(t){var i=t.x*g.instance.cellUnit,e=t.y*g.instance.cellUnit,a=new m(i,e,0),n=new D(i,e,t.id,t.value),o=this.convertPositionToTile(a),l=this.getItemDataConvert(o.x,o.y);if(null!=l){if(l.isExitItem(t.id))return;l.addItem(n)}else{var s=new b(i,e);s.addItem(n),this.setItemDataConvert(o.x,o.y,s)}this.initItem(n,this.map,o.x,o.y)},l.findAndRemoveItems=function(t){for(var i=this,e=0;e<g.instance.cellHeight;e++)for(var a=function(a){var n=i.itemMapData[e][a];if(null!=n){var o=n.getItems();o&&o.forEach((function(e){t.find((function(t){return t.id==e.id}))||(n.removeItem(e.id),null!=i.convertPostionToPlayerViewTile(new m(e.x,e.y))?i.map.removeItemById(e.id.toString(),!0):i.map.removeItemById(e.id.toString(),!1))}))}},n=0;n<g.instance.cellWidth;n++)a(n)},l.findAndAndItemSpecial=function(t){var i=t.x*g.instance.cellUnit,e=t.y*g.instance.cellUnit,a=new m(i,e,0),n=new I(i,e,t.id,t.type),o=this.convertPositionToTile(a),l=this.getItemSpecialDataConvert(o.x,o.y);if(null!=l){if(l.isExitItem(t.id))return;l.addItem(n)}else{var s=new w(i,e);s.addItem(n),this.setItemSpecialDataConvert(o.x,o.y,s)}this.initItemSpecial(n,this.map,o.x,o.y)},l.findAndRemoveItemSpecials=function(t){for(var i=this,e=0;e<g.instance.cellHeight;e++)for(var a=function(a){var n=i.itemSpecialMapData[e][a];if(null!=n){var o=n.getItems();o&&o.forEach((function(e){t.find((function(t){return t.id==e.id}))||(n.removeItem(e.id),null!=i.convertPostionToPlayerViewTile(new m(e.x,e.y))?i.map.removeSpecialItemById(e.id.toString(),!0):i.map.removeSpecialItemById(e.id.toString(),!1))}))}},n=0;n<g.instance.cellWidth;n++)a(n)},l.findAndAddTrap=function(t){var i=t.x*g.instance.cellUnit,e=t.y*g.instance.cellUnit,a=new m(i,e,0),n=new S(i,e,t.id,t.type),o=this.convertPositionToTile(a),l=this.getTrapDataConvert(o.x,o.y);if(null!=l){if(l.isExitTrap(t.id))return;l.addTrap(n)}else{var s=new O(i,e);s.addTrap(n),this.setTrapDataConvert(o.x,o.y,s)}this.initTrap(n,this.map,o.x,o.y)},l.findAndRemoveTraps=function(t){for(var i=this,e=0;e<g.instance.cellHeight;e++)for(var a=function(a){var n=i.trapMapData[e][a];if(null!=n){var o=n.getTraps();o&&o.forEach((function(e){t.find((function(t){return t.id==e.id}))||(n.removeTrap(e.id),null!=i.convertPostionToPlayerViewTile(new m(e.x,e.y))?i.map.removeTrapById(e.id.toString(),!0):i.map.removeTrapById(e.id.toString(),!1))}))}},n=0;n<g.instance.cellWidth;n++)a(n)},l.reset=function(){this.playerMapData=null,this.itemMapData=null,this.obstacleMapData=null,this.magmaMapData=null,this.mapData=null,this.itemSpecialMapData=null,this.trapMapData=null,this.playerPosition=null},l.adjustMap=function(){if(null!=y.instance.player){var t=this.convertPositionToTile(y.instance.player.node.position),i=t.x-this.xMin;i<this.diffTileX-1?this.moveMapUpY():i>this.diffTileX+1&&this.moveMapDownY();var e=t.y-this.yMin;e<this.diffTileY-1?this.moveMapLeftX():e>this.diffTileY+1&&this.moveMapRightX()}},o(i,[{key:"itemPool",get:function(){return y.instance.itemManager.itemPool}},{key:"itemSpecialPool",get:function(){return y.instance.itemSpecialManager.itemSpecialPool}},{key:"trapPool",get:function(){return y.instance.trapManager.trapPool}}]),i}(u)).prototype,"map",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(B.prototype,"mapCell",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(B.prototype,"magmaCell",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(B.prototype,"obstacleCell",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(B.prototype,"tileSpriteFrames",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=i(B.prototype,"obstacleSpriteFrames",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=B))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils.ts",["cc"],(function(n){"use strict";var i;return{setters:[function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"1395cvNA4FPL5f/W7xqBUvt","MaxApiUtils",void 0),n("default",function(){function n(){}return n.registerScreenShot=function(n){window.MaxApi?window.MaxApi.listen("onScreenShot",(function(){n()})):n(null)},n.RegisterNoti=function(n){window.MaxApi?window.MaxApi.observer("DIS_RECEIVE_NOTI",(function(i){console.log("[DIS_RECEIVE_NOTI] "+i),n(i)})):n(null)},n.GetProfile=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getProfile((function(i){n(i)})):n()}))},n.UploadImage=function(n){return new Promise((function(i,o){var t={path:"base64-upload",files:n,options:{loading:!0}};window.MaxApi?window.MaxApi.uploadImage(t,(function(n){n.status;var o=n.response,t=o.url;t&&t.length>0&&t.indexOf("http")>=0?i(t):i(o)})):i(null)}))},n.GetDeviceInfo=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getDeviceInfo((function(i){n(i)})):n(null)}))},n.CheckHighPerformanceDevice=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.isHighPerformanceDevice((function(i){n(i)})):n(!0)}))},n.closeGame=function(){window.MaxApi&&window.MaxApi.dismiss()},n.copyToClipboard=function(n,i){window.MaxApi&&window.MaxApi.copyToClipboard(n,i)},n.openWeb=function(n){window.MaxApi.openWeb({url:n})},n.startFeatureCode=function(n,i,o){window.MaxApi?window.MaxApi.startFeatureCode(n,i,o):o(!0)},n.checkPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.checkPermission(n,(function(n){i(n)})):i("granted")}))},n.requestPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission(n,(function(n){i(n)})):i("granted")}))},n.getContacts=function(){return new Promise((function(n){if(window.MaxApi){window.MaxApi.getContacts({paramsContact:{allowNonMomo:!1,autoFocus:!0,isAllowMerchant:!1,showPopupNonMomo:!1,allowAgency:!1,allowMultipleSelection:!0},title:"MegaLuckyWheel"},(function(i){n(i)}))}else n([])}))},n.getAvatarEndPoint=function(){var n=this;return new Promise((function(i){window.MaxApi?(n.avatarEndpoint.length>0&&i(n.avatarEndpoint),window.MaxApi.getAvatarEndPoint((function(o){n.avatarEndpoint=o,i(o)}))):i("")}))},n.getContact=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.getContact({},(function(i){n(i)})):n([])}))},n.goBack=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.goBack((function(i){n(i)})):n("denied")}))},n.getScreenShot=function(n){window.MaxApi?window.MaxApi.getScreenShot(n):n("")},n.saveImage=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission("storage",(function(o){"granted"===o?window.MaxApi.saveImage(n,(function(n){n?(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh thành công"}),i(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):i(!1)}))},n.shareFacebook=function(n,i){window.MaxApi?window.MaxApi.shareFacebook(n,i):i("")},n.facebookMsg=function(n){var i="fb-messenger://share/?link="+n;window.MaxApi&&window.MaxApi.openURL(i)},n.moreMenu=function(n,i,o,t){return new Promise((function(e){if(window.MaxApi){var a={title:n,message:o,url:t,subject:i};window.MaxApi.share(a,(function(n){e(n)}))}else e(!1)}))},n.copyLink=function(n){window.MaxApi&&window.MaxApi.copyToClipboard(n,"Đã sao chép")},n.trackEvent=function(n){window.MaxApi&&window.MaxApi.trackEvent("momo_jump",n)},n.showToast=function(n,i){void 0===i&&(i=3e3),window.MaxApi&&window.MaxApi.showToast({duration:i,title:n})},n.setItem=function(n,i){window.MaxApi&&window.MaxApi.setItem(n,i)},n.getItem=function(n,i){void 0===i&&(i=null),window.MaxApi?window.MaxApi.getItem(n,i):i(null)},n.tranfer=function(){window.MaxApi&&window.MaxApi.startFeatureCode("transfer_p2p",{contacts:[{name:"Dzựt cô hồn",number:"0912400482",avatarUrl:"https://img.mservice.com.vn/app/img/Ne715/ne715_icon.thumbnail.png"}]})},n}()).avatarEndpoint="",i._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,i;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator},function(e){r=e.cclegacy,i=e.log}],execute:function(){var o;e("MaxApiName",void 0),r._RF.push({},"28774sywudKJaUfJ3kzaJm/","MaxApiUtils",void 0),function(e){e.getProfile="getProfile",e.getDeviceInfo="getDeviceInfo",e.shareFacebook="shareFacebook",e.showToast="showToast",e.sendCloudMessage="sendCloudMessage",e.getCloudMessage="getCloudMessage",e.startTraceScreenLoad="startTraceScreenLoad",e.startTraceScreenInteraction="startTraceScreenInteraction",e.stopTrace="stopTrace",e.chatConversation="chat_conversation"}(o||(o=e("MaxApiName",{})));e("maxApiUtils",new(function(){function e(){this.observer={},i("[MaxApiutils] isBrowser: ",this.isBrowser)}var r=e.prototype;return r.request=function(){var e=t(regeneratorRuntime.mark((function e(n){var t,r,o,s=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=a[o];return i("[MaxApiUtils]","Call function: ",n),e.abrupt("return",new Promise((function(e,t){s.isBrowser&&e&&e(null);var i=window.MaxApi[n];r&&r.length>0?i.apply(void 0,r.concat([function(n){e&&e(n)}])):i((function(n){e&&e(n)}))})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.saveImage=function(e){var n=this;return new Promise((function(t,r){n.isBrowser&&t&&t(null),window.MaxApi.requestPermission("storage",(function(n){"granted"===n?window.MaxApi.saveImage(e,(function(e){e?(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh thành công"}),t&&t(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),t&&t(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),t&&t(!1))}))}))},r.registerShaking=function(e){if(!this.isBrowser){var n=window.MaxApi.listen({event:"onShaker",updateInterval:100,type:"accelerometer"},(function(n){e(n)}));this.observer.shake=n}},r.unRegisterShaking=function(){var e;this.isBrowser||null==(e=this.observer.shake)||null==e.remove||e.remove()},r.registerMagnetometer=function(e,n){if(!this.isBrowser){var t=window.MaxApi.listen({event:"onShaker",type:"magnetometer",updateInterval:50},(function(n){e(n)}));this.observer.magnetometer=t}},r.unRegisterMagnetometer=function(e){var n;this.isBrowser||null==(n=this.observer.magnetometer)||null==n.remove||n.remove()},r.listen=function(e,n){this.isBrowser||window.MaxApi.listen(e,n)},r.triggerEventVibration=function(){window.MaxApi&&window.MaxApi.triggerEventVibration()},r.getCloudMessage=function(e){return new Promise((function(n,t){window.MaxApi.getCloudMessage({path:e},(function(e){e.status;var t=e.response;t.response_info?n(t):n(null)}))}))},r.sendCloudMessage=function(e,n){return new Promise((function(t,r){window.MaxApi.sendCloudMessage({path:e,body:n},(function(e){e.status;var n=e.response;n.errorCode?t(null):t(n)}))}))},n(e,[{key:"isBrowser",get:function(){return null==window.ReactNativeWebView}}]),e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameDefine.ts","./GameMgr.ts","./TextDefine.ts","./GameEvent.ts","./GlobalDefine.ts","./MaxApiUtils.ts","./MySprite.ts","./Utils.ts","./MainPlayer.ts","./SwipePart.ts","./PopupConfig.ts","./PopupMgr.ts","./Screen.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,u,c,h,g,p,f,d,b,T,y,k,P,w,m,S,E,v,C,L,N,M,x,R,z,A,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.UIOpacity,u=t.Label,c=t.Button,h=t.Layout,g=t.view,p=t.Color,f=t.Input,d=t.tween,b=t.Vec3},function(t){T=t.EventName,y=t.PopupName,k=t.GameDefine,P=t.GhostStatusPopup},function(t){w=t.GameDefine},function(t){m=t.GameMgr},function(t){S=t.TextDefine},function(t){E=t.default},function(t){v=t.globalDefine,C=t.profile},function(t){L=t.default},function(t){N=t.MySprite},function(t){M=t.utils},function(t){x=t.MainPlayer},function(t){R=t.SwipePart},function(t){z=t.PopupConfig},function(t){A=t.PopupMgr},function(t){B=t.Screen}],execute:function(){var G,D,O,H,_,U,F,I,V,q,W,X,Y,j,Q,Z,J,K,$,tt,et,it,nt,ot,at,rt,st,lt,ut,ct,ht,gt;t("State",void 0),a._RF.push({},"dc114wyqqxHy6RHQnT1W8RS","Menu",void 0);var pt,ft=r.ccclass,dt=r.property;!function(t){t[t.Hunter=0]="Hunter",t[t.Farmer=1]="Farmer",t[t.Ranking=2]="Ranking"}(pt||(pt=t("State",{})));t("Menu",(G=ft("Menu"),D=dt(s),O=dt(l),H=dt(s),_=dt(N),U=dt(u),F=dt(u),I=dt(u),V=dt(u),q=dt(R),W=dt(x),X=dt(c),Y=dt(h),j=dt(s),Q=dt(u),G(((gt=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"swipePart",K,o(e)),e.isCanSlide=!0,n(e,"whiteScreen",$,o(e)),n(e,"gateButton",tt,o(e)),n(e,"avatar",et,o(e)),n(e,"playerName",it,o(e)),n(e,"ticketLabel",nt,o(e)),n(e,"moneyLabel",ot,o(e)),n(e,"ping",at,o(e)),n(e,"swipePartController",rt,o(e)),n(e,"mainPlayer",st,o(e)),e.gate=null,e.state=pt.Hunter,e.currentAngle=-60,e.angleToNext=15,e.angleToShake=5,e.ratioX=g.getDesignResolutionSize().x/g.getViewportRect().width,e.isSliding=!1,n(e,"exchangeLifeButton",lt,o(e)),n(e,"ticketGroup",ut,o(e)),n(e,"smokes",ct,o(e)),n(e,"notEnoughTicketLabel",ht,o(e)),e.tweenNotEnoughTicket=null,e.defaultNotEnoughTicketLabelPos=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){e.instance=this,E.on(T.onUpdateProfile,this.updateProfile,this),E.on(T.onPing,this.logPing,this),E.on(T.onResRanking,this.updateRanking,this)},a.logPing=function(t,e){this.ping.color=e<=100?w.GREEN_COLOR:e<=250?p.YELLOW:w.RED_COLOR,this.ping.string="Ping: "+e},a.start=function(){var t=this;this.gate=this.gateButton.children[0],this.node.on(f.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(f.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(f.EventType.TOUCH_MOVE,this.onTouchMove,this),this.isCanSlide=!1,setTimeout((function(){t.swipePartController.updateSlideVisible(),t.goToNext(-1)}),200),m.instance.isOptimizeForPerformance=v.isLowEndDevice,m.instance.isOptimizeForPerformance||this.smokes.forEach((function(t){t.active=!0})),this.defaultNotEnoughTicketLabelPos=this.notEnoughTicketLabel.node.getPosition().clone(),this.exchangeLifeButton.node.on("click",(function(){A.Instance.Show(y.ExchangeTicket)}),this)},a.updateProfile=function(){this.avatar.FetchAvatar(C.avatar),this.playerName.string=M.trimName(C.UserName,2),this.moneyLabel.string=M.formatScore(C.money),this.ticketLabel.string=C.ticket.toString(),w.instance.ticketPrice<1?this.setStatusTicketGroup(!1):this.setStatusTicketGroup(!0)},a.setStatusTicketGroup=function(t){this.exchangeLifeButton.node.active=t,this.exchangeLifeButton.interactable=t,this.ticketGroup.paddingRight=t?-60:30},a.updateRanking=function(t){this.swipePartController.updateTop3Rankings(t)},a.show=function(){t.prototype.show.call(this,!1),this.isCanSlide=!0,this.whiteScreen.opacity=255,0!=this.whiteScreen.opacity&&d(this.whiteScreen).to(k.timeEndLoading,{opacity:0}).start(),this.gateButton.on(f.EventType.TOUCH_END,this.onClickButtonGate,this),m.instance.reqRankingBoard(0,9),this.updateProfile(),C.updateProfile(),this.mainPlayer.reset()},a.onTouchEnd=function(t){this.isSliding=!1,this.backToBegin()},a.onTouchMove=function(t){var e=t.getLocation().x-t.getStartLocation().x;if(!(Math.abs(e)<20)&&this.isCanSlide){this.isSliding=!0,this.swipePartController.updateSlideVisible();var i=t.getDeltaX(),n=Math.sign(e);this.swipePart.angle-=.067*i*this.ratioX,this.mainPlayer.move(-i),this.checkAngleToChangeMode(n)&&(this.isCanSlide=!1,this.goToNext(n))}},a.checkAngleToChangeMode=function(t){return this.swipePart.angle>=this.currentAngle-t*this.angleToNext&&t<0||this.swipePart.angle<=this.currentAngle-t*this.angleToNext&&t>0},a.backToBegin=function(){var t=this;if(0!=this.isCanSlide){this.isCanSlide=!1;var e=this.currentAngle-this.swipePart.angle;this.mainPlayer.move(Math.sign(e)),d(this.swipePart).to(.5,{angle:this.currentAngle}).call((function(){t.isCanSlide=!0,t.mainPlayer.endMove(),t.swipePartController.updateIdleVisible(),Math.abs(e)>t.angleToShake&&t.swipePartController.startShake()})).start()}},a.goToNext=function(t){var e=this;d(this.swipePart).to(.5,{angle:this.currentAngle-60*t}).call((function(){e.currentAngle=e.swipePart.angle,e.updateState(t),e.swipePartController.updateIndex(t),e.mainPlayer.setState(e.state,(function(){e.isCanSlide=!0})),e.swipePartController.startShake()})).start()},a.updateState=function(t){this.state+=-t,this.state=this.state,this.state<0?this.state+=3:this.state>=3&&(this.state-=3)},a.onClickButtonGate=function(){var t=this;this.notEnoughTicket()||this.state!=pt.Ranking&&1!=this.isSliding&&0!=this.isCanSlide&&(this.isCanSlide=!1,this.gateButton.off(f.EventType.TOUCH_END),this.mainPlayer.goToGate(this.gate.getWorldPosition(),(function(){m.instance.startStandby(t.state==pt.Hunter)})))},a.notEnoughTicket=function(){var t=this;return!m.instance.cheatBypassSubtractTurn&&(this.state!=pt.Ranking&&(C.ticket<1&&(this.tweenNotEnoughTicket&&(this.tweenNotEnoughTicket.stop(),this.tweenNotEnoughTicket=null,this.notEnoughTicketLabel.node.setPosition(this.defaultNotEnoughTicketLabelPos)),this.notEnoughTicketLabel.string=S.textConfig.NotificationText.notEnoughTicket,this.tweenNotEnoughTicket=d(this.notEnoughTicketLabel.node).set({scale:b.ZERO,active:!0}).to(.5,{scale:new b(2,2,2)}).by(.5,{position:new b(0,50)}).call((function(){t.tweenNotEnoughTicket=null,t.notEnoughTicketLabel.node.setPosition(t.defaultNotEnoughTicketLabelPos),t.notEnoughTicketLabel.node.active=!1})).start(),!0)))},a.exitApp=function(){L.closeGame()},a.onClickButtonAddMoney=function(){var t=this,e=S.textConfig.AddMoneyPopupText,i=z.Show(e,null,P.Normal);null==i||i.SetTypeYesNo("Nạp ngay","Thoát",(function(){t.goToAddMoney()}),(function(){}))},a.goToAddMoney=function(){L.tranfer(),this.exitApp()},e}(B)).instance=null,K=e((J=gt).prototype,"swipePart",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(J.prototype,"whiteScreen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(J.prototype,"gateButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(J.prototype,"avatar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(J.prototype,"playerName",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(J.prototype,"ticketLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(J.prototype,"moneyLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(J.prototype,"ping",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(J.prototype,"swipePartController",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(J.prototype,"mainPlayer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(J.prototype,"exchangeLifeButton",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(J.prototype,"ticketGroup",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(J.prototype,"smokes",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ht=e(J.prototype,"notEnoughTicketLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=J))||Z));a._RF.pop()}}}));

System.register("chunks:///_virtual/Meteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts","./SpawnMeteor.ts"],(function(i){"use strict";var e,t,n,a,r,o,s,l,c,u,h,p,d,g,w,m,f;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,s=i.sp,l=i.Node,c=i.UIOpacity,u=i.Graphics,h=i.tween,p=i.Vec3,d=i.math,g=i.Component},function(i){w=i.Layer},function(i){m=i.utils},function(i){f=i.SpawnMeteor}],execute:function(){var b,v,y,R,C,S,O,W,k,P,z,D,I,E,M,_,N,F,L,U,x;r._RF.push({},"8663bmNgIhOA77YDaVcT+p1","Meteor",void 0);var q=o.ccclass,A=o.property;i("Meteor",(b=q("Meteor"),v=A(s.Skeleton),y=A(s.Skeleton),R=A(l),C=A(l),S=A(l),O=A(l),W=A(l),k=A(c),P=A(u),b((I=e((D=function(i){function e(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=i.call.apply(i,[this].concat(r))||this,n(e,"animation",I,a(e)),n(e,"boom",E,a(e)),n(e,"sockwave",M,a(e)),n(e,"main",_,a(e)),n(e,"warning",N,a(e)),n(e,"warningCircle",F,a(e)),n(e,"warningSignal",L,a(e)),n(e,"warningCircleOpacity",U,a(e)),n(e,"circleRadius",x,a(e)),e.startPos=null,e.endPos=null,e.startScale=null,e.endScale=null,e.timeDrop=1.5,e.timeExplose=.4,e.timeWarning=3,e.tweenWarningCircle=null,e.tweenWaningCircleOpacity=null,e.tweenWarningSignal=null,e.tweenCirlceRadius=null,e.radius=0,e.minRadius=200,e}t(e,i);var r=e.prototype;return r.start=function(){},r.setCircelRadius=function(i){var e=this,t=128*this.radius;t<this.minRadius||(this.circleRadius.node.active=!0,this.circleRadius.node.setPosition(i.clone().subtract(this.node.position)),this.tweenCirlceRadius=h({radius:this.minRadius}).to(this.timeWarning-1,{radius:t},{onUpdate:function(i,t){e.circleRadius.clear(),e.circleRadius.circle(0,0,i.radius),e.circleRadius.lineWidth=10,e.circleRadius.strokeColor.fromHEX("#ff0000"),e.circleRadius.close(),e.circleRadius.stroke()},easing:"linear"}).call((function(){e.circleRadius.clear(),e.circleRadius.node.active=!1})).start())},r.init=function(){this.animation.enabled=!0,this.boom.node.active=!1,this.main.active=!1,this.animation.setAnimation(0,"metror_fall",!0),this.sockwave.active=!1},r.initInMenu=function(i){this.init(),m.changeNodeLayer(this.node,w.UI_2D),this.startScale=p.ZERO,this.endScale=new p(p.ONE).multiplyScalar(d.randomRange(.5,1.5)),this.node.setRotationFromEuler(0,0,65)},r.initInGameplay=function(i){void 0===i&&(i=6),this.init(),m.changeNodeLayer(this.node,w.GamePlay),this.startScale=p.ONE,this.endScale=p.ONE,this.radius=i},r.setPositions=function(i,e){this.node.position=i,this.startPos=i,this.endPos=e},r.drop=function(){var i=this;this.main.active=!0,h(this.node).set({position:this.startPos,scale:this.startScale}).to(this.timeDrop,{position:this.endPos,scale:this.endScale},{easing:"sineIn"}).call((function(){i.animation.enabled=!1,i.node.layer==w.UI_2D?f.instance.putMeteorToPool(i.node):i.startSockwave()})).start(),this.node.layer!=w.UI_2D&&setTimeout((function(){i.expolu()}),1e3*(this.timeDrop-1))},r.expolu=function(){var i=this;this.boom.node.active=!0,this.boom.setAnimation(0,"metror_boom",!1),this.boom.setCompleteListener((function(){i.main.active=!1,i.boom.node.active=!1}))},r.startSockwave=function(){var i=this,e=128*this.radius/250;this.sockwave.active=!0,h(this.sockwave).set({scale:p.ZERO}).to(this.timeExplose,{scale:new p(e,e,1)},{easing:"linear"}).call((function(){i.sockwave.active=!1})).start()},r.setWarning=function(i,e){void 0===e&&(e=null),this.warning.active=i,null!=e&&(this.warning.position=e.clone().subtract(this.node.position)),i?(this.setCircelRadius(e),this.tweenWarningCircle=h(this.warningCircle).to(.3,{scale:new p(2,2)},{easing:"quadOut"}).to(.3,{scale:new p(1.5,1.5)},{easing:"quadIn"}).union().repeatForever().start(),this.tweenWaningCircleOpacity=h(this.warningCircleOpacity).to(.3,{opacity:127.5},{easing:"quadOut"}).to(.3,{opacity:255},{easing:"quadIn"}).union().repeatForever().start(),this.tweenWarningSignal=h(this.warningSignal).to(.3,{angle:10}).to(.3,{angle:-10}).union().repeatForever().start()):(null!=this.tweenWarningCircle&&this.tweenWarningCircle.stop(),null!=this.tweenWarningSignal&&this.tweenWarningSignal.stop(),null!=this.tweenWaningCircleOpacity&&this.tweenWaningCircleOpacity.stop(),null!=this.tweenCirlceRadius&&this.tweenCirlceRadius.stop())},e}(g)).prototype,"animation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(D.prototype,"boom",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"sockwave",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(D.prototype,"main",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(D.prototype,"warning",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"warningCircle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(D.prototype,"warningSignal",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(D.prototype,"warningCircleOpacity",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(D.prototype,"circleRadius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorDrop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameDefine.ts"],(function(i){"use strict";var t,e,n,r,o,s,a,p,c,l,h,u,m,D,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,a=i.Label,p=i.Sprite,c=i.Color,l=i.Component},function(i){h=i.default},function(i){u=i.EventName,m=i.SoundName,D=i.GamePlayEventName},function(i){f=i.GameDefine}],execute:function(){var g,d,v,w,R,T,y;o._RF.push({},"5534cwVQ8tD9K1pt/jVFb3h","MeteorDrop",void 0);var M=s.ccclass,b=s.property;i("MeteorDrop",(g=M("MeteorDrop"),d=b(a),v=b(p),g((T=t((R=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return t=i.call.apply(i,[this].concat(o))||this,n(t,"countDown",T,r(t)),n(t,"spriteOnMeteorDrop",y,r(t)),t.warningTime=0,t.dropTime=0,t.isRunning=!1,t.maxRatio=1,t.time=0,t.isWanring=!1,t.isDrop=!1,t.isRed=!1,t.dropInterval=null,t}e(t,i);var o=t.prototype;return o.start=function(){this.node.active=!1},o.setTime=function(i,t){this.isRunning||(this.isRunning=!0,this.node.active=!0,this.warningTime=i,this.dropTime=t,this.isWanring=!0,this.isDrop=!1,this.countDown.node.active=!0,h.emit(u.PlaySfx,m.Warning))},o.update=function(i){if(this.isWanring){this.time+=i,this.time>=this.warningTime&&(this.isWanring=!1,this.isDrop=!0);var t=this.warningTime-this.time;this.countDown.string=Math.ceil(t).toString();var e=(this.warningTime-t)/this.warningTime;this.spriteOnMeteorDrop.fillRange=this.maxRatio*e,this.isDrop&&this.startDrop()}},o.startDrop=function(){var i=this;h.emit(u.PlaySfx,m.MeteorFalling),this.countDown.node.active=!1,this.dropInterval=setInterval((function(){i.isRed?(i.spriteOnMeteorDrop.color=f.RED_COLOR,i.isRed=!1):(i.spriteOnMeteorDrop.color=c.WHITE,i.isRed=!0)}),200),setTimeout((function(){clearInterval(i.dropInterval),h.emit(D.CameraShaking),h.emit(u.PlaySfx,m.Explosion),i.reset()}),1e3*this.dropTime)},o.reset=function(){this.isRunning=!1,this.node.active=!1,this.countDown.string="0",this.spriteOnMeteorDrop.fillRange=0,this.warningTime=0,this.dropTime=0,this.isWanring=!1,this.isDrop=!1,this.time=0,this.spriteOnMeteorDrop.color=c.WHITE,this.isRed=!1},t}(l)).prototype,"countDown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(R.prototype,"spriteOnMeteorDrop",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/MeteorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Meteor.ts","./GameEvent.ts","./Define.ts","./GameDefine.ts","./GamePlay.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,c,u,f,p,m,l,M,P,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.NodePool,u=e.Vec3,f=e.instantiate,p=e.UITransform,m=e.Component},function(e){l=e.Meteor},function(e){M=e.default},function(e){P=e.GamePlayEventName},function(e){h=e.GameDefine},function(e){g=e.GamePlay}],execute:function(){var d,v,y,b,D;r._RF.push({},"7641aW0Bk9Borma8CQikR+D","MeteorManager",void 0);var C=a.ccclass,G=a.property;e("MeteorManager",(d=C("MeteorManager"),v=G(s),d((D=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"meteorPrefab",D,o(t)),t.meteorPool=new c,t.timeNotification=3,t.isJoinMap=!1,t.isMeteorInMap=!1,t.currentPostion=u.ZERO,t}n(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<1;e++)this.meteorPool.put(f(this.meteorPrefab))},r.initMeteor=function(e,t,n){void 0===n&&(n=!1);var i=this.getMeteor();i.name=e.id.toString(),t.addMeteor(i);var o=i.getComponent(l);o.initInGameplay(e.effectRadius);var r=this.getPosition(e.x,e.y);o.setPositions(r[0],r[1]),o.setWarning(!0,r[1]),this.isMeteorInMap=!0,n&&M.emit(P.UpdateMeteorDrop),setTimeout((function(){o.setWarning(!1),o.drop()}),3e3)},r.netUpdate=function(e){var t=this,n=g.instance.map;e.dungeon.meteors.forEach((function(e){n.findMeteor(e.id.toString())||t.initMeteor(e,n,!0)})),n.getMeteors().forEach((function(i){e.dungeon.meteors.find((function(e){return e.id.toString()==i.name}))||(n.removeMeteor(i),t.isMeteorInMap=!1,t.isJoinMap=!1,g.instance.map.meteorContainer.setPosition(u.ZERO))}))},r.getPosition=function(e,t){var n=this.node.getComponent(p).contentSize,i=new u(e*h.instance.cellUnit,t*h.instance.cellUnit),o=g.instance.mapManager.convertPositionToPlayerViewPosition(i);o?(this.isJoinMap=!0,i=o):(this.isJoinMap=!1,this.currentPostion=i.clone());var r=i.clone();return r.y=i.y+n.height,[r,i]},r.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():f(this.meteorPrefab)},r.update=function(e){if(0==this.isJoinMap&&1==this.isMeteorInMap){var t=g.instance.mapManager.convertPositionToPlayerViewPosition(this.currentPostion);if(t){this.isJoinMap=!0;var n=t.subtract(this.currentPostion),i=g.instance.map.meteorContainer.getPosition().add(n);g.instance.map.meteorContainer.setPosition(i)}}},t}(m)).prototype,"meteorPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyChange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts","./TextDefine.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,c,l,u,h,p,b,d,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,c=e.Sprite,l=e.sp,u=e.Label,h=e.UIOpacity,p=e.Input,b=e.tween,d=e.Component},function(e){g=e.TimeMgr},function(e){m=e.TextDefine}],execute:function(){var f,y,v,T,w,O,B,C,D,M,x,L,F,S,_;r._RF.push({},"8728eBItjRHxbYOOFZ2tQdh","MoneyChange",void 0);var z=a.ccclass,E=a.property;e("MoneyChange",(f=z("MoneyChange"),y=E(s),v=E(c),T=E(l.Skeleton),w=E(u),O=E(h),B=E(u),f((M=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"container",M,o(t)),i(t,"spriteOnMoneyChange",x,o(t)),i(t,"bagOpen",L,o(t)),i(t,"countDown",F,o(t)),i(t,"descriptionBubble",S,o(t)),i(t,"descriptionLabel",_,o(t)),t.endFrame=0,t.endTime=0,t.maxRatio=.9,t.maxTime=0,t.tweenBubble=null,t.descriptionText="Sau {0}s số vàng thu thập được sẽ tự động chuyển thành giá trị tiền ",t}n(t,e);var r=t.prototype;return r.start=function(){this.node.active=!1,this.bagOpen.node.active=!1,this.container.active=!0,this.countDown.node.active=!1,this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_START,this.onShowDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_END,this.onHideDescription,this),this.spriteOnMoneyChange.node.on(p.EventType.TOUCH_CANCEL,this.onHideDescription,this)},r.setEndTime=function(e){this.endFrame!=e&&(this.endFrame=e,this.endTime=g.instance.getFrameTime(e),this.maxTime=this.endTime-g.instance.currentGameTime,this.node.active=!0)},r.update=function(){if(0!=this.endFrame)if(g.instance.currentGameTime>=this.endTime)this.bagOpenEffect();else{var e=this.endTime-g.instance.currentGameTime,t=.001*e;Math.round(t)<30&&(this.countDown.node.active=!0,this.countDown.string=Math.ceil(t).toString());var n=(this.maxTime-e)/this.maxTime;this.spriteOnMoneyChange.fillRange=this.maxRatio*n,this.descriptionLabel.string=this.descriptionText.replace("{0}",Math.ceil(t).toString())}},r.reset=function(){this.node.active=!1,this.spriteOnMoneyChange.fillRange=0,this.endFrame=0,this.bagOpen.node.active=!1,this.container.active=!0,this.tweenBubble&&(this.tweenBubble.stop(),this.tweenBubble=null),this.descriptionBubble.node.active=!1,this.descriptionLabel.string=this.descriptionText.replace("{0}","0"),this.countDown.string="0",this.countDown.node.active=!1},r.bagOpenEffect=function(){var e=this;this.bagOpen.node.active=!0,this.container.active=!1,this.countDown.node.active=!1,this.tweenBubble&&(this.tweenBubble.stop(),this.tweenBubble=null),this.bagOpen.setAnimation(0,"money_bag_open",!1),this.bagOpen.setCompleteListener((function(){e.bagOpen.node.active=!1,e.container.active=!0}))},r.onShowDescription=function(){this.tweenBubble&&this.tweenBubble.stop(),this.tweenBubble=null,this.descriptionBubble.node.active=!0,this.descriptionBubble.opacity=255,this.descriptionLabel.string=m.textConfig.GameplayText.descriptionChangeGoldToMoney},r.onHideDescription=function(){var e=this;this.tweenBubble=null,this.tweenBubble=b(this.descriptionBubble).to(2.5,{opacity:0}).call((function(){e.tweenBubble=null,e.descriptionBubble.node.active=!1})).start()},t}(d)).prototype,"container",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"spriteOnMoneyChange",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"bagOpen",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"countDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(D.prototype,"descriptionBubble",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(D.prototype,"descriptionLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/MyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameEvent.ts"],(function(t){"use strict";var n,o,e,u,c,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,u=t.Component},function(t){c=t.EventName,i=t.SoundName},function(t){r=t.default}],execute:function(){var s;o._RF.push({},"d753fKngEdFRoVogvjt/8Gz","MyButton",void 0);var a=e.ccclass;e.property,t("MyButton",a("MyButton")(s=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.start=function(){this.node.on("click",(function(){r.emit(c.PlaySfx,i.Button)}))},o}(u))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/MySprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts","./Utils.ts"],(function(t){"use strict";var e,i,r,n,s,o,a,c,u,p,h,f,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,r=t.asyncToGenerator},function(t){n=t.cclegacy,s=t._decorator,o=t.Sprite,a=t.UITransform,c=t.Size,u=t.Vec3,p=t.Component,h=t.SpriteFrame},function(t){f=t.default},function(t){l=t.utils}],execute:function(){var S;n._RF.push({},"ddc57ibFupLBZ0klhKhOMpt","MySprite",void 0);var d=s.ccclass;s.property,t("MySprite",d("MySprite")(S=function(t){function n(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this).sprite=null,e.url="",e.size=void 0,e.isInit=!1,e}e(n,t);var s=n.prototype;return s.init=function(){if(!this.isInit){this.isInit=!0,this.sprite=this.getComponent(o);var t=this.sprite.getComponent(a);this.size=new c(t.width,t.height),this.sprite.sizeMode=o.SizeMode.RAW}},s.onLoad=function(){this.init()},s.setFixedSize=function(t){this.size=t.clone(),this.sprite.sizeMode=o.SizeMode.RAW},s.correctSpriteFrameSize=function(t){this.init(),this.setFixedSize(t),l.CorrectSpriteFrameSize(this.sprite,this.size)},s.Fetch=function(){var t=r(regeneratorRuntime.mark((function t(e){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),!e||this.url==e){t.next=6;break}return t.next=4,f.getRemoteTextureImage(e);case 4:(i=t.sent)&&((r=new h).texture=i,this.setSprite(r));case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.FetchAvatar=function(){var t=r(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&""!=e){t.next=2;break}return t.abrupt("return");case 2:if(this.init(),!e||this.url==e){t.next=8;break}return t.next=6,f.requestAvatar(e);case 6:(i=t.sent)&&this.setSprite(i);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setSprite=function(t,e){void 0===e&&(e=!1),this.sprite.spriteFrame=t,e?this.node.scale=u.ONE:l.CorrectSpriteFrameSize(this.sprite,this.size)},i(n,[{key:"Sprite",get:function(){return this.sprite}}]),n}(p))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkBrigde.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./NetworkDefine.ts","./TimeMgr.ts"],(function(e){"use strict";var n,r,t,o,i,s,a,c,u,h;return{setters:[function(e){n=e.createClass,r=e.asyncToGenerator},function(e){t=e.cclegacy,o=e._decorator,i=e.math},function(e){s=e.profile},function(e){a=e.NetworkDefine,c=e.WSGameCmd,u=e.WSCmd},function(e){h=e.TimeMgr}],execute:function(){var l;t._RF.push({},"7977cTNaeRKkqxQx8E3V1id","NetworkBrigde",void 0);var d=o.ccclass;o.property,e("NetworkBrigde",d("NetworkBrigde")(l=function(){function e(){this.ws=null,this.payloadCounter=0,this.worker=null,this.servers=[],this.onOpen=null,this.onMessage=null,this.onError=null,this.onClose=null}var t=e.prototype;return t.connect=function(){null==this.ws&&(this.ws=new WebSocket(a.HOST_SOCKET),this.ws.onopen=this.onopen.bind(this),this.ws.onmessage=this.onmessage.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onclose=this.onclose.bind(this))},t.disconnect=function(){this.ws.readyState==WebSocket.OPEN&&(this.ws.close(),this.ws=null)},t.onopen=function(e){this.onOpen&&this.onOpen(),console.log("[NetworkBrigde] ws is connected!")},t.onmessage=function(e){this.binaryHandler(e.data)},t.onerror=function(e){this.onError&&(console.log("[NetworkBrigde] ws error!"),this.onError())},t.onclose=function(e){this.onClose&&(console.log("[NetworkBrigde] ws is closed!"),this.onClose())},t.send=function(e){this.ws.readyState==WebSocket.OPEN&&this.ws.send(e)},t.reconnect=function(){null!=this.ws&&this.ws.close(),this.connect()},t.binaryHandler=function(e){var n=this;e&&e.arrayBuffer().then((function(r){try{n.decodeMsgData(r)}catch(n){console.log("binaryHandler",n,e)}}))},t.decodeMsgData=function(){var e=r(regeneratorRuntime.mark((function e(n){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=phoenix.krun.internal.MessageWrapper.decode(new Uint8Array(n)),e.t0=r.msgClass,e.next=e.t0===u.ResVerify?4:e.t0===u.MsgPing?6:e.t0===u.ResWorker?7:11;break;case 4:return this.worker,e.abrupt("break",11);case 6:return e.abrupt("break",11);case 7:return t=phoenix.krun.internal.ResWorker.decode(r.msg),this.worker=t.worker,console.log("[NetworkBrigde] ResWorker: "+this.worker),e.abrupt("break",11);case 11:this.onMessage&&this.onMessage(r);case 12:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t.sendProto=function(e,n){var r=new phoenix.krun.internal.MessageWrapper;r.msg=n,r.msgClass=e,r.worker=this.worker;var t=phoenix.krun.internal.MessageWrapper.encode(r).finish();this.send(t)},t.sendAction=function(e,n){var r=h.instance.serverTime,t=new phoenix.krun.KrunMsg;t.timestamp=r,t.cmd=e,n&&(t.body=n);var o=phoenix.krun.KrunMsg.encode(t).finish();this.sendProto(c.KrunMsg,o)},t.getRoomName=function(){var e=a.SERVER_NAME;if(this.servers&&this.servers.length>0)e=this.servers[i.randomRangeInt(0,this.servers.length)],console.log(e);else if(!a.IS_DEV){i.randomRangeInt(0,3);e=a.SERVER_NAME}return e},t.authentication=function(e){var n=new phoenix.krun.internal.ReqVerify;n.jwt=e;var r=phoenix.krun.internal.ReqVerify.encode(n).finish();this.sendProto("ReqVerify",r)},t.reqWorker=function(){if(!this.worker){var e=new phoenix.krun.internal.ReqWorker;e.game=this.getRoomName();var n=phoenix.krun.internal.ReqWorker.encode(e).finish();this.sendProto(u.ReqWorker,n)}},t.reqDefines=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_DEFINES,null)},t.quitGame=function(){this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME,null),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_QUIT_GAME),console.log("[NetworkBridge] quit game")},t.reqPlayer=function(e,n){var r=new phoenix.krun.KrunReqGamePlayer;r.gameId=e,r.uid=n,this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_PLAYER,phoenix.krun.KrunReqGamePlayer.encode(r).finish()),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_GAME_PLAYER)},t.joinGame=function(e){var n=new phoenix.krun.KrunReqPlayerJoin;n.displayName=""==s.UserName?"Player":s.UserName,n.gameId="",n.isHunter=e,this.sendAction(phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME,phoenix.krun.KrunReqPlayerJoin.encode(n).finish()),console.log("[NetworkBrigde] sendAction => "+phoenix.krun.KRUN_CMD.KRUN_CMD_PLAYER_JOIN_GAME)},t.ping=function(){var e=new phoenix.krun.internal.MsgPing;e.id=this.payloadCounter++,e.createAt=Date.now();var n=phoenix.krun.internal.MsgPing.encode(e).finish();this.sendProto(u.MsgPing,n)},n(e,[{key:"isReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN}},{key:"isPingReady",get:function(){return this.ws&&this.ws.readyState===WebSocket.OPEN&&""!=this.worker}},{key:"isHttps",get:function(){return-1!=window.location.href.indexOf("https://")}}]),e}())||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkDefine.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){e({WSCmd:void 0,WSGameCmd:void 0}),r._RF.push({},"2af94HN97RHnL27I4ClZS71","NetworkDefine",void 0);var n,i,o=e("NetworkDefine",(function(){}));o.IS_DEV=!1,o.SERVER_NAME="krun",o.DEBUG_TOKEN="0937839557",o.lostConnectionTime=3e4,o.HOST=o.IS_DEV?"https://m.dev.mservice.io/":"https://m.mservice.io/",o.URL_STAGING="wss://realtime.mservice.io/phoenix-krun-connector",o.URL_DEV="wss://realtime.dev.mservice.io/phoenix-krun-connector/connector",o.HOST_SOCKET=o.IS_DEV?o.URL_DEV:o.URL_STAGING,o.Avatar="https://s3-ap-southeast-1.amazonaws.com/avatars.mservice.io/{0}.png",o.DEEP_LINK="deeplink-universal/v1/content-dynamic",o.Profile="phoenix-profile/v1/profile",o.BuyTurn="phoenix-profile/v1/turn/buy",o.SubtractTurn="phoenix-profile/v1/turn/subtract",function(e){e.MsgPing="MsgPing",e.ReqWorker="ReqWorker",e.ResWorker="ResWorker",e.ResVerify="ResVerify",e.ReqVerify="ReqVerify",e.KrunMsg="KrunMsg"}(n||(n=e("WSCmd",{}))),function(e){e.KrunMsg="KrunMsg"}(i||(i=e("WSGameCmd",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GlobalDefine.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,n,r,o,u,s;return{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy},function(e){r=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.globalDefine},function(e){s=e.NetworkDefine}],execute:function(){n._RF.push({},"b72b0V4dQJJTLMgBo4CZ95K","NetworkMgr",void 0);e("networkMgr",new(function(){function e(){}var n=e.prototype;return n.getRequest=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isBrowser){e.next=4;break}return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",s.HOST+t,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Authorization","Bearer "+u.profile.userToken),r.responseType="json",r.timeout=3e3,r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<400?e&&e(r.response):e&&e(null))},r.send()})));case 4:return e.abrupt("return",new Promise((function(e,n){r.request(o.getCloudMessage,{path:t}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.postRequest=function(){var e=t(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isBrowser){e.next=4;break}return e.abrupt("return",new Promise((function(e,r){var o=new XMLHttpRequest;o.open("POST",s.HOST+t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+u.profile.userToken),o.responseType="json",o.timeout=5e3,o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<400?e&&e(o.response):e&&e(null))},o.send(JSON.stringify(n))})));case 4:return e.abrupt("return",new Promise((function(e,u){r.request(o.sendCloudMessage,{path:t,body:n}).then((function(t){e&&e(t?t.response:null)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.requestHeader=function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new XMLHttpRequest;r.open("HEAD",t,!0),r.onload=function(){var t=r.getResponseHeader("Content-Type");e(t)},r.onerror=function(t){e("image/png")},r.timeout=3e3,r.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectInterface.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy}],execute:function(){var l;t("ObjectType",void 0),e._RF.push({},"eae2bXg6/lOmpFQekiWwAng","ObjectInterface",void 0),function(t){t[t.MapCell=0]="MapCell",t[t.Magma=1]="Magma",t[t.Obstacle=2]="Obstacle",t[t.Item=3]="Item",t[t.Player=4]="Player",t[t.ItemSpecial=5]="ItemSpecial",t[t.Trap=6]="Trap"}(l||(l=t("ObjectType",{})));var n=function(t,i){this.x=0,this.y=0,this.x=t,this.y=i};t("obstacle",function(t){function e(i,e,l){var n;return(n=t.call(this,i,e)||this).type=void 0,n.type=l,n}return i(e,t),e}(n)),t("itemTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listItem=null,l}i(e,t);var l=e.prototype;return l.getItems=function(){return this.listItem},l.addItem=function(t){null==this.listItem&&(this.listItem=[]),this.listItem.push(t)},l.isExitItem=function(t){if(null==this.listItem)return!1;for(var i=0;i<this.listItem.length;i++)if(this.listItem[i].id==t)return!0},l.removeItem=function(t){this.listItem.splice(this.listItem.findIndex((function(i){return i.id==t})),1),0==this.listItem.length&&(this.listItem=null)},e}(n)),t("itemObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.value=void 0,r.id=l,r.value=n,r}return i(e,t),e}(n)),t("playerTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listPlayer=null,l}i(e,t);var l=e.prototype;return l.getPlayers=function(){return this.listPlayer},l.addPlayer=function(t){null==this.listPlayer&&(this.listPlayer=[]),this.listPlayer.push(t)},l.isExitPlayer=function(t){if(null==this.listPlayer)return!1;for(var i=0;i<this.listPlayer.length;i++)if(this.listPlayer[i].uid==t)return!0},l.removePlayer=function(t){this.listPlayer.splice(this.listPlayer.findIndex((function(i){return i.uid==t})),1),0==this.listPlayer.length&&(this.listPlayer=null)},e}(n)),t("playerObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).uid=void 0,r.data=void 0,r.uid=l,r.data=n,r}return i(e,t),e}(n)),t("itemSpecialObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.type=void 0,r.id=l,r.type=n,r}return i(e,t),e}(n)),t("itemSpecialTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listItemSpecial=null,l}i(e,t);var l=e.prototype;return l.getItems=function(){return this.listItemSpecial},l.addItem=function(t){null==this.listItemSpecial&&(this.listItemSpecial=[]),this.listItemSpecial.push(t)},l.isExitItem=function(t){if(null==this.listItemSpecial)return!1;for(var i=0;i<this.listItemSpecial.length;i++)if(this.listItemSpecial[i].id==t)return!0},l.removeItem=function(t){this.listItemSpecial.splice(this.listItemSpecial.findIndex((function(i){return i.id==t})),1),0==this.listItemSpecial.length&&(this.listItemSpecial=null)},e}(n)),t("trapObject",function(t){function e(i,e,l,n){var r;return(r=t.call(this,i,e)||this).id=void 0,r.type=void 0,r.id=l,r.type=n,r}return i(e,t),e}(n)),t("trapTile",function(t){function e(i,e){var l;return(l=t.call(this,i,e)||this).listTrap=null,l}i(e,t);var l=e.prototype;return l.getTraps=function(){return this.listTrap},l.addTrap=function(t){null==this.listTrap&&(this.listTrap=[]),this.listTrap.push(t)},l.isExitTrap=function(t){if(null==this.listTrap)return!1;for(var i=0;i<this.listTrap.length;i++)if(this.listTrap[i].id==t)return!0},l.removeTrap=function(t){this.listTrap.splice(this.listTrap.findIndex((function(i){return i.id==t})),1),0==this.listTrap.length&&(this.listTrap=null)},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/ObstacleCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,l,n,s,c,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Sprite,o=e.Component}],execute:function(){var a,p,u,f,y;n._RF.push({},"ef10aNmvmpCdqtZlVTWTkxm","ObstacleCell",void 0);var b=s.ccclass,h=s.property;e("ObstacleCell",(a=b("ObstacleCell"),p=h(c),a((y=t((f=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"sprite",y,l(t)),t.obstacleType=null,t}r(t,e);var n=t.prototype;return n.setSprite=function(e){this.sprite.spriteFrame=e},n.setType=function(e){this.obstacleType=e},t}(o)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/PerformanceTracking.ts",["cc","./GlobalDefine.ts","./NetworkDefine.ts","./NetworkMgr.ts"],(function(e){"use strict";var r,o,n,t;return{setters:[function(e){r=e.cclegacy},function(e){o=e.globalDefine},function(e){n=e.NetworkDefine},function(e){t=e.networkMgr}],execute:function(){r._RF.push({},"16ccfiMVyROF6MR8XwCKutx","PerformanceTracking",void 0);e("performanceTracking",new(function(){function e(){this.APPVARZ_FPS="/varz/v2/fps",this.APPVARZ_API_ERROR="/varz/v2/error"}var r=e.prototype;return r.appVazFps=function(e,r){var a=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"fps",serviceName:o.feature.featureID,value:r}];return console.log("[PerformanceTracking] FPS: ",a),t.postRequest(n.HOST+this.APPVARZ_FPS,a)},r.appVazError=function(e,r,a){var s=[{appVersion:o.deviceInfo.appVersion,osPlatform:o.osPlatform,env:o.env,flow:"home",step:e,api:"error",serviceName:o.feature.featureID,errorMessage:a,errorCode:r}];return console.log("[PerformanceTracking] Error: ",s),t.postRequest(n.HOST+this.APPVARZ_API_ERROR,s)},e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Utils.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts","./GamePlay.ts","./Input.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,h,l,c,p,u,f,m,d,v,y,g,M,b,w,P,E,C,H,T,z,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,h=t.Node,l=t.sp,c=t.Label,p=t.Layout,u=t.UITransform,f=t.Vec2,m=t.Sprite,d=t.Material,v=t.Vec3,y=t.tween,g=t.math,M=t.Component},function(t){b=t.default},function(t){w=t.utils},function(t){P=t.GamePlayEventName,E=t.EventName,C=t.SoundName},function(t){H=t.GameDefine},function(t){T=t.GameMgr},function(t){z=t.GamePlay},function(t){A=t.Input}],execute:function(){var I,L,B,D,U,S,x,O,k,F,W,_,R,G,N,J,V,q,Z,j,X,Y,K,Q,$,tt,et,it,nt,at,ot,st,rt,ht,lt,ct,pt,ut,ft;s._RF.push({},"7e9b0vEoltFEYJDBXpgwgr6","Player",void 0);var mt=r.ccclass,dt=r.property;t("Player",(I=mt("Player"),L=dt(h),B=dt(l.Skeleton),D=dt(h),U=dt(h),S=dt(l.Skeleton),x=dt(c),O=dt(h),k=dt(h),F=dt(p),W=dt(u),_=dt(u),R=dt(u),G=dt(h),N=dt(c),J=dt(h),V=dt(h),q=dt(l.Skeleton),Z=dt(h),I((Y=e((X=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"model",Y,a(e)),n(e,"animation",K,a(e)),n(e,"characterFreeze",Q,a(e)),n(e,"enemyFreeze",$,a(e)),n(e,"earnMoney",tt,a(e)),n(e,"nameLabel",et,a(e)),n(e,"navigator",it,a(e)),n(e,"enemyEmo",nt,a(e)),n(e,"hpLayout",at,a(e)),n(e,"hpBarUITrans",ot,a(e)),n(e,"hpUITrans",st,a(e)),n(e,"shieldUITrans",rt,a(e)),n(e,"hpEffect",ht,a(e)),n(e,"hpEffectLabel",lt,a(e)),n(e,"hpEffectShield",ct,a(e)),n(e,"goldArea",pt,a(e)),n(e,"goldEffect",ut,a(e)),n(e,"exploShockWave",ft,a(e)),e.isHunter=!1,e.vec2Up=new f(0,1),e.timeChangeDirectionModel=.2,e.tweenChangeDirectionModel1=null,e.tweenChangeDirectionModel2=null,e._isMainPlayer=!1,e.direction=f.ZERO,e.isFreeze=!1,e.isAttacking=!1,e.endAttackFrame=0,e.hpPoint=0,e.hpPointTemp=0,e.hpOriginWith=123,e.hpBarOriginalWidth=116,e.hpBarMinWidth=5,e.tweenHpBar=null,e.tweenHpChange=null,e.hpChangeOriginPosition=null,e.isInit=!1,e.isJoinMap=!1,e.tweenMove=null,e.tempPosition=void 0,e.mat=void 0,e.tweenDissovle=null,e}i(e,t);var s=e.prototype;return s.setName=function(t){this.nameLabel.string=w.trimName(t,2)},s.setHunter=function(t){this.isHunter=t,this.setHpColor()},s.setHpColor=function(){var t=this.hpUITrans.node.getComponent(m);this.isMainPlayer?t.color=H.BLU_COLOR:this.isHunter?t.color=H.RED_COLOR:this.isHunter==T.instance.IsHunter()?t.color=H.BLU_COLOR:t.color=H.RED_COLOR},s.onLoad=function(){this.init()},s.init=function(){this.tempPosition=this.node.position.clone(),this.hpChangeOriginPosition=this.hpEffect.position.clone(),this.animation.enabled=!0,this.mat=new d,this.mat.copy(this.animation.customMaterial),this.animation.customMaterial=this.mat,this.isInit=!0},s.update=function(t){if(this._isMainPlayer&&A.IsTouchMove){var e=w.getAngleFrom2Vec(this.vec2Up,A.Instance.delta),i=H.instance.convertRadToMoveCmd(e);T.instance.playerMove(i)}this.hpLayout.node.position=new v(-this.hpBarUITrans.width/2,this.hpLayout.node.position.y)},s.updateMoveAnimation=function(){this.animation.enabled=!0,this.changeDriectionModel(),this.playRunAnimation()},s.changeDriectionModel=function(){var t=this,e=this.direction.x;if(e>0){if(1==this.model.scale.x)return;if(this.tweenChangeDirectionModel1)return;this.tweenChangeDirectionModel1=y(this.model).to(this.timeChangeDirectionModel,{scale:new v(1,1,0)}).call((function(){t.tweenChangeDirectionModel1=null})).start()}else if(e<0){if(-1==this.model.scale.x)return;if(this.tweenChangeDirectionModel2)return;this.tweenChangeDirectionModel2=y(this.model).to(this.timeChangeDirectionModel,{scale:new v(-1,1,0)}).call((function(){t.tweenChangeDirectionModel2=null})).start()}},s.getAnimationName=function(t){var e=this.isHunter?"enemy_":"character_",i="";return this.direction.y>0&&(i="_up"),e+t+i},s.playIdleAnimaton=function(){this.playAnimation("idle")},s.playRunAnimation=function(){this.playAnimation("run")},s.playAnimation=function(t,e){void 0===e&&(e=!0),this.isAttacking||(t=this.getAnimationName(t),this.animation.animation!=t&&this.animation.setAnimation(0,t,e))},s.teleport=function(t,e){this.tempPosition=t;var i=this.node.position.clone();this.node.setPosition(e),this.isMainPlayer&&(b.emit(P.PlayerTeleport,t,i,e.clone()),b.emit(P.UpdateCamera,i)),0==this.isJoinMap?(this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tempPosition=t.clone()):this.setPositionMainPlayer(t)},s.setPositionFromServer=function(t,e){if(this.isInit){var i=new v(t,e,0);if(0==this.isJoinMap)return this.node.active=!0,this.isJoinMap=!0,this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.node.setPosition(i),void(this.tempPosition=i.clone());if(this.node.position.equals(i))this.tempPosition=i;else if(!this.tempPosition.equals(i)){var n=i.x-this.tempPosition.x,a=i.y-this.tempPosition.y;if(Math.abs(n)>H.distanceToTeleport||Math.abs(a)>H.distanceToTeleport){var o=this.node.position.clone(),s=this.tempPosition.clone();Math.abs(n)>H.distanceToTeleport&&(s.x<i.x?o.x+=H.instance.mapWidth:s.x>i.x&&(o.x-=H.instance.mapWidth)),Math.abs(a)>H.distanceToTeleport&&(s.y<i.y?o.y+=H.instance.mapHeight:s.y>i.y&&(o.y-=H.instance.mapHeight));var r=i.clone().subtract(o);return this.direction=new f(r.x,r.y),void this.teleport(i,o)}this.tempPosition=i.clone();var h=i.clone().subtract(this.node.position);this.direction=new f(h.x,h.y),this.updateMoveAnimation(),this.setPositionMainPlayer(i)}}},s.stopMoveAndSetPosition=function(t){0!=this.isJoinMap&&(this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.tempPosition=t.clone(),this.node.setPosition(t))},s.setPositionMainPlayer=function(t){var e=this;this.tweenMove&&(this.tweenMove.stop(),this.tweenMove=null),this.updateMoveAnimation(),0!=this.isJoinMap?this.tweenMove=y(this.node).to(H.instance.timePerFrameServerSecondFake,{position:t}).call((function(){e.tweenMove=null,e.playIdleAnimaton()})).start():this.node.setPosition(t)},s.setHpBarWidth=function(t,e){var i;t<this.hpBarMinWidth&&0!=t&&(t=this.hpBarMinWidth),t>this.hpBarOriginalWidth?(this.hpLayout.enabled=!0,this.shieldUITrans.node.active=!0,this.shieldUITrans.setContentSize(t-this.hpBarOriginalWidth,this.shieldUITrans.height),t=this.hpBarOriginalWidth):(this.shieldUITrans.setContentSize(0,this.shieldUITrans.height),this.shieldUITrans.node.active=!1,this.hpLayout.enabled=!1,this.hpBarUITrans.setContentSize(this.hpOriginWith,this.hpBarUITrans.height)),null==(i=this.hpUITrans)||i.setContentSize(t,this.hpUITrans.height)},s.setHp=function(t){var e=this;if(this.hpPoint!=t&&this.hpPointTemp!=t&&this.isInit){var i=t-this.hpPointTemp;0!=this.hpPointTemp&&(this.isMainPlayer&&(i<0?b.emit(E.PlaySfx,C.Burning):b.emit(E.PlaySfx,C.Healing)),this.hpChangeEffect(i,this.hpPointTemp>=this.getMaxHpPoint()&&t>=this.getMaxHpPoint())),this.hpPointTemp=t,this.tweenHpBar&&(this.tweenHpBar.stop(),this.tweenHpBar=null),this.tweenHpBar=y({hp:this.hpPoint}).to(.1,{hp:t},{onUpdate:function(t,i){var n=e.hpBarOriginalWidth*t.hp/e.getMaxHpPoint();e.setHpBarWidth(n),t.hp<e.hpPoint&&e.isMainPlayer&&b.emit(P.LostHp)}}).call((function(){e.hpPoint=t,e.tweenHpBar=null})).start()}},s.hpChangeEffect=function(t,e){var i=this;void 0===e&&(e=!1),this.tweenHpChange&&(this.tweenHpChange.stop(),this.tweenHpChange=null),this.hpEffect.active=!0,t<0?(this.hpEffectLabel.color=H.RED_COLOR,this.hpEffectLabel.string=t.toString()):(this.hpEffectLabel.color=H.BLU_COLOR,this.hpEffectLabel.string="+"+t.toString()),e?(t>0&&(this.hpEffectLabel.color=H.GREEN_LIGHT_COLOR),this.hpEffectShield.active=!0):(this.hpEffectShield.active=!1,this.shieldUITrans.setContentSize(0,this.shieldUITrans.height)),this.tweenHpChange=y(this.hpEffect).by(.5,{position:new v(0,30)}).call((function(){i.hpEffect.active=!1,i.hpEffect.setPosition(i.hpChangeOriginPosition)})).start()},s.refeshHpBar=function(){var t=this.hpBarOriginalWidth*this.hpPoint/this.getMaxHpPoint();this.setHpBarWidth(t,!0)},s.resetHpBar=function(){this.shieldUITrans.setContentSize(0,this.shieldUITrans.height),this.hpUITrans.setContentSize(this.hpBarOriginalWidth,this.hpUITrans.height),this.hpLayout.enabled=!0,this.hpEffect.setPosition(this.hpChangeOriginPosition)},s.getHpPoint=function(){return this.hpPoint},s.getMaxHpPoint=function(){return H.instance.getMaxHpPoint(this.isHunter)},s.setFrezze=function(t){this.isFreeze!=t&&this.isInit&&(this.isFreeze=t,t?(this.animation.enabled=!1,this.isHunter?this.enemyFreeze.active=!0:this.characterFreeze.active=!0):(this.animation.enabled=!0,this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.playIdleAnimaton()))},s.dead=function(t){void 0===t&&(t=null),this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.dissovle(.5,t)},s.earnMoneyEffect=function(){var t=this;this.earnMoney.node.active=!0,this.earnMoney.setAnimation(0,"character_run_earn_money",!1),this.earnMoney.setCompleteListener((function(){t.earnMoney.node.active=!1}))},s.playEnemyAttack=function(){var t=this;this.playAnimation("atk",!1),this.isAttacking=!0,this.animation.setCompleteListener((function(){t.isAttacking=!1}))},s.setAttack=function(t){this.endAttackFrame!=t&&this.isInit&&(this.endAttackFrame=t,this.playEnemyAttack(),this.isMainPlayer&&(z.instance.player.playEnemyAttack(),b.emit(E.PlaySfx,C.Bite)))},s.setCanAttack=function(t){this.isHunter&&t?this.enemyEmo.active=!0:this.enemyEmo.active=!1},s.setGoldArea=function(t){var e;if(t>H.instance.playerGoldDisplayerMin){this.goldArea.active=!0;var i=t/H.instance.playerGoldDisplayer;i=g.clamp(i,0,1),e=(H.playerGoldAreaMax-H.playerGoldAreaMin)*i+H.playerGoldAreaMin,this.goldArea.setScale(e,e)}else this.goldArea.active=!1},s.setExploShockwave=function(t,e){var i=this;if(void 0===e&&(e=0),this.exploShockWave.active=t,t){var n=e*H.instance.cellUnit*2/250;this.goldEffect.node.active=!0,this.goldEffect.setAnimation(0,"boom",!1),this.goldEffect.setCompleteListener((function(){i.goldEffect.node.active=!1})),this.exploShockWave.active=!0,y(this.exploShockWave).set({scale:v.ZERO}).to(.3,{scale:new v(n,n,1)},{easing:"sineOut"}).call((function(){i.exploShockWave.active=!1})).start()}},s.setBeHitEffect=function(){var t=this;this.goldEffect.node.active=!0,this.goldEffect.setAnimation(0,"hit",!1),this.goldEffect.setCompleteListener((function(){t.goldEffect.node.active=!1}))},s.switchRole=function(t){var e=this;void 0===t&&(t=!1),this.isHunter!=t&&(this.playIdleAnimaton(),this.setHunter(!this.isHunter),this.dissovle(.25,(function(){e.refeshHpBar(),e.playIdleAnimaton(),e.undissovle(.25,null)})))},s.dissovle=function(t,e){var i=this;this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=y({value:0}).to(t,{value:1},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,e&&e()})).start()},s.undissovle=function(t,e){var i=this;this.tweenDissovle&&(this.tweenDissovle.stop(),this.tweenDissovle=null),this.tweenDissovle=y({value:1}).to(t,{value:0},{onUpdate:function(t,e){i.mat.setProperty("dissolveThreshold",t.value),i.animation.customMaterial=i.mat}}).call((function(){i.tweenDissovle=null,e&&e()})).start()},s.reset=function(){this.isInit||this.init(),this.animation.enabled=!0,this.mat.setProperty("dissolveThreshold",0),this.animation.customMaterial=this.mat,this.enemyFreeze.active=!1,this.characterFreeze.active=!1,this.isFreeze=!1,this.hpPoint=0,this.hpPointTemp=0,this.exploShockWave.active=!1,this.resetHpBar()},o(e,[{key:"isMainPlayer",get:function(){return this._isMainPlayer},set:function(t){this.navigator.active=t,this._isMainPlayer=t}}]),e}(M)).prototype,"model",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(X.prototype,"animation",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(X.prototype,"characterFreeze",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(X.prototype,"enemyFreeze",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(X.prototype,"earnMoney",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(X.prototype,"nameLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(X.prototype,"navigator",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(X.prototype,"enemyEmo",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(X.prototype,"hpLayout",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(X.prototype,"hpBarUITrans",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(X.prototype,"hpUITrans",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(X.prototype,"shieldUITrans",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(X.prototype,"hpEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(X.prototype,"hpEffectLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(X.prototype,"hpEffectShield",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(X.prototype,"goldArea",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(X.prototype,"goldEffect",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(X.prototype,"exploShockWave",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=X))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeMgr.ts","./Utils.ts"],(function(t){"use strict";var e,i,n,a,r,s,c,o,l,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Label,o=t.Sprite,l=t.Component},function(t){u=t.TimeMgr},function(t){m=t.utils}],execute:function(){var p,h,T,f,d,g,y;r._RF.push({},"7c578+IJnBFuayyZWz6dxep","PlayerAttack",void 0);var k=s.ccclass,A=s.property;t("PlayerAttack",(p=k("PlayerAttack"),h=A(c),T=A(o),p((g=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"countDown",g,a(e)),n(e,"spriteOnAttack",y,a(e)),e.endTime=0,e.isStopAtack=!1,e.maxRatio=.8,e.maxTime=0,e}i(e,t);var r=e.prototype;return r.start=function(){this.node.active=!1},r.stopAttack=function(t){this.isStopAtack||(this.isStopAtack=!0,this.node.active=!0,this.endTime=u.instance.getFrameTime(t),this.maxTime=this.endTime-u.instance.currentGameTime,console.log("currentTime: "+m.getTime(new Date(u.instance.currentGameTime))+" endTime: "+m.getTime(new Date(this.endTime))))},r.update=function(){if(this.isStopAtack)if(u.instance.currentGameTime>=this.endTime)this.reset();else{var t=this.endTime-u.instance.currentGameTime;this.countDown.string=Math.ceil(t/1e3).toString();var e=(this.maxTime-t)/this.maxTime;this.spriteOnAttack.fillRange=this.maxRatio*e}},r.reset=function(){this.isStopAtack=!1,this.node.active=!1,this.countDown.string="0",this.spriteOnAttack.fillRange=0},e}(l)).prototype,"countDown",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(d.prototype,"spriteOnAttack",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerDead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GameEvent.ts","./GlobalDefine.ts","./TimeMgr.ts","./Define.ts","./GameMgr.ts","./TextDefine.ts"],(function(e){"use strict";var t,i,n,a,r,s,o,u,l,c,h,f,m,p,b,g,d,y,D,S,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.Label,u=e.Node,l=e.UITransform,c=e.Mask,h=e.tween,f=e.Size,m=e.Component},function(e){p=e.maxApiUtils},function(e){b=e.default},function(e){g=e.globalDefine},function(e){d=e.TimeMgr},function(e){y=e.EventName,D=e.SoundName},function(e){S=e.GameMgr},function(e){v=e.TextDefine}],execute:function(){var k,z,E,F,P,T,A,L,I,N,w,x,M;r._RF.push({},"0082dpFjKVCAqeEH9MAKrTP","PlayerDead",void 0);var O,C=s.ccclass,U=s.property;!function(e){e[e.NONE=0]="NONE",e[e.DEAD=1]="DEAD",e[e.ALIVE=2]="ALIVE"}(O||(O={}));e("PlayerDead",(k=C("PlayerDead"),z=U(o),E=U(u),F=U(u),P=U(o),T=U(o),k((I=t((L=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"timeout",I,a(t)),n(t,"farmerFreeze",N,a(t)),n(t,"hunterFreeze",w,a(t)),t.maskTransform=null,t.mask=null,t.state=O.NONE,t.endTime=0,t.isInit=!1,n(t,"mainLabel",x,a(t)),n(t,"subLabel",M,a(t)),t}i(t,e);var r=t.prototype;return r.init=function(){var e=this;this.isInit||(this.maskTransform=this.node.getComponent(l),this.mask=this.node.getComponent(c),p.isBrowser&&this.node.on("click",this.onFakeShake,this),b.on(y.onPlayerWakeUp,(function(){e.setState(O.ALIVE)}),this),this.isInit=!0,this.mainLabel.string=v.textConfig.PlayerDeadText.mainLabel,this.subLabel.string=v.textConfig.PlayerDeadText.subLabel)},r.onDead=function(e){this.state==O.NONE&&(b.emit(y.PlaySfx,D.Freeze),this.init(),this.node.active=!0,S.instance.IsHunter()?(this.hunterFreeze.active=!0,this.farmerFreeze.active=!1):(this.farmerFreeze.active=!0,this.hunterFreeze.active=!1),this.endTime=d.instance.getFrameTime(e),this.setState(O.DEAD))},r.onFakeShake=function(){this.state==O.DEAD&&this.Shaking()},r.setStatusPlayer=function(e){var t=this;this.isInit&&(!e&&S.instance.isPlaying&&b.emit(y.PlaySfx,D.Unfreeze),this.mask.inverted=!e,h(this.maskTransform).set({contentSize:new f(0,0)}).to(.3,{contentSize:new f(2500,2500)}).call((function(){t.node.active=e,e||t.setState(O.NONE)})).start())},r.OnReceiveShakeInfo=function(e){var t=e.x,i=e.y,n=e.z,a=Math.sqrt(t*t+i*i+n*n);(g.isIOS?a>=2:a>=20)&&1==this.node.active&&this.Shaking()},r.setState=function(e){if(this.state!=e)switch(this.state=e,this.state){case O.DEAD:this.setStatusPlayer(!0),p.registerShaking(this.OnReceiveShakeInfo.bind(this));break;case O.ALIVE:this.setStatusPlayer(!1),p.unRegisterShaking()}},r.update=function(e){switch(this.state){case O.DEAD:var t=(this.endTime-d.instance.currentGameTime)/1e3;if((t=Math.ceil(t))<=0)return void this.setState(O.ALIVE);this.timeout.string=t.toString()+"s"}},r.Shaking=function(){S.instance.playerWakeUp()},r.reset=function(){this.setStatusPlayer(!1),this.timeout.string="0s",this.farmerFreeze.active=!1,this.hunterFreeze.active=!1},t}(m)).prototype,"timeout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"farmerFreeze",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(L.prototype,"hunterFreeze",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(L.prototype,"mainLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"subLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=L))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts","./GameDefine.ts","./GamePlay.ts","./Player.ts"],(function(e){"use strict";var n,i,t,a,r,l,o,s,c,y,u,p,P,f,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Prefab,s=e.NodePool,c=e.instantiate,y=e.Vec3,u=e.Component},function(e){p=e.profile},function(e){P=e.GameDefine},function(e){f=e.GamePlay},function(e){d=e.Player}],execute:function(){var g,m,v,b,h;r._RF.push({},"05c97T+GqtDTo8sqfbQVP7P","PlayerManager",void 0);var M=l.ccclass,D=l.property;e("PlayerManager",(g=M("PlayerManager"),m=D(o),g((h=n((b=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return n=e.call.apply(e,[this].concat(r))||this,t(n,"playerPrefab",h,a(n)),n.playerPool=new s,n}i(n,e);var r=n.prototype;return r.onLoad=function(){for(var e=0;e<5;e++)this.playerPool.put(c(this.playerPrefab))},r.initPlayer=function(e,n,i,t){void 0===i&&(i=null),console.log("initPlayer",e);var a=this.getPlayer(),r=!1;i?(a.setPosition(i),r=!0):a.setPosition(new y(1e4,1e4)),a.name=e.uid,n.addPlayer(a),a.active=!0;var l=a.getComponent(d);l.isJoinMap=r,e.uid==p.Uid?(f.instance.player=l,l.isMainPlayer=!0,a.setSiblingIndex(-1)):(l.isMainPlayer=!1,a.setSiblingIndex(0)),l.setHunter(e.isHunter),l.setName(e.displayName),l.playIdleAnimaton(),l.reset()},r.initPlayerJoin=function(e,n){if(console.log("initPlayerJoin",e),e.uid!=p.Uid){var i=this.getPlayer();i.name=e.uid,i.active=!0,n.addPlayer(i),i.setPosition(new y(e.x*P.instance.cellUnit,e.y*P.instance.cellUnit)),i.setSiblingIndex(0);var t=i.getComponent(d);t.isJoinMap=!1,t.isMainPlayer=!1,t.setName(e.displayName),t.setHunter(e.isHunter),t.playIdleAnimaton(),t.reset()}},r.getPlayer=function(){return this.playerPool.size()>0?this.playerPool.get():c(this.playerPrefab)},n}(u)).prototype,"playerPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,s,c,l,a,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Button,l=t.Node,a=t.Vec3,u=t.tween,p=t.Component}],execute:function(){var h,f,d,v,b,y,C;r._RF.push({},"8f361kJtmhHtZkJqTzh3frO","Popup",void 0);var m=s.ccclass,g=s.property;t("Popup",(h=m("Popup"),f=g(c),d=g(l),h((y=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"btnClose",y,o(e)),i(e,"container",C,o(e)),e.onClose=null,e}n(e,t);var r=e.prototype;return r.start=function(){var t;null==(t=this.btnClose)||t.node.on("click",this.OnCloseClick.bind(this))},r.OnCloseClick=function(){var t;null==(t=this.onClose)||t.call(this),this.hide()},r.show=function(t){var e=this;void 0===t&&(t=!1),this.node.active=!0,this.container.setScale(a.ZERO),u(this.container).to(.5,{scale:new a(1,1,1)},{easing:"bounceInOut"}).start(),t&&setTimeout((function(){e.hide()}),3e3)},r.hide=function(t){void 0===t&&(t=!0),this.node.active=!1,t&&(this.node.removeFromParent(),this.node.destroy())},e}(p)).prototype,"btnClose",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(b.prototype,"container",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/PopupConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Popup.ts","./PopupMgr.ts"],(function(t){"use strict";var e,n,i,o,l,r,a,u,s,c,p,b,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,a=t.Label,u=t.Button,s=t.Node,c=t.Sprite,p=t.SpriteFrame},function(t){b=t.PopupName},function(t){h=t.Popup},function(t){f=t.PopupMgr}],execute:function(){var y,k,g,d,C,B,v,S,m,L,w,z,O,P,N,Y,T,F,I,D,_,M,G,R,j,x,A;l._RF.push({},"d5dd5wf3z1PYJgXtTokFCvv","PopupConfig",void 0);var H,J=r.ccclass,X=r.property;!function(t){t[t.Ok=0]="Ok",t[t.YesNo=1]="YesNo"}(H||(H={}));t("PopupConfig",(y=J("PopupConfig"),k=X(a),g=X(a),d=X(u),C=X(u),B=X(u),v=X(s),S=X(a),m=X(a),L=X(a),w=X(a),z=X(c),O=X(p),y((Y=e((N=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"title",Y,o(e)),i(e,"description",T,o(e)),i(e,"yesBtn",F,o(e)),i(e,"noBtn",I,o(e)),i(e,"okBtn",D,o(e)),i(e,"btnLayout",_,o(e)),e.okCallback=null,e.yesCallback=null,e.noCallback=null,i(e,"headerLabel",M,o(e)),i(e,"buttonLabel",G,o(e)),i(e,"yesButtonLabel",R,o(e)),i(e,"noButtonLabel",j,o(e)),i(e,"ghostSprite",x,o(e)),i(e,"ghostSpriteframes",A,o(e)),e}n(e,t);var l=e.prototype;return l.start=function(){t.prototype.start.call(this),this.yesBtn.node.on("click",this.OnYesClick.bind(this)),this.noBtn.node.on("click",this.OnNoClick.bind(this)),this.okBtn.node.on("click",this.OnOkClick.bind(this))},l.OnOkClick=function(){this.okCallback&&this.okCallback(),this.hide()},l.OnYesClick=function(){this.yesCallback&&this.yesCallback(),this.hide()},l.OnNoClick=function(){this.noCallback&&this.noCallback(),this.hide()},l.SetInfo=function(t){this.description.string=t.descriptionLabel,this.title.string=t.titleLabel},l.SetTypeOk=function(t){this.okCallback=t,this.SetType(H.Ok)},l.SetTypeYesNo=function(t,e,n,i){this.yesCallback=n,this.noCallback=i,this.yesButtonLabel.string=t,this.noButtonLabel.string=e,this.SetType(H.YesNo)},l.SetType=function(t){switch(this.noBtn.node.active=!1,this.yesBtn.node.active=!1,this.okBtn.node.active=!1,t){case H.Ok:this.okBtn.node.active=!0,this.btnLayout.active=!1;break;case H.YesNo:this.btnLayout.active=!0,this.noBtn.node.active=!0,this.yesBtn.node.active=!0}},l.setGhostStatus=function(t){this.ghostSprite.spriteFrame=this.ghostSpriteframes[t]},e.Show=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),f.Instance){var i=f.Instance.Show(b.PopupConfig,e);return null==i||i.SetInfo(t),null==i||i.setGhostStatus(n),i}},e}(h)).prototype,"title",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(N.prototype,"description",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"yesBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(N.prototype,"noBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(N.prototype,"okBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"btnLayout",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"headerLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(N.prototype,"buttonLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(N.prototype,"yesButtonLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(N.prototype,"noButtonLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(N.prototype,"ghostSprite",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(N.prototype,"ghostSpriteframes",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=N))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/PopupMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts","./Popup.ts"],(function(n){"use strict";var e,t,o,i,r,a,s,c,u,p,f,l,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized,r=n.createClass},function(n){a=n.cclegacy,s=n._decorator,c=n.Prefab,u=n.instantiate,p=n.Component},function(n){f=n.PopupName},function(n){l=n.utils},function(n){h=n.Popup}],execute:function(){var d,g,v,P,b,m;a._RF.push({},"8203bcYBqBDwZg65M1oBkCP","PopupMgr",void 0);var y=s.ccclass,C=s.property;n("PopupMgr",(d=y("PopupMgr"),g=C(c),d(((m=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,o(e,"prefabs",b,i(e)),e}t(e,n);var a=e.prototype;return a.start=function(){e.instance=this,this.Load()},a.Show=function(n,e){if(void 0===e&&(e=null),!this.node.getChildByName(n)){var t=this.prefabs.find((function(e){return e.data.name==n}));if(t){var o=u(t).getComponent(h);return e&&(o.onClose=e),o.node.setParent(this.node),o.node.name=n,o.show(),o}}},a.Hide=function(n){this.node.children.forEach((function(e){e.name==n&&e.getComponent(h).hide()}))},a.hideAll=function(){this.node.children.forEach((function(n){n.active&&n.getComponent(h).hide()}))},a.IsContain=function(n){var e=!1;return this.prefabs.forEach((function(t){t.data.name!=n||(e=!0)})),e},a.IsShow=function(n){var e=this.node.children.find((function(e){return e.name==n}));return e&&e.active},a.Load=function(){var n=this;Object.keys(f).forEach((function(e){n.IsContain(e)||l.getPrefabRes("prefabs/popups/"+e,(function(t){t?(n.prefabs.push(t),console.log("Popup loaded: "+e)):console.error("Popup loaded fail: "+e)}))}))},r(e,null,[{key:"Instance",get:function(){return e.instance}}]),e}(p)).instance=null,b=e((P=m).prototype,"prefabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=P))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/ProcessContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./TextDefine.ts","./GlobalDefine.ts","./Rotation.ts","./PopupMgr.ts"],(function(t){"use strict";var e,i,n,o,r,s,c,a,u,l,p,f,h,g,b,S,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Button,a=t.Sprite,u=t.SpriteFrame,l=t.Label,p=t.Vec3,f=t.Component},function(t){h=t.PopupName},function(t){g=t.TextDefine},function(t){b=t.profile},function(t){S=t.Rotation},function(t){d=t.PopupMgr}],execute:function(){var m,P,y,k,x,F,I,v,D,T,w,C,z,B,E;r._RF.push({},"e1067q4QEJN0a306NOv7BPw","ProcessContent",void 0);var R,_=s.ccclass,L=s.property;!function(t){t[t.Processing=0]="Processing",t[t.Success=1]="Success",t[t.Fail=2]="Fail"}(R||(R={}));t("ProcessContent",(m=_("ProcessContent"),P=L(c),y=L(a),k=L(u),x=L(u),F=L(u),I=L(l),m((T=e((D=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).state=null,n(e,"okButton",T,o(e)),n(e,"iconSprite",w,o(e)),n(e,"processIcon",C,o(e)),n(e,"successIcon",z,o(e)),n(e,"failIcon",B,o(e)),n(e,"description",E,o(e)),e}i(e,t);var r=e.prototype;return r.start=function(){this.setState(R.Processing)},r.setState=function(t){switch(this.state=t,this.state){case R.Processing:this.okButton.node.active=!1,this.iconSprite.spriteFrame=this.processIcon,this.description.string=g.textConfig.ExchangeTicketText.processingDescription;break;case R.Success:this.iconSprite.spriteFrame=this.successIcon,this.description.string=g.textConfig.ExchangeTicketText.successDescription;break;case R.Fail:this.iconSprite.spriteFrame=this.failIcon,this.description.string=g.textConfig.ExchangeTicketText.failDescription}},r.setResult=function(t){t?this.setState(R.Success):this.setState(R.Fail),this.okButton.node.active=!0,this.okButton.node.on("click",(function(){d.Instance.Hide(h.ExchangeTicket),b.updateProfile()}),this),this.iconSprite.getComponent(S).enabled=!1,this.iconSprite.node.setRotationFromEuler(p.ZERO)},e}(f)).prototype,"okButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(D.prototype,"iconSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(D.prototype,"processIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(D.prototype,"successIcon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(D.prototype,"failIcon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(D.prototype,"description",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Profile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts","./GameEvent.ts","./MaxApiUtils.ts","./GameApi.ts","./NetworkDefine.ts","./PopupConfig.ts","./Define.ts","./GameMgr.ts","./TextDefine.ts"],(function(e){"use strict";var t,n,i,r,s,o,u,a,c,f,l,h,p,m,g;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator},function(e){i=e.cclegacy,r=e.log},function(e){s=e.maxApiUtils,o=e.MaxApiName},function(e){u=e.default},function(e){a=e.default},function(e){c=e.gameApi},function(e){f=e.NetworkDefine},function(e){l=e.PopupConfig},function(e){h=e.EventName,p=e.GhostStatusPopup},function(e){m=e.GameMgr},function(e){g=e.TextDefine}],execute:function(){i._RF.push({},"a294f7m3ZhJL5sqSxj8VgN4","Profile",void 0);e("Profile",function(){function e(){this.devToken=f.DEBUG_TOKEN,this.userId=void 0,this.userToken=void 0,this.name=void 0,this.isOk=!1,this.avatar="",this.money=0,this.ticket=0}var i=e.prototype;return i.init=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n,i,u,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.request(o.getProfile);case 2:t=e.sent,i=(n=t||{}).userId,u=n.token,a=n.name,this.userId=i||this.devToken,this.userToken=u||this.devToken,this.name=a||"Dev Player",r("[Profile] init: ",t),this.isOk=!0;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.updateProfile=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getProfile();case 2:(t=e.sent)?(console.log("[Profile] get from server: ",JSON.stringify(t.result)),this.avatar=t.result.avartar,this.money=t.result.balanceMoney,this.ticket=t.result.turn,u.emit(h.onUpdateProfile)):null!=(n=m.instance)&&n.cheatBypassSubtractTurn||(i=g.textConfig.GetProfileFailPopupText,null==(r=l.Show(i,null,p.Error))||r.SetTypeYesNo("Thử lại","Thoát game",(function(){s.updateProfile()}),(function(){a.closeGame()})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t(e,[{key:"UserName",get:function(){return this.name}},{key:"Uid",get:function(){return this.userId},set:function(e){this.userId=e}},{key:"BalanceMoney",get:function(){return this.money}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"316b6Tkd2lDBLR3fHnQPy6y","Random",void 0);t("Random",function(){function t(){this.seed=123456789,this.x=123456789,this.y=362436069,this.z=521288629,this.max_int=2147483647,this.int_to_float=1/2147483647}var n=t.prototype;return n.random=function(){var t=this,n={nextFloat:null,nextInt:null,rangeFloat:null,rangeInt:null},r=function(){t.x=t.x^t.x<<16,t.x=t.x^t.x>>5,t.x=t.x^t.x<<1;var n=t.x;return t.x=t.y,t.y=t.z,t.z=n^t.x^t.y,t.z};return n.nextFloat=function(){var n=(r()&t.max_int)*t.int_to_float;return n>0?n:-n},n.nextInt=function(){var t=r();return t>0?t:-t},n.rangeFloat=function(t,r){var e=r-t;return t+n.nextFloat()*e},n.rangeInt=function(t,r){var e=r-t;return t+n.nextInt()%e},n},n.getRandomMap=function(t,n,r){this.seed=t,this.x=this.seed;for(var e=this.random(),u=n*r,a=Math.round(.25*u),i=[],o=0;o<r;o++){for(var x=[],s=0;s<n;s++)x.push(1);i.push(x)}for(var f=function(t,n){return{x:t-1,y:n}},c=function(t,n){return{x:t+1,y:n}},h=function(t,n){return{x:t,y:n+1}},v=function(t,n){return{x:t,y:n-1}};a>0;)for(var l=[{x:e.nextInt()%n,y:e.nextInt()%r}];l.length>0&&a>0;){var y=l.shift(),d=y.x%n;d<0&&(d+=n);var p=y.y%r;if(p<0&&(p+=r),1==i[p][d]&&(i[p][d]=0,a-=1),e.nextInt()<536870912){var I=f(d,p);l.push(I)}if(e.nextInt()<536870912){var m=v(d,p);l.push(m)}if(e.nextInt()<536870912){var _=c(d,p);l.push(_)}if(e.nextInt()<536870912){var g=h(d,p);l.push(g)}}return i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RankCell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(e){"use strict";var n,t,r,i,o,l,a,c,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label,c=e.Component},function(e){u=e.utils}],execute:function(){var s,p,f,y,h,b,m;o._RF.push({},"51832GlV1pM+bVknPSvbTYc","RankCell",void 0);var g=l.ccclass,v=l.property;e("RankCell",(s=g("RankCell"),p=v(a),f=v(a),s((b=n((h=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return n=e.call.apply(e,[this].concat(o))||this,r(n,"phone",b,i(n)),r(n,"money",m,i(n)),n}return t(n,e),n.prototype.updateCell=function(e,n){this.phone.string=u.formatPlayerPhoneNumber(e),this.money.string=u.formatScore(n)},n}(c)).prototype,"phone",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(h.prototype,"money",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Ranking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./GameEvent.ts","./Popup.ts","./RankCell.ts"],(function(t){"use strict";var n,e,i,o,a,r,l,c,u,s,f,h,p,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,c=t.Button,u=t.instantiate},function(t){s=t.EventName},function(t){f=t.GameMgr},function(t){h=t.default},function(t){p=t.Popup},function(t){g=t.RankCell}],execute:function(){var b,k,d,v,y,R,B,m,w,P,z;a._RF.push({},"d4a66qhvfBKzJ7siEwT8vAr","Ranking",void 0);var C=r.ccclass,E=r.property;t("Ranking",(b=C("Ranking"),k=E(l),d=E(l),v=E(c),y=E(c),b((m=n((B=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"content",m,o(n)),i(n,"rankCellPrefab",w,o(n)),i(n,"blackBg",P,o(n)),i(n,"closeButton",z,o(n)),n}e(n,t);var a=n.prototype;return a.start=function(){var n=this;this.blackBg.node.on("click",(function(){t.prototype.hide.call(n)}),this),this.closeButton.node.on("click",(function(){t.prototype.hide.call(n)}),this),this.initRanking(),h.on(s.onResRanking,this.loadRanking,this)},a.initRanking=function(){this.content.children.length<10&&(u(this.rankCellPrefab).setParent(this.content),this.initRanking())},a.show=function(){var n=this;t.prototype.show.call(this),f.instance.reqRankingBoard(0,9),this.blackBg.interactable=!1,this.closeButton.interactable=!1,setTimeout((function(){n.blackBg.interactable=!0,n.closeButton.interactable=!0}),1e3),this.content.children.forEach((function(t){t.active=!1}))},a.loadRanking=function(t){var n=t.uid,e=t.money;this.content.children.forEach((function(t,i){i<n.length&&(t.active=!0,t.getComponent(g).updateCell(n[i],e[i]))}))},n}(p)).prototype,"content",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(B.prototype,"rankCellPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(B.prototype,"blackBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(B.prototype,"closeButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=B))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/RemoteImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ImageCache.ts"],(function(e){"use strict";var t,o,r,i,n,a,c,m,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,c=e.Enum,m=e.Sprite,p=e.log,l=e.Component},function(e){u=e.default}],execute:function(){var g,s,b,d,h,f,v,_,w,y,R,I,z,k;e("RemoteDefine",void 0),n._RF.push({},"cae799u15NAhb4aNJ7KkvYX","RemoteImage",void 0);var L,N,S=a.ccclass,B=a.property,D=a.executeInEditMode;!function(e){e.background="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/background.png",e.wheel_bottom="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_bottom_2.png",e.header_logo="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/header_logo_2.png",e.wheel="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel.png",e.wheel_border="https://img.mservice.com.vn/app/img/Gamification/cocos/template2d/wheel_border_2.png"}(L||(L=e("RemoteDefine",{}))),function(e){e[e.background=0]="background",e[e.wheel_bottom=1]="wheel_bottom",e[e.header_logo=2]="header_logo",e[e.wheel=3]="wheel",e[e.wheel_border=4]="wheel_border"}(N||(N={}));e("RemoteImage",(g=S("RemoteImage"),s=D(!0),b=B({type:c(N)}),d=B({group:{name:"9-Slicing"},type:Number}),h=B({group:{name:"9-Slicing"},type:Number}),f=B({group:{name:"9-Slicing"},type:Number}),v=B({group:{name:"9-Slicing"},type:Number}),g(_=s((y=t((w=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"image",y,i(t)),r(t,"borderTop",R,i(t)),r(t,"borderBottom",I,i(t)),r(t,"borderLeft",z,i(t)),r(t,"borderRight",k,i(t)),t}return o(t,e),t.prototype.start=function(){var e=this,t=this.getComponent(m),o=L[N[this.image]];u.request(o).then((function(o){o.insetTop=e.borderTop,o.insetBottom=e.borderBottom,o.insetLeft=e.borderLeft,o.insetRight=e.borderRight,t.spriteFrame=o})),p("[RemoteImage] "+this.node.name+" load "+o)},t}(l)).prototype,"image",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(w.prototype,"borderTop",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(w.prototype,"borderBottom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(w.prototype,"borderLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(w.prototype,"borderRight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=w))||_)||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./TextDefine.ts","./GameEvent.ts","./Screen.ts","./ScreenMgr.ts"],(function(e){"use strict";var t,n,i,o,r,a,l,s,c,u,f,y,p,b,m,h,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Color,c=e.Vec3,u=e.tween},function(e){f=e.EventName,y=e.SoundName,p=e.ScreenName},function(e){b=e.GameMgr},function(e){m=e.TextDefine},function(e){h=e.default},function(e){g=e.Screen},function(e){d=e.ScreenMgr}],execute:function(){var L,w,M,S,v,x,E,R,D,z,C;r._RF.push({},"ecf9eYH8PJGXLvYIxUgZeYy","Result",void 0);var I=a.ccclass,T=a.property;e("Result",(L=I("Result"),w=T(l),M=T(l),S=T(l),v=T(l),L((R=t((E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"moneyLabel",R,o(t)),t.tweenMoneyEffect=null,i(t,"mainLabel",D,o(t)),i(t,"subLabel",z,o(t)),i(t,"description",C,o(t)),t}n(t,e);var r=t.prototype;return r.show=function(){e.prototype.show.call(this),this.tweenMoney(b.instance.endInfo.money),h.emit(f.StopMusic),h.emit(f.PlaySfx,y.Endgame),this.mainLabel.string=m.textConfig.ResultText.mainLabel,this.subLabel.string=m.textConfig.ResultText.subLabel,this.description.string=m.textConfig.ResultText.description},r.hide=function(){e.prototype.hide.call(this),h.emit(f.StartMuSic)},r.tweenMoney=function(e){var t=this;this.moneyLabel.string="9999999",this.moneyLabel.color=s.RED,this.tweenMoneyEffect&&(this.tweenMoneyEffect.stop(),this.tweenMoneyEffect=null),this.moneyLabel.node.parent.setScale(new c(1.1,1.1)),this.tweenMoneyEffect=u({money:parseInt(this.moneyLabel.string)}).delay(.5).to(1.3,{money:e},{onUpdate:function(e,n){var i=Math.round(e.money);parseInt(t.moneyLabel.string)!=i&&(t.moneyLabel.string=i.toString())},easing:"sineIn"}).delay(.1).call((function(){t.tweenMoneyEffect=null,t.moneyLabel.color=new s("#9CF715"),t.moneyLabel.node.parent.setScale(c.ONE)})).start()},r.onClick=function(){this.hide(),d.instance.show(p.Menu)},t}(g)).prototype,"moneyLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"mainLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"subLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(E.prototype,"description",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=E))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/Rotation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.CCFloat,c=e.Vec3,u=e.Component}],execute:function(){var s,p,d,f,h,y,g;o._RF.push({},"a7d3a3PqslFMrquqCOy6rhZ","Rotation",void 0);var b=a.ccclass,v=a.property;e("Rotation",(s=b("Rotation"),p=v(l),d=v(c),s((y=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"speed",y,n(t)),i(t,"direction",g,n(t)),t.eulerAngle=new c,t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){this.eulerAngle.subtract(this.direction.normalize().multiplyScalar(this.speed*e)),this.node.eulerAngles=this.eulerAngle},t}(u)).prototype,"speed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=t(h.prototype,"direction",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,1)}}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/Screen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,i,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.UIOpacity,r=e.tween,c=e.Component}],execute:function(){var s;n._RF.push({},"ef121KIw5RCYp5xIXtW1PZ6","Screen",void 0);var a=o.ccclass;o.property,e("Screen",a("Screen")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).tweenTime=.3,t}t(n,e);var o=n.prototype;return o.show=function(e){void 0===e&&(e=!0),this.node.active=!0,this.node.setSiblingIndex(-1);var t=this.node.getComponent(i);t||(t=this.node.addComponent(i)),e&&r(t).set({opacity:0}).to(this.tweenTime,{opacity:255},{easing:"fade"}).start()},o.hide=function(){this.node.active=!1},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Screen.ts"],(function(e){"use strict";var n,t,r,i,o,a,c,s,u,f,l,h,d,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,s=e.Prefab,u=e.assetManager,f=e.resources,l=e.instantiate,h=e.Component},function(e){d=e.ScreenName},function(e){p=e.Screen}],execute:function(){var g,b,m,v,y,S,C,P,w,M;o._RF.push({},"5bd31koSOhMa6X+466ujhHt","ScreenMgr",void 0);var z=a.ccclass,L=a.property;e("ScreenMgr",(g=z("ScreenMgr"),b=L(c),m=L(c),v=L(s),g(((M=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,r(n,"Container",C,i(n)),r(n,"scenes",P,i(n)),r(n,"loadingPrefab",w,i(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){n.instance=this},o.isShow=function(e){var n=this.scenes.find((function(n){return n.name==e}));return n&&n.active},o.isLoaded=function(e){return this.scenes.find((function(n){return n.name==e}))},o.show=function(e){var n=this.scenes.find((function(n){return n.name==e}));return n&&!n.active&&n.getComponent(p).show(),n},o.hide=function(e){var n=this,t=this.scenes.find((function(n){return n.name==e}));t&&(t.getComponent(p).hide(),e==d.Loading&&setTimeout((function(){u.releaseAsset(n.loadingPrefab),t.destroy(),t.removeFromParent()}),4e3))},o.hideAll=function(){this.scenes.forEach((function(e){e.active&&e.getComponent(p).hide()}))},o.isContain=function(e){var n=!1;return this.scenes.forEach((function(t){t.name!=e||(n=!0)})),n},o.load=function(){var e=this;Object.keys(d).forEach((function(n){e.isContain(n)||f.load("prefabs/screens/"+n,(function(t,r){if(r){var i=l(r);i.active=!1,i.name=n,i.setParent(e.Container),e.scenes.push(i),console.log("Screen loaded: "+n)}else console.error("Screen prefab notfound: "+n)}))}))},n}(h)).instance=null,C=n((S=M).prototype,"Container",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(S.prototype,"scenes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=n(S.prototype,"loadingPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShadowEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts"],(function(t){"use strict";var e,i,o,r,a,c,n,p,y,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,n=t.UIOpacity,p=t.tween,y=t.Component},function(t){s=t.GameMgr}],execute:function(){var u,l,f,h,b;a._RF.push({},"22685h12JdCy7h1bNVoLCHM","ShadowEffect",void 0);var d=c.ccclass,v=c.property;t("ShadowEffect",(u=d("ShadowEffect"),l=v(n),u((b=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,o(e,"opacity",b,r(e)),e}return i(e,t),e.prototype.start=function(){s.instance.isOptimizeForPerformance?this.node.active=!1:p(this.opacity).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).by(.2,{opacity:30}).by(.2,{opacity:-30}).delay(.4).by(.2,{opacity:30}).delay(.7).union().repeatForever().start()},e}(y)).prototype,"opacity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/Shaking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MaxApiUtils2.ts"],(function(i){"use strict";var t,e,n,s,a,o,r,h,u,c,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){a=i.cclegacy,o=i._decorator,r=i.view,h=i.Vec3,u=i.Vec2,c=i.Component},function(i){l=i.maxApiUtils}],execute:function(){var p,g,k;a._RF.push({},"6329b4awCVE1IxSR4MH00TW","Shaking",void 0);var f=o.ccclass,m=o.property;i("Shaking",f("Shaking")((k=t((g=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=i.call.apply(i,[this].concat(a))||this).shaking=!1,t.shakeTimeOut=null,t.size=null,n(t,"shakeAmount",k,s(t)),t}e(t,i);var a=t.prototype;return a.start=function(){this.size=r.getViewportRect().size},a.update=function(i){if(this.shaking){var t=this.node.position.clone(),e=new h(0);u.random(e),e.x*=this.shakeAmount,e.x+=t.x,e.y*=this.size.height/this.size.width*this.shakeAmount,e.y+=t.y,this.node.setPosition(e)}},a.startShaking=function(i){var t=this;void 0===i&&(i=500),this.shaking||(this.shaking=!0,l.triggerEventVibration(),clearTimeout(this.shakeTimeOut),this.shakeTimeOut=setTimeout((function(){t.shaking=!1}),i))},t}(c)).prototype,"shakeAmount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=g))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnMeteor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMgr.ts","./Meteor.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,u,m,p,l,h,f,M,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,c=e.Node,u=e.NodePool,m=e.math,p=e.instantiate,l=e.UITransform,h=e.Vec3,f=e.Component},function(e){M=e.GameMgr},function(e){w=e.Meteor}],execute:function(){var P,g,d,b,v,T,y,z;i._RF.push({},"5b2b8SohodBPbkzpittSyYk","SpawnMeteor",void 0);var S=a.ccclass,x=a.property;e("SpawnMeteor",(P=S("SpawnMeteor"),g=x(s),d=x(c),P(((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"meteorPrefab",T,r(t)),o(t,"meteorContainer",y,r(t)),t.maxTime=5,t.spawnMeteorTime=0,t.maxMeteor=2,t.meteorPool=new u,t}n(t,e);var i=t.prototype;return i.onLoad=function(){t.instance=this},i.update=function(e){if(!M.instance.isOptimizeForPerformance)if(this.spawnMeteorTime>0)this.spawnMeteorTime-=e;else if(this.spawnMeteorTime<=0){this.spawnMeteorTime=m.randomRange(1,this.maxTime);for(var t=0;t<this.maxMeteor;t++)this.spawnMeteor()}},i.getMeteor=function(){return this.meteorPool.size()>0?this.meteorPool.get():p(this.meteorPrefab)},i.spawnMeteor=function(){var e=this.getMeteor();e.setParent(this.meteorContainer),e.active=!0;var t=e.getComponent(w);t.initInMenu();var n=this.getPosition();t.setPositions(n[0],n[1]),setTimeout((function(){t.drop()}),1e3*m.randomRange(0,this.maxTime))},i.getPosition=function(){var e,t=this.node.getComponent(l).contentSize,n=-t.width/2,o=m.randomRange(0,t.height/2);e=new h(n,o);var r=(t.width+100)/Math.sin(65*Math.PI/180),i=t.width/Math.tan(65*Math.PI/180);return[e,new h(n+r,o-i)]},i.putMeteorToPool=function(e){this.meteorPool.put(e)},t}(f)).instance=null,T=t((v=z).prototype,"meteorPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(v.prototype,"meteorContainer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/SpineRemote.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,i,o,s,l,u,c,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,l=e._decorator,u=e.sp,c=e.assetManager,p=e.Texture2D,f=e.Component}],execute:function(){var m,g,h,d,k,b,y,v,x,S,w;s._RF.push({},"ff50e7YUK9LFa+1yRHA5AVJ","SpineRemote",void 0);var R=l.ccclass,D=l.property;e("SpineRemote",(m=R("SpineRemote"),g=D(String),h=D(String),d=D(String),k=D(String),m((v=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"images",v,a(t)),r(t,"ske",x,a(t)),r(t,"atlas",S,a(t)),r(t,"animDefault",w,a(t)),t.skeleton=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){this.skeleton=this.getComponent(u.Skeleton)||this.addComponent(u.Skeleton),this.load()},s.update=function(e){},s.load=function(){var e=i(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],r=o(this.images);case 3:if((a=r()).done){e.next=12;break}return i=a.value,e.next=7,this.loadImg(i);case 7:s=e.sent,t.push(s),n.push(i.split("/").pop());case 10:e.next=3;break;case 12:return e.abrupt("return",new Promise((function(e,r){c.loadAny([{url:l.atlas,ext:".txt"},{url:l.ske,ext:".txt"}],(function(r,a){var i=new u.SkeletonData;i.skeletonJson=a[1],i.atlasText=a[0],i.textures=t,i.textureNames=n,l.skeleton.skeletonData=i,l.skeleton.animation=l.animDefault,e(l.skeleton)}))})));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.loadImg=function(e){return new Promise((function(t,n){c.loadRemote(e,(function(e,n){if(e)t(null);else{var r=new p;r.image=n,t(r)}}))}))},t}(f)).prototype,"images",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(y.prototype,"ske",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(y.prototype,"atlas",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"animDefault",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Standby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameMgr.ts","./TextDefine.ts","./Screen.ts","./ScreenMgr.ts"],(function(t){"use strict";var e,n,i,r,a,o,s,c,l,u,h,p,f,y,b,d,w,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.UIOpacity,c=t.Node,l=t.Label,u=t.Button,h=t.tween,p=t.Vec3},function(t){f=t.GameDefine,y=t.ScreenName},function(t){b=t.GameMgr},function(t){d=t.TextDefine},function(t){w=t.Screen},function(t){S=t.ScreenMgr}],execute:function(){var g,m,v,D,k,C,L,A,E,T,x,B,O,z,F;a._RF.push({},"2007cizEIRIvKDIBbRrLGSj","Standby",void 0);var R,H=o.ccclass,I=o.property;!function(t){t[t.Farmer=0]="Farmer",t[t.Hunter=1]="Hunter"}(R||(R={}));t("Standby",(g=H("Standby"),m=I(s),v=I(c),D=I(c),k=I(l),C=I(u),L=I(c),g((T=e((E=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).state=null,i(e,"whiteScreen",T,r(e)),i(e,"farmerDisplay",x,r(e)),i(e,"hunterDisplay",B,r(e)),e.display=null,i(e,"startLabel",O,r(e)),i(e,"backButton",z,r(e)),i(e,"connectingLabel",F,r(e)),e.tweenArray=[],e.textDescriptions=[],e.tweenOpacityStartLabel=null,e.countClick=void 0,e.tweenWhiteScreen=null,e.timeoutClickStartEvent=null,e}n(e,t);var a=e.prototype;return a.update=function(t){var e=this;this.tweenArray.forEach((function(t,n){t||e.tweenArray.splice(n,1)}))},a.show=function(){var e=this;t.prototype.show.call(this),b.instance.IsHunter()?this.setState(R.Hunter):this.setState(R.Farmer),this.initDisplay(),this.tweenWhiteScreen&&(this.tweenWhiteScreen.stop(),this.tweenWhiteScreen=null),this.tweenWhiteScreen=h(this.whiteScreen).set({opacity:255}).to(f.timeEndLoading,{opacity:0}).call((function(){e.tweenWhiteScreen=null,e.showDescriptions(),e.initEvent()})).start()},a.setState=function(t){switch(this.farmerDisplay.active=!1,this.hunterDisplay.active=!1,this.state=t,this.state){case R.Hunter:this.display=this.hunterDisplay,this.textDescriptions=[].concat(d.textConfig.StandbyText.hunterRoleDescriptions);break;case R.Farmer:this.display=this.farmerDisplay,this.textDescriptions=[].concat(d.textConfig.StandbyText.farmerRoleDescriptions)}},a.hide=function(){this.node.off("click"),t.prototype.hide.call(this)},a.initDisplay=function(){var t=this;this.display&&(this.display.children[1].children.forEach((function(e,n){e.getComponent(s).opacity=0,t.textDescriptions[n]?e.getComponent(l).string=t.textDescriptions[n]:e.active=!1})),this.display.children[2].getComponent(s).opacity=255,this.startLabel.node.setScale(p.ZERO),this.connectingLabel.setScale(p.ZERO),this.display.active=!0,this.backButton.node.active=!0,this.startLabel.string=d.textConfig.StandbyText.startLabel,this.connectingLabel.getComponent(l).string=d.textConfig.StandbyText.connectingLabel,this.countClick=0)},a.showDescriptions=function(){var t=this.display.children[1];this.tweenDescriptions(0,t.children)},a.tweenDescriptions=function(t,e){var n=this;if(t!=e.length){var i=e[t].getComponent(s),r=h(i).to(.5,{opacity:255}).call((function(){r=null,n.tweenDescriptions(t+1,e)})).start();this.tweenArray.push(r)}else this.showOkButton()},a.showOkButton=function(){var t=this,e=h(this.startLabel.node).to(.5,{scale:p.ONE}).call((function(){e=null,t.tweenOpacityStartLabel=h(t.startLabel.getComponent(s)).to(1,{opacity:255}).to(1,{opacity:0}).union().repeatForever().start(),t.tweenArray.push(t.tweenOpacityStartLabel),clearTimeout(t.timeoutClickStartEvent),t.timeoutClickStartEvent=setTimeout((function(){t.node.on("click",t.onClickStartEvent,t)}),200)})).start();this.tweenArray.push(e)},a.onClickStartEvent=function(){var t=this;this.node.off("click"),this.backButton.node.active=!1;var e=h(this.startLabel.node).to(.5,{scale:p.ZERO}).call((function(){e=null})).start();this.tweenArray.push(e);var n=h(this.connectingLabel).to(.5,{scale:p.ONE}).call((function(){n=null})).start();this.tweenArray.push(n);var i=this.display.children[2],r=h(i.getComponent(s)).to(1,{opacity:0}).call((function(){r=null,console.log("[STAND BY]: FIND MATCH"),t.stopAllTween(),b.instance.startFindmatch()})).start();this.tweenArray.push(r)},a.initEvent=function(){var t=this;this.backButton.node.on("click",(function(){t.stopAllTween(),t.hide(),S.instance.show(y.Menu)}),this),this.node.on("click",this.onClickSkipTween,this)},a.onClickSkipTween=function(){(this.countClick++,this.countClick<1)||(this.node.off("click"),this.stopAllTween(),this.display.children[1].children.forEach((function(t){t.getComponent(s).opacity=255})),this.showOkButton())},a.stopAllTween=function(){this.tweenArray.forEach((function(t){t.stop(),t=null})),this.tweenArray=[]},e}(w)).prototype,"whiteScreen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"farmerDisplay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(E.prototype,"hunterDisplay",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"startLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"backButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"connectingLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=E))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/SwipePart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Top3Ranking.ts"],(function(t){"use strict";var n,e,i,a,s,r,h,o,l,c,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.Node,o=t.tween,l=t.Vec3,c=t.Component},function(t){u=t.Top3Ranking}],execute:function(){var d,p,m,f,g,G,b,k,x;s._RF.push({},"ab2c1kKulxMi5X9m/6L8JhZ","SwipePart",void 0);var R=r.ccclass,v=r.property;t("SwipePart",(d=R("SwipePart"),p=v(h),m=v(h),f=v(u),d((b=n((G=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,i(n,"mainParts",b,a(n)),i(n,"mainDecors",k,a(n)),i(n,"rankings",x,a(n)),n.gates=[],n.lanterns=[],n.mainGates=[],n.lanternAngleRoll=15,n.lanternTimeRoll=.1,n.mainGateShakeX=15,n.mainGateTimeShake=.1,n.gateAngle=0,n.speedGate=5,n.currentIndex=0,n}e(n,t);var s=n.prototype;return s.updateTop3Rankings=function(t){this.rankings.forEach((function(n){n.loadRanking(t)}))},s.updateIdleVisible=function(){for(var t=0;t<this.mainParts.length;t++)t==this.currentIndex?(this.mainParts[t].active=!0,this.mainDecors[t].active=!0):(this.mainParts[t].active=!1,this.mainDecors[t].active=!1)},s.updateSlideVisible=function(){for(var t=0;t<this.mainParts.length;t++)t==this.currentIndex||t==(this.currentIndex==this.mainParts.length-1?0:this.currentIndex+1)||t==(0==this.currentIndex?this.mainParts.length-1:this.currentIndex-1)?(this.mainParts[t].active=!0,this.mainDecors[t].active=!0):(this.mainParts[t].active=!1,this.mainDecors[t].active=!1)},s.updateIndex=function(t){this.currentIndex=1==t?0==this.currentIndex?this.mainParts.length-1:this.currentIndex-1:this.currentIndex==this.mainParts.length-1?0:this.currentIndex+1,this.updateIdleVisible()},s.start=function(){this.updateIdleVisible(),this.findLantern(this.node),this.finMainGate(this.node),this.findGate(this.node)},s.findGate=function(t){var n=this;t.children.forEach((function(t){"gate"===t.name?n.gates.push(t):n.findGate(t)}))},s.findLantern=function(t){var n=this;t.children.forEach((function(t){"lantern"==t.name?n.lanterns.push(t):n.findLantern(t)}))},s.finMainGate=function(t){var n=this;t.children.forEach((function(t){"Gate"==t.name?n.mainGates.push(t):n.finMainGate(t)}))},s.startShake=function(){this.shakeLatern(),this.shakeMainGate()},s.shakeMainGate=function(){o({x:0}).to(this.mainGateTimeShake,{x:this.mainGateShakeX},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:-this.mainGateShakeX},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:this.mainGateShakeX-10},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:-(this.mainGateShakeX-10)},{onUpdate:this.updateMainGatesX.bind(this)}).to(this.mainGateTimeShake,{x:0},{onUpdate:this.updateMainGatesX.bind(this)}).start()},s.shakeLatern=function(){o({angle:0}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-this.lanternAngleRoll},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll-5},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-(this.lanternAngleRoll-5)},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:this.lanternAngleRoll-10},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:-(this.lanternAngleRoll-10)},{onUpdate:this.updateLanternsAngle.bind(this)}).to(this.lanternTimeRoll,{angle:0},{onUpdate:this.updateLanternsAngle.bind(this)}).start()},s.updateLanternsAngle=function(t,n){this.lanterns.forEach((function(n){n.angle=t.angle}))},s.updateMainGatesX=function(t,n){this.mainGates.forEach((function(n){n.setPosition(new l(t.x,n.position.y,0))}))},n}(c)).prototype,"mainParts",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=n(G.prototype,"mainDecors",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=n(G.prototype,"rankings",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=G))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/SwitchRoleButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./Define.ts","./GameDefine.ts","./GameMgr.ts"],(function(t){"use strict";var e,i,n,r,s,a,o,l,c,u,h,p,f,y,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,o=t.Sprite,l=t.Label,c=t.Button,u=t.Color,h=t.Component},function(t){p=t.default},function(t){f=t.GamePlayEventName},function(t){y=t.GameDefine},function(t){D=t.GameMgr}],execute:function(){var m,g,b,d,w,R,v,P,S;s._RF.push({},"c55cet1RrxDb53Splco25u9","SwitchRoleButton",void 0);var G=a.ccclass,H=a.property;t("SwitchRoleButton",(m=G("SwitchRoleButton"),g=H(o),b=H(o),d=H(l),m((v=e((R=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"hunterDisplay",v,r(e)),n(e,"famrerDisplay",P,r(e)),n(e,"switchRolePriceLabel",S,r(e)),e.isHunter=!1,e.isPending=!1,e}i(e,t);var s=e.prototype;return s.loadInfo=function(){this.isPending=!1,this.setInfo(D.instance.IsHunter()),this.setDisable()},s.setEnable=function(){this.node.getComponent(c).interactable=!0,this.hunterDisplay.grayscale=!1,this.famrerDisplay.grayscale=!1,this.hunterDisplay.color=new u(255,255,255,255),this.famrerDisplay.color=new u(255,255,255,255)},s.setDisable=function(){this.node.getComponent(c).interactable=!1,this.hunterDisplay.grayscale=!0,this.hunterDisplay.color=new u(255,255,255,136),this.famrerDisplay.grayscale=!0,this.famrerDisplay.color=new u(255,255,255,136)},s.setInfo=function(t){this.isHunter=t,t?(this.hunterDisplay.node.active=!1,this.famrerDisplay.node.active=!0):(this.hunterDisplay.node.active=!0,this.famrerDisplay.node.active=!1)},s.switchRole=function(t){this.isPending=!1,t&&(this.isHunter=!this.isHunter,this.setInfo(this.isHunter))},s.start=function(){this.switchRolePriceLabel.string=y.instance.playerSwitchPrice.toString(),p.on(f.StartGame,this.loadInfo,this),p.on(f.UpdatePlayerRole,this.switchRole,this)},s.switchRoleClick=function(){this.isPending||(this.isPending=!0,D.instance.playerSwitchRole())},e}(h)).prototype,"hunterDisplay",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(R.prototype,"famrerDisplay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(R.prototype,"switchRolePriceLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/TextDefine.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.resources}],execute:function(){t._RF.push({},"167945E/2BDCJoy/b364mJ5","TextDefine",void 0);var o=e("TextDefine",function(){function e(){}return e.loadTextConfig=function(){n.load("prefabs/TextConfig",(function(t,n){e.textConfig=n.json,console.log("[globalDefine] load text config:",e.textConfig),e.isLoaded=!0}))},e}());o.textConfig=null,o.isLoaded=!1,t._RF.pop()}}}));

System.register("chunks:///_virtual/TimeMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./GameDefine.ts","./GameMgr.ts","./TextDefine.ts","./GameEvent.ts","./PopupConfig.ts","./PopupMgr.ts","./Utils.ts","./NetworkDefine.ts"],(function(e){"use strict";var t,i,n,s,r,o,a,c,m,u,T,l,h,p,S;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,r=e.Component},function(e){o=e.EventName,a=e.GhostStatusPopup},function(e){c=e.GameDefine},function(e){m=e.GameMgr},function(e){u=e.TextDefine},function(e){T=e.default},function(e){l=e.PopupConfig},function(e){h=e.PopupMgr},function(e){p=e.utils},function(e){S=e.NetworkDefine}],execute:function(){var f,y;n._RF.push({},"ca6dbPXO9hMhoisIAPnFaOx","TimeMgr",void 0);var g=s.ccclass;s.property,e("TimeMgr",g("TimeMgr")(((y=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).syncTimeDuration=1,t.syncPeriod=3,t.syncTimeBound=0,t.localTimeSyncDuration=0,t.serverTimeSyncDuration=0,t.lastSyncTime=0,t.lastServerTime=0,t.timeBeforeSync=0,t.elapsedTimeFromLastRequest=Number.MAX_VALUE,t.startupTime=Date.now(),t.gameStartTime=0,t._gameTime=0,t.popupLostConnection=null,t}t(n,e);var s=n.prototype;return s.onLoad=function(){n.instance=this},s.start=function(){T.on(o.onPing,this.synchronize,this),T.on(o.onMatchingInfo,this.setGameStarTime,this)},s.setGameStarTime=function(e){console.log("[TimeMgr] clientTime: "+p.getTime(new Date(this.serverTime))),console.log("[TimeMgr] serverTime: "+p.getTime(new Date(e.serverTime))),console.log("[TimeMgr] setGameStarTime: "+p.getTime(new Date(e.startTime))),this.gameStartTime=e.startTime},s.reset=function(){this.syncTimeBound=0,this.localTimeSyncDuration=0,this.serverTimeSyncDuration=0,this.lastSyncTime=0,this.realtimeSinceStartup(),this.lastServerTime=0,this.timeBeforeSync=0,this.elapsedTimeFromLastRequest=Number.MAX_VALUE},s.getFrameTime=function(e){return this.gameStartTime+e*c.instance.timePerFrameServerMilisecond},s.update=function(e){var t=this;if(m.instance.isPingReady&&(this.elapsedTimeFromLastRequest>this.syncPeriod?(this.elapsedTimeFromLastRequest=0,this.timeBeforeSync=this.realtimeSinceStartup(),m.instance.requestServerTime()):this.elapsedTimeFromLastRequest+=e,null==this.popupLostConnection&&0!=this.lastSyncTime&&this.realtimeSinceStartup()-this.lastSyncTime>S.lostConnectionTime)){console.log("[TimeMgr] Lost connection"),h.Instance.hideAll();var i=u.textConfig.LostConnectionPopupText;this.popupLostConnection=l.Show(i,null,a.Disconnect),this.popupLostConnection.SetTypeOk((function(){t.popupLostConnection=null,t.lastSyncTime=t.realtimeSinceStartup(),m.instance.reconnect()}))}},s.synchronize=function(e,t){var i=this.realtimeSinceStartup();if(this.lastServerTime>0){var n=i-this.timeBeforeSync,s=this.serverTime,r=e+n/2;this.syncTimeBound=r>s?r+this.syncTimeDuration:s+this.syncTimeDuration,this.localTimeSyncDuration=this.syncTimeBound-s,this.serverTimeSyncDuration=this.syncTimeBound-r,this.lastServerTime=r}else this.lastServerTime=e;this.lastSyncTime=i},s.realtimeSinceStartup=function(){return Date.now()-this.startupTime},i(n,[{key:"serverTime",get:function(){var e=this.localTime;return e>=this.syncTimeBound?e:this.syncTimeBound-this.localTimeSyncDuration*((this.syncTimeBound-e)/this.serverTimeSyncDuration)}},{key:"localTime",get:function(){return this.lastServerTime+this.realtimeSinceStartup()-this.lastSyncTime}},{key:"gameTime",get:function(){return this._gameTime},set:function(e){this._gameTime=e}},{key:"currentGameTime",get:function(){return this.gameStartTime+this.gameTime}}]),n}(r)).instance=null,f=y))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Top3Ranking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Define.ts","./Utils.ts","./PopupMgr.ts"],(function(n){"use strict";var t,e,i,o,r,a,s,c,l,u,p,f,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,s=n.Label,c=n.Node,l=n.Input,u=n.Component},function(n){p=n.PopupName},function(n){f=n.utils},function(n){h=n.PopupMgr}],execute:function(){var y,g,b,m,k,v,L,R,d;r._RF.push({},"9c2e1+NZpRIlqD5l7k3umlf","Top3Ranking",void 0);var C=a.ccclass,N=a.property;n("Top3Ranking",(y=C("Top3Ranking"),g=N(s),b=N(s),m=N(c),y((L=t((v=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"topLabels",L,o(t)),i(t,"moneyLabels",R,o(t)),i(t,"moneyIcon",d,o(t)),t.maxRank=3,t.isNoClick=!1,t}e(t,n);var r=t.prototype;return r.start=function(){this.node.on(l.EventType.TOUCH_END,this.onClick,this),this.node.on(l.EventType.TOUCH_MOVE,this.onMove,this)},r.onMove=function(n){var t=n.getLocation().x-n.getStartLocation().x;Math.abs(t)<10||(this.isNoClick=!0)},r.onClick=function(){this.isNoClick?this.isNoClick=!1:h.Instance.Show(p.Ranking)},r.loadRanking=function(n){for(var t=n.uid,e=n.money,i=0;i<this.maxRank&&i<t.length;i++){var o=t[i];this.topLabels[i].string=f.formatPlayerPhoneNumber(o),this.moneyLabels[i].string=f.formatScore(e[i]),this.moneyIcon[i].active=!0}},t}(u)).prototype,"topLabels",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(v.prototype,"moneyLabels",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=t(v.prototype,"moneyIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=v))||k));r._RF.pop()}}}));

System.register("chunks:///_virtual/Trap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Sprite,c=t.sp,l=t.Component},function(t){p=t.GamePlay}],execute:function(){var u,f,d,m,h,y,g;r._RF.push({},"18609h5jBVBBJLokC/gg5G0","Trap",void 0);var v=a.ccclass,b=a.property;t("Trap",(u=v("Trap"),f=b(s),d=b(c.Skeleton),u((y=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"model",y,o(e)),n(e,"animationEffect",g,o(e)),e.destroying=!1,e}i(e,t);var r=e.prototype;return r.setInfo=function(t){this.model.spriteFrame=t,this.model.node.active=!0,this.animationEffect.node.active=!1,this.destroying=!1},r.destroyTrap=function(t){var e=this;void 0===t&&(t=!1),1!=this.destroying&&(this.destroying=!0,t?(this.node.active&&(this.model.node.active=!1,this.animationEffect.node.active=!0,this.animationEffect.setAnimation(0,"trap_boom",!1),this.animationEffect.setCompleteListener((function(){p.instance.trapManager.trapPool.put(e.node)}))),setTimeout((function(){p.instance.trapManager.trapPool.put(e.node)}),1500)):p.instance.trapManager.trapPool.put(this.node))},e}(l)).prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(h.prototype,"animationEffect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=h))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/TrapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePlay.ts","./Trap.ts"],(function(t){"use strict";var r,e,a,n,i,o,p,s,c,u,l,f,g;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,p=t.Prefab,s=t.SpriteFrame,c=t.NodePool,u=t.instantiate,l=t.Component},function(t){f=t.GamePlay},function(t){g=t.Trap}],execute:function(){var d,h,T,m,_,v,N;i._RF.push({},"204011gscpD/5htWvb9yvlZ","TrapManager",void 0);var P=o.ccclass,y=o.property;t("TrapManager",(d=P("TrapManager"),h=y(p),T=y(s),d((v=r((_=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i))||this,a(r,"trapPrefab",v,n(r)),a(r,"trapSpriteFrames",N,n(r)),r.trapPool=new c,r}e(r,t);var i=r.prototype;return i.onLoad=function(){for(var t=0;t<10;t++)this.trapPool.put(u(this.trapPrefab))},i.initTrap=function(t,r,e,a){var n=this.getTrap();n.active=!1,n.setPosition(e),n.name=t.id.toString(),r.addTrap(n),n.getComponent(g).setInfo(this.getTrapSpriteFrame(t.type)),n.active=!0},i.netUpdate=function(t){t.dungeon.traps.forEach((function(t){f.instance.mapManager.findAndAddTrap(t)})),f.instance.mapManager.findAndRemoveTraps(t.dungeon.traps)},i.getTrapSpriteFrame=function(t){return t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_CHEST_MONSTER?this.trapSpriteFrames[0]:t==phoenix.krun.KRUN_DUNGEON_OBJ.KRUN_DUNGEON_OBJ_TREE_MONSTER?this.trapSpriteFrames[1]:void 0},i.getTrap=function(){return this.trapPool.size()>0?this.trapPool.get():u(this.trapPrefab)},r}(l)).prototype,"trapPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=r(_.prototype,"trapSpriteFrames",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=_))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TrimBase64.ts",["cc"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.cclegacy,a=t._decorator}],execute:function(){var n;e._RF.push({},"9ec58QKtIZA8IXWjqzQ4DKQ","TrimBase64",void 0);var r=a.ccclass;a.property,t("TrimBase64",r("TrimBase64")(n=function(){function t(){}return t.trimCanvas=function(t){var e,a,n,r=t.getContext("2d"),o=document.createElement("canvas").getContext("2d"),l=r.getImageData(0,0,t.width,t.height),i=l.data.length,c={top:null,left:null,right:null,bottom:null};for(e=0;e<i;e+=4)0!==l.data[e+3]&&(a=e/4%t.width,n=~~(e/4/t.width),null===c.top&&(c.top=n),(null===c.left||a<c.left)&&(c.left=a),(null===c.right||c.right<a)&&(c.right=a),(null===c.bottom||c.bottom<n)&&(c.bottom=n));var u=c.bottom-c.top+1,s=c.right-c.left+1,g=r.getImageData(c.left,c.top,s,u);return o.canvas.width=s,o.canvas.height=u,o.putImageData(g,0,0),o.canvas},t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalDefine.ts"],(function(t){"use strict";var e,n,r,o,i,c,u,a,l,f,s,x;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,r=t.ParticleSystem,o=t.UITransform,i=t.Sprite,c=t.Vec3,u=t.Quat,a=t.math,l=t.resources,f=t.AudioClip,s=t.Prefab},function(t){x=t.profile}],execute:function(){n._RF.push({},"10e5ec48SRIkIMCKunjzFih","Utils",void 0);t("utils",new(function(){function t(){this.getAngleFrom2Vec=function(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return n<0&&(n=2*Math.PI+n),180*n/Math.PI},this.getDirectionFrom2Vec=function(t,e){return e.clone().subtract(t).normalize()}}var n=t.prototype;return n.PlayParticle=function(t){t.play(),t.getComponentsInChildren(r).forEach((function(t){t.play()}))},n.StopParticle=function(t){t.stop(),t.getComponentsInChildren(r).forEach((function(t){t.stop()}))},n.toLocalString=function(t){return(t=Math.round(t)).toLocaleString().replace(/","/g,".")},n.formatScore=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},n.cloneObject=function(t){for(var e=Object.keys(t),n=Object.create(null),r=0,o=e.length;r<o;r++)n[e[r]]=t[e[r]];return n},n.setSpriteFrame=function(t,e){var n=t.node.getComponent(o).contentSize;t.spriteFrame.texture=e,t.sizeMode=i.SizeMode.RAW,t.node.getComponent(o).setContentSize(n)},n.CorrectSpriteFrameSize=function(t,e){var n=this.getScale(t.spriteFrame,e);t.node.setScale(new c(n,n,n))},n.getScale=function(t,e){var n=t.rect,r=e.width/n.width,o=e.height/n.height,i=o;return r>o&&(i=r),i},n.getTime=function(t){var e=function(t){return t<10?"0"+t:t};return e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},n.getDateTimeVN=function(t){var e=function(t){return t<10?"0"+t:t};return""+[e(t.getDate()),e(t.getMonth()+1),t.getFullYear()].join("/")},n.destroyAllChild=function(t){t.children.forEach((function(t){t.destroy()})),t.removeAllChildren()},n.truncate=function(t,e){var n=t.split(" ");return n.length>e?n.splice(0,e).join(" ")+"...":t},n.rotationAroundNode=function(t,e,n,r){var o=new u,i=new c,l=new c,f=t.position,s=a.toRadian(r);return u.fromAxisAngle(o,n,s),c.subtract(i,f,e),c.transformQuat(l,i,o),t.position=c.add(l,e,l),u.rotateAround(o,t.rotation,n,s),o},n.changeNodeLayer=function(t,e){var n=this;t.layer=e,t.children.forEach((function(t){n.changeNodeLayer(t,e)}))},n.trimName=function(t,e){return t.split(" ").splice(-e).join(" ")},n.getAudioRes=function(t,e){l.load(t,f,(function(t,n){t?e&&e(null):e&&e(n)}))},n.getPrefabRes=function(t,e){l.load(t,s,(function(t,n){t?e&&e(null):e&&e(n)}))},n.formatPhoneNumber=function(t){return t.slice(0,-4)+"-xxxx"},n.formatPlayerPhoneNumber=function(t){return x.Uid==t?t:this.formatPhoneNumber(t)},e(t,[{key:"uuid",get:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}}]),t}()));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});