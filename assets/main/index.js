System.register("chunks:///_virtual/AnimController.ts",["cc","./User.ts"],(function(t){"use strict";var e,n,c,r;return{setters:[function(t){e=t.cclegacy,n=t.tween,c=t.Vec3},function(t){r=t.user}],execute:function(){e._RF.push({},"ddcb0ZNwk1H/JkS36/HoO6m","AnimController",void 0);var o=t("AnimController",function(){function t(){this.MANGOSTEEN_PRICE_POS=new c(240,400),this.TICKET_PRICE_POS=new c(-40,400)}var e=t.prototype;return e.init=function(){},e.panelOn=function(t){return n(t).set({scale:c.ZERO}).to(.2,{scale:new c(1.1,1.1,1.1)}).to(.1,{scale:new c(1,1,1)}).start()},e.panelOff=function(t){return n(t).set({scale:new c(1,1,1)}).to(.2,{scale:new c(1.1,1.1,1.1)}).to(.1,{scale:c.ZERO}).call((function(){return t.active=!1})).start()},e.combo=function(t){t.scale=c.ZERO,n(t).to(.5,{scale:c.ONE},{easing:"elasticOut"}).delay(.5).call((function(){return t.active=!1})).start()},e.runLoading=function(t){n(t).by(1,{angle:-200}).repeatForever().start()},e.updatePrice=function(){(r.profile.ticket>0?1:r.profile.coinLoseAmount).toString()},t}());t("default",new o);e._RF.pop()}}}));

System.register("chunks:///_virtual/ApiMock.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f6032IoNbNDmaE5dpKfBrwy","ApiMock",void 0);e("apiMock",{GAME_CONFIG:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_get_config"},item:{size:[{step:"1",min:1,max:1},{step:"10",min:.9,max:1},{step:"15",min:.8,max:1},{step:"20",min:.8,max:.9},{step:"25",min:.7,max:.9}],point:[0,0,0,0,0],checkpoint:[100,200,300],power:[3,3],distances:[{step:"1",min:2,max:2.5},{step:"10",min:2,max:3},{step:"15",min:2.5,max:3},{step:"20",min:2.5,max:3.5},{step:"25",min:2.5,max:4}],eventLink:"https://momo.vn/tin-tuc/tin-tuc-su-kien/choi-momo-jump-sieu-hoi-nhay-bat-san-tien-mat-va-qua-khung-2046",turnTimer:"300000",turnTimerLimit:5,goldHour:{start:"1672765200000",end:"1672765200000",stepBonus:10},bonusLimit:"1000",starterLimit:"200",goldDay:{start:"1640082732241",end:"1640537999000",stepBonus:5},info:"Huy Thái đã trúng IPhone rồi còn cái nịt nào đâu mà trúng",goldDayLimit:5,turnPerGame:"30"}},GAME_TURN:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_check_turn"},item:{balance:219}},START_GAME:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_start_game"},title:"",body:"",item:{gameId:"8c965049-1274-4591-adaa-5d2a48bdf16a",bonus:{43:2,45:1,23:5,26:5,71:2,8:5,106:3,92:2,31:5,39:1,59:2,2:10,13:7,60:3,17:7,85:2,4:5,123:1,140:3,160:1,185:1,218:1}}},SUBMIT_SCORE:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_submit_score"},item:{currentScore:1}},ONBOARDING_STATUS:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_get_onboarding_status"},items:{isOnboarding:!1}},ONBOARDING_SUBMIT:{response_info:{error_message:"success",error_code:0,event_tracking:"v1_submit_onboarding_status"},items:!0},GAME_PROFILE:{response_info:{error_message:"success",error_code:0,event_tracking:"get_profile_game"},result:{uid:"0966988108",name:"Ha ha",avatar:"",ticket:0,coinBalance:20184,startTimeDaily:"00-00-00",endTimeDaily:"24-00-00",limitTotalMiniGameDaily:300,limitGameDaily:150,limitModeDaily:-1,limitGameWithPlayerDaily:10,coinLoseAmount:30,coinWinAmount:0,workers:"",connector:"wss://realtime.dev.mservice.io/catzilla-minigame-connector/connector"}}}),e("localization",{DEFAULT_ERROR:{response_info:null,title:"Thông báo",body:"Có lỗi xảy ra khi bắt đầu. Hãy thử lại"},EXIT_POPUP:{response_info:null,title:"Xác nhận bỏ cuộc",body:"Còn nhiều Măng Cụt đang đợi bạn phía trước. Bạn chắc chắn muốn bỏ cuộc chứ?"},TICKET_EXPLAIN:{response_info:null,title:"Vé Săn Măng Cụt",body:'Chơi trò chơi trong Khu Săn Măng Cụt không tốn tí "vốn" Măng Cụt nào, mỗi Vé được 1 lượt chơi miễn phí. Bạn có thể kiếm thêm Vé bằng cách lắc xúc xắc.'},SETTING_POPUP:{response_info:null,title:"Cài đặt",body:""},RESULT:{response_info:null,title:"Cài đặt",body:"",score:0}});n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioController.ts",["cc"],(function(t){"use strict";var s,i,e,u,n;return{setters:[function(t){s=t.cclegacy,i=t.assetManager,e=t.log,u=t.find,n=t.AudioSource}],execute:function(){s._RF.push({},"38fd1p/dnxF+q6s3CgPD4uw","AudioController",void 0);var o=t("SOUND_NAME",{BackgroundMusic:"background",Defeat:"lose",Oh_No:"Oh_No",Landing:"jumpLanding",PreJump:"preJump",Jump:"jumpLanding",Dead:"jumpDie",Spawn:"jumpFlying",Collect_Item:"jumpCollectItem",Perfect1:"jumpPerfect1",Perfect2:"jumpPerfect2",Perfect3:"jumpPerfect3",Perfect4:"jumpPerfect4",Perfect5:"jumpPerfect5",ButtonConfirmClick:"buttonforward",ButtonCancelClick:"buttonback"}),c=t("AudioController",function(){function t(){this.soundTracks=new Map,this.music=null,this.sfx=null,this.lastMusic=void 0}var s=t.prototype;return s.init=function(){var t=this;Object.keys(o).forEach((function(s){return i.loadRemote("https://img.mservice.com.vn/app/media/minigames/lacxi2023/sound/minigames/"+o[s]+".mp3",{},(function(i,u){u?(t.soundTracks.set(o[s],u),t.lastMusic==o[s]&&t.playMusic(t.lastMusic)):e(i)}))}));var s=u("Canvas"),c=s.addComponent(n);c.loop=!0,this.sfx=s.addComponent(n),this.music=c},s.setVolume=function(t){this.music.volume=.45*t},s.setSFXVolume=function(t){this.sfx.volume=t},s.playSFX=function(t){this.soundTracks.has(t)&&(this.sfx.clip=this.soundTracks.get(t),this.sfx.play())},s.playMusic=function(t){this.soundTracks.has(t)?(this.music.stop(),this.music.clip=this.soundTracks.get(t),this.music.play(),this.lastMusic=null):this.lastMusic=t},t}());t("audioController",new c);s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts"],(function(e){"use strict";var t,o,n,r,i,a,s,l,c,u,p,v,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,c=e.Vec3,u=e.tween,p=e.random,v=e.Component},function(e){f=e.gameEvent,m=e.GameEvent}],execute:function(){var h,d,g,y,C,b,R;a._RF.push({},"664b0UYiuRI1IhA6zRZTnqT","CameraController",void 0);var w=s.ccclass,z=s.property;e("CameraController",(h=w("CameraController"),d=z(l),g=z(c),h((b=t((C=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"cameras",b,r(t)),n(t,"mags",R,r(t)),t}o(t,e);var a=t.prototype;return a.start=function(){f.on(m.OnRevive,this.onRevive,this)},a.onDestroy=function(){f.targetOff(this)},a.shake=function(e){void 0===e&&(e=.3);for(var t,o=[],n=this.cameras,r=this.mags,a=i(n);!(t=a()).done;){var s=t.value;o.push(s.position.clone())}return u({value:0}).to(e,{value:1},{onUpdate:function(e,t){if(t>=1)for(var i in n)n[i].setPosition(o[i]);else{var a=new c(p()-.5,p()-.5,p()-.5);for(var s in n){var l=a.clone().multiply(r[s]);n[s].setPosition(o[s].clone().add(l))}}}})},a.goCenter=function(e,t){var o=e.position.clone(),n=t.position.clone();u(this.node).to(.9,{position:o.add(n).multiplyScalar(.5)},{easing:"smooth"}).start()},a.onRevive=function(){this.node.position=c.ZERO},t}(v)).prototype,"cameras",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(C.prototype,"mags",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=C))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Deco.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,o,i,a,s,u,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Texture2D,u=e.math,c=e.MeshRenderer,l=e.tween,p=e.Component}],execute:function(){var h,f,v,d,g;i._RF.push({},"80888qP3oxKfo5v1Ss5O55g","Deco",void 0);var y=a.ccclass,m=a.property;e("Deco",(h=y("Deco"),f=m(s),h((g=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"textures",g,o(t)),t}r(t,e);var i=t.prototype;return i.init=function(e){var t=u.randomRangeInt(0,this.textures.length-1),r=e?this.textures.length-1:t;this.node.getComponent(c).material.setProperty("mainTexture",this.textures[r]);var n=this.node.getComponent(c).getMaterial(0);l({value:1}).to(1.5,{value:0},{onUpdate:function(e,t){n.setProperty("alphaThreshold",e.value)}}).start()},i.update=function(e){},t}(p)).prototype,"textures",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=d))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/DecoMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Deco.ts","./GameEvent.ts","./User.ts"],(function(t){"use strict";var e,n,i,o,s,r,c,h,a,l,u,g,f,d,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Prefab,h=t.Vec3,a=t.math,l=t.instantiate,u=t.Component},function(t){g=t.Deco},function(t){f=t.gameEvent,d=t.GameEvent},function(t){x=t.user}],execute:function(){var p,L,D,b,m;s._RF.push({},"88d1f3GVqRFhK47jjjLl607","DecoMgr",void 0);var v=r.ccclass,P=r.property;t("DecoMgr",(p=v("DecoMgr"),L=P(c),p((m=e((b=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"decoPref",m,o(e)),e.boxList=[h.ZERO],e.decoList=[],e.maxLength=10,e.minDis=1.5,e.lastPost=h.ZERO,e.rangeGen=4,e.disToBox=1.5,e}n(e,t);var s=e.prototype;return s.start=function(){f.on(d.OnDead,this.resetDeco,this)},s.update=function(t){},s.checkGenBox=function(t){if(!(this.boxList.length>this.maxLength)){this.boxList.shift();for(var e=this.maxLength-this.boxList.length;e>0;){var n=t+this.boxList.length-1;this.genBox(n),e-=1}}},s.genBox=function(t){var e=a.randomRangeInt(0,2),n=x.getDistance(t),i=a.randomRange(n.min,n.max),o=this.lastPost,s=new h(o.x+e*i,o.y,o.z+(1-e)*i);this.boxList.push(s),this.lastPost=s.clone()},s.checkDirX=function(t,e){return t.x==e.x},s.genDeco=function(t){this.genDeco3(t)},s.genDeco3=function(t){console.log("GEN DECO 3");var e=[2,4,6,8],n=1==t?0:5,i=10*e.length,o=a.randomRangeInt(0,i);console.log("RANDPOS :",o);for(var s=n;s<10;s++)for(var r=0;r<e.length;r++){var c=this.boxList[s].x+e[r],u=this.boxList[s].z-e[r],f=this.boxList[s].x-e[r],d=this.boxList[s].z+e[r],x=new h(c,0,u),p=new h(f,0,d),L=e.length*s+r==o,D=l(this.decoPref);D.setPosition(x),D.getComponent(g).init(),this.node.addChild(D),this.decoList.push(x);var b=l(this.decoPref);b.setPosition(p),b.getComponent(g).init(L),this.node.addChild(b),this.decoList.push(p)}},s.getNextPos=function(t){return this.checkGenBox(t),this.boxList[0]},s.resetDeco=function(){this.boxList=[h.ZERO],this.boxList.length=1,this.decoList=[],this.lastPost=h.ZERO,this.node.destroyAllChildren(),this.node.removeAllChildren()},s.getCurPos=function(){return this.boxList[0]},e}(u)).prototype,"decoPref",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=b))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/encode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./index.js"],(function(){"use strict";var e,t,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},null,function(e){n=e.default}],execute:function(){t._RF.push({},"6990cCPIW1MCIiI2veTIL2R","encode",void 0);window.getLetterAndDigitFromHash=function(t){for(var r,i=function(e){return n.MD5(n.enc.Base64.stringify(n.enc.Utf8.parse(n.MD5(e).toString()))).toString()}(t),o="",c="",s=e(i);!(r=s()).done;){var u=r.value;"0123456789".includes(u)?c+=u:o+=u}return{letters:o,digits:c}},t._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(n){"use strict";var e,t;return{setters:[function(n){e=n.cclegacy,t=n.EventTarget}],execute:function(){var i;n("GameEvent",void 0),e._RF.push({},"c83f5111P9Cp7cuVrVN4E4w","GameEvent",void 0),function(n){n[n.OnRevive=0]="OnRevive",n[n.OnWinJumping=1]="OnWinJumping",n[n.OnRelease=2]="OnRelease",n[n.OnHold=3]="OnHold",n[n.OnLanding=4]="OnLanding",n[n.OnLose=5]="OnLose",n[n.OnDead=6]="OnDead",n[n.TUTORIAL=7]="TUTORIAL"}(i||(i=n("GameEvent",{})));n("gameEvent",new t);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts"],(function(e){"use strict";var t,n,r,o,c,a,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.find,c=e.Component},function(e){a=e.gameEvent,i=e.GameEvent}],execute:function(){var s;n._RF.push({},"4ce2ehJWxBKgprcSpsWHcq0","GameMgr",void 0);var u=r.ccclass;r.property,e("GameMgr",u("GameMgr")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){a.on(i.OnDead,this.onEndGame,this)},r.update=function(e){},r.onEndGame=function(){var e=o("/PlatformGrp");e.destroyAllChildren(),e.removeAllChildren()},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HoleMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,i,a,l,c,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Prefab,c=e.math,u=e.instantiate,s=e.Component}],execute:function(){var p,f,g,h,y;i._RF.push({},"6727azklV5D6q2NoVeAp8M/","HoleMgr",void 0);var d=a.ccclass,v=a.property;e("HoleMgr",(p=d("HoleMgr"),f=v(l),p((y=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,n(r,"holePref",y,o(r)),r}t(r,e);var i=r.prototype;return i.start=function(){},i.update=function(e){},i.genHole=function(){for(var e=0;e<10;e++)c.randomRange(e-1,e),c.randomRange(e,e+1),u(this.holePref)},r}(s)).prototype,"holePref",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AnimController.ts","./ApiMock.ts","./AudioController.ts","./CameraController.ts","./Deco.ts","./GameEvent.ts","./HoleMgr.ts","./MaxApiUtils.ts","./bundle.mjs_cjs=&original=.js","./encode.ts","./Platform.ts","./PlayerController.ts","./Popup.ts","./Tracking.ts","./UIController.ts","./User.ts","./DecoMgr.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MaxApiUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,i,o;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy,o=e.log}],execute:function(){var s;e("MaxApiName",void 0),i._RF.push({},"28774sywudKJaUfJ3kzaJm/","MaxApiUtils",void 0),function(e){e.getProfile="getProfile",e.getDeviceInfo="getDeviceInfo",e.shareFacebook="shareFacebook",e.showToast="showToast",e.sendCloudMessage="sendCloudMessage",e.getCloudMessage="getCloudMessage",e.startTraceScreenLoad="startTraceScreenLoad",e.startTraceScreenInteraction="startTraceScreenInteraction",e.stopTrace="stopTrace"}(s||(s=e("MaxApiName",{})));var a=e("maxApiUtils",new(function(){function e(){this.observer={},o("[MaxApiutils] isBrowser: ",this.isBrowser)}var i=e.prototype;return i.saveStorage=function(e,n){a.request("setItem",e,JSON.stringify(n))},i.loadStorage=function(){var e=t(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.request("getItem",n);case 2:if(t=e.sent,o("[StorageMgr] load key:",n,"value:",t),!t){e.next=6;break}return e.abrupt("return",JSON.parse(t));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i.request=function(e){for(var n=this,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o("[MaxApiUtils]","Call function: ",e),new Promise((function(t,i){if(n.isBrowser)t(null);else{var o=window.MaxApi[e];r&&r.length>0?o.apply(void 0,r.concat([function(e){t(e)}])):o((function(e){t(e)}))}}))},i.saveImage=function(e){var n=this;return new Promise((function(t,r){n.isBrowser&&t(null),window.MaxApi.requestPermission("storage",(function(n){"granted"===n?window.MaxApi.saveImage(e,(function(e){e?(window.MaxApi.showToast({duration:2e3,title:"Lưu hình ảnh thành công"}),t(!0)):(window.MaxApi.showToast({duration:2e3,title:"Lưu hình ảnh không thành công"}),t(!1))})):(window.MaxApi.showToast({duration:2e3,title:"Lưu hình ảnh không thành công"}),t(!1))}))}))},i.registerShaking=function(e){if(!this.isBrowser){var n=window.MaxApi.listen({event:"onShaker",updateInterval:100,type:"accelerometer"},(function(n){e(n)}));this.observer.shake=n}},i.unRegisterShaking=function(){var e;this.isBrowser||null==(e=this.observer.shake)||null==e.remove||e.remove()},i.registerMagnetometer=function(e,n){if(!this.isBrowser){var t=window.MaxApi.listen({event:"onShaker",type:"magnetometer",updateInterval:n?200:50},(function(n){e(n)}));this.observer.magnetometer=t}},i.unRegisterMagnetometer=function(){var e;this.isBrowser||null==(e=this.observer.magnetometer)||null==e.remove||e.remove()},i.shareFb=function(e,n){!this.isBrowser&&e&&window.MaxApi.shareFacebook({link:e},(function(e){n&&n(e)}))},i.copyToClipBoard=function(e,n){this.isBrowser||window.MaxApi.copyToClipboard(e,n)},i.shareExternal=function(e,n){this.isBrowser||window.MaxApi.share(e,(function(e){n&&n(e)}))},i.startFeatureCode=function(e,n,t){this.isBrowser||window.MaxApi.startFeatureCode(e,n,t)},i.UploadImage=function(e){var n=this;return new Promise((function(t,r){var i={path:"base64-upload",files:e,options:{loading:!0}};n.isBrowser?t(null):window.MaxApi.uploadImage(i,(function(e){e.status;var n=e.response,r=n.url;r&&r.length>0&&r.indexOf("http")>=0?t(r):(console.log("[MaxApiUtils] Upload Img response: ",n),t(null))}))}))},i.trackEvent=function(e,n){void 0===n&&(n=""),this.isBrowser||window.MaxApi.trackEvent(n,e)},i.getCloudMessage=function(e){return new Promise((function(n,t){window.MaxApi.getCloudMessage({path:e},(function(e){e.status;var t=e.response;t.response_info?n(t):n(null)}))}))},i.sendCloudMessage=function(e,n){return new Promise((function(t,r){window.MaxApi.sendCloudMessage({path:e,body:n},(function(e){e.status;var n=e.response;n.errorCode?t(null):t(n)}))}))},i.shareMessenger=function(e){if(!this.isBrowser){var n="fb-messenger://share/?link="+e;window.MaxApi.openURL(n)}},i.listen=function(e,n){this.isBrowser||window.MaxApi.listen(e,n)},i.openWeb=function(e){this.isBrowser||window.MaxApi.openWeb({url:e})},i.triggerEventVibration=function(){this.isBrowser||window.MaxApi.triggerEventVibration()},n(e,[{key:"isBrowser",get:function(){return null==window.ReactNativeWebView}}]),e}()));i._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DecoMgr.ts","./User.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,c,u,l,h,d,g,m,f,p,v,y,T,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.Texture2D,u=e.Node,l=e.tween,h=e.Vec3,d=e.math,g=e.randomRange,m=e.find,f=e.MeshRenderer,p=e.color,v=e.Camera,y=e.Component},function(e){T=e.DecoMgr},function(e){x=e.user}],execute:function(){var w,P,C,I,b,O,R,z,D,S;a._RF.push({},"aa662R2hhZHYbOUqJXoXfrO","Platform",void 0);var E,H=s.ccclass,N=s.property;!function(e){e[e.INIT=0]="INIT",e[e.OTHER=1]="OTHER"}(E||(E={}));e("Platform",(w=H("Platform"),P=N(c),C=N(c),I=N(u),w(((S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"textures",R,o(t)),i(t,"emoTextures",z,o(t)),i(t,"mangosteen",D,o(t)),t.anim=null,t.curTexturePos=0,t.state=E.INIT,t}n(t,e);var a=t.prototype;return a.update=function(e){this.node.scale.y<1&&this.state==E.OTHER&&this.showEmo(),1==this.node.scale.y&&this.hideEmo()},a.onLoad=function(){l(this.mangosteen).by(1,{eulerAngles:new h(0,100,0)}).repeatForever().start()},a.getConfig=function(){var e=x.getSize(t.count),n=x.getDistance(t.count),i=d.randomRange(e.min,e.max),o=d.randomRange(n.min,n.max),r=d.randomRangeInt(0,2),a=x.getPoint(t.count);this.mangosteen.active=a>0;var s=this.node.children[1];return s.active=!0,a<0&&(this.anim=l(this.node).call((function(){return s.active=!0})).to(.2,{scale:new h(i,1.2,i)},{easing:"sineIn"}).to(.3,{scale:new h(i,1,i)},{easing:"sineOut"}).delay(g(.7,1.7)).to(.2,{scale:new h(i,1.2,i)},{easing:"sineIn"}).to(.3,{scale:new h(i,.01,i)},{easing:"sineOut"}).call((function(){return s.active=!1})).delay(g(.7,1.7)).union().repeatForever()),{dir:r,dist:o,size:i}},a.init=function(){this.state=E.INIT,this.changeColor();var e=this.node,n=this.getConfig(),i=(n.dir,n.dist,n.size,this.node.position,m("DecoMgr")),o=i.getComponent(T).getNextPos(t.count);return t.count%5==1&&i.getComponent(T).genDeco(t.count),e.setPosition(o),this.play(1)},a.changeColor=function(){this.mangosteen.active=!1,this.node.setScale(1,1,1),this.node.children[1].active=!0,this.anim=null;var e=d.randomRangeInt(0,this.textures.length);this.curTexturePos=e,this.node.children[0].getComponent(f).material.setProperty("mainTexture",this.textures[e])},a.stop=function(e){var n,i=x.addScore(e?t.count:-1);if((n=this.mangosteen).active&&(n.active=!e),i>0){var o=uiController.getFloatScore();if(o){var r=o.node,a=this.node.position.clone();a.y+=1,o.string="+"+i.toString(),l(a).by(.5,{y:2},{onUpdate:function(e,t){o.color=p(255,255,255,55+200*t);var n=1+1*t;r.setScale(n,n,n);var i=m("/CameraHolder/Main Camera").getComponent(v);r.setPosition(i.convertToUINode(e,r.parent))},easing:"quadOut"}).delay(.2).call((function(){r.active=!1,o.color=p(255,255,255,255)})).start()}}if(this.anim){this.anim.stop();var s=this.node.scale;this.node.setScale(s.x,this.isTransparent?.01:1,s.z),this.node.children[1].active=!this.isTransparent}return t.count++,console.log("step:",t.count),i},a.play=function(e){var t=this,n=this.node;return this.scheduleOnce((function(){t.state=E.OTHER}),.6),this.anim||l(n).set({scale:new h(e,0,e)}).to(.3,{scale:new h(e,1.2,e)},{easing:"sineIn"}).to(.2,{scale:new h(e,1,e)},{easing:"sineOut"})},a.end=function(e,t){var n=this.node;return l(n).to(.3,{scale:new h(e.x,1,e.z)},{easing:"sineOut"}).delay(t?g(1,2):.5)},a.showEmo=function(){this.node.children[0].getComponent(f).material.setProperty("mainTexture",this.emoTextures[this.curTexturePos])},a.hideEmo=function(){this.node.children[0].getComponent(f).material.setProperty("mainTexture",this.textures[this.curTexturePos])},a.hideShadow=function(e){var t=this;this.node.children[1].active=!1,this.scheduleOnce((function(){t.node.children[1].active=!0}),e)},r(t,[{key:"isTransparent",get:function(){return this.node.scale.y<.5}}]),t}(y)).count=0,R=t((O=S).prototype,"textures",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(O.prototype,"emoTextures",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(O.prototype,"mangosteen",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=O))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraController.ts","./GameEvent.ts","./Platform.ts","./User.ts","./AudioController.ts"],(function(t){"use strict";var o,i,n,e,s,a,r,l,h,c,m,f,p,u,d,y,g,v,x,b,P,T,O,C,w,z,I,R;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Vec3,l=t.ParticleSystem,h=t.Prefab,c=t.Node,m=t.SkeletalAnimation,f=t.find,p=t.game,u=t.Game,d=t.instantiate,y=t.tween,g=t.MeshRenderer,v=t.Quat,x=t.randomRangeInt,b=t.math,P=t.Component},function(t){T=t.CameraController},function(t){O=t.gameEvent,C=t.GameEvent},function(t){w=t.Platform},function(t){z=t.user},function(t){I=t.audioController,R=t.SOUND_NAME}],execute:function(){var S,H,D,L,A,F,G,E,k,J,U;s._RF.push({},"c5662BXjChGp6sRVGXOQfNq","PlayerController",void 0);var M=a.ccclass,N=a.property;t("PlayerController",(S=M("PlayerController"),H=N(r),D=N(l),L=N(h),A=N(c),S((E=o((G=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return o=t.call.apply(t,[this].concat(s))||this,n(o,"config",E,e(o)),n(o,"effect",k,e(o)),n(o,"platformPref",J,e(o)),n(o,"platformGrp",U,e(o)),o.boxList=[],o.nextPlatform=null,o.isReadyToPlay=!1,o.camera=null,o.isHolding=!1,o.force=0,o.momoOffset=void 0,o.momo=null,o.animation=null,o.platform=null,o.drop=null,o.EPSILON=.1,o.lastTouch=0,o.onboardJump=0,o.Idles=["Silly Dancing","Excited","Rumba Dancing"],o}i(o,t);var s=o.prototype;return s.onLoad=function(){},s.start=function(){var t=this;this.enabled=!1,this.effect.rateOverTime.constant=0,this.momo=this.node.children[0],this.animation=this.momo.getComponent(m);var o=f("Canvas");o.on(c.EventType.TOUCH_END,this.ontouchend,this),o.on(c.EventType.TOUCH_START,this.ontouchstart,this),this.momoOffset=this.momo.position.clone(),this.momo.position=new r(this.momoOffset.x,50,this.momoOffset.z),this.camera=f("CameraHolder").getComponent(T),p.on(u.EVENT_SHOW,(function(){t.resetHolding()})),O.on(C.OnDead,this.onDead,this)},s.play=function(){var t=this;console.log("PLAY"),this.isReadyToPlay=!1,this.momo.forward=r.FORWARD,this.momo.active=!0,this.node.position=new r(0,1,0),this.nextPlatform=d(this.platformPref),this.nextPlatform.position=new r(0,50,0),this.platformGrp.addChild(this.nextPlatform),this.platform=this.nextPlatform,this.enabled=!0,this.effect.rateOverTime.constant=0,O.emit(C.OnRevive);var o=this.momoOffset;this.momo.position=new r(o.x,6,o.z),this.animation.play("Falling"),y(this.momo).to(2,{position:o},{easing:"sineOut"}).start(),I.playSFX(R.Spawn);var i=y(this).delay(.3).call((function(){if(t.momo.position.y<=4){t.nextPlatform.position=r.ZERO;var o=t.nextPlatform.getComponent(w);o.changeColor(),o.play(1).call(t.init.bind(t)).start(),i.stop()}})).union().repeatForever().start()},s.playDissolve=function(){var t=this,o=this.momo.getComponentInChildren(g).getMaterial(0);return y({value:0}).to(1,{value:1},{easing:"sineOut",onUpdate:function(i,n){n>=1?(t.momo.active=!1,o.setProperty("alphaThreshold",0)):o.setProperty("alphaThreshold",i.value)}})},s.init=function(){this.isReadyToPlay=!0,w.count=1,this.playIdle(),O.emit(C.OnLanding,-1),this.camera.goCenter(this.platform,this.nextPlatform),this.next(!0),this.lastTouch=p.totalTime-2e3,0==this.onboardJump&&O.emit(C.TUTORIAL,-2),console.log("INITTTTTTTTTTT")},s.next=function(t){var o=this;if(!t)return this.force=0,this.isHolding=!1,this.isReadyToPlay=!1,this.animation.pause(),this.boxKickPlayer(),this.scheduleOnce((function(){O.emit(C.OnDead)}),.8),void this.scheduleOnce((function(){o.playDissolve().call(O.emit.bind(O,C.OnLose)).start()}),.3);var i=d(this.platformPref);this.platformGrp.addChild(i),i.getComponent(w).init().start(),this.boxList.push(i),this.nextPlatform=i;var n=this.platform.position.clone();n.y=this.node.position.y,y(this.node).to(.5,{position:n}).start(),this.scheduleOnce((function(){o.playIdle()}),.3);var e=new r(this.node.position);e.y=0,y(this.momo.forward.clone()).to(.5,e.subtract(i.position),{onUpdate:function(t,i){o.momo.forward=t}}).start(),this.camera.goCenter(this.platform,this.nextPlatform)},s.giveup=function(){if(this.isReadyToPlay){var t=this.platform.getComponent(w),o=t.node.scale;t.stop(!1),t.end(o,!1).start(),this.next(!1)}},s.postJump=function(t,o){var i=this,n=this.momo,e=this.momoOffset,s=this.nextPlatform.getComponent(w);this.effect.rateOverTime.constant=0,t&&(t=!s.isTransparent),y(n).to(.1,{position:new r(e.x,t?e.y:-1,e.z)},{easing:"sineIn"}).delay(.5).call(this.next.bind(this,t)).start();var a=s.stop(t);if(t){O.emit(C.OnLanding,this.calculateCombo(),a);var l=this.nextPlatform.scale;y(this.nextPlatform).by(.15,{scale:new r(0,-.15,0)},{easing:"sineIn"}).to(.1,{scale:new r(l.x,1,l.z)},{easing:"sineIn"}).start()}else I.playSFX(R.Dead);if(t&&o){var h=s.node.worldPosition.clone().subtract(n.worldPosition);h.y=0,h.normalize();var c=50*h.dot(n.forward),m=50*n.rotation.y,f=new v;v.fromEuler(f,c,m,0),this.drop=y(n).to(2,{rotation:f,position:new r(e.x,-1,-e.z)}).call((function(){s.stop(!1),s.end(s.node.scale,!1).start(),I.playSFX(R.Dead),i.next(!1)})).start()}},s.check=function(t){var o=this.nextPlatform.position,i=this.nextPlatform.scale.clone().multiplyScalar(.5);return t=t.clone().add(this.node.position),new r(i.x-Math.abs(t.x-o.x),0,i.z-Math.abs(t.z-o.z))},s.ontouchstart=function(t){this.platform!=this.nextPlatform&&this.isReadyToPlay&&(this.isHolding=!0,this.effect.rateOverTime.constant=30,this.animation.crossFade("PreJump",.3),O.emit(C.OnHold),I.playSFX(R.PreJump),O.emit(C.TUTORIAL,100))},s.ontouchend=function(t){this.isHolding&&(this.isHolding=!1,O.emit(C.OnRelease))},s.update=function(t){var o=this,i=this.force,n=this.config,e=this.platform.scale,s=this.momoOffset;if(this.isHolding)i+=t*n.x,i=Math.min(i,1.5),this.platform.setScale(e.x,1/(1+i),e.z),this.momo.setPosition(s.x,s.y+1/(1+i)-1,s.z);else if(i>0){i=Math.max(.25,i);var a=this.checkForOnBoarding(i);if(a.result){i=a.force,I.playSFX(R.Jump);var l=i*n.y,h=this.node.position.clone();h.y=0,h.subtract(this.nextPlatform.position).normalize().multiplyScalar(-l);var c=this.check(h),m=Math.min(c.x,c.z)>-this.EPSILON;Math.min(c.x,c.z);!1;var f=.4+.1*l;this.drop&&this.drop.stop(),this.animation.crossFade("Jump",.3),y(this.animation).delay(f).call(this.animation.play.bind(this.animation,"Landing")).start(),y(this.node).by(f,{position:h}).call(this.postJump.bind(this,m,false)).start(),y(this.momo).to(.5*f,{position:new r(s.x,i*n.z,s.z)},{easing:"sineOut"}).to(.5*f,{position:new r(s.x,-.23,s.z)},{easing:"sineIn"}).start(),this.platform.getComponent(w).end(e,m).start(),this.platform=this.nextPlatform}else this.resetHolding(e,s,!0);i=0}if(this.force=i,this.isHolding){if(0==this.lastTouch){var u=this.node.position.clone();u.y=0,y(this.momo.forward.clone()).to(.5,u.subtract(this.nextPlatform.position),{onUpdate:function(t,i){o.momo.forward=t}}).start()}this.lastTouch=p.totalTime}else if(this.lastTouch>0&&p.totalTime-this.lastTouch>3e3){this.lastTouch=0;var d=this.node.position.clone();d.subtract(this.camera.node.children[0].position),d.y=0,d.normalize(),y(this.momo.forward.clone()).to(.5,d,{onUpdate:function(t,i){o.momo.forward=t}}).start()}},s.calculateCombo=function(){var t=this.node.position.clone().subtract(this.platform.position);t.y=0;var o=t.length(),i=this.platform.scale.x/2/10;return o<3*i?0:o<6.5*i?1:2},s.checkForOnBoarding=function(t){var o=t;if(z.isOnboarding&&this.onboardJump<3){var i=this.timeToCenter()*this.config.x,n=i,e=(n-=.23)+.46;return t>=n&&t<=e?(this.onboardJump++,O.emit(C.TUTORIAL,this.onboardJump),3==this.onboardJump&&z.submitOnboarding(),{result:!0,force:i+.5*(t-i)}):(O.emit(C.TUTORIAL,t>e?-1:0),{result:!1,force:o})}return{result:!0,force:o}},s.timeToCenter=function(){return(new r(this.node.position).subtract(this.nextPlatform.position).length()-.2)/this.config.y},s.resetHolding=function(t,o,i){var n;(void 0===t&&(t=null),void 0===o&&(o=null),void 0===i&&(i=!1),this.isHolding||i)&&(t||(t=this.platform.scale),o||(o=this.momoOffset),this.isHolding=!1,this.effect.rateOverTime.constant=0,this.force=0,this.playIdle(),this.platform.setScale(t.x,1,t.z),null==(n=this.momo)||n.setPosition(o.x,o.y,o.z),O.emit(C.OnRelease))},s.playIdle=function(){this.animation.crossFade(this.Idles[x(0,this.Idles.length)],.5)},s.onDead=function(){this.platformGrp.removeAllChildren(),this.platformGrp.destroyAllChildren()},s.boxKickPlayer=function(){0==b.randomRangeInt(0,2)?this.boxKick1():this.boxKick3()},s.boxKick1=function(){var t=this.platformGrp.children[w.count-1];t.getComponent(w).hideShadow(.5);var o=this.node.position.clone();o.y=t.position.y;var i=o.clone();i.y+=2,y(t).to(.2,{position:i}).delay(.1).to(.03,{position:new r(i.x,i.y+.2,i.z)}).to(.04,{position:new r(i.x,i.y-.2,i.z)}).to(.03,{position:i}).to(.1,{position:o}).start()},s.boxKick2=function(){var t=this.node.position.clone();t.y=this.platformGrp.children[w.count-1].position.y,y(this.platformGrp.children[w.count-1]).to(.1,{position:t},{easing:"circOut"}).start()},s.boxKick3=function(){var t=this.node.position.clone(),o=this.platformGrp.children[w.count-1];o.getComponent(w).hideShadow(.3),t.y=o.position.y;var i=this.node.eulerAngles;y(o).to(.1,{position:t},{easing:"expoIn"}).to(.2,{eulerAngles:new r(i.x,i.y+360,i.z)},{easing:"bounceOut"}).union().start()},o}(P)).prototype,"config",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),k=o(G.prototype,"effect",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=o(G.prototype,"platformPref",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(G.prototype,"platformGrp",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=G))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioController.ts","./User.ts"],(function(e){"use strict";var t,i,n,r,o,a,c,u,s,l,p,h,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,s=e.Label,l=e.Sprite,p=e.Node,h=e.Component},function(e){m=e.audioController},function(e){g=e.user}],execute:function(){var b,f,d,v,y,S,G,w,T,E,I,R,L,P,x,z,k,N,C,_,B,O,M;e("PopupType",void 0),c._RF.push({},"5b6adTciJlBt7LYQtEg8Gyd","Popup",void 0);var U,F=u.ccclass,X=u.property;!function(e){e[e.NONE=0]="NONE",e[e.SETTING=1]="SETTING",e[e.RESULT=2]="RESULT",e[e.EXIT=3]="EXIT",e[e.ERROR=4]="ERROR"}(U||(U=e("PopupType",{})));e("Popup",(b=F("Popup"),f=X(s),d=X(s),v=X(l),y=X(p),S=X(p),G=X(p),w=X(p),T=X(p),E=X(s),I=X(s),b((P=t((L=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"titlePopup",P,r(t)),n(t,"descriptionPopup",x,r(t)),n(t,"banner",z,r(t)),n(t,"ticketBanner",k,r(t)),n(t,"settingGrp",N,r(t)),n(t,"resultGrp",C,r(t)),n(t,"exitGrp",_,r(t)),n(t,"errorGrp",B,r(t)),n(t,"highSocreLabel",O,r(t)),n(t,"scoreLabel",M,r(t)),t.bannerImages=[],t.cacheBannerId=0,t.bannerMap=[0,1,2,3,4],t.sound=!0,t.music=!0,t}i(t,e);var c=t.prototype;return c.onLoad=function(){var e=o(a().mark((function e(){var t,i,n,r,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["https://img.mservice.com.vn/app/img/Gamification/lacxi2023/mission/MoMoStand.png","https://img.mservice.com.vn/app/img/minigames/lacxi2023/popups/banner_surrender.webp","https://img.mservice.com.vn/app/img/minigames/lacxi2023/popups/banner_not_enough_coin.webp","https://img.mservice.com.vn/app/img/minigames/lacxi2023/popups/ticket_banner.png"],i=0,this.bannerImages.length=t.length,n=0,r=t;case 4:if(!(n<r.length)){e.next=13;break}return o=r[n],e.next=8,g.getRemoteSprite(o);case 8:c=e.sent,this.bannerImages[i++]=c;case 10:n++,e.next=4;break;case 13:this.cacheBannerId>0&&(this.banner.spriteFrame=this.bannerImages[this.cacheBannerId-1]);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.show=function(e,t){if(void 0===t&&(t=null),e!=U.NONE){if(this.node.active=!0,this.titlePopup.string=t.title,this.settingGrp.active=e==U.SETTING,this.resultGrp.active=e==U.RESULT,this.exitGrp.active=e==U.EXIT,this.errorGrp.active=e==U.ERROR,e==U.RESULT){var i=parseInt(localStorage.getItem("jumpHigh")||"0");this.highSocreLabel.string=i.toString(),this.scoreLabel.string=t.score,t.score>i&&localStorage.setItem("jumpHigh",t.score.toString())}}else this.node.active=!1},c.onSwitchSoundClick=function(e){var t=e.target;this.sound=!this.sound,t.children[0].active=this.sound,t.children[1].active=!this.sound,m.setSFXVolume(this.sound?1:0)},c.onSwitchMusicClick=function(e){var t=e.target;this.music=!this.music,t.children[0].active=this.music,t.children[1].active=!this.music,m.setVolume(this.music?1:0)},c.onClosePopupClick=function(){this.node.active=!1},c.onCloseGame=function(){uiController.back()},t}(h)).prototype,"titlePopup",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(L.prototype,"descriptionPopup",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"banner",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"ticketBanner",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"settingGrp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"resultGrp",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"exitGrp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"errorGrp",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"highSocreLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"scoreLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));c._RF.pop()}}}));

System.register("chunks:///_virtual/Tracking.ts",["cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.cclegacy,e=t.log}],execute:function(){i._RF.push({},"872eefgM/1NhJcVua+3kP/t","Tracking",void 0);var a=function(){function t(t){this.params=void 0,this.params=t}return t.prototype.track=function(t){void 0===t&&(t=null),t&&Object.assign(this.params,t),e(this.params),window.MaxApi&&window.MaxApi.trackEvent("campaign_lacxi2023",this.params)},t}();t("default",{Use_coin_toplay:new a({stage:"Use_coin_toplay"}),Use_ticket_toplay:new a({stage:"Use_ticket_toplay"}),click_newgame_scr_result_game:new a({action:"click_newgame_scr_result_game"}),pu_result_momojump:new a({stage:"pu_result_momojump",minigame:"momojump"}),click_quit_scr_minigame:new a({action:"click_quit_scr_minigame"}),pu_quit_game:new a({stage:"pu_quit_game",minigame:"momojump"}),click_quit_pu_quit_game:new a({action:"click_quit_pu_quit_game"})});i._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DecoMgr.ts","./AnimController.ts","./ApiMock.ts","./AudioController.ts","./GameEvent.ts","./MaxApiUtils.ts","./PlayerController.ts","./Popup.ts","./Tracking.ts","./User.ts"],(function(t){"use strict";var e,n,i,r,o,a,c,s,u,l,h,p,f,g,b,m,v,y,d,C,k,S,w,P,T,x,O,_,B,I,E,F,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose,a=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,l=t.Node,h=t.Label,p=t.Camera,f=t.Button,g=t.Sprite,b=t.UIOpacity,m=t.tween,v=t.find,y=t.color,d=t.log,C=t.Component},function(t){k=t.DecoMgr},function(t){S=t.default},function(t){w=t.localization},function(t){P=t.audioController,T=t.SOUND_NAME},function(t){x=t.gameEvent,O=t.GameEvent},function(t){_=t.maxApiUtils},function(t){B=t.PlayerController},function(t){I=t.PopupType,E=t.Popup},function(t){F=t.default},function(t){N=t.user}],execute:function(){var z,L,U,X,M,R,q,D,A,G,H,j,V,K,W,Y,J,Q,Z,$,tt,et,nt,it,rt,ot,at,ct,st,ut,lt,ht,pt;s._RF.push({},"f76cfCfWGNMVYIhH5q4T4aX","UIController",void 0);var ft=u.ccclass,gt=u.property;t("UIController",(z=ft("UIController"),L=gt(l),U=gt(l),X=gt(l),M=gt(l),R=gt(h),q=gt(h),D=gt(h),A=gt(h),G=gt(h),H=gt(l),j=gt(h),V=gt(p),K=gt(f),W=gt(f),Y=gt(f),z((Z=e((Q=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"actionPhase",Z,r(e)),i(e,"resultScreen",$,r(e)),i(e,"popup",tt,r(e)),i(e,"tutorial",et,r(e)),i(e,"header",nt,r(e)),i(e,"footer",it,r(e)),i(e,"scoreText",rt,r(e)),i(e,"highScoreText",ot,r(e)),i(e,"comboText",at,r(e)),i(e,"combo",ct,r(e)),i(e,"floatScores",st,r(e)),i(e,"gameCamera",ut,r(e)),i(e,"backBtn",lt,r(e)),i(e,"settingBtn",ht,r(e)),i(e,"exitBtn",pt,r(e)),e.score=0,e.perfectCount=0,e}n(e,t);var s=e.prototype;return s.start=function(){var t=a(c().mark((function t(){var e,n,i,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(window.uiController=this,S.init(),P.init(),P.setVolume(1),P.setSFXVolume(1),window.addEventListener("message",this.onBackDevicePress.bind(this)),this.show(null),this.showPopup(I.NONE,null),P.playMusic(T.BackgroundMusic),e=o(this.floatScores);!(n=e()).done;)n.value.node.active=!1;for(i=o(this.combo);!(r=i()).done;)r.value.active=!1;return t.next=13,N.init();case 13:if(!(a=t.sent)){t.next=18;break}return this.show(null),this.showPopup(I.ERROR,a),t.abrupt("return",a);case 18:return t.next=20,this.play();case 20:x.on(O.OnLanding,this.onLanding,this),x.on(O.OnLose,this.gameOver,this),x.on(O.TUTORIAL,this.onTutorial,this),this.backBtn.node.on("click",this.backClick,this),this.settingBtn.node.on("click",this.onSettingClick,this),this.exitBtn.node.on("click",this.backClick,this);case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onBackDevicePress=function(t){t&&"onBackPress"==t.data&&this.backClick()},s.onSoundClick=function(t){t.target.getComponent(g).spriteFrame},s.onSettingClick=function(){console.log("ON SETTING CLICK"),this.showPopup(I.SETTING,w.SETTING_POPUP)},s.onTutorial=function(t){var e=this.header.node.parent;switch(t){case-2:this.tutorial.active=!0,e.active=!1;break;case-1:e.active=!0,this.header.string="Lực nhảy quá mạnh",this.footer.string="Chạm và thả tay nhanh hơn để nhảy gần hơn.";break;case 0:e.active=!0,this.header.string="Lực nhảy quá nhẹ",this.footer.string="Chạm và giữ tay trên màn hình lâu hơn để lấy đà nhảy xa hơn. Thả ra để nhảy.";break;case 1:e.active=!0,this.header.string="Giậm nhảy thành công",this.footer.string="Nhảy càng hay, nhận càng nhiều Măng Cụt";break;case 2:e.active=!0,this.header.string="Cú nhảy Tuyệt Vời",this.footer.string="Tiếp tục phát huy nhé!";break;case 3:e.active=!0,this.header.string="Bạn thật xuất sắc",this.footer.string="Tiếp tục nhảy bật nhận quà nhé.";break;default:this.tutorial.active=!1,e.active=!1}},s.show=function(t){var e=this;t==this.actionPhase&&(this.actionPhase.active=!0,this.actionPhase.getComponent(b).opacity<50&&(this.actionPhase.getComponent(b).opacity=0,m({value:0}).to(1,{value:255},{onUpdate:function(t,n){e.actionPhase.getComponent(b).opacity=t.value}}).start()))},s.showPopup=function(t,e){this.popup.active=t!=I.NONE,this.tutorial.active=!1,this.header.node.parent.active=!1,t!=I.NONE&&(S.panelOn(this.popup),t==I.EXIT&&F.pu_quit_game.track(),this.popup.getComponent(E).show(t,e))},s.onLanding=function(t,e){if(t<0)this.score=0,P.playSFX(T.Landing),this.show(this.actionPhase);else{e>0&&(this.score+=e,this.scheduleOnce((function(){return P.playSFX(T.Collect_Item)}),.1)),0==t?(this.perfectCount++,this.comboText.string="x"+this.perfectCount,this.comboText.enabled=this.perfectCount>1,P.playSFX(T["Perfect"+Math.min(this.perfectCount,5)])):(P.playSFX(T.Landing),this.perfectCount=0),this.combo[0].active=0==t,this.combo[1].active=1==t,this.combo[2].active=2==t,this.addScoreForCombo(t);for(var n,i=o(this.combo);!(n=i()).done;){var r=n.value;r.active&&S.combo(r)}}this.scoreText.string=this.score.toString()},s.addScoreForCombo=function(t){var e=0;if(0==t?e+=20:1==t&&(e+=10),!(e<=0)){this.score+=e;var n=this.getFloatScore();if(n){var i=n.node,r=v("/DecoMgr").getComponent(k).getCurPos();r.y+=1,r.x+=1,n.string="+"+e.toString(),m(r).by(.5,{y:2},{onUpdate:function(t,e){n.color=y(114,255,255,55+200*e);var r=1+1*e;i.setScale(r,r,r);var o=v("/CameraHolder/Main Camera").getComponent(p);i.setPosition(o.convertToUINode(t,i.parent))},easing:"quadOut"}).delay(.2).call((function(){i.active=!1,n.color=y(255,255,255,255)})).start()}}},s.getFloatScore=function(){for(var t,e=o(this.floatScores);!(t=e()).done;){var n=t.value,i=n.node;if(!i.active)return i.active=!0,n}},s.play=function(){var t=a(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.start();case 2:if(!(e=t.sent)){t.next=7;break}return this.show(null),this.showPopup((e.response_info,I.ERROR),e),t.abrupt("return",e);case 7:v("player").getComponent(B).play(),this.highScoreText.string=localStorage.getItem("jumpHigh")||"0";case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.replay=function(){var t=a(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.target.getComponent(f)).interactable=!1,P.playSFX(T.ButtonConfirmClick),t.next=5,this.play();case 5:t.sent||(this.resultScreen.active&&S.panelOff(this.resultScreen),this.popup.active&&S.panelOff(this.popup)),this.scheduleOnce((function(){n.interactable=!0}),1),this.highScoreText.string=localStorage.getItem("jumpHigh")||"0";case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.gameOver=function(){var t=a(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=w.RESULT).score=this.score,this.showPopup(I.RESULT,e),S.panelOn(this.resultScreen),F.pu_result_momojump.track({coin:this.score}),P.playSFX(T.Defeat),this.scheduleOnce((function(){return P.playSFX(T.Oh_No)}),1),t.next=9,N.getProfile();case 9:if(t.sent){t.next=12;break}return t.abrupt("return");case 12:S.updatePrice();case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.resume=function(){P.playSFX(T.ButtonConfirmClick),S.panelOff(this.popup)},s.backClick=function(){this.resultScreen.active?this.back():(this.showPopup(I.EXIT,w.EXIT_POPUP),F.click_quit_scr_minigame.track()),P.playSFX(T.ButtonCancelClick)},s.giveup=function(t){var e=this,n=t.target.getComponent(f);n.interactable=!1,F.click_quit_pu_quit_game.track(),v("player").getComponent(B).giveup(),P.playSFX(T.ButtonCancelClick),this.scheduleOnce((function(){e.showPopup(I.NONE,null),n.interactable=!0}),1)},s.back=function(){_.request("dismiss")},s.toggleSound=function(t){d("Sound",t.isChecked)},e}(C)).prototype,"actionPhase",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Q.prototype,"resultScreen",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Q.prototype,"popup",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Q.prototype,"tutorial",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Q.prototype,"header",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Q.prototype,"footer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Q.prototype,"scoreText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Q.prototype,"highScoreText",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Q.prototype,"comboText",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(Q.prototype,"combo",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),st=e(Q.prototype,"floatScores",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ut=e(Q.prototype,"gameCamera",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Q.prototype,"backBtn",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(Q.prototype,"settingBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(Q.prototype,"exitBtn",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Q))||J));s._RF.pop()}}}));

System.register("chunks:///_virtual/User.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ApiMock.ts","./MaxApiUtils.ts"],(function(e){"use strict";var t,n,r,i,s,o,u,a,c,f,p,m;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,r=e.regeneratorRuntime,i=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,o=e.log,u=e.assetManager,a=e.Texture2D,c=e.SpriteFrame},function(e){f=e.apiMock,p=e.localization},function(e){m=e.maxApiUtils}],execute:function(){s._RF.push({},"ba756qanfVAqqpgA+pTlSgM","User",void 0);var g=function(){function e(){this.dev_token="0386675122",this.HOST="https://m.dev.mservice.io/",this.GAMECONFIG="catzilla-momojump-config/v1/get_config",this.GAME_PROFILE="catzilla-stadium/v1/profile-game?gameId=momojump&modeId=single",this.SUBMITSCORE="catzilla-momojump-score/v1/submit",this.STARTGAME="catzilla-momojump-gamelogic/v1/start",this.ONBOARDINGSTATUS="catzilla-momojump-gamelogic/v1/onboarding/status",this.ONBOARDINGSUBMIT="catzilla-momojump-gamelogic/v1/onboarding/submit?gameId={0}"}var i=e.prototype;return i.format=function(e,t){return e.replace(/{(\d+)}/g,(function(e,n){return encodeURIComponent(t[n])||e}))},i.get=function(e,t){return t&&(e=this.format(e,t)),this.request(e,"GET")},i.post=function(e,t){return o("POST:",e),this.request(e,"POST",t)},i.browserRequest=function(e,t,n){var r=this;return new Promise((function(i,s){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status){var e=JSON.parse(o.response);i(e)}else i(null)},o.open(t,r.HOST+e),o.setRequestHeader("Authorization","Bearer "+r.token),o.setRequestHeader("Content-Type","application/json"),o.timeout=5e3,o.send(n?JSON.stringify(n):null)}))},i.request=function(){var e=n(r().mark((function e(t,n,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.isBrowser){e.next=6;break}return e.next=3,this.browserRequest(t,n,i);case 3:e.t0=e.sent,e.next=16;break;case 6:if("GET"!=n){e.next=12;break}return e.next=9,m.getCloudMessage(t);case 9:e.t1=e.sent,e.next=15;break;case 12:return e.next=14,m.sendCloudMessage(t,i);case 14:e.t1=e.sent;case 15:e.t0=e.t1;case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),i.requestHeader=function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("HEAD",e,!0),r.onload=function(){var e=r.getResponseHeader("Content-Type");t(e)},r.onerror=function(e){t("image/png")},r.timeout=3e3,r.send()}))},i.getRemoteTexture=function(e){return 0==e.length?null:new Promise((function(t,n){u.loadRemote(e,(function(e,n){if(e)t(null);else{var r=new a;r.image=n,t(r)}}))}))},i.getRemoteSprite=function(){var e=n(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getRemoteTexture(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return(i=new c).texture=n,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t(e,[{key:"token",get:function(){return d.token||this.dev_token}},{key:"userId",get:function(){return d.userId||this.dev_token}}]),e}(),h=function(){function e(){this.token=null,this.userId=null,this.gameConfig=null,this.scoreConfig=null,this.profile=null,this.getRemoteSprite=l.getRemoteSprite,this.getRemoteTexture=l.getRemoteTexture,this.scoreSubmition={gameId:"",agentId:"",order:"",scores:[{value:0,hasGift:!0,timestamp:0}],eventTime:0,isEnd:!1},this.isOnboarding=!1,this.scoreSubmition.scores.pop()}var t=e.prototype;return t.init=function(){var e=n(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=f.GAME_CONFIG)&&0==t.response_info.error_code){e.next=3;break}return e.abrupt("return",p.DEFAULT_ERROR);case 3:return this.gameConfig=t.item,e.next=6,this.checkOnboarding();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getSize=function(e){if(this.gameConfig){var t=this.gameConfig.size,n=t.find((function(t){return+t.step>=e}));return n||(n=t[t.length-1]),n}return{step:e,min:1,max:1}},t.getDistance=function(e){if(this.gameConfig){var t=this.gameConfig.distances,n=t.find((function(t){return+t.step>=e}));return n||(n=t[t.length-1]),n}return{step:e,min:2.9,max:3.9}},t.getPoint=function(e){return this.scoreConfig&&this.scoreConfig[e]||0},t.getProfile=function(){var e=n(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.GAME_PROFILE){e.next=3;break}return e.abrupt("return",null);case 3:return this.profile=t.result,e.abrupt("return",this.profile);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.start=function(){var e=n(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.START_GAME,o(t),t){e.next=4;break}return e.abrupt("return",p.DEFAULT_ERROR);case 4:if(0==t.response_info.error_code){e.next=6;break}return e.abrupt("return",t);case 6:this.scoreConfig=t.item.bonus,this.scoreSubmition.gameId=t.item.gameId,this.scoreSubmition.isEnd=!1,this.scoreSubmition.scores=[];case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.checkOnboarding=function(){var e=n(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get(l.ONBOARDINGSTATUS);case 2:t=e.sent,this.isOnboarding=t&&!t.items.isOnboarding;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.submitOnboarding=function(){var e=n(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isOnboarding=!1,t=l.format(l.ONBOARDINGSUBMIT,[this.scoreSubmition.gameId]),e.next=4,l.post(t);case 4:n=e.sent,o(n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.addScore=function(e){var t=0;if(e<0)this.scoreSubmition.isEnd=!0;else{if(t=this.getPoint(e),!((t+=10)>0))return t;var n=Date.now(),r=this.scoreSubmition.scores;if(r.push({value:t,hasGift:!0,timestamp:n}),r.length<2||n-r[r.length-2].timestamp<5e3)return t}return this.postScore(),t},t.postScore=function(){var e=n(r().mark((function e(){var t,n,s,u,a,c,f,p,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((t=this.scoreSubmition).eventTime=Date.now(),n=0,s=i(t.scores);!(u=s()).done;)a=u.value,n+=a.value;return c=window.getLetterAndDigitFromHash(t.gameId+"#"+n),f=c.letters,p=c.digits,t.agentId=f.substring(0,3),t.order=p.substring(0,6),e.next=9,l.post(l.SUBMITSCORE,this.scoreSubmition);case 9:m=e.sent,o(m);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),l=e("api",new g),d=e("user",new h);s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});